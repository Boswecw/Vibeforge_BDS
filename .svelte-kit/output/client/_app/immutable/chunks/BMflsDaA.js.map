{"version":3,"file":"BMflsDaA.js","sources":["../../../../../../src/lib/components/charts/LineChart.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport {\n\t\tChart,\n\t\tLineController,\n\t\tLineElement,\n\t\tPointElement,\n\t\tLinearScale,\n\t\tCategoryScale,\n\t\tTitle,\n\t\tTooltip,\n\t\tLegend,\n\t\tFiller\n\t} from 'chart.js';\n\n\t// Register Chart.js components\n\tChart.register(\n\t\tLineController,\n\t\tLineElement,\n\t\tPointElement,\n\t\tLinearScale,\n\t\tCategoryScale,\n\t\tTitle,\n\t\tTooltip,\n\t\tLegend,\n\t\tFiller\n\t);\n\n\tinterface Props {\n\t\tlabels: string[];\n\t\tdatasets: {\n\t\t\tlabel: string;\n\t\t\tdata: number[];\n\t\t\tborderColor?: string;\n\t\t\tbackgroundColor?: string;\n\t\t\tfill?: boolean;\n\t\t\ttension?: number;\n\t\t}[];\n\t\ttitle?: string;\n\t\theight?: number;\n\t}\n\n\tlet { labels, datasets, title, height = 300 }: Props = $props();\n\n\tlet canvasRef: HTMLCanvasElement;\n\tlet chart: Chart | null = $state(null);\n\n\tonMount(() => {\n\t\tif (canvasRef) {\n\t\t\tconst ctx = canvasRef.getContext('2d');\n\t\t\tif (ctx) {\n\t\t\t\tchart = new Chart(ctx, {\n\t\t\t\t\ttype: 'line',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlabels,\n\t\t\t\t\t\tdatasets: datasets.map((ds) => ({\n\t\t\t\t\t\t\t...ds,\n\t\t\t\t\t\t\ttension: ds.tension ?? 0.4,\n\t\t\t\t\t\t\tfill: ds.fill ?? false,\n\t\t\t\t\t\t\tborderColor: ds.borderColor ?? 'rgb(197, 167, 123)', // BDS brass\n\t\t\t\t\t\t\tbackgroundColor: ds.backgroundColor ?? 'rgba(197, 167, 123, 0.1)'\n\t\t\t\t\t\t}))\n\t\t\t\t\t},\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\tplugins: {\n\t\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t\t\tcolor: 'rgb(225, 219, 210)', // BDS text\n\t\t\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\t\t\tfamily: \"'Geist', sans-serif\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\tdisplay: !!title,\n\t\t\t\t\t\t\t\ttext: title,\n\t\t\t\t\t\t\t\tcolor: 'rgb(225, 219, 210)',\n\t\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\t\tfamily: \"'Geist', sans-serif\",\n\t\t\t\t\t\t\t\t\tsize: 16\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(30, 28, 26, 0.95)',\n\t\t\t\t\t\t\t\ttitleColor: 'rgb(225, 219, 210)',\n\t\t\t\t\t\t\t\tbodyColor: 'rgb(225, 219, 210)',\n\t\t\t\t\t\t\t\tborderColor: 'rgb(197, 167, 123)',\n\t\t\t\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\t\t\t\tpadding: 12,\n\t\t\t\t\t\t\t\tdisplayColors: true,\n\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\tlabel: function (context) {\n\t\t\t\t\t\t\t\t\t\tlet label = context.dataset.label || '';\n\t\t\t\t\t\t\t\t\t\tif (label) {\n\t\t\t\t\t\t\t\t\t\t\tlabel += ': ';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (context.parsed.y !== null) {\n\t\t\t\t\t\t\t\t\t\t\t// Format based on dataset label\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tlabel.toLowerCase().includes('cost') ||\n\t\t\t\t\t\t\t\t\t\t\t\tlabel.toLowerCase().includes('$')\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tlabel += '$' + context.parsed.y.toFixed(4);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tlabel += context.parsed.y.toLocaleString();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn label;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\tx: {\n\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\tcolor: 'rgba(197, 167, 123, 0.1)'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\tcolor: 'rgb(154, 147, 140)',\n\t\t\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\t\t\tfamily: \"'Geist Mono', monospace\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ty: {\n\t\t\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\t\t\tcolor: 'rgba(197, 167, 123, 0.1)'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\tcolor: 'rgb(154, 147, 140)',\n\t\t\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\t\t\tfamily: \"'Geist Mono', monospace\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbeginAtZero: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// Update chart when data changes\n\t$effect(() => {\n\t\tif (chart) {\n\t\t\tchart.data.labels = labels;\n\t\t\tchart.data.datasets = datasets.map((ds) => ({\n\t\t\t\t...ds,\n\t\t\t\ttension: ds.tension ?? 0.4,\n\t\t\t\tfill: ds.fill ?? false,\n\t\t\t\tborderColor: ds.borderColor ?? 'rgb(197, 167, 123)',\n\t\t\t\tbackgroundColor: ds.backgroundColor ?? 'rgba(197, 167, 123, 0.1)'\n\t\t\t}));\n\t\t\tchart.update();\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (chart) {\n\t\t\tchart.destroy();\n\t\t}\n\t});\n</script>\n\n<div class=\"chart-container\" style=\"height: {height}px;\">\n\t<canvas bind:this={canvasRef}></canvas>\n</div>\n\n<style>\n\t.chart-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t}\n</style>\n"],"names":["Chart","register","LineController","LineElement","PointElement","LinearScale","CategoryScale","Title","Tooltip","Legend","Filler","canvasRef","height","chart","$.state","onMount","ctx","getContext","type","data","labels","$$props","datasets","map","ds","tension","fill","borderColor","backgroundColor","options","responsive","maintainAspectRatio","plugins","legend","display","position","color","font","family","title","text","size","tooltip","titleColor","bodyColor","borderWidth","padding","displayColors","callbacks","label","context","dataset","parsed","y","toLowerCase","includes","toFixed","toLocaleString","scales","x","grid","ticks","beginAtZero","$.user_effect","$.get","update","onDestroy","destroy","div","root","canvas","$$value","$.template_effect","$.set_style"],"mappings":"mVAgBCA,EAAMC,SACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAiB8B,IAE3BC,EAF2BC,iBAAS,KAGpCC,EAAsBC,EAAO,MAEjCC,EAAO,KACF,GAAAJ,EAAW,CACR,MAAAK,EAAML,EAAUM,WAAW,MAC7BD,KACHH,EAAY,IAAAb,EAAMgB,EAAG,CACpBE,KAAM,OACNC,KAAI,CACHC,OAAMC,EAAAD,OACNE,SAAQD,EAAAC,SAAWC,IAAKC,IAAA,IACpBA,EACHC,QAASD,EAAGC,SAAW,GACvBC,KAAMF,EAAGE,OAAQ,EACjBC,YAAaH,EAAGG,aAAe,qBAC/BC,gBAAiBJ,EAAGI,iBAAmB,+BAGzCC,QAAO,CACNC,YAAY,EACZC,qBAAqB,EACrBC,QAAO,CACNC,OAAM,CACLC,SAAS,EACTC,SAAU,MACVf,OAAM,CACLgB,MAAO,qBACPC,KAAI,CACHC,OAAQ,yBAIXC,MAAK,CACJL,UAAOb,EAAAkB,MACPC,KAAInB,EAAAkB,MACJH,MAAO,qBACPC,MACCC,OAAQ,sBACRG,KAAM,KAGRC,QAAO,CACNd,gBAAiB,yBACjBe,WAAY,qBACZC,UAAW,qBACXjB,YAAa,qBACbkB,YAAa,EACbC,QAAS,GACTC,eAAe,EACfC,UAAS,CACR,KAAAC,CAAiBC,GACZ,IAAAD,EAAQC,EAAQC,QAAQF,OAAS,UACjCA,IACHA,GAAS,MAEe,OAArBC,EAAQE,OAAOC,IAGjBJ,EAAMK,cAAcC,SAAS,SAC7BN,EAAMK,cAAcC,SAAS,KAE7BN,GAAS,IAAMC,EAAQE,OAAOC,EAAEG,QAAQ,GAExCP,GAASC,EAAQE,OAAOC,EAAEI,kBAGrBR,CACR,KAIHS,OAAM,CACLC,EAAC,CACAC,KAAI,CACHxB,MAAO,4BAERyB,MAAK,CACJzB,MAAO,qBACPC,KAAI,CACHC,OAAQ,6BAIXe,EAAC,CACAO,KAAI,CACHxB,MAAO,4BAERyB,MAAK,CACJzB,MAAO,qBACPC,KAAI,CACHC,OAAQ,4BAGVwB,aAAa,UAMnB,IAIDC,EAAO,KACFC,EAAAnD,OACHA,GAAMM,KAAKC,OAAMC,EAAAD,OACjB4C,EAAAnD,GAAMM,KAAKG,SAAQD,EAAAC,SAAYC,IAAKC,IAAA,IAChCA,EACHC,QAASD,EAAGC,SAAW,GACvBC,KAAMF,EAAGE,OAAQ,EACjBC,YAAaH,EAAGG,aAAe,qBAC/BC,gBAAiBJ,EAAGI,iBAAmB,8BAExCoC,EAAAnD,GAAMoD,YAIRC,EAAS,KACJF,EAAAnD,IACHmD,EAAAnD,GAAMsD,gBAKRC,EAAGC,IACFC,IADDF,KACCE,EAAMC,GAAY5D,EAAS4D,EAAA,IAAT5D,KADnByD,GAAAI,EAAA,IAAAC,EAAAL,aAA4CxD,KAAM,cAAlDwD,MAFD"}