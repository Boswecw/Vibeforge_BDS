{"version":3,"file":"DGcbRJNF.js","sources":["../../../../../../src/lib/components/VirtualList.svelte"],"sourcesContent":["<script lang=\"ts\" generics=\"T\">\n\timport { onMount, tick } from 'svelte';\n\timport type { Snippet } from 'svelte';\n\n\t/**\n\t * Virtual List Component\n\t * Renders only visible items + buffer for optimal performance\n\t *\n\t * Usage:\n\t * <VirtualList items={data} itemHeight={100}>\n\t *   {#snippet children({ item, index })}\n\t *     <YourComponent data={item} />\n\t *   {/snippet}\n\t * </VirtualList>\n\t */\n\n\tinterface Props {\n\t\titems: T[];\n\t\titemHeight: number; // Fixed height per item (px)\n\t\tbuffer?: number; // Number of items to render above/below viewport (default 5)\n\t\theight?: string; // Container height (default '600px')\n\t\tgap?: number; // Gap between items (px, default 0)\n\t\tchildren: Snippet<[{ item: T; index: number }]>; // Snippet for rendering items\n\t}\n\n\tlet {\n\t\titems = [],\n\t\titemHeight = 100,\n\t\tbuffer = 5,\n\t\theight = '600px',\n\t\tgap = 0,\n\t\tchildren\n\t}: Props = $props();\n\n\t// State\n\tlet containerRef: HTMLDivElement;\n\tlet scrollTop = $state(0);\n\tlet containerHeight = $state(600);\n\n\t// Derived values\n\tlet totalHeight = $derived(items.length * (itemHeight + gap));\n\tlet visibleCount = $derived(Math.ceil(containerHeight / (itemHeight + gap)));\n\tlet startIndex = $derived(Math.max(0, Math.floor(scrollTop / (itemHeight + gap)) - buffer));\n\tlet endIndex = $derived(Math.min(items.length, startIndex + visibleCount + buffer * 2));\n\tlet visibleItems = $derived(items.slice(startIndex, endIndex));\n\tlet offsetY = $derived(startIndex * (itemHeight + gap));\n\n\t// Handle scroll\n\tfunction handleScroll(event: Event) {\n\t\tconst target = event.target as HTMLDivElement;\n\t\tscrollTop = target.scrollTop;\n\t}\n\n\t// Measure container height\n\tonMount(() => {\n\t\tif (containerRef) {\n\t\t\tconst rect = containerRef.getBoundingClientRect();\n\t\t\tcontainerHeight = rect.height;\n\n\t\t\t// Update on window resize\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\t\tfor (const entry of entries) {\n\t\t\t\t\tcontainerHeight = entry.contentRect.height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tresizeObserver.observe(containerRef);\n\n\t\t\treturn () => {\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t};\n\t\t}\n\t});\n</script>\n\n<div\n\tbind:this={containerRef}\n\tclass=\"virtual-list-container\"\n\tstyle=\"height: {height}; overflow-y: auto;\"\n\tonscroll={handleScroll}\n>\n\t<div class=\"virtual-list-spacer\" style=\"height: {totalHeight}px;\">\n\t\t<div class=\"virtual-list-content\" style=\"transform: translateY({offsetY}px);\">\n\t\t\t{#each visibleItems as item, index (startIndex + index)}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"virtual-list-item\"\n\t\t\t\t\tstyle=\"height: {itemHeight}px; margin-bottom: {gap}px;\"\n\t\t\t\t\tdata-index={startIndex + index}\n\t\t\t\t>\n\t\t\t\t\t{@render children({ item, index: startIndex + index })}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.virtual-list-container {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t}\n\n\t.virtual-list-spacer {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t}\n\n\t.virtual-list-content {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twill-change: transform;\n\t}\n\n\t.virtual-list-item {\n\t\twidth: 100%;\n\t}\n\n\t/* Smooth scrolling */\n\t.virtual-list-container {\n\t\tscroll-behavior: smooth;\n\t}\n\n\t/* Custom scrollbar (BDS styling) */\n\t.virtual-list-container::-webkit-scrollbar {\n\t\twidth: 8px;\n\t}\n\n\t.virtual-list-container::-webkit-scrollbar-track {\n\t\tbackground: var(--color-surface-tertiary);\n\t\tborder-radius: 4px;\n\t}\n\n\t.virtual-list-container::-webkit-scrollbar-thumb {\n\t\tbackground: var(--color-brass);\n\t\tborder-radius: 4px;\n\t}\n\n\t.virtual-list-container::-webkit-scrollbar-thumb:hover {\n\t\tbackground: var(--color-brass-light);\n\t}\n</style>\n"],"names":["containerRef","items","$.prop","$$props","itemHeight","buffer","height","gap","scrollTop","$.state","containerHeight","totalHeight","length","visibleCount","$.derived","Math","ceil","startIndex","max","floor","endIndex","min","$.get","visibleItems","slice","offsetY","onMount","rect","getBoundingClientRect","resizeObserver","ResizeObserver","entries","entry","$.set","contentRect","observe","disconnect","div","root","div_1","$.child","div_2","item","index","$$anchor","div_3","root_1","node","$.snippet","children","$.reset","$.append","$$value","$.set_style","$.event","event","target"],"mappings":"8aAmCKA,EATHC,EAAKC,EAAAC,EAAA,QAAA,GAAA,IAAA,IACLC,qBAAa,KACbC,iBAAS,GACTC,iBAAS,SACTC,cAAM,GAMHC,EAAYC,EAAO,GACnBC,EAAkBD,EAAO,KAGzBE,QAAuBV,IAAMW,QAAUR,IAAaG,MACpDM,EAAYC,EAAA,IAAYC,KAAKC,OAAKN,IAAmBN,IAAaG,OAClEU,QAAsBF,KAAKG,IAAI,EAAGH,KAAKI,QAAMX,IAAaJ,IAAaG,MAAQF,MAC/Ee,EAAQN,EAAA,IAAYC,KAAKM,IAAIpB,IAAMW,OAAMU,EAAEL,GAAUK,EAAGT,GAAwB,EAATR,MACvEkB,QAAwBtB,IAAMuB,MAAKF,EAACL,KAAYG,KAChDK,EAAOX,EAAA,IAAAQ,EAAYL,IAAcb,IAAaG,MASlDmB,EAAO,KACF,GAAA1B,EAAc,OACX2B,EAAO3B,EAAa4B,0BAC1BlB,EAAkBiB,EAAKrB,QAAM,GAGvB,MAAAuB,EAAc,IAAOC,eAAgBC,cAC/BC,KAASD,EACnBE,EAAAvB,EAAkBsB,EAAME,YAAY5B,QAAM,KAM/B,OAFbuB,EAAeM,QAAQnC,GAEV,KACZ6B,EAAeO,aAEjB,IAID,IAAAC,EAAAC,IAMCC,EAAGC,EANJH,GAOEI,IADDF,KACCE,EAAG,GAAA,IAAAnB,EACIC,GAAY,CAAImB,QAAazB,GAAa0B,EAAK,CAAAC,EAA/BF,EAAIC,KACzB,IAAAE,EAAAC,IAAAC,EAAAP,EAAAK,GAKoBG,EAAAD,EAAA,IAAA5C,EAAA8C,SAAA,KAAA,CAAAP,OAAAA,GAAMC,MAAKrB,EAAEL,KAAa0B,MAL9CO,EAAAL,YAAAA,EAAA,WAEgBzC,6BAA+BG,KAAG,WAFlDsC,EAAA,aAAAvB,EAGYL,KAAa0B,MAHzBQ,EAAAP,EAAAC,OAFFJ,KADDF,GANDW,EAAAb,KAAAA,EAAAe,GACWpD,QAAAA,UADXqD,EAAAhB,EAAA,WAGgB/B,KAAM,yBAGrB+C,EAAAd,eAAgD5B,IAAW,SAC1D0C,EAAAZ,6BAA+DhB,IAAO,YAPxE6B,EAAA,SAAAjB,WA3BsBkB,SACfC,EAASD,EAAMC,SACrBhD,EAAYgD,EAAOhD,WAAS,EAC7B,GAwBA2C,EAAAP,EAAAP,MAFD"}