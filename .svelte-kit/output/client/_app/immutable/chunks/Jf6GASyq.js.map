{"version":3,"file":"Jf6GASyq.js","sources":["../../../../../../src/lib/api/skillRegistry.ts"],"sourcesContent":["import { forgeAgentsClient } from './forgeAgentsClient';\nimport type { Skill } from './types';\n\nexport class SkillRegistry {\n\tprivate allSkills: Skill[] = [];\n\tprivate skillsLoaded = false;\n\tprivate loadingPromise: Promise<Skill[]> | null = null;\n\n\tasync loadSkills(): Promise<Skill[]> {\n\t\tif (this.skillsLoaded) return this.allSkills;\n\t\tif (this.loadingPromise) return this.loadingPromise;\n\n\t\tthis.loadingPromise = forgeAgentsClient.listSkills().then((response) => {\n\t\t\tthis.allSkills = response.skills;\n\t\t\tthis.skillsLoaded = true;\n\t\t\treturn this.allSkills;\n\t\t});\n\t\treturn this.loadingPromise;\n\t}\n\n\tasync getAllSkills(): Promise<Skill[]> {\n\t\treturn this.loadSkills();\n\t}\n\n\tasync getSkill(skillId: string): Promise<Skill | undefined> {\n\t\tconst skills = await this.getAllSkills();\n\t\treturn skills.find((s) => s.id === skillId);\n\t}\n\n\tasync getSkillsBySection(): Promise<Record<string, Skill[]>> {\n\t\tconst skills = await this.getAllSkills();\n\t\treturn skills.reduce(\n\t\t\t(acc, skill) => {\n\t\t\t\tif (!acc[skill.section]) acc[skill.section] = [];\n\t\t\t\tacc[skill.section].push(skill);\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{} as Record<string, Skill[]>\n\t\t);\n\t}\n\n\tasync getSkillsByCategory(): Promise<Record<string, Skill[]>> {\n\t\tconst skills = await this.getAllSkills();\n\t\treturn skills.reduce(\n\t\t\t(acc, skill) => {\n\t\t\t\tif (!acc[skill.category]) acc[skill.category] = [];\n\t\t\t\tacc[skill.category].push(skill);\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{} as Record<string, Skill[]>\n\t\t);\n\t}\n\n\tasync search(query: string): Promise<Skill[]> {\n\t\tconst skills = await this.getAllSkills();\n\t\tconst q = query.toLowerCase();\n\t\treturn skills.filter(\n\t\t\t(s) =>\n\t\t\t\ts.name.toLowerCase().includes(q) ||\n\t\t\t\ts.description.toLowerCase().includes(q) ||\n\t\t\t\ts.tags.some((tag) => tag.toLowerCase().includes(q))\n\t\t);\n\t}\n\n\tasync getPublicSkills(): Promise<Skill[]> {\n\t\tconst skills = await this.getAllSkills();\n\t\treturn skills.filter((s) => s.access === 'PUBLIC');\n\t}\n\n\tasync getBDSOnlySkills(): Promise<Skill[]> {\n\t\tconst skills = await this.getAllSkills();\n\t\treturn skills.filter((s) => s.access === 'BDS_ONLY');\n\t}\n\n\tclearCache(): void {\n\t\tthis.allSkills = [];\n\t\tthis.skillsLoaded = false;\n\t\tthis.loadingPromise = null;\n\t}\n}\n\nexport const skillRegistry = new SkillRegistry();\n"],"names":["skillRegistry","constructor","__publicField","this","loadSkills","skillsLoaded","allSkills","loadingPromise","forgeAgentsClient","listSkills","then","response","skills","getAllSkills","getSkill","skillId","find","s","id","getSkillsBySection","reduce","acc","skill","section","push","getSkillsByCategory","category","search","query","q","toLowerCase","filter","name","includes","description","tags","some","tag","getPublicSkills","access","getBDSOnlySkills","clearCache"],"mappings":"4LAiFO,MAAMA,EAAgB,IA9EtB,MAAA,WAAAC,GACEC,EAAAC,KAAA,YAAqB,IACrBD,EAAAC,KAAA,gBAAe,GACfD,EAAAC,KAAA,iBAA0C,KAAA,CAElD,gBAAMC,GACL,OAAID,KAAKE,aAAqBF,KAAKG,WAC/BH,KAAKI,iBAETJ,KAAKI,eAAiBC,EAAkBC,aAAaC,KAAMC,IAC1DR,KAAKG,UAAYK,EAASC,OAC1BT,KAAKE,cAAe,EACbF,KAAKG,aALmBH,KAAKI,eAQtC,CAEA,kBAAMM,GACL,OAAOV,KAAKC,YACb,CAEA,cAAMU,CAASC,GAEd,aADqBZ,KAAKU,gBACZG,KAAMC,GAAMA,EAAEC,KAAOH,EACpC,CAEA,wBAAMI,GAEL,aADqBhB,KAAKU,gBACZO,OACb,CAACC,EAAKC,KACAD,EAAIC,EAAMC,WAAUF,EAAIC,EAAMC,SAAW,IAC9CF,EAAIC,EAAMC,SAASC,KAAKF,GACjBD,GAER,CAAA,EAEF,CAEA,yBAAMI,GAEL,aADqBtB,KAAKU,gBACZO,OACb,CAACC,EAAKC,KACAD,EAAIC,EAAMI,YAAWL,EAAIC,EAAMI,UAAY,IAChDL,EAAIC,EAAMI,UAAUF,KAAKF,GAClBD,GAER,CAAA,EAEF,CAEA,YAAMM,CAAOC,GACZ,MAAMhB,QAAeT,KAAKU,eACpBgB,EAAID,EAAME,cAChB,OAAOlB,EAAOmB,OACZd,GACAA,EAAEe,KAAKF,cAAcG,SAASJ,IAC9BZ,EAAEiB,YAAYJ,cAAcG,SAASJ,IACrCZ,EAAEkB,KAAKC,KAAMC,GAAQA,EAAIP,cAAcG,SAASJ,IAEnD,CAEA,qBAAMS,GAEL,aADqBnC,KAAKU,gBACZkB,OAAQd,GAAmB,WAAbA,EAAEsB,OAC/B,CAEA,sBAAMC,GAEL,aADqBrC,KAAKU,gBACZkB,OAAQd,GAAmB,aAAbA,EAAEsB,OAC/B,CAEA,UAAAE,GACCtC,KAAKG,UAAY,GACjBH,KAAKE,cAAe,EACpBF,KAAKI,eAAiB,IACvB"}