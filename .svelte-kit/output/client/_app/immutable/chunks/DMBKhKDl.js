import{T as r,o as s,a7 as e,m as a,i,k as o,l as t,p as l,c as n,a as d,s as c,h as v,g as E,x as m,a4 as u,e as k,q as h,j as f,I as g,y as p,z as w,A as $,r as y}from"./BBEC77oO.js";import{l as q,a as j}from"./Cfodrc4t.js";import{P as D}from"./B2n38f_9.js";import{A as L}from"./hkv9Cn3v.js";import{B as A}from"./DHMzYP54.js";const I=r({errors:[],lastError:null,dismissedErrors:new Set}),T={get errors(){return I.errors.filter(r=>!I.dismissedErrors.has(r.id))},get lastError(){return I.lastError},get hasErrors(){return I.errors.length>0},get criticalErrors(){return I.errors.filter(r=>"CRITICAL"===r.severity&&!I.dismissedErrors.has(r.id))},get highErrors(){return I.errors.filter(r=>"HIGH"===r.severity&&!I.dismissedErrors.has(r.id))},addError(r){I.errors=[...I.errors,r],I.lastError=r,q(r),"LOW"===r.severity&&setTimeout(()=>{this.dismissError(r.id)},5e3),I.errors.length>100&&(I.errors=I.errors.slice(-100))},dismissError(r){I.dismissedErrors.add(r)},clearError(r){I.errors=I.errors.filter(s=>s.id!==r),I.dismissedErrors.delete(r),I.lastError?.id===r&&(I.lastError=I.errors[I.errors.length-1]||null)},clearAll(){I.errors=[],I.lastError=null,I.dismissedErrors.clear()},clearDismissed(){I.errors=I.errors.filter(r=>!I.dismissedErrors.has(r.id)),I.dismissedErrors.clear()}};var b=k('<details class="error-details svelte-1k3aqik"><summary class="svelte-1k3aqik">Technical Details</summary> <pre class="error-stack svelte-1k3aqik"> </pre></details>'),C=k('<div class="error-container svelte-1k3aqik"><div class="error-icon svelte-1k3aqik">⚠️</div> <h2 class="svelte-1k3aqik">Something went wrong</h2> <!> <!> <div class="error-actions svelte-1k3aqik"><!> <!></div> <p class="error-id svelte-1k3aqik"> </p></div>'),x=k('<div class="error-boundary svelte-1k3aqik"><!></div>');function z(r,k){l(k,!0);let q=n(k,"showDetails",3,!1),I=c(null),z=c(""),B=m(()=>null!==E(I)),H=null,P=null;function R(r,s=""){d(I,r,!0),d(z,s,!0),T.addError(r),k.onError&&k.onError(r)}function S(){d(I,null),d(z,"")}s(()=>{H=r=>{R(j(r.error),r.error?.stack||""),r.preventDefault()},P=r=>{R(j(r.reason),r.reason?.stack||""),r.preventDefault()},window.addEventListener("error",H),window.addEventListener("unhandledrejection",P)}),e(()=>{H&&window.removeEventListener("error",H),P&&window.removeEventListener("unhandledrejection",P)});var F={catchError:function(r){R(j(r),r instanceof Error&&r.stack||"")}},G=a(),M=v(G),O=r=>{var s=a(),e=v(s),t=r=>{var s=a(),e=v(s);u(e,()=>k.fallback,()=>E(I)),o(r,s)},l=r=>{var s=x(),e=h(s);D(e,{variant:"elevated",padding:"lg",children:(r,s)=>{var e=C(),a=f(h(e),4);L(a,{variant:"error",get title(){return E(I).category},children:(r,s)=>{g();var e=p();w(()=>$(e,E(I).userMessage)),o(r,e)},$$slots:{default:!0}});var t=f(a,2),l=r=>{var s=b(),e=f(h(s),2),a=h(e,!0);y(e),y(s),w(()=>$(a,E(z))),o(r,s)};i(t,r=>{q()&&E(z)&&r(l)});var n=f(t,2),d=h(n);A(d,{variant:"primary",$$events:{click:S},children:(r,s)=>{g();var e=p("Try Again");o(r,e)},$$slots:{default:!0}});var c=f(d,2);A(c,{variant:"secondary",$$events:{click:()=>window.location.reload()},children:(r,s)=>{g();var e=p("Reload Page");o(r,e)},$$slots:{default:!0}}),y(n);var v=f(n,2),m=h(v);y(v),y(e),w(()=>$(m,`Error ID: ${E(I).id??""}`)),o(r,e)},$$slots:{default:!0}}),y(s),o(r,s)};i(e,r=>{k.fallback?r(t):r(l,!1)}),o(r,s)},W=r=>{var s=a(),e=v(s),t=r=>{var s=a(),e=v(s);u(e,()=>k.children),o(r,s)};i(e,r=>{k.children&&r(t)},!0),o(r,s)};return i(M,r=>{E(B)&&E(I)?r(O):r(W,!1)}),o(r,G),t(F)}export{z as E,T as e};
