import{T as r,o as s,a8 as e,k as a,i,h as o,j as t,p as l,a as n,c as d,s as v,d as c,g as u,q as E,a5 as m,f as k,m as h,e as f,G as g,v as p,w,x as $,r as y}from"./C9wVddXz.js";import{l as q,a as j}from"./6vB2_8ig.js";import{P as D}from"./B4qtpSKl.js";import{A as L}from"./Z5qlU11D.js";import{B as T}from"./C5stTU52.js";const A=r({errors:[],lastError:null,dismissedErrors:new Set}),I={get errors(){return A.errors.filter(r=>!A.dismissedErrors.has(r.id))},get lastError(){return A.lastError},get hasErrors(){return A.errors.length>0},get criticalErrors(){return A.errors.filter(r=>"CRITICAL"===r.severity&&!A.dismissedErrors.has(r.id))},get highErrors(){return A.errors.filter(r=>"HIGH"===r.severity&&!A.dismissedErrors.has(r.id))},addError(r){A.errors=[...A.errors,r],A.lastError=r,q(r),"LOW"===r.severity&&setTimeout(()=>{this.dismissError(r.id)},5e3),A.errors.length>100&&(A.errors=A.errors.slice(-100))},dismissError(r){A.dismissedErrors.add(r)},clearError(r){var s;A.errors=A.errors.filter(s=>s.id!==r),A.dismissedErrors.delete(r),(null==(s=A.lastError)?void 0:s.id)===r&&(A.lastError=A.errors[A.errors.length-1]||null)},clearAll(){A.errors=[],A.lastError=null,A.dismissedErrors.clear()},clearDismissed(){A.errors=A.errors.filter(r=>!A.dismissedErrors.has(r.id)),A.dismissedErrors.clear()}};var b=k('<details class="error-details svelte-1k3aqik"><summary class="svelte-1k3aqik">Technical Details</summary> <pre class="error-stack svelte-1k3aqik"> </pre></details>'),x=k('<div class="error-container svelte-1k3aqik"><div class="error-icon svelte-1k3aqik">⚠️</div> <h2 class="svelte-1k3aqik">Something went wrong</h2> <!> <!> <div class="error-actions svelte-1k3aqik"><!> <!></div> <p class="error-id svelte-1k3aqik"> </p></div>'),C=k('<div class="error-boundary svelte-1k3aqik"><!></div>');function G(r,k){l(k,!0);let q=n(k,"showDetails",3,!1),A=v(null),G=v(""),H=E(()=>null!==u(A)),P=null,R=null;function S(r,s=""){d(A,r,!0),d(G,s,!0),I.addError(r),k.onError&&k.onError(r)}function B(){d(A,null),d(G,"")}s(()=>{P=r=>{var s;S(j(r.error),(null==(s=r.error)?void 0:s.stack)||""),r.preventDefault()},R=r=>{var s;S(j(r.reason),(null==(s=r.reason)?void 0:s.stack)||""),r.preventDefault()},window.addEventListener("error",P),window.addEventListener("unhandledrejection",R)}),e(()=>{P&&window.removeEventListener("error",P),R&&window.removeEventListener("unhandledrejection",R)});var M={catchError:function(r){S(j(r),r instanceof Error&&r.stack||"")}},O=a(),W=c(O),z=r=>{var s=a(),e=c(s),t=r=>{var s=a(),e=c(s);m(e,()=>k.fallback,()=>u(A)),o(r,s)},l=r=>{var s=C(),e=h(s);D(e,{variant:"elevated",padding:"lg",children:(r,s)=>{var e=x(),a=f(h(e),4);L(a,{variant:"error",get title(){return u(A).category},children:(r,s)=>{g();var e=p();w(()=>$(e,u(A).userMessage)),o(r,e)},$$slots:{default:!0}});var t=f(a,2),l=r=>{var s=b(),e=f(h(s),2),a=h(e,!0);y(e),y(s),w(()=>$(a,u(G))),o(r,s)};i(t,r=>{q()&&u(G)&&r(l)});var n=f(t,2),d=h(n);T(d,{variant:"primary",$$events:{click:B},children:(r,s)=>{g();var e=p("Try Again");o(r,e)},$$slots:{default:!0}});var v=f(d,2);T(v,{variant:"secondary",$$events:{click:()=>window.location.reload()},children:(r,s)=>{g();var e=p("Reload Page");o(r,e)},$$slots:{default:!0}}),y(n);var c=f(n,2),E=h(c);y(c),y(e),w(()=>$(E,`Error ID: ${u(A).id??""}`)),o(r,e)},$$slots:{default:!0}}),y(s),o(r,s)};i(e,r=>{k.fallback?r(t):r(l,!1)}),o(r,s)},F=r=>{var s=a(),e=c(s),t=r=>{var s=a(),e=c(s);m(e,()=>k.children),o(r,s)};i(e,r=>{k.children&&r(t)},!0),o(r,s)};return i(W,r=>{u(H)&&u(A)?r(z):r(F,!1)}),o(r,O),t(M)}export{G as E,I as e};
