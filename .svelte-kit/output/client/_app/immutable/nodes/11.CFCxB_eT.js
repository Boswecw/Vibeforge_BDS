import{S as e,P as s,s as t}from"../chunks/Cf9ICnXl.js";import{T as a,p as i,e as l,q as r,i as n,g as c,s as d,j as v,r as o,k as u,l as p,I as m,y as g,z as h,A as f,h as x,P as w,x as y,W as $,a as b,c as S,d as q,v as E,N as z,V as k,G as A,H as C,m as D,S as N}from"../chunks/CS1oB8eq.js";import{E as T}from"../chunks/Bm-ysW8Z.js";import{P as M}from"../chunks/BcpFO3YO.js";import{B as O}from"../chunks/B_xsWB_l.js";import{A as P}from"../chunks/oHG5MZam.js";import{B as F}from"../chunks/BXiH49b8.js";import{a as L}from"../chunks/Cfodrc4t.js";const I=a({sessions:[],currentSession:null,isExecuting:!1,streamingOutput:"",currentStage:null}),R={get sessions(){return I.sessions},get currentSession(){return I.currentSession},get isExecuting(){return I.isExecuting},get streamingOutput(){return I.streamingOutput},get currentStage(){return I.currentStage},get activeSessions(){return I.sessions.filter(s=>s.status===e.RUNNING||s.status===e.PENDING)},get completedSessions(){return I.sessions.filter(s=>s.status===e.COMPLETED)},get failedSessions(){return I.sessions.filter(s=>s.status===e.FAILED)},createSession(s){const t={id:`execution_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"execution",status:e.PENDING,createdAt:new Date,request:s,stages:{}};return I.sessions=[...I.sessions,t],I.currentSession=t,t},startSession(t){const a=I.sessions.find(e=>e.id===t);a&&(a.status=e.RUNNING,a.startedAt=new Date,a.currentStage=s.PLAN,I.currentStage=s.PLAN,I.isExecuting=!0,I.streamingOutput="",I.sessions=[...I.sessions])},updateStageOutput(e,t,a){const i=I.sessions.find(s=>s.id===e);if(i){switch(t){case s.PLAN:i.stages.plan=a;break;case s.ACT:i.stages.act=a;break;case s.OBSERVE:i.stages.observe=a;break;case s.REFLECT:i.stages.reflect=a}I.sessions=[...I.sessions]}},appendStreamingOutput(e){I.streamingOutput+=e},clearStreamingOutput(){I.streamingOutput=""},advanceStage(e,s){const t=I.sessions.find(s=>s.id===e);t&&(s?(t.currentStage=s,I.currentStage=s,I.streamingOutput=""):(t.currentStage=void 0,I.currentStage=null,I.isExecuting=!1),I.sessions=[...I.sessions])},completeSession(s,t){const a=I.sessions.find(e=>e.id===s);a&&(a.status=e.COMPLETED,a.completedAt=new Date,a.result=t,a.currentStage=void 0,I.currentStage=null,I.isExecuting=!1,I.streamingOutput="",I.sessions=[...I.sessions])},failSession(s,t){const a=I.sessions.find(e=>e.id===s);a&&(a.status=e.FAILED,a.completedAt=new Date,a.error=t,a.currentStage=void 0,I.currentStage=null,I.isExecuting=!1,I.streamingOutput="",I.sessions=[...I.sessions])},cancelSession(s){const t=I.sessions.find(e=>e.id===s);t&&(t.status=e.CANCELLED,t.completedAt=new Date,t.currentStage=void 0,I.currentSession?.id===s&&(I.currentStage=null,I.isExecuting=!1,I.streamingOutput=""),I.sessions=[...I.sessions])},setCurrentSession(e){if(null===e)return void(I.currentSession=null);const s=I.sessions.find(s=>s.id===e);s&&(I.currentSession=s)},deleteSession(e){I.sessions=I.sessions.filter(s=>s.id!==e),I.currentSession?.id===e&&(I.currentSession=null,I.currentStage=null,I.isExecuting=!1,I.streamingOutput="")},clearAll(){I.sessions=[],I.currentSession=null,I.isExecuting=!1,I.streamingOutput="",I.currentStage=null}};const U="http://localhost:8787";var j=l('<div class="plan-summary svelte-bs7sxw"><h3 class="svelte-bs7sxw"> </h3> <p class="plan-overview svelte-bs7sxw"> </p> <div class="plan-meta svelte-bs7sxw"><!> <!></div></div> <div class="execution-options svelte-bs7sxw"><h4 class="svelte-bs7sxw">Execution Options</h4> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Run tests after code generation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Generate documentation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Auto-commit changes (if tests pass)</span></label></div> <div class="actions svelte-bs7sxw"><!></div>',1),G=l('<div class="empty-state svelte-bs7sxw"><p>Load a plan from the Planning Agent to begin execution.</p></div>'),H=l('<div class="execution-request svelte-bs7sxw"><!> <!></div>');function B(e,s){i(s,!0);let a=d(null),l=d(!1),S=d(!0),q=d(!1),E=d(!1);const z=y(()=>R.isExecuting);async function k(){if(!s.planDeliverable||!s.planSessionId)return;b(a,null),b(l,!0);const e={planSessionId:s.planSessionId,plan:s.planDeliverable,options:{runTests:c(S),generateDocs:c(q),autoCommit:c(E)}};try{const s=await async function(e){try{const s=await fetch(`${U}/api/v1/bds/execution/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e.plan||"",language:e.language||"typescript",framework:e.framework||""})});if(!s.ok){const e=await s.json();return{success:!1,error:L(new Error(e.detail||"Failed to start session"))}}const{sessionId:a}=await s.json(),i=R.createSession(e);i.id=a,R.startSession(i.id);const l=`${U}/api/v1/bds/execution/${a}/stream`;return t.subscribe(l,{onChunk:e=>{R.appendStreamingOutput(e)},onStageStart:e=>{const s=e;R.advanceStage(i.id,s)},onStageEnd:(e,s)=>{const t=e,a=s;R.updateStageOutput(i.id,t,a),R.clearStreamingOutput()},onComplete:e=>{const s=e;R.completeSession(i.id,s)},onError:e=>{R.failSession(i.id,e.message)}}),{success:!0,sessionId:i.id}}catch(a){return{success:!1,error:L(a)}}}(e);!s.success&&s.error&&b(a,s.error,!0)}catch(i){}finally{b(l,!1)}}var A=H(),C=r(A),D=e=>{P(e,{variant:"error",children:(e,s)=>{m();var t=g();h(()=>f(t,c(a).userMessage)),u(e,t)},$$slots:{default:!0}})};n(C,e=>{c(a)&&e(D)});var N=v(C,2),T=e=>{var t=j(),a=x(t),i=r(a),n=r(i,!0);o(i);var d=v(i,2),p=r(d,!0);o(d);var A=v(d,2),C=r(A);F(C,{variant:"info",children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.planDeliverable.plan.steps.length??""} steps`)),u(e,a)},$$slots:{default:!0}});var D=v(C,2);F(D,{variant:"info",children:(e,t)=>{m();var a=g();h(()=>f(a,s.planDeliverable.plan.estimatedEffort)),u(e,a)},$$slots:{default:!0}}),o(A),o(a);var N=v(a,2),T=v(r(N),2),M=r(T);w(M),m(2),o(T);var P=v(T,2),L=r(P);w(L),m(2),o(P);var I=v(P,2),R=r(I);w(R),m(2),o(I),o(N);var U=v(N,2),G=r(U);{let e=y(()=>c(z)||c(l));O(G,{variant:"primary",onclick:k,get disabled(){return c(e)},get loading(){return c(l)},children:(e,s)=>{m();var t=g();h(()=>f(t,c(l)?"Starting Execution...":"Execute Plan")),u(e,t)},$$slots:{default:!0}})}o(U),h(()=>{f(n,s.planDeliverable.plan.title),f(p,s.planDeliverable.plan.overview),M.disabled=c(z),L.disabled=c(z),R.disabled=c(z)}),$(M,()=>c(S),e=>b(S,e)),$(L,()=>c(q),e=>b(q,e)),$(R,()=>c(E),e=>b(E,e)),u(e,t)},M=e=>{var s=G();u(e,s)};n(N,e=>{s.planDeliverable?e(T):e(M,!1)}),o(A),u(e,A),p()}var V=l('<div class="streaming-indicator svelte-205pas"><div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <span class="svelte-205pas">Generating code...</span></div>'),_=l('<div><pre><code class="svelte-205pas"> </code></pre> <!></div>'),K=l('<div class="empty-state svelte-205pas"><p class="svelte-205pas">Code will appear here when execution starts.</p></div>'),W=l('<div class="code-generation svelte-205pas"><div class="code-header svelte-205pas"><h4 class="svelte-205pas">Generated Code</h4> <div class="code-actions svelte-205pas"><!></div></div> <!></div>');function J(e,s){i(s,!0);let t,a=S(s,"language",3,"typescript");function l(){if("string"==typeof s.code)return s.code;const e=[];if(s.code.filesCreated?.length>0)for(const t of s.code.filesCreated)e.push(`// === ${t.path} (new file) ===\n${t.content}`);if(s.code.filesModified?.length>0)for(const t of s.code.filesModified)e.push(`// === ${t.path} (modified) ===\n${t.diff}`);return e.join("\n\n")}q(()=>{});var d=W(),x=r(d),w=v(r(x),2),$=r(w);{let e=y(()=>!("string"==typeof s.code?s.code.length>0:(s.code.filesCreated?.length??0)>0||(s.code.filesModified?.length??0)>0));O($,{variant:"secondary",size:"sm",onclick:async function(){try{await navigator.clipboard.writeText(l())}catch(e){}},get disabled(){return c(e)},children:(e,s)=>{m();var t=g("Copy");u(e,t)},$$slots:{default:!0}})}o(w),o(x);var b=v(x,2),k=e=>{var i=_();let c;var d=r(i),p=r(d),m=r(p,!0);o(p),o(d),E(d,e=>t=e,()=>t);var g=v(d,2),x=e=>{var s=V();u(e,s)};n(g,e=>{s.isStreaming&&e(x)}),o(i),h(e=>{c=z(i,1,"code-container svelte-205pas",null,c,{streaming:s.isStreaming}),z(d,1,`code-block language-${a()??""}`,"svelte-205pas"),f(m,e)},[l]),u(e,i)},A=e=>{var s=K();u(e,s)};n(b,e=>{s.code||s.isStreaming?e(k):e(A,!1)}),o(d),u(e,d),p()}var Q=l('<div class="coverage svelte-czdiq9"><h5 class="svelte-czdiq9">Coverage</h5> <div class="coverage-items svelte-czdiq9"><div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Lines:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Functions:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Branches:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Statements:</span> <!></div></div></div>'),X=l('<details class="failure-stack svelte-czdiq9"><summary class="svelte-czdiq9">Stack Trace</summary> <pre class="svelte-czdiq9"> </pre></details>'),Y=l('<div class="failure-card svelte-czdiq9"><div class="failure-header svelte-czdiq9"><span class="failure-name svelte-czdiq9"> </span> <span class="failure-path svelte-czdiq9"> </span></div> <pre class="failure-error svelte-czdiq9"> </pre> <!></div>'),Z=l('<div class="failures svelte-czdiq9"><h5 class="svelte-czdiq9">Failed Tests</h5> <!></div>'),ee=l('<div class="results-summary svelte-czdiq9"><div class="summary-card passed svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Passed</span></div> <div class="summary-card failed svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Failed</span></div> <div class="summary-card skipped svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Skipped</span></div> <div class="summary-card total svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Total</span></div></div> <div class="pass-rate svelte-czdiq9"><div class="pass-rate-bar svelte-czdiq9"><div class="pass-rate-fill svelte-czdiq9"></div></div> <span class="pass-rate-text svelte-czdiq9"> </span></div> <!> <!>',1),se=l('<div class="empty-state svelte-czdiq9"><p>Test results will appear here after execution.</p></div>'),te=l('<div class="test-results svelte-czdiq9"><h4 class="svelte-czdiq9">Test Results</h4> <!></div>');var ae=l('<span class="text-success svelte-1p8lewm"> </span> <span class="text-danger svelte-1p8lewm"> </span>',1),ie=l('<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ“</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Files Modified</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div>'),le=l('<span class="text-success svelte-1p8lewm"> </span> <span class="text-danger svelte-1p8lewm"> </span>',1),re=l('<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ§ª</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tests Executed</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div>'),ne=l('<div class="insights svelte-1p8lewm"><div class="insight-card warning svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>High token usage detected. Consider breaking down complex tasks.</span></div></div>'),ce=l('<div class="insights svelte-1p8lewm"><div class="insight-card info svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z"></path></svg> <span>Long execution time. Consider optimizing prompts or breaking into smaller steps.</span></div></div>'),de=l('<div class="metrics-grid svelte-1p8lewm"><div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ”¢</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tokens Used</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm"> </span> <span class="text-muted svelte-1p8lewm"> </span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ’°</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Estimated Cost</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Per 1M tokens</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">â±ï¸</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Execution Time</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm"> </span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ¤–</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Model</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div> <!> <!></div> <!> <!>',1),ve=l('<div class="empty-state svelte-1p8lewm"><p class="text-muted svelte-1p8lewm">No metrics available yet. Start an execution to see metrics.</p></div>'),oe=l('<div class="metrics-display svelte-1p8lewm"><!></div>');var ue=l('<span class="stat-addition svelte-c6rpoy"> </span>'),pe=l('<span class="stat-deletion svelte-c6rpoy"> </span>'),me=l('<div class="change-stats svelte-c6rpoy"><!> <!></div>'),ge=l('<div class="change-detail svelte-c6rpoy"><span class="text-muted svelte-c6rpoy">Renamed from:</span> <code class="old-path svelte-c6rpoy"> </code></div>'),he=l('<div class="change-description svelte-c6rpoy"> </div>'),fe=l('<div class="change-bar svelte-c6rpoy"><div class="change-bar-addition svelte-c6rpoy"></div> <div class="change-bar-deletion svelte-c6rpoy"></div></div>'),xe=l('<div class="change-item svelte-c6rpoy"><div class="change-header svelte-c6rpoy"><div class="change-info svelte-c6rpoy"><span class="change-icon svelte-c6rpoy"> </span> <span class="change-path svelte-c6rpoy"> </span> <!></div> <!></div> <!> <!> <!></div>'),we=l('<div class="streaming-indicator svelte-c6rpoy"><div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <span class="svelte-c6rpoy">Generating more changes...</span></div>'),ye=l('<div class="changes-summary svelte-c6rpoy"><div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Files Changed:</span> <span class="summary-value svelte-c6rpoy"> </span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Additions:</span> <span class="summary-value text-success svelte-c6rpoy"> </span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Deletions:</span> <span class="summary-value text-danger svelte-c6rpoy"> </span></div></div> <div class="change-types svelte-c6rpoy"><!> <!> <!> <!></div> <div class="changes-list svelte-c6rpoy"></div> <!>',1),$e=l('<div class="empty-state svelte-c6rpoy"><p class="text-muted svelte-c6rpoy">No file changes yet. Start an execution to see changes.</p></div>'),be=l('<div class="file-changes svelte-c6rpoy"><!></div>');var Se=l('<span class="session-duration"> </span>'),qe=l('<span class="session-duration"> </span>'),Ee=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ“</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">files</span></div>'),ze=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ§ª</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">passed</span></div>'),ke=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ”¢</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">tokens</span></div>'),Ae=l('<div class="session-stats svelte-100842h"><!> <!> <!></div>'),Ce=l('<div class="session-error svelte-100842h"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span> </span></div>'),De=l('<div role="button" tabindex="0"><div class="session-header svelte-100842h"><div class="session-info svelte-100842h"><span class="session-icon svelte-100842h"> </span> <div class="session-title-group svelte-100842h"><div class="session-title svelte-100842h"><!></div> <div class="session-meta svelte-100842h"><span class="session-date"> </span> <!></div></div></div> <!></div> <!> <!> <div class="session-actions svelte-100842h"><!> <!></div></div>'),Ne=l('<div class="history-header svelte-100842h"><h3 class="svelte-100842h"> </h3> <!></div> <div class="sessions-list svelte-100842h"></div>',1),Te=l('<div class="empty-state svelte-100842h"><div class="empty-icon svelte-100842h">ğŸ“‹</div> <p class="empty-title svelte-100842h">No execution history</p> <p class="empty-description svelte-100842h">Start an execution to see your history here.</p></div>'),Me=l('<div class="execution-history svelte-100842h"><!></div>');function Oe(s,t){i(t,!0);const a=y(()=>R.sessions);function l(e,s){const t=(s||new Date).getTime()-e.getTime();return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${(t/6e4).toFixed(1)}m`}function d(e){R.setCurrentSession(e)}var w=Me(),$=r(w),b=s=>{var t=Ne(),i=x(t),p=r(i),w=r(p);o(p);var $=v(p,2);O($,{variant:"ghost",size:"sm",onclick:()=>R.clearAll(),children:(e,s)=>{m();var t=g("Clear All");u(e,t)},$$slots:{default:!0}}),o(i);var b=v(i,2);A(b,21,()=>c(a),C,(s,t)=>{const a=y(()=>R.currentSession?.id===c(t).id);var i=De();let p;i.__click=()=>d(c(t).id),i.__keydown=e=>"Enter"===e.key&&d(c(t).id);var w=r(i),$=r(w),b=r($),S=r(b,!0);o(b);var q=v(b,2),E=r(q),k=r(E),A=e=>{var s=g();h(()=>f(s,c(t).request.plan.plan.title)),u(e,s)},C=e=>{var s=g();h(e=>f(s,`Execution #${e??""}`),[()=>c(t).id.split("_")[1]]),u(e,s)};n(k,e=>{c(t).request.plan?.plan?.title?e(A):e(C,!1)}),o(E);var N=v(E,2),T=r(N),M=r(T,!0);o(T);var P=v(T,2),L=e=>{var s=Se(),a=r(s,!0);o(s),h(e=>f(a,e),[()=>l(c(t).startedAt,c(t).completedAt)]),u(e,s)},I=e=>{var s=D(),a=x(s),i=e=>{var s=qe(),a=r(s,!0);o(s),h(e=>f(a,e),[()=>l(c(t).startedAt)]),u(e,s)};n(a,e=>{c(t).startedAt&&e(i)},!0),u(e,s)};n(P,e=>{c(t).startedAt&&c(t).completedAt?e(L):e(I,!1)}),o(N),o(q),o($);var U=v($,2);{let s=y(()=>function(s){switch(s){case e.COMPLETED:return"success";case e.RUNNING:return"warning";case e.FAILED:case e.CANCELLED:return"danger";default:return"neutral"}}(c(t).status));F(U,{get variant(){return c(s)},children:(e,s)=>{m();var a=g();h(()=>f(a,c(t).status)),u(e,a)},$$slots:{default:!0}})}o(w);var j=v(w,2),G=e=>{var s=Ae(),a=r(s),i=e=>{var s=Ee(),a=v(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(()=>f(i,c(t).result.filesModified.length)),u(e,s)};n(a,e=>{c(t).result.filesModified&&e(i)});var l=v(a,2),d=e=>{var s=ze(),a=v(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(()=>f(i,c(t).result.testResults.passed)),u(e,s)};n(l,e=>{c(t).result.testResults&&e(d)});var p=v(l,2),g=e=>{var s=ke(),a=v(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(e=>f(i,e),[()=>c(t).result.metrics.tokensUsed<1e3?c(t).result.metrics.tokensUsed:`${(c(t).result.metrics.tokensUsed/1e3).toFixed(1)}K`]),u(e,s)};n(p,e=>{c(t).result.metrics&&e(g)}),o(s),u(e,s)};n(j,e=>{c(t).result&&e(G)});var H=v(j,2),B=e=>{var s=Ce(),a=v(r(s),2),i=r(a,!0);o(a),o(s),h(()=>f(i,c(t).error)),u(e,s)};n(H,e=>{c(t).error&&e(B)});var V=v(H,2),_=r(V);O(_,{variant:"ghost",size:"sm",onclick:e=>{e.stopPropagation(),d(c(t).id)},children:(e,s)=>{m();var t=g("View Details");u(e,t)},$$slots:{default:!0}});var K=v(_,2);O(K,{variant:"ghost",size:"sm",onclick:e=>{var s;e.stopPropagation(),s=c(t).id,confirm("Are you sure you want to delete this session?")&&R.deleteSession(s)},children:(e,s)=>{m();var t=g("Delete");u(e,t)},$$slots:{default:!0}}),o(V),o(i),h((e,s)=>{p=z(i,1,"session-card svelte-100842h",null,p,{active:c(a)}),f(S,e),f(M,s)},[()=>function(s){switch(s){case e.COMPLETED:return"âœ…";case e.RUNNING:return"â³";case e.FAILED:return"âŒ";case e.CANCELLED:return"ğŸš«";default:return"â¸ï¸"}}(c(t).status),()=>{return e=c(t).createdAt,new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);var e}]),u(s,i)}),o(b),h(()=>f(w,`Past Executions (${c(a).length??""})`)),u(s,t)},S=e=>{var s=Te();u(e,s)};n($,e=>{c(a).length>0?e(b):e(S,!1)}),o(w),u(s,w),p()}N(["click","keydown"]);var Pe=l('<div class="progress-message svelte-2mqxtd"><div class="spinner svelte-2mqxtd"></div> <p class="svelte-2mqxtd">Initializing execution...</p></div>'),Fe=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Generated Code</h3> <!></div>'),Le=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Test Results</h3> <!></div>'),Ie=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">File Changes</h3> <!></div>'),Re=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Execution Metrics</h3> <!></div>'),Ue=l('<div class="results-section svelte-2mqxtd"><!> <!> <!> <!></div>'),je=l('<p class="error-message svelte-2mqxtd"> </p>'),Ge=l('<div class="error-state svelte-2mqxtd"><svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" class="svelte-2mqxtd"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <h3 class="svelte-2mqxtd">Execution Failed</h3> <!></div>'),He=l('<div class="empty-state svelte-2mqxtd"><div class="empty-icon svelte-2mqxtd">âš¡</div> <h2 class="svelte-2mqxtd">Start an Execution Session</h2> <p class="svelte-2mqxtd">Load a plan from the Planning Agent or create a new execution request to begin.</p></div>'),Be=l('<div class="execution-page svelte-2mqxtd"><header class="page-header svelte-2mqxtd"><h1 class="svelte-2mqxtd">Execution Agent</h1> <p class="text-muted svelte-2mqxtd">Execute code generation and implementation tasks</p></header> <div class="content-grid svelte-2mqxtd"><div class="left-column svelte-2mqxtd"><!> <!></div> <div class="right-column svelte-2mqxtd"><!></div></div></div>');function Ve(s,t){i(t,!0);const a=y(()=>R.currentSession),l=y(()=>R.isExecuting),d=y(()=>R.streamingOutput);T(s,{children:(s,t)=>{var w=Be(),$=v(r(w),2),b=r($),q=r(b);M(q,{title:"New Execution Request",children:(e,s)=>{B(e,{})},$$slots:{default:!0}});var E=v(q,2),z=e=>{M(e,{title:"Execution History",class:"mt-6",children:(e,s)=>{Oe(e,{})},$$slots:{default:!0}})};n(E,e=>{c(a)&&e(z)}),o(b);var N=v(b,2),T=r(N),O=s=>{var t=D(),w=x(t),$=e=>{M(e,{title:"Execution in Progress",children:(e,s)=>{var t=D(),a=x(t),i=e=>{J(e,{get code(){return c(d)},get isStreaming(){return c(l)}})},r=e=>{var s=Pe();u(e,s)};n(a,e=>{c(d)?e(i):e(r,!1)}),u(e,t)},$$slots:{default:!0}})},b=s=>{var t=D(),l=x(t),d=e=>{M(e,{title:"Execution Complete",children:(e,s)=>{var t=Ue(),l=r(t),d=e=>{var s=Fe();J(v(r(s),2),{get code(){return c(a).result.code},isStreaming:!1}),o(s),u(e,s)};n(l,e=>{c(a).result.code&&e(d)});var w=v(l,2),$=e=>{var s=Le();!function(e,s){i(s,!0);const t=y(()=>s.results&&s.results.total>0?(s.results.passed/s.results.total*100).toFixed(1):"0");var a=te(),l=v(r(a),2),d=e=>{var a=ee(),i=x(a),l=r(i),d=r(l),p=r(d,!0);o(d),m(2),o(l);var w=v(l,2),$=r(w),b=r($,!0);o($),m(2),o(w);var S=v(w,2),q=r(S),E=r(q,!0);o(q),m(2),o(S);var z=v(S,2),D=r(z),N=r(D,!0);o(D),m(2),o(z),o(i);var T=v(i,2),M=r(T),O=r(M);o(M);var P=v(M,2),L=r(P);o(P),o(T);var I=v(T,2),R=e=>{var t=Q(),a=v(r(t),2),i=r(a),l=v(r(i),2);{let e=y(()=>s.results.coverage.lines>=80?"success":"warning");F(l,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.lines??""}%`)),u(e,a)},$$slots:{default:!0}})}o(i);var n=v(i,2),d=v(r(n),2);{let e=y(()=>s.results.coverage.functions>=80?"success":"warning");F(d,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.functions??""}%`)),u(e,a)},$$slots:{default:!0}})}o(n);var p=v(n,2),x=v(r(p),2);{let e=y(()=>s.results.coverage.branches>=80?"success":"warning");F(x,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.branches??""}%`)),u(e,a)},$$slots:{default:!0}})}o(p);var w=v(p,2),$=v(r(w),2);{let e=y(()=>s.results.coverage.statements>=80?"success":"warning");F($,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.statements??""}%`)),u(e,a)},$$slots:{default:!0}})}o(w),o(a),o(t),u(e,t)};n(I,e=>{s.results.coverage&&e(R)});var U=v(I,2),j=e=>{var t=Z(),a=v(r(t),2);A(a,17,()=>s.results.failures,C,(e,s)=>{var t=Y(),a=r(t),i=r(a),l=r(i,!0);o(i);var d=v(i,2),p=r(d,!0);o(d),o(a);var m=v(a,2),g=r(m,!0);o(m);var x=v(m,2),w=e=>{var t=X(),a=v(r(t),2),i=r(a,!0);o(a),o(t),h(()=>f(i,c(s).stack)),u(e,t)};n(x,e=>{c(s).stack&&e(w)}),o(t),h(()=>{f(l,c(s).testName),f(p,c(s).filePath),f(g,c(s).error)}),u(e,t)}),o(t),u(e,t)};n(U,e=>{s.results.failures.length>0&&e(j)}),h(()=>{f(p,s.results.passed),f(b,s.results.failed),f(E,s.results.skipped),f(N,s.results.total),k(O,`width: ${c(t)??""}%`),f(L,`${c(t)??""}% Pass Rate`)}),u(e,a)},w=e=>{var s=se();u(e,s)};n(l,e=>{s.results?e(d):e(w,!1)}),o(a),u(e,a),p()}(v(r(s),2),{get results(){return c(a).result.tests}}),o(s),u(e,s)};n(w,e=>{c(a).result.tests&&e($)});var b=v(w,2),q=e=>{var s=Ie();!function(e,s){i(s,!0);let t=S(s,"isStreaming",3,!1);const a=y(()=>s.changes.reduce((e,s)=>e+(s.additions||0),0)),l=y(()=>s.changes.reduce((e,s)=>e+(s.deletions||0),0)),d=y(()=>()=>{const e={added:0,modified:0,deleted:0,renamed:0};return s.changes.forEach(s=>{s.type in e&&e[s.type]++}),e});var w=be(),$=r(w),b=e=>{var i=ye(),p=x(i),w=r(p),$=v(r(w),2),b=r($,!0);o($),o(w);var S=v(w,2),q=v(r(S),2),E=r(q);o(q),o(S);var z=v(S,2),D=v(r(z),2),N=r(D);o(D),o(z),o(p);var T=v(p,2),M=r(T),O=e=>{F(e,{variant:"success",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Added`),[()=>c(d)().added]),u(e,t)},$$slots:{default:!0}})};n(M,e=>{c(d)().added>0&&e(O)});var P=v(M,2),L=e=>{F(e,{variant:"warning",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Modified`),[()=>c(d)().modified]),u(e,t)},$$slots:{default:!0}})};n(P,e=>{c(d)().modified>0&&e(L)});var I=v(P,2),R=e=>{F(e,{variant:"danger",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Deleted`),[()=>c(d)().deleted]),u(e,t)},$$slots:{default:!0}})};n(I,e=>{c(d)().deleted>0&&e(R)});var U=v(I,2),j=e=>{F(e,{variant:"neutral",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Renamed`),[()=>c(d)().renamed]),u(e,t)},$$slots:{default:!0}})};n(U,e=>{c(d)().renamed>0&&e(j)}),o(T);var G=v(T,2);A(G,21,()=>s.changes,C,(e,s)=>{var t=xe(),a=r(t),i=r(a),l=r(i),d=r(l,!0);o(l);var p=v(l,2),x=r(p,!0);o(p);var w=v(p,2);{let e=y(()=>function(e){switch(e){case"added":return"success";case"modified":return"warning";case"deleted":return"danger";default:return"neutral"}}(c(s).type));F(w,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,c(s).type)),u(e,a)},$$slots:{default:!0}})}o(i);var $=v(i,2),b=e=>{var t=me(),a=r(t),i=e=>{var t=ue(),a=r(t);o(t),h(()=>f(a,`+${c(s).additions??""}`)),u(e,t)};n(a,e=>{void 0!==c(s).additions&&c(s).additions>0&&e(i)});var l=v(a,2),d=e=>{var t=pe(),a=r(t);o(t),h(()=>f(a,`-${c(s).deletions??""}`)),u(e,t)};n(l,e=>{void 0!==c(s).deletions&&c(s).deletions>0&&e(d)}),o(t),u(e,t)};n($,e=>{void 0===c(s).additions&&void 0===c(s).deletions||e(b)}),o(a);var S=v(a,2),q=e=>{var t=ge(),a=v(r(t),2),i=r(a,!0);o(a),o(t),h(()=>f(i,c(s).oldPath)),u(e,t)};n(S,e=>{"renamed"===c(s).type&&c(s).oldPath&&e(q)});var E=v(S,2),z=e=>{var t=he(),a=r(t,!0);o(t),h(()=>f(a,c(s).description)),u(e,t)};n(E,e=>{c(s).description&&e(z)});var A=v(E,2),C=e=>{const t=y(()=>c(s).additions+c(s).deletions),a=y(()=>c(t)>0?c(s).additions/c(t)*100:0);var i=fe(),l=r(i),n=v(l,2);o(i),h(()=>{k(l,`width: ${c(a)??""}%`),k(n,`width: ${100-c(a)}%`)}),u(e,i)};n(A,e=>{void 0!==c(s).additions&&void 0!==c(s).deletions&&e(C)}),o(t),h(e=>{f(d,e),f(x,c(s).path)},[()=>function(e){switch(e){case"added":return"â•";case"modified":return"âœï¸";case"deleted":return"ğŸ—‘ï¸";case"renamed":return"ğŸ“";default:return"ğŸ“„"}}(c(s).type)]),u(e,t)}),o(G);var H=v(G,2),B=e=>{var s=we();u(e,s)};n(H,e=>{t()&&e(B)}),h(()=>{f(b,s.changes.length),f(E,`+${c(a)??""}`),f(N,`-${c(l)??""}`)}),u(e,i)},q=e=>{var s=$e();u(e,s)};n($,e=>{s.changes.length>0?e(b):e(q,!1)}),o(w),u(e,w),p()}(v(r(s),2),{get changes(){return c(a).result.code.filesModified}}),o(s),u(e,s)};n(b,e=>{c(a).result.code?.filesModified&&c(a).result.code.filesModified.length>0&&e(q)});var E=v(b,2),z=e=>{var s=Re();!function(e,s){function t(e){return e<1e3?e.toString():e<1e6?`${(e/1e3).toFixed(1)}K`:`${(e/1e6).toFixed(1)}M`}i(s,!0);var a=oe(),l=r(a),c=e=>{var a=de(),i=x(a),l=r(i),c=v(r(l),2),d=v(r(c),2),p=r(d,!0);o(d);var w=v(d,2),y=r(w),$=r(y);o(y);var b=v(y,2),S=r(b);o(b),o(w),o(c),o(l);var q=v(l,2),E=v(r(q),2),z=v(r(E),2),k=r(z,!0);o(z),m(2),o(E),o(q);var A=v(q,2),C=v(r(A),2),D=v(r(C),2),N=r(D,!0);o(D);var T=v(D,2),M=r(T),O=r(M);o(M),o(T),o(C),o(A);var P=v(A,2),L=v(r(P),2),I=v(r(L),2),R=r(I,!0);o(I);var U=v(I,2),j=r(U),G=e=>{F(e,{variant:"neutral",children:(e,t)=>{m();var a=g();h(()=>f(a,s.metrics.provider)),u(e,a)},$$slots:{default:!0}})};n(j,e=>{s.metrics.provider&&e(G)}),o(U),o(L),o(P);var H=v(P,2),B=e=>{var t=ie(),a=v(r(t),2),i=v(r(a),2),l=r(i,!0);o(i);var c=v(i,2),d=r(c),p=e=>{var t=ae(),a=x(t),i=r(a);o(a);var l=v(a,2),n=r(l);o(l),h(()=>{f(i,`+${s.metrics.linesAdded??""}`),f(n,`-${s.metrics.linesRemoved??""}`)}),u(e,t)};n(d,e=>{void 0!==s.metrics.linesAdded&&void 0!==s.metrics.linesRemoved&&e(p)}),o(c),o(a),o(t),h(()=>f(l,s.metrics.filesModified)),u(e,t)};n(H,e=>{void 0!==s.metrics.filesModified&&e(B)});var V=v(H,2),_=e=>{var t=re(),a=v(r(t),2),i=v(r(a),2),l=r(i,!0);o(i);var c=v(i,2),d=r(c),p=e=>{var t=le(),a=x(t),i=r(a);o(a);var l=v(a,2),n=r(l);o(l),h(()=>{f(i,`${s.metrics.testsPassed??""} passed`),f(n,`${s.metrics.testsFailed??""} failed`)}),u(e,t)};n(d,e=>{void 0!==s.metrics.testsPassed&&void 0!==s.metrics.testsFailed&&e(p)}),o(c),o(a),o(t),h(()=>f(l,s.metrics.testsRun)),u(e,t)};n(V,e=>{void 0!==s.metrics.testsRun&&e(_)}),o(i);var K=v(i,2),W=e=>{var s=ne();u(e,s)};n(K,e=>{s.metrics.tokensUsed>1e5&&e(W)});var J=v(K,2),Q=e=>{var s=ce();u(e,s)};n(J,e=>{s.metrics.duration>3e5&&e(Q)}),h((e,t,a,i,l,r,n)=>{f(p,e),f($,`Input: ${t??""}`),f(S,`Output: ${a??""}`),f(k,i),f(N,l),f(O,`${r??""} -\n\t\t\t\t\t\t\t${n??""}`),f(R,s.metrics.modelUsed||"Unknown")},[()=>t(s.metrics.tokensUsed),()=>t(s.metrics.inputTokens),()=>t(s.metrics.outputTokens),()=>`$${s.metrics.cost.toFixed(4)}`,()=>{return(e=s.metrics.duration)<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`;var e},()=>s.metrics.startTime?new Date(s.metrics.startTime).toLocaleTimeString():"",()=>s.metrics.endTime?new Date(s.metrics.endTime).toLocaleTimeString():""]),u(e,a)},d=e=>{var s=ve();u(e,s)};n(l,e=>{s.metrics?e(c):e(d,!1)}),o(a),u(e,a),p()}(v(r(s),2),{get metrics(){return c(a).result.metrics}}),o(s),u(e,s)};n(E,e=>{c(a).result.metrics&&e(z)}),o(t),u(e,t)},$$slots:{default:!0}})},w=s=>{var t=D(),i=x(t),l=e=>{M(e,{title:"Execution Failed",children:(e,s)=>{var t=Ge(),i=v(r(t),4),l=e=>{var s=je(),t=r(s,!0);o(s),h(()=>f(t,c(a).error)),u(e,s)};n(i,e=>{c(a).error&&e(l)}),o(t),u(e,t)},$$slots:{default:!0}})};n(i,s=>{c(a).status===e.FAILED&&s(l)},!0),u(s,t)};n(l,s=>{c(a).status===e.COMPLETED&&c(a).result?s(d):s(w,!1)},!0),u(s,t)};n(w,s=>{c(a).status===e.RUNNING?s($):s(b,!1)}),u(s,t)},P=e=>{M(e,{title:"Welcome",children:(e,s)=>{var t=He();u(e,t)},$$slots:{default:!0}})};n(T,e=>{c(a)?e(O):e(P,!1)}),o(N),o($),o(w),u(s,w)},$$slots:{default:!0}}),p()}export{Ve as component};
