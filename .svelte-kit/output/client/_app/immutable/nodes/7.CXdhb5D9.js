const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/rGkJ1ux3.js","../chunks/CS1oB8eq.js","../chunks/CMwj8c2F.js","../chunks/DtwQeeDy.js","../assets/LineChart.Barpiufm.css","../chunks/N3snzL0i.js","../assets/BarChart.CDyFXi3S.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{_ as s}from"../chunks/CTSyBIan.js";import{o as a,d as l,e as r,i,k as v,l as o,p as d,g as n,j as c,q as g,a as h,s as m,I as u,y as p,z as b,A as $,r as f,m as y,h as S,x as k,Y as C,G as R,H as T,n as x}from"../chunks/CS1oB8eq.js";import{S as A}from"../chunks/D4deE_xW.js";import{B as D}from"../chunks/B_xsWB_l.js";import{P as w}from"../chunks/BcpFO3YO.js";import{B as L}from"../chunks/BXiH49b8.js";const U=new class{constructor(){t(this,"storageKey","execution_history")}getHistory(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return[]}}filterByTimeRange(e,t){if("all"===t)return e;const s=new Date;let a;switch(t){case"24h":a=new Date(s.getTime()-864e5);break;case"7d":a=new Date(s.getTime()-6048e5);break;case"30d":a=new Date(s.getTime()-2592e6);break;default:return e}return e.filter(e=>new Date(e.timestamp)>=a)}getAnalytics(e="7d"){const t=this.getHistory(),s=this.filterByTimeRange(t,e);if(0===s.length)return this.getEmptyAnalytics();const a=s.length,l=s.filter(e=>e.success).length/a*100,r=100-l,i=s.filter(e=>void 0!==e.metadata.latency).map(e=>e.metadata.latency),v=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:0,o=s.reduce((e,t)=>e+(t.metadata.cost||0),0),d=new Map;s.forEach(e=>{d.has(e.skillId)||d.set(e.skillId,{entries:[],name:e.skillName}),d.get(e.skillId).entries.push(e)});const n=Array.from(d.entries()).map(([e,{entries:t,name:s}])=>{const a=t.filter(e=>e.success).length,l=t.reduce((e,t)=>e+(t.metadata.cost||0),0),r=t.filter(e=>void 0!==e.metadata.latency).map(e=>e.metadata.latency),i=r.length>0?r.reduce((e,t)=>e+t,0)/r.length:0;return{skillId:e,skillName:s,count:t.length,successRate:a/t.length*100,avgCost:l/t.length,avgLatency:i}}).sort((e,t)=>t.count-e.count).slice(0,10),c=new Map;s.forEach(e=>{const t=e.metadata.model||"Unknown";c.has(t)||c.set(t,[]),c.get(t).push(e)});return{totalInvocations:a,successRate:l,avgResponseTime:v,totalCost:o,topSkills:n,modelUsage:Array.from(c.entries()).map(([e,t])=>{const s=t.filter(e=>e.success).length,a=t.reduce((e,t)=>e+(t.metadata.cost||0),0),l=t.filter(e=>void 0!==e.metadata.latency).map(e=>e.metadata.latency),r=l.length>0?l.reduce((e,t)=>e+t,0)/l.length:0;return{model:e,count:t.length,avgResponseTime:r,totalCost:a,successRate:s/t.length*100}}).sort((e,t)=>t.count-e.count),errorRate:r,timeSeriesData:this.generateTimeSeries(s,e),costTrend:this.generateCostTrend(s,e)}}generateTimeSeries(e,t){const s=new Map;e.forEach(e=>{const a=(e=>"24h"===t?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:00`:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`)(new Date(e.timestamp));s.has(a)||s.set(a,[]),s.get(a).push(e)});return Array.from(s.entries()).map(([e,t])=>({date:e,invocations:t.length,errors:t.filter(e=>!e.success).length,cost:t.reduce((e,t)=>e+(t.metadata.cost||0),0)})).sort((e,t)=>e.date.localeCompare(t.date))}generateCostTrend(e,t){const s=new Map;e.forEach(e=>{const a=(e=>"24h"===t?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:00`:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`)(new Date(e.timestamp));s.has(a)||s.set(a,[]),s.get(a).push(e)});return Array.from(s.entries()).map(([e,t])=>({date:e,cost:t.reduce((e,t)=>e+(t.metadata.cost||0),0),invocations:t.length})).sort((e,t)=>e.date.localeCompare(t.date))}getEmptyAnalytics(){return{totalInvocations:0,successRate:0,avgResponseTime:0,totalCost:0,topSkills:[],modelUsage:[],errorRate:0,timeSeriesData:[],costTrend:[]}}exportToCSV(e="7d"){const t=this.getAnalytics(e),s=[];return s.push("Analytics Summary"),s.push(`Time Range,${e}`),s.push(`Total Invocations,${t.totalInvocations}`),s.push(`Success Rate,${t.successRate.toFixed(2)}%`),s.push(`Error Rate,${t.errorRate.toFixed(2)}%`),s.push(`Average Response Time,${t.avgResponseTime.toFixed(3)}s`),s.push(`Total Cost,$${t.totalCost.toFixed(4)}`),s.push(""),s.push("Top Skills by Usage"),s.push("Skill ID,Skill Name,Count,Success Rate,Avg Cost,Avg Latency"),t.topSkills.forEach(e=>{s.push(`${e.skillId},${e.skillName},${e.count},${e.successRate.toFixed(2)}%,$${e.avgCost.toFixed(4)},${e.avgLatency.toFixed(3)}s`)}),s.push(""),s.push("Model Usage Breakdown"),s.push("Model,Count,Avg Response Time,Total Cost,Success Rate"),t.modelUsage.forEach(e=>{s.push(`${e.model},${e.count},${e.avgResponseTime.toFixed(3)}s,$${e.totalCost.toFixed(4)},${e.successRate.toFixed(2)}%`)}),s.push(""),s.push("Time Series Data"),s.push("Date,Invocations,Errors,Cost"),t.timeSeriesData.forEach(e=>{s.push(`${e.date},${e.invocations},${e.errors},$${e.cost.toFixed(4)}`)}),s.join("\n")}downloadCSV(e="7d"){const t=this.exportToCSV(e),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(s),r=(new Date).toISOString().split("T")[0];a.setAttribute("href",l),a.setAttribute("download",`vibeforge_analytics_${e}_${r}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)}};var I=r('<div class="loading-state svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p>Loading analytics...</p></div>'),F=r('<div class="metric-card svelte-1m0gshv"><div class="metric-icon svelte-1m0gshv">ðŸ“Š</div> <div class="metric-content svelte-1m0gshv"><div class="metric-label svelte-1m0gshv">Total Invocations</div> <div class="metric-value svelte-1m0gshv"> </div></div></div>'),E=r('<div class="metric-card svelte-1m0gshv"><div class="metric-icon svelte-1m0gshv">âœ…</div> <div class="metric-content svelte-1m0gshv"><div class="metric-label svelte-1m0gshv">Success Rate</div> <div class="metric-value svelte-1m0gshv"><!></div></div></div>'),_=r('<div class="metric-card svelte-1m0gshv"><div class="metric-icon svelte-1m0gshv">âš¡</div> <div class="metric-content svelte-1m0gshv"><div class="metric-label svelte-1m0gshv">Avg Response Time</div> <div class="metric-value svelte-1m0gshv"> </div></div></div>'),j=r('<div class="metric-card svelte-1m0gshv"><div class="metric-icon svelte-1m0gshv">ðŸ’°</div> <div class="metric-content svelte-1m0gshv"><div class="metric-label svelte-1m0gshv">Total Cost</div> <div class="metric-value svelte-1m0gshv"> </div></div></div>'),M=r('<div class="chart-loading svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p class="svelte-1m0gshv">Loading chart...</p></div>'),B=r('<h2 class="chart-title svelte-1m0gshv">Invocations & Errors Over Time</h2> <!>',1),V=r('<div class="chart-loading svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p class="svelte-1m0gshv">Loading chart...</p></div>'),N=r('<h2 class="chart-title svelte-1m0gshv">Cost Trend</h2> <!>',1),O=r('<div class="chart-loading svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p class="svelte-1m0gshv">Loading chart...</p></div>'),H=r('<h2 class="chart-title svelte-1m0gshv">Top 10 Skills by Usage</h2> <!>',1),Y=r('<div class="chart-loading svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p class="svelte-1m0gshv">Loading chart...</p></div>'),P=r('<h2 class="chart-title svelte-1m0gshv">Model Usage Distribution</h2> <!>',1),z=r('<tr class="svelte-1m0gshv"><td class="svelte-1m0gshv"><!></td><td class="svelte-1m0gshv"><div class="skill-name svelte-1m0gshv"> </div> <div class="skill-id svelte-1m0gshv"> </div></td><td class="text-right svelte-1m0gshv"> </td><td class="text-right svelte-1m0gshv"><!></td><td class="text-right svelte-1m0gshv"> </td><td class="text-right svelte-1m0gshv"> </td></tr>'),K=r('<h2 class="section-title svelte-1m0gshv">Top Skills by Usage</h2> <div class="table-container svelte-1m0gshv"><table class="skills-table svelte-1m0gshv"><thead><tr class="svelte-1m0gshv"><th class="svelte-1m0gshv">Rank</th><th class="svelte-1m0gshv">Skill</th><th class="text-right svelte-1m0gshv">Usage</th><th class="text-right svelte-1m0gshv">Success Rate</th><th class="text-right svelte-1m0gshv">Avg Cost</th><th class="text-right svelte-1m0gshv">Avg Latency</th></tr></thead><tbody></tbody></table></div>',1),J=r('<tr class="svelte-1m0gshv"><td class="svelte-1m0gshv"><div class="model-name svelte-1m0gshv"> </div></td><td class="text-right svelte-1m0gshv"> </td><td class="text-right svelte-1m0gshv"><!></td><td class="text-right svelte-1m0gshv"> </td><td class="text-right svelte-1m0gshv"> </td></tr>'),W=r('<h2 class="section-title svelte-1m0gshv">Model Usage Statistics</h2> <div class="table-container svelte-1m0gshv"><table class="skills-table svelte-1m0gshv"><thead><tr class="svelte-1m0gshv"><th class="svelte-1m0gshv">Model</th><th class="text-right svelte-1m0gshv">Usage</th><th class="text-right svelte-1m0gshv">Success Rate</th><th class="text-right svelte-1m0gshv">Avg Response Time</th><th class="text-right svelte-1m0gshv">Total Cost</th></tr></thead><tbody></tbody></table></div>',1),q=r('<div class="metrics-grid svelte-1m0gshv"><!> <!> <!> <!></div> <div class="charts-row svelte-1m0gshv"><!></div> <div class="charts-row svelte-1m0gshv"><!></div> <div class="charts-grid svelte-1m0gshv"><!> <!></div> <!> <!>',1),G=r('<div class="empty-state svelte-1m0gshv"><div class="empty-icon svelte-1m0gshv">ðŸ“Š</div> <h2 class="empty-title svelte-1m0gshv">No Analytics Data Available</h2> <p class="empty-message svelte-1m0gshv">Start using skills to see analytics and insights. Your usage statistics will appear here.</p> <!></div>'),Q=r('<div class="analytics-container svelte-1m0gshv"><div class="page-header svelte-1m0gshv"><div class="header-content svelte-1m0gshv"><h1 class="page-title svelte-1m0gshv">Analytics Dashboard</h1> <p class="page-description svelte-1m0gshv">Track usage, performance, and costs across all skills</p></div> <div class="header-actions svelte-1m0gshv"><!> <!> <!></div></div> <!></div>');function X(e,t){d(t,!0);const r=s(()=>import("../chunks/rGkJ1ux3.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url),X=s(()=>import("../chunks/N3snzL0i.js"),__vite__mapDeps([5,1,2,3,6]),import.meta.url);let Z=m(null),ee=m(!0),te=m("7d"),se=m(!1);const ae=[{value:"24h",label:"Last 24 Hours"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"all",label:"All Time"}];function le(){h(ee,!0);try{h(Z,U.getAnalytics(n(te)),!0)}catch(e){}finally{h(ee,!1)}}function re(e){return`$${e.toFixed(4)}`}function ie(e){return`${e.toFixed(1)}%`}function ve(e){return e<1?`${(1e3*e).toFixed(0)}ms`:`${e.toFixed(2)}s`}function oe(e){return e>=95?"success":e>=85?"warning":"error"}a(()=>{le()}),l(()=>{n(te),le()});let de=k(()=>n(Z)?{labels:n(Z).timeSeriesData.map(e=>e.date),datasets:[{label:"Invocations",data:n(Z).timeSeriesData.map(e=>e.invocations),borderColor:"rgb(197, 167, 123)",backgroundColor:"rgba(197, 167, 123, 0.1)",fill:!0,tension:.4},{label:"Errors",data:n(Z).timeSeriesData.map(e=>e.errors),borderColor:"rgb(220, 68, 68)",backgroundColor:"rgba(220, 68, 68, 0.1)",fill:!0,tension:.4}]}:{labels:[],datasets:[]}),ne=k(()=>n(Z)?{labels:n(Z).costTrend.map(e=>e.date),datasets:[{label:"Cost ($)",data:n(Z).costTrend.map(e=>e.cost),borderColor:"rgb(45, 212, 191)",backgroundColor:"rgba(45, 212, 191, 0.1)",fill:!0,tension:.4}]}:{labels:[],datasets:[]}),ce=k(()=>n(Z)?{labels:n(Z).topSkills.slice(0,10).map(e=>e.skillName),datasets:[{label:"Usage Count",data:n(Z).topSkills.slice(0,10).map(e=>e.count),backgroundColor:n(Z).topSkills.slice(0,10).map(()=>"rgba(197, 167, 123, 0.7)"),borderColor:n(Z).topSkills.slice(0,10).map(()=>"rgb(197, 167, 123)"),borderWidth:1}]}:{labels:[],datasets:[]}),ge=k(()=>{if(!n(Z))return{labels:[],datasets:[]};const e=["rgba(197, 167, 123, 0.7)","rgba(45, 212, 191, 0.7)","rgba(99, 102, 241, 0.7)","rgba(236, 72, 153, 0.7)"];return{labels:n(Z).modelUsage.map(e=>e.model),datasets:[{label:"Usage Count",data:n(Z).modelUsage.map(e=>e.count),backgroundColor:e.slice(0,n(Z).modelUsage.length),borderColor:e.map(e=>e.replace("0.7","1")).slice(0,n(Z).modelUsage.length),borderWidth:1}]}});var he=Q(),me=g(he),ue=c(g(me),2),pe=g(ue);A(pe,{get options(){return ae},get value(){return n(te)},set value(e){h(te,e,!0)}});var be=c(pe,2);D(be,{variant:"secondary",size:"sm",onclick:function(){h(se,!0),setTimeout(()=>{le(),h(se,!1)},500)},get loading(){return n(se)},children:(e,t)=>{u();var s=p();b(()=>$(s,n(se)?"Refreshing...":"Refresh")),v(e,s)},$$slots:{default:!0}});var $e=c(be,2);D($e,{variant:"primary",size:"sm",onclick:function(){try{U.downloadCSV(n(te))}catch(e){alert("Failed to export CSV. Please try again.")}},children:(e,t)=>{u();var s=p("Export CSV");v(e,s)},$$slots:{default:!0}}),f(ue),f(me);var fe=c(me,2),ye=e=>{var t=I();v(e,t)},Se=e=>{var t=y(),s=S(t),a=e=>{var t=q(),s=S(t),a=g(s);w(a,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=F(),a=c(g(s),2),l=c(g(a),2),r=g(l,!0);f(l),f(a),f(s),b(e=>$(r,e),[()=>n(Z).totalInvocations.toLocaleString()]),v(e,s)},$$slots:{default:!0}});var l=c(a,2);w(l,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=E(),a=c(g(s),2),l=c(g(a),2),r=g(l);{let e=k(()=>oe(n(Z).successRate));L(r,{get variant(){return n(e)},children:(e,t)=>{u();var s=p();b(e=>$(s,e),[()=>ie(n(Z).successRate)]),v(e,s)},$$slots:{default:!0}})}f(l),f(a),f(s),v(e,s)},$$slots:{default:!0}});var i=c(l,2);w(i,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=_(),a=c(g(s),2),l=c(g(a),2),r=g(l,!0);f(l),f(a),f(s),b(e=>$(r,e),[()=>ve(n(Z).avgResponseTime)]),v(e,s)},$$slots:{default:!0}});var o=c(i,2);w(o,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=j(),a=c(g(s),2),l=c(g(a),2),r=g(l,!0);f(l),f(a),f(s),b(e=>$(r,e),[()=>re(n(Z).totalCost)]),v(e,s)},$$slots:{default:!0}}),f(s);var d=c(s,2),h=g(d);w(h,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=B(),a=c(S(s),2);C(a,()=>r,e=>{var t=M();v(e,t)},(e,t)=>{var s=k(()=>{var{default:e}=n(t);return{LineChart:e}}),a=k(()=>n(s).LineChart),l=y(),r=S(l);x(r,()=>n(a),(e,t)=>{t(e,{get labels(){return n(de).labels},get datasets(){return n(de).datasets},height:300})}),v(e,l)}),v(e,s)},$$slots:{default:!0}}),f(d);var m=c(d,2),A=g(m);w(A,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=N(),a=c(S(s),2);C(a,()=>r,e=>{var t=V();v(e,t)},(e,t)=>{var s=k(()=>{var{default:e}=n(t);return{LineChart:e}}),a=k(()=>n(s).LineChart),l=y(),r=S(l);x(r,()=>n(a),(e,t)=>{t(e,{get labels(){return n(ne).labels},get datasets(){return n(ne).datasets},height:300})}),v(e,l)}),v(e,s)},$$slots:{default:!0}}),f(m);var D=c(m,2),U=g(D);w(U,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=H(),a=c(S(s),2);C(a,()=>X,e=>{var t=O();v(e,t)},(e,t)=>{var s=k(()=>{var{default:e}=n(t);return{BarChart:e}}),a=k(()=>n(s).BarChart),l=y(),r=S(l);x(r,()=>n(a),(e,t)=>{t(e,{get labels(){return n(ce).labels},get datasets(){return n(ce).datasets},height:350,horizontal:!0})}),v(e,l)}),v(e,s)},$$slots:{default:!0}});var I=c(U,2);w(I,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=P(),a=c(S(s),2);C(a,()=>X,e=>{var t=Y();v(e,t)},(e,t)=>{var s=k(()=>{var{default:e}=n(t);return{BarChart:e}}),a=k(()=>n(s).BarChart),l=y(),r=S(l);x(r,()=>n(a),(e,t)=>{t(e,{get labels(){return n(ge).labels},get datasets(){return n(ge).datasets},height:350})}),v(e,l)}),v(e,s)},$$slots:{default:!0}}),f(D);var G=c(D,2);w(G,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=K(),a=c(S(s),2),l=g(a),r=c(g(l));R(r,21,()=>n(Z).topSkills.slice(0,10),T,(e,t,s)=>{var a=z(),l=g(a),r=g(l);L(r,{variant:"default",children:(e,t)=>{u();var a=p();a.nodeValue=s+1,v(e,a)},$$slots:{default:!0}}),f(l);var i=c(l),o=g(i),d=g(o,!0);f(o);var h=c(o,2),m=g(h,!0);f(h),f(i);var y=c(i),S=g(y,!0);f(y);var C=c(y),R=g(C);{let e=k(()=>oe(n(t).successRate));L(R,{get variant(){return n(e)},children:(e,s)=>{u();var a=p();b(e=>$(a,e),[()=>ie(n(t).successRate)]),v(e,a)},$$slots:{default:!0}})}f(C);var T=c(C),x=g(T,!0);f(T);var A=c(T),D=g(A,!0);f(A),f(a),b((e,s)=>{$(d,n(t).skillName),$(m,n(t).skillId),$(S,n(t).count),$(x,e),$(D,s)},[()=>re(n(t).avgCost),()=>ve(n(t).avgLatency)]),v(e,a)}),f(r),f(l),f(a),v(e,s)},$$slots:{default:!0}});var Q=c(G,2);w(Q,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=W(),a=c(S(s),2),l=g(a),r=c(g(l));R(r,21,()=>n(Z).modelUsage,T,(e,t)=>{var s=J(),a=g(s),l=g(a),r=g(l,!0);f(l),f(a);var i=c(a),o=g(i,!0);f(i);var d=c(i),h=g(d);{let e=k(()=>oe(n(t).successRate));L(h,{get variant(){return n(e)},children:(e,s)=>{u();var a=p();b(e=>$(a,e),[()=>ie(n(t).successRate)]),v(e,a)},$$slots:{default:!0}})}f(d);var m=c(d),y=g(m,!0);f(m);var S=c(m),C=g(S,!0);f(S),f(s),b((e,s)=>{$(r,n(t).model),$(o,n(t).count),$(y,e),$(C,s)},[()=>ve(n(t).avgResponseTime),()=>re(n(t).totalCost)]),v(e,s)}),f(r),f(l),f(a),v(e,s)},$$slots:{default:!0}}),v(e,t)},l=e=>{w(e,{variant:"elevated",padding:"lg",children:(e,t)=>{var s=G(),a=c(g(s),6);D(a,{variant:"primary",href:"/library",children:(e,t)=>{u();var s=p("Browse Skills");v(e,s)},$$slots:{default:!0}}),f(s),v(e,s)},$$slots:{default:!0}})};i(s,e=>{n(Z)&&n(Z).totalInvocations>0?e(a):e(l,!1)},!0),v(e,t)};i(fe,e=>{n(ee)?e(ye):e(Se,!1)}),f(he),v(e,he),o()}export{X as component};
