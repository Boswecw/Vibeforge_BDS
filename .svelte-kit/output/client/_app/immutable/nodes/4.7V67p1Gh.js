import{d as nt,f as _,a as n,s as o,c as Ge}from"../chunks/BWn2BPgY.js";import{E as pt,W as p,b as Me,F as _t,Q as dt,a as e,J as s,I as l,s as i,G as g,H as gt,K as a,X as ke,Y as Qe}from"../chunks/BK1-blpL.js";import{i as M}from"../chunks/ldDS4Rmg.js";import{e as Q,r as ut,i as fe,s as kt}from"../chunks/BNZNmRyj.js";import{s as P}from"../chunks/3UtIMOOd.js";import{b as ft}from"../chunks/CcQZ5k52.js";import{b as R}from"../chunks/BIN6PlxU.js";import{s as mt}from"../chunks/BP9EfBHl.js";var bt=_("<option> </option>"),yt=_("<option> </option>"),ht=_('<div class="loading-state svelte-c8k2rg"><div class="spinner svelte-c8k2rg"></div> <p>Loading skills...</p></div>'),xt=_('<div class="error-state svelte-c8k2rg"><p class="error-message svelte-c8k2rg"> </p> <button class="btn-retry svelte-c8k2rg">Retry</button></div>'),Ct=_('<div class="empty-state svelte-c8k2rg"><p>No skills found matching your filters.</p> <button class="btn-clear svelte-c8k2rg">Clear Filters</button></div>'),St=_('<span class="tag svelte-c8k2rg"> </span>'),wt=_('<span class="tag-more svelte-c8k2rg"> </span>'),Lt=_('<a><div class="skill-header svelte-c8k2rg"><h3 class="skill-name svelte-c8k2rg"> </h3> <span> </span></div> <p class="skill-description svelte-c8k2rg"> </p> <div class="skill-meta svelte-c8k2rg"><span class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Section:</span> </span> <span class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Category:</span> </span></div> <div class="skill-tags svelte-c8k2rg"><!> <!></div> <div class="skill-cost svelte-c8k2rg"><span class="cost-label svelte-c8k2rg">Est. Cost:</span> <span class="cost-value svelte-c8k2rg"> </span></div></a>'),At=_("<div></div>"),Ft=_('<div class="library-container svelte-c8k2rg"><div class="library-header svelte-c8k2rg"><div class="header-top svelte-c8k2rg"><h1 class="svelte-c8k2rg">Skill Library</h1> <div class="stats svelte-c8k2rg"><span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">Total:</span> <span class="stat-value svelte-c8k2rg"> </span></span> <span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">Public:</span> <span class="stat-value public svelte-c8k2rg"> </span></span> <span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">BDS Only:</span> <span class="stat-value bds svelte-c8k2rg"> </span></span></div></div> <div class="filters svelte-c8k2rg"><div class="filter-row svelte-c8k2rg"><input type="text" placeholder="Search skills..." class="search-input svelte-c8k2rg"/> <select class="filter-select svelte-c8k2rg"><option>All Sections</option><!></select> <select class="filter-select svelte-c8k2rg"><option>All Categories</option><!></select> <select class="filter-select svelte-c8k2rg"><option>All Access</option><option>Public</option><option>BDS Only</option></select> <button class="btn-clear svelte-c8k2rg">Clear Filters</button></div> <div class="controls-row svelte-c8k2rg"><div class="sort-controls svelte-c8k2rg"><label for="sort-select" class="svelte-c8k2rg">Sort by:</label> <select id="sort-select" class="sort-select svelte-c8k2rg"><option>Name</option><option>Section</option><option>Category</option></select></div> <div class="view-controls svelte-c8k2rg"><button>Grid</button> <button>List</button></div> <div class="result-count svelte-c8k2rg"> </div></div></div></div> <div class="library-content svelte-c8k2rg"><!></div></div>');function Yt(Re,Ue){pt(Ue,!0);let u=p(Me([])),E=p(Me([])),U=p(!0),q=p(null),h=p(""),x=p("all"),C=p("all"),S=p("all"),w=p("grid"),L=p("name"),qe=ke(()=>{const t=new Set(e(u).map(r=>r.section));return["all",...Array.from(t)]}),He=ke(()=>{const t=new Set(e(u).map(r=>r.category));return["all",...Array.from(t)]}),$=ke(()=>({total:e(u).length,public:e(u).filter(t=>t.access==="PUBLIC").length,bdsOnly:e(u).filter(t=>t.access==="BDS_ONLY").length,filtered:e(E).length}));_t(async()=>{try{i(u,await mt.getAllSkills(),!0),me(),i(U,!1)}catch(t){i(q,t instanceof Error?t.message:"Failed to load skills",!0),i(U,!1)}});function me(){let t=[...e(u)];if(e(h).trim()){const r=e(h).toLowerCase();t=t.filter(v=>v.name.toLowerCase().includes(r)||v.description.toLowerCase().includes(r)||v.tags.some(k=>k.toLowerCase().includes(r)))}e(x)!=="all"&&(t=t.filter(r=>r.section===e(x))),e(C)!=="all"&&(t=t.filter(r=>r.category===e(C))),e(S)!=="all"&&(t=t.filter(r=>r.access===e(S))),t.sort((r,v)=>e(L)==="name"?r.name.localeCompare(v.name):e(L)==="section"?r.section.localeCompare(v.section):e(L)==="category"?r.category.localeCompare(v.category):0),i(E,t,!0)}dt(()=>{e(h),e(x),e(C),e(S),e(L),me()});function be(){i(h,""),i(x,"all"),i(C,"all"),i(S,"all")}var H=Ft(),J=s(H),K=s(J),ye=l(s(K),2),T=s(ye),he=l(s(T),2),Je=s(he,!0);a(he),a(T);var W=l(T,2),xe=l(s(W),2),Ke=s(xe,!0);a(xe),a(W);var Ce=l(W,2),Se=l(s(Ce),2),Te=s(Se,!0);a(Se),a(Ce),a(ye),a(K);var we=l(K,2),X=s(we),j=s(X);ut(j);var I=l(j,2),z=s(I);z.value=z.__value="all";var We=l(z);Q(We,17,()=>e(qe).slice(1),fe,(t,r)=>{var v=bt(),k=s(v,!0);a(v);var f={};g(()=>{o(k,e(r)),f!==(f=e(r))&&(v.value=(v.__value=e(r))??"")}),n(t,v)}),a(I);var Y=l(I,2),V=s(Y);V.value=V.__value="all";var Xe=l(V);Q(Xe,17,()=>e(He).slice(1),fe,(t,r)=>{var v=yt(),k=s(v,!0);a(v);var f={};g(()=>{o(k,e(r)),f!==(f=e(r))&&(v.value=(v.__value=e(r))??"")}),n(t,v)}),a(Y);var G=l(Y,2),Z=s(G);Z.value=Z.__value="all";var ee=l(Z);ee.value=ee.__value="PUBLIC";var Le=l(ee);Le.value=Le.__value="BDS_ONLY",a(G);var je=l(G,2);je.__click=be,a(X);var Ae=l(X,2),te=s(Ae),ae=l(s(te),2),se=s(ae);se.value=se.__value="name";var le=l(se);le.value=le.__value="section";var Fe=l(le);Fe.value=Fe.__value="category",a(ae),a(te);var re=l(te,2),ve=s(re);ve.__click=()=>i(w,"grid");let Be;var $e=l(ve,2);$e.__click=()=>i(w,"list");let Oe;a(re);var De=l(re,2),ze=s(De);a(De),a(Ae),a(we),a(J);var Ne=l(J,2),Ve=s(Ne);{var Ze=t=>{var r=ht();n(t,r)},et=t=>{var r=Ge(),v=Qe(r);{var k=A=>{var F=xt(),O=s(F),ie=s(O,!0);a(O);var oe=l(O,2);oe.__click=()=>window.location.reload(),a(F),g(()=>o(ie,e(q))),n(A,F)},f=A=>{var F=Ge(),O=Qe(F);{var ie=B=>{var d=Ct(),D=l(s(d),2);D.__click=be,a(d),n(B,d)},oe=B=>{var d=At();Q(d,21,()=>e(E),D=>D.id,(D,c)=>{var N=Lt(),ce=s(N),ne=s(ce),tt=s(ne,!0);a(ne);var pe=l(ne,2),at=s(pe,!0);a(pe),a(ce);var _e=l(ce,2),st=s(_e,!0);a(_e);var de=l(_e,2),ge=s(de),lt=l(s(ge));a(ge);var Pe=l(ge,2),rt=l(s(Pe));a(Pe),a(de);var ue=l(de,2),Ee=s(ue);Q(Ee,17,()=>e(c).tags.slice(0,3),fe,(m,b)=>{var y=St(),ct=s(y,!0);a(y),g(()=>o(ct,e(b))),n(m,y)});var vt=l(Ee,2);{var it=m=>{var b=wt(),y=s(b);a(b),g(()=>o(y,`+${e(c).tags.length-3}`)),n(m,b)};M(vt,m=>{e(c).tags.length>3&&m(it)})}a(ue);var Ie=l(ue,2),Ye=l(s(Ie),2),ot=s(Ye);a(Ye),a(Ie),a(N),g((m,b,y)=>{kt(N,"href",`/library/${e(c).id??""}`),P(N,1,`skill-card ${e(w)??""}`,"svelte-c8k2rg"),o(tt,e(c).name),P(pe,1,`skill-access ${m??""}`,"svelte-c8k2rg"),o(at,e(c).access),o(st,e(c).description),o(lt,` ${e(c).section??""}`),o(rt,` ${e(c).category??""}`),o(ot,`$${b??""} - $${y??""}`)},[()=>e(c).access.toLowerCase(),()=>e(c).estimatedCost.min.toFixed(3),()=>e(c).estimatedCost.max.toFixed(3)]),n(D,N)}),a(d),g(()=>P(d,1,`skills-${e(w)??""}`,"svelte-c8k2rg")),n(B,d)};M(O,B=>{e(E).length===0?B(ie):B(oe,!1)},!0)}n(A,F)};M(v,A=>{e(q)?A(k):A(f,!1)},!0)}n(t,r)};M(Ve,t=>{e(U)?t(Ze):t(et,!1)})}a(Ne),a(H),g(()=>{o(Je,e($).total),o(Ke,e($).public),o(Te,e($).bdsOnly),Be=P(ve,1,"btn-view svelte-c8k2rg",null,Be,{active:e(w)==="grid"}),Oe=P($e,1,"btn-view svelte-c8k2rg",null,Oe,{active:e(w)==="list"}),o(ze,`${e($).filtered??""} skill${e($).filtered!==1?"s":""}`)}),ft(j,()=>e(h),t=>i(h,t)),R(I,()=>e(x),t=>i(x,t)),R(Y,()=>e(C),t=>i(C,t)),R(G,()=>e(S),t=>i(S,t)),R(ae,()=>e(L),t=>i(L,t)),n(Re,H),gt()}nt(["click"]);export{Yt as component};
