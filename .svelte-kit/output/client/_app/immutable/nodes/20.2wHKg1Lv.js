import{f as w,a as v,t as C,c as Ve}from"../chunks/9XWdspYM.js";import{o as Ye}from"../chunks/pKpJ46-q.js";import{p as Ge,al as B,a5 as ze,t as F,j as He,b as r,c as s,x as ve,s as i,i as e,g as t,ak as $,aj as V}from"../chunks/Cr9rJIyK.js";import{d as Ke,i as Y,s as g}from"../chunks/O9ATySAj.js";import{e as be}from"../chunks/BEZi9W-P.js";import{s as Le}from"../chunks/DPb1oAxt.js";import"../chunks/BsLrHCZA.js";import"../chunks/C2WxzHaP.js";import"../chunks/DsSU34pe.js";import{P as oe,B as G}from"../chunks/Ci9HWMjh.js";import{I as xe}from"../chunks/DBn6PFen.js";import{S as Qe}from"../chunks/Dh-X1iYj.js";import{B as ye}from"../chunks/CJmKRmqT.js";import{A as Ue}from"../chunks/CWNTjX5g.js";import{s as Xe}from"../chunks/2kpl1my0.js";var Ze=w(`The visual workflow builder is under development. You can create and manage workflows by
		chaining multiple skills together. This feature will support: <ul><li>Drag-and-drop workflow building</li> <li>Conditional branching and loops</li> <li>Data passing between skills</li> <li>Workflow templates and sharing</li> <li>Execution scheduling and monitoring</li></ul>`,1),et=w('<div class="create-workflow-form svelte-1k5z4u1"><!> <!> <div class="form-actions svelte-1k5z4u1"><!> <!></div></div>'),tt=w('<div class="empty-state svelte-1k5z4u1"><p>No workflows yet. Create your first workflow to get started.</p></div>'),st=w('<div role="button" tabindex="0"><div class="workflow-info svelte-1k5z4u1"><div class="workflow-name svelte-1k5z4u1"> </div> <div class="workflow-description svelte-1k5z4u1"> </div> <div class="workflow-meta svelte-1k5z4u1"><!> <span class="workflow-steps svelte-1k5z4u1"> </span></div></div> <!></div>'),at=w('<div class="workflows-list svelte-1k5z4u1"></div>'),rt=w('<div class="section-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1">My Workflows</h2> <!></div> <!> <!>',1),lt=w('<div class="empty-state svelte-1k5z4u1"><p>No steps added yet. Add skills below to build your workflow.</p></div>'),it=w('<div class="step-connector svelte-1k5z4u1">â†“</div>'),vt=w('<div class="step-card svelte-1k5z4u1"><div class="step-number svelte-1k5z4u1"> </div> <div class="step-content svelte-1k5z4u1"><div class="step-name svelte-1k5z4u1"> </div> <code class="step-id svelte-1k5z4u1"> </code></div> <!></div> <!>',1),ot=w('<div class="steps-list svelte-1k5z4u1"></div>'),dt=w('<div class="workflow-builder svelte-1k5z4u1"><div class="builder-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1"> </h2> <!></div> <p class="builder-description svelte-1k5z4u1"> </p> <div class="steps-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Workflow Steps</h3> <!></div> <div class="add-step-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Add Step</h3> <div class="add-step-form"><!></div></div></div>'),nt=w('<div class="no-selection svelte-1k5z4u1"><p>Select a workflow from the list to view and edit its steps.</p></div>'),ut=w('<div class="workflows-container svelte-1k5z4u1"><div class="page-header svelte-1k5z4u1"><div class="header-content svelte-1k5z4u1"><h1 class="page-title svelte-1k5z4u1">Skill Workflows</h1> <p class="page-description svelte-1k5z4u1">Build multi-step workflows by chaining skills together for complex automation</p></div> <div class="stats-row svelte-1k5z4u1"><div class="stat-item svelte-1k5z4u1"><span class="stat-value svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Total</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value default svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Draft</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value success svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Active</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value warning svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Archived</span></div></div></div> <!> <div class="content-grid svelte-1k5z4u1"><!> <!></div></div>');function St(We,Se){Ge(Se,!0);let o=B(ze([])),Z=B(ze([])),de=B(!0),n=B(null),J=B(!1),R=B(""),H=B("");Ye(async()=>{try{i(Z,await Xe.getAllSkills(),!0),Pe(),i(de,!1)}catch(a){console.error("Failed to load data:",a),i(de,!1)}});function Pe(){const a=localStorage.getItem("workflows");if(a)try{const k=JSON.parse(a);i(o,k.map(l=>({...l,createdAt:new Date(l.createdAt),lastRun:l.lastRun?new Date(l.lastRun):void 0})),!0)}catch(k){console.error("Failed to parse workflows:",k),i(o,[],!0)}}function K(){localStorage.setItem("workflows",JSON.stringify(e(o)))}function De(){if(!e(R).trim())return;const a={id:`wf-${Date.now()}`,name:e(R),description:e(H),steps:[],createdAt:new Date,status:"draft"};i(o,[...e(o),a],!0),K(),i(n,a,!0),i(J,!1),i(R,""),i(H,"")}function Ne(a){var k;i(o,e(o).filter(l=>l.id!==a),!0),K(),((k=e(n))==null?void 0:k.id)===a&&i(n,null)}function Ae(a,k){const l=e(Z).find(d=>d.id===k);l&&(i(o,e(o).map(d=>{if(d.id===a){const D={id:`step-${Date.now()}`,skillId:l.id,skillName:l.name,order:d.steps.length+1,inputs:{}};return{...d,steps:[...d.steps,D]}}return d}),!0),K(),i(n,e(o).find(d=>d.id===a)||null,!0))}function Ce(a,k){i(o,e(o).map(l=>l.id===a?{...l,steps:l.steps.filter(d=>d.id!==k).map((d,D)=>({...d,order:D+1}))}:l),!0),K(),i(n,e(o).find(l=>l.id===a)||null,!0)}function ne(a){return{draft:"default",active:"success",archived:"warning"}[a]}let L=V(()=>({total:e(o).length,draft:e(o).filter(a=>a.status==="draft").length,active:e(o).filter(a=>a.status==="active").length,archived:e(o).filter(a=>a.status==="archived").length}));var ee=ut(),te=s(ee),ue=r(s(te),2),se=s(ue),ce=s(se),Be=s(ce,!0);t(ce),$(2),t(se);var ae=r(se,2),pe=s(ae),Re=s(pe,!0);t(pe),$(2),t(ae);var re=r(ae,2),fe=s(re),Ie=s(fe,!0);t(fe),$(2),t(re);var ke=r(re,2),_e=s(ke),Te=s(_e,!0);t(_e),$(2),t(ke),t(ue),t(te);var me=r(te,2);Ue(me,{variant:"info",title:"Workflow Builder Coming Soon",children:(a,k)=>{$();var l=Ze();$(),v(a,l)},$$slots:{default:!0}});var ge=r(me,2),he=s(ge);oe(he,{variant:"bordered",padding:"lg",children:(a,k)=>{var l=rt(),d=ve(l),D=r(s(d),2);G(D,{variant:"primary",size:"sm",get disabled(){return e(J)},$$events:{click:()=>i(J,!0)},children:(_,z)=>{$();var b=C("+ New Workflow");v(_,b)},$$slots:{default:!0}}),t(d);var Q=r(d,2);{var y=_=>{oe(_,{variant:"elevated",padding:"md",children:(z,b)=>{var p=et(),h=s(p);xe(h,{label:"Workflow Name",placeholder:"e.g., Code Review & Test",required:!0,fullWidth:!0,get value(){return e(R)},set value(m){i(R,m,!0)}});var A=r(h,2);xe(A,{label:"Description",placeholder:"Describe what this workflow does...",fullWidth:!0,get value(){return e(H)},set value(m){i(H,m,!0)}});var W=r(A,2),S=s(W);{let m=V(()=>!e(R).trim());G(S,{variant:"primary",get disabled(){return e(m)},$$events:{click:De},children:(T,c)=>{$();var u=C("Create");v(T,u)},$$slots:{default:!0}})}var I=r(S,2);G(I,{variant:"ghost",$$events:{click:()=>i(J,!1)},children:(m,T)=>{$();var c=C("Cancel");v(m,c)},$$slots:{default:!0}}),t(W),t(p),v(z,p)},$$slots:{default:!0}})};Y(Q,_=>{e(J)&&_(y)})}var N=r(Q,2);{var M=_=>{var z=tt();v(_,z)},O=_=>{var z=at();be(z,21,()=>e(o),b=>b.id,(b,p)=>{var h=st();let A;h.__click=()=>i(n,e(p),!0),h.__keydown=f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),i(n,e(p),!0))};var W=s(h),S=s(W),I=s(S,!0);t(S);var m=r(S,2),T=s(m,!0);t(m);var c=r(m,2),u=s(c);{let f=V(()=>ne(e(p).status));ye(u,{get variant(){return e(f)},size:"sm",children:(j,E)=>{$();var X=C();F(()=>g(X,e(p).status)),v(j,X)},$$slots:{default:!0}})}var x=r(u,2),P=s(x);t(x),t(c),t(W);var U=r(W,2);G(U,{variant:"danger",size:"sm",$$events:{click:f=>{f.stopPropagation(),Ne(e(p).id)}},children:(f,j)=>{$();var E=C("Delete");v(f,E)},$$slots:{default:!0}}),t(h),F(()=>{var f;A=Le(h,1,"workflow-item svelte-1k5z4u1",null,A,{selected:((f=e(n))==null?void 0:f.id)===e(p).id}),g(I,e(p).name),g(T,e(p).description||"No description"),g(P,`${e(p).steps.length??""} steps`)}),v(b,h)}),t(z),v(_,z)};Y(N,_=>{e(o).length===0?_(M):_(O,!1)})}v(a,l)},$$slots:{default:!0}});var je=r(he,2);oe(je,{variant:"bordered",padding:"lg",children:(a,k)=>{var l=Ve(),d=ve(l);{var D=y=>{var N=dt(),M=s(N),O=s(M),_=s(O,!0);t(O);var z=r(O,2);{let c=V(()=>ne(e(n).status));ye(z,{get variant(){return e(c)},size:"sm",children:(u,x)=>{$();var P=C();F(()=>g(P,e(n).status)),v(u,P)},$$slots:{default:!0}})}t(M);var b=r(M,2),p=s(b,!0);t(b);var h=r(b,2),A=r(s(h),2);{var W=c=>{var u=lt();v(c,u)},S=c=>{var u=ot();be(u,23,()=>e(n).steps,x=>x.id,(x,P,U)=>{var f=vt(),j=ve(f),E=s(j),X=s(E,!0);t(E);var le=r(E,2),ie=s(le),Ee=s(ie,!0);t(ie);var $e=r(ie,2),Fe=s($e,!0);t($e),t(le);var Je=r(le,2);G(Je,{variant:"ghost",size:"sm",$$events:{click:()=>Ce(e(n).id,e(P).id)},children:(q,we)=>{$();var qe=C("Remove");v(q,qe)},$$slots:{default:!0}}),t(j);var Me=r(j,2);{var Oe=q=>{var we=it();v(q,we)};Y(Me,q=>{e(U)<e(n).steps.length-1&&q(Oe)})}F(()=>{g(X,e(U)+1),g(Ee,e(P).skillName),g(Fe,e(P).skillId)}),v(x,f)}),t(u),v(c,u)};Y(A,c=>{e(n).steps.length===0?c(W):c(S,!1)})}t(h);var I=r(h,2),m=r(s(I),2),T=s(m);{let c=V(()=>e(Z).map(u=>({value:u.id,label:u.name})));Qe(T,{get options(){return e(c)},placeholder:"Select a skill to add...",fullWidth:!0,$$events:{change:u=>{const x=u.target.value;x&&(Ae(e(n).id,x),u.target.value="")}}})}t(m),t(I),t(N),F(()=>{g(_,e(n).name),g(p,e(n).description||"No description provided")}),v(y,N)},Q=y=>{var N=nt();v(y,N)};Y(d,y=>{e(n)?y(D):y(Q,!1)})}v(a,l)},$$slots:{default:!0}}),t(ge),t(ee),F(()=>{g(Be,e(L).total),g(Re,e(L).draft),g(Ie,e(L).active),g(Te,e(L).archived)}),v(We,ee),He()}Ke(["click","keydown"]);export{St as component};
