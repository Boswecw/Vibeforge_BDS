import{S as e,P as s,s as t}from"../chunks/Cf9ICnXl.js";import{T as a,p as i,e as n,q as r,i as l,g as c,s as d,j as o,a as v,x as u,I as p,y as g,z as m,A as w,k as h,r as f,R as S,a5 as k,l as b,G as y,N as $,a6 as E,m as N,h as C,H as A,d as O,v as D,S as L}from"../chunks/BBEC77oO.js";import{E as P}from"../chunks/DMBKhKDl.js";import{P as x}from"../chunks/B2n38f_9.js";import{B as T}from"../chunks/DHMzYP54.js";import{I as q}from"../chunks/DJbQjZGk.js";import{T as I}from"../chunks/BMepI2hO.js";import{A as F}from"../chunks/hkv9Cn3v.js";import{c as j,a as R}from"../chunks/Cfodrc4t.js";import{B as M}from"../chunks/BLNhyOUm.js";const U=a({sessions:[],currentSession:null,isStreaming:!1,streamingOutput:"",currentStage:null}),G={get sessions(){return U.sessions},get currentSession(){return U.currentSession},get isStreaming(){return U.isStreaming},get streamingOutput(){return U.streamingOutput},get currentStage(){return U.currentStage},get activeSessions(){return U.sessions.filter(s=>s.status===e.RUNNING||s.status===e.PENDING)},get completedSessions(){return U.sessions.filter(s=>s.status===e.COMPLETED)},get failedSessions(){return U.sessions.filter(s=>s.status===e.FAILED)},createSession(s){const t={id:`planning_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"planning",status:e.PENDING,createdAt:new Date,request:s,stages:{}};return U.sessions=[...U.sessions,t],U.currentSession=t,t},startSession(t){const a=U.sessions.find(e=>e.id===t);a&&(a.status=e.RUNNING,a.startedAt=new Date,a.currentStage=s.PLAN,U.currentStage=s.PLAN,U.isStreaming=!0,U.streamingOutput="",U.sessions=[...U.sessions])},updateStageOutput(e,t,a){const i=U.sessions.find(s=>s.id===e);if(i){switch(t){case s.PLAN:i.stages.plan=a;break;case s.ACT:i.stages.act=a;break;case s.OBSERVE:i.stages.observe=a;break;case s.REFLECT:i.stages.reflect=a}U.sessions=[...U.sessions]}},appendStreamingOutput(e){U.streamingOutput+=e},clearStreamingOutput(){U.streamingOutput=""},advanceStage(e,s){const t=U.sessions.find(s=>s.id===e);t&&(s?(t.currentStage=s,U.currentStage=s,U.streamingOutput=""):(t.currentStage=void 0,U.currentStage=null,U.isStreaming=!1),U.sessions=[...U.sessions])},completeSession(s,t){const a=U.sessions.find(e=>e.id===s);a&&(a.status=e.COMPLETED,a.completedAt=new Date,a.deliverable=t,a.currentStage=void 0,U.currentStage=null,U.isStreaming=!1,U.streamingOutput="",U.sessions=[...U.sessions])},failSession(s,t){const a=U.sessions.find(e=>e.id===s);a&&(a.status=e.FAILED,a.completedAt=new Date,a.error=t,a.currentStage=void 0,U.currentStage=null,U.isStreaming=!1,U.streamingOutput="",U.sessions=[...U.sessions])},cancelSession(s){const t=U.sessions.find(e=>e.id===s);t&&(t.status=e.CANCELLED,t.completedAt=new Date,t.currentStage=void 0,U.currentSession?.id===s&&(U.currentStage=null,U.isStreaming=!1,U.streamingOutput=""),U.sessions=[...U.sessions])},setCurrentSession(e){if(null===e)return void(U.currentSession=null);const s=U.sessions.find(s=>s.id===e);s&&(U.currentSession=s)},deleteSession(e){U.sessions=U.sessions.filter(s=>s.id!==e),U.currentSession?.id===e&&(U.currentSession=null,U.currentStage=null,U.isStreaming=!1,U.streamingOutput="")},clearAll(){U.sessions=[],U.currentSession=null,U.isStreaming=!1,U.streamingOutput="",U.currentStage=null}};const _="http://localhost:8787";function z(e){return e.title&&0!==e.title.trim().length?e.title.length>200?j("Title must be 200 characters or less"):e.description&&0!==e.description.trim().length?e.description.length>5e3?j("Description must be 5000 characters or less"):null:j("Description is required"):j("Title is required")}var B=n('<form class="request-form svelte-19tf9np"><!> <!> <!> <div class="form-actions svelte-19tf9np"><!> <!></div> <div class="form-hint svelte-19tf9np"><p class="svelte-19tf9np">The Planning Agent will analyze your request and generate a detailed implementation plan with\n\t\t\tspecific steps, acceptance criteria, and risk assessment.</p></div></form>');function H(e,s){i(s,!0);let a=d(""),n=d(""),y=d(null),$=d(!1);const E=u(()=>G.isStreaming);var N=B(),C=r(N),A=e=>{F(e,{variant:"error",children:(e,s)=>{p();var t=g();m(()=>w(t,c(y).userMessage)),h(e,t)},$$slots:{default:!0}})};l(C,e=>{c(y)&&e(A)});var O=o(C,2);{let e=u(()=>c(E)||c($));q(O,{label:"Task Title",placeholder:"e.g., Add user authentication system",maxlength:200,required:!0,get disabled(){return c(e)},get value(){return c(a)},set value(e){v(a,e,!0)}})}var D=o(O,2);{let e=u(()=>c(E)||c($));I(D,{label:"Description",placeholder:"Provide detailed requirements, constraints, and context for this task...",rows:8,maxlength:5e3,required:!0,get disabled(){return c(e)},get value(){return c(n)},set value(e){v(n,e,!0)}})}var L=o(D,2),P=r(L);{let e=u(()=>c(E)||c($)||!c(a).trim()||!c(n).trim());T(P,{type:"submit",variant:"primary",get disabled(){return c(e)},get loading(){return c($)},children:(e,s)=>{p();var t=g();m(()=>w(t,c($)?"Starting...":"Start Planning")),h(e,t)},$$slots:{default:!0}})}var x=o(P,2);{let e=u(()=>c(E)||c($));T(x,{type:"button",variant:"secondary",onclick:function(){v(a,""),v(n,""),v(y,null)},get disabled(){return c(e)},children:(e,s)=>{p();var t=g("Clear");h(e,t)},$$slots:{default:!0}})}f(L),p(2),f(N),S("submit",N,k(async function(){v(y,null);const e={title:c(a).trim(),description:c(n).trim()},s=z(e);if(s)v(y,s,!0);else{v($,!0);try{const s=await async function(e){const s=z(e);if(s)return{success:!1,error:s};try{const s=await fetch(`${_}/api/v1/bds/planning/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request:`${e.title}\n\n${e.description}`,context:e.context||""})});if(!s.ok){const e=await s.json();return{success:!1,error:j(e.detail||"Failed to start session")}}const{sessionId:a}=await s.json(),i=G.createSession(e);i.id=a,G.startSession(i.id);const n=`${_}/api/v1/bds/planning/${a}/stream`;return t.subscribe(n,{onChunk:e=>{G.appendStreamingOutput(e)},onStageStart:e=>{const s=e;G.advanceStage(i.id,s)},onStageEnd:(e,s)=>{const t=e,a=s;G.updateStageOutput(i.id,t,a),G.clearStreamingOutput()},onComplete:e=>{const s=e;G.completeSession(i.id,s)},onError:e=>{G.failSession(i.id,e.message)}}),{success:!0,sessionId:i.id}}catch(y){return{success:!1,error:R(y)}}}(e);if(!s.success&&s.error)return v(y,s.error,!0),void v($,!1);v(a,""),v(n,""),v($,!1)}catch(i){v($,!1)}}})),h(e,N),b()}var J=E('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="svelte-e0qkuv"><path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-e0qkuv"></path></svg>'),V=n('<div class="pulse svelte-e0qkuv"></div>'),W=n("<div></div>"),K=n('<div><div class="stage-indicator svelte-e0qkuv"><div class="stage-number svelte-e0qkuv"><!></div></div> <div class="stage-content svelte-e0qkuv"><div class="stage-label svelte-e0qkuv"> </div> <div class="stage-description svelte-e0qkuv"> </div></div> <!></div>'),Z=n('<div class="stage-progress svelte-e0qkuv"><div class="stages svelte-e0qkuv"></div></div>');function Q(e,t){i(t,!0);const a=[{key:s.PLAN,label:"Plan",description:"Define strategy"},{key:s.ACT,label:"Act",description:"Execute steps"},{key:s.OBSERVE,label:"Observe",description:"Analyze results"},{key:s.REFLECT,label:"Reflect",description:"Evaluate success"}];const n=u(()=>{return(e=t.stage)?a.findIndex(s=>s.key===e):-1;var e});var d=Z(),v=r(d);y(v,21,()=>a,A,(e,s,t)=>{const i=u(()=>t===c(n)),d=u(()=>c(n)>t),v=u(()=>c(n)<t);var p=K();let S;var k=r(p),b=r(k),y=r(b),E=e=>{var s=J();h(e,s)},A=e=>{var s=N(),a=C(s),n=e=>{var s=V();h(e,s)},r=e=>{var s=g();s.nodeValue=t+1,h(e,s)};l(a,e=>{c(i)?e(n):e(r,!1)},!0),h(e,s)};l(y,e=>{c(d)?e(E):e(A,!1)}),f(b),f(k);var O=o(k,2),D=r(O),L=r(D,!0);f(D);var P=o(D,2),x=r(P,!0);f(P),f(O);var T=o(O,2),q=e=>{var s=W();let t;m(()=>t=$(s,1,"stage-connector svelte-e0qkuv",null,t,{completed:c(d)})),h(e,s)};l(T,e=>{t<a.length-1&&e(q)}),f(p),m(()=>{S=$(p,1,"stage svelte-e0qkuv",null,S,{active:c(i),completed:c(d),pending:c(v)}),w(L,c(s).label),w(x,c(s).description)}),h(e,p)}),f(v),f(d),h(e,d),b()}var X=n('<pre class="output-text svelte-8glc1h"> </pre>'),Y=n('<div class="loading-indicator svelte-8glc1h"><div class="spinner svelte-8glc1h"></div> <p class="svelte-8glc1h">Waiting for output...</p></div>'),ee=n('<div class="streaming-indicator svelte-8glc1h"><div class="dot svelte-8glc1h"></div> <div class="dot svelte-8glc1h"></div> <div class="dot svelte-8glc1h"></div></div>'),se=n('<button class="scroll-to-bottom svelte-8glc1h"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="svelte-8glc1h"><path d="M8 12L4 8H12L8 12Z" fill="currentColor" class="svelte-8glc1h"></path></svg> Scroll to bottom</button>'),te=n("<div><!> <!></div> <!>",1),ae=n('<div class="empty-state svelte-8glc1h"><p class="svelte-8glc1h">Output will appear here when the planning session starts.</p></div>'),ie=n('<div class="stage-output svelte-8glc1h"><!></div>');L(["click"]);var ne=n('<div class="empty-state svelte-1dk4y4m"><p>No planning sessions yet</p></div>'),re=n('<span class="session-duration svelte-1dk4y4m"> </span>'),le=n('<button><div class="session-header svelte-1dk4y4m"><span class="session-title svelte-1dk4y4m"> </span> <!></div> <div class="session-meta svelte-1dk4y4m"><span class="session-date svelte-1dk4y4m"> </span> <!></div></button>'),ce=n('<div class="session-list svelte-1dk4y4m"></div>'),de=n('<div class="session-history svelte-1dk4y4m"><!></div>');function oe(s,t){i(t,!0);const a=u(()=>G.sessions),n=u(()=>G.currentSession);var d=de(),v=r(d),S=e=>{var s=ne();h(e,s)},k=s=>{var t=ce();y(t,21,()=>c(a).slice().reverse(),A,(s,t)=>{var a=le();let i;a.__click=()=>function(e){G.setCurrentSession(e.id)}(c(t));var d=r(a),v=r(d),S=r(v,!0);f(v);var k=o(v,2);{let s=u(()=>function(s){switch(s){case e.COMPLETED:return"success";case e.FAILED:case e.CANCELLED:return"error";case e.RUNNING:return"warning";default:return"info"}}(c(t).status));M(k,{get variant(){return c(s)},children:(s,a)=>{p();var i=g();m(e=>w(i,e),[()=>function(s){switch(s){case e.COMPLETED:return"Completed";case e.FAILED:return"Failed";case e.CANCELLED:return"Cancelled";case e.RUNNING:return"Running";case e.PENDING:return"Pending";default:return"Unknown"}}(c(t).status)]),h(s,i)},$$slots:{default:!0}})}f(d);var b=o(d,2),y=r(b),E=r(y,!0);f(y);var N=o(y,2),C=e=>{const s=u(()=>c(t).completedAt.getTime()-c(t).startedAt.getTime());var a=re(),i=r(a,!0);f(a),m(e=>w(i,e),[()=>c(s)<6e4?`${Math.round(c(s)/1e3)}s`:`${Math.round(c(s)/6e4)}m`]),h(e,a)};l(N,e=>{c(t).completedAt&&c(t).startedAt&&e(C)}),f(b),f(a),m(e=>{i=$(a,1,"session-item svelte-1dk4y4m",null,i,{active:c(n)?.id===c(t).id}),w(S,c(t).request.title),w(E,e)},[()=>{return e=c(t).createdAt,new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);var e}]),h(s,a)}),f(t),h(s,t)};l(v,e=>{0===c(a).length?e(S):e(k,!1)}),f(d),h(s,d),b()}L(["click"]);var ve=n('<li class="svelte-2cw5wd"> </li>'),ue=n('<div class="acceptance-criteria svelte-2cw5wd"><h5 class="svelte-2cw5wd">Acceptance Criteria:</h5> <ul class="svelte-2cw5wd"></ul></div>'),pe=n('<div class="dependencies svelte-2cw5wd"><strong class="svelte-2cw5wd">Dependencies:</strong> </div>'),ge=n('<div class="step-card svelte-2cw5wd"><div class="step-header svelte-2cw5wd"><span class="step-number svelte-2cw5wd"></span> <h4 class="svelte-2cw5wd"> </h4></div> <p class="step-description svelte-2cw5wd"> </p> <!> <!> <div class="step-meta svelte-2cw5wd"><!></div></div>'),me=n('<li class="svelte-2cw5wd"> </li>'),we=n('<div class="plan-section svelte-2cw5wd"><h3 class="svelte-2cw5wd">Risks & Considerations</h3> <ul class="risks-list svelte-2cw5wd"></ul></div>'),he=n('<div class="plan-view"><div class="plan-header svelte-2cw5wd"><h2 class="svelte-2cw5wd"> </h2> <div class="plan-actions svelte-2cw5wd"><!> <!></div></div> <div class="plan-section svelte-2cw5wd"><h3 class="svelte-2cw5wd">Overview</h3> <p class="overview-text svelte-2cw5wd"> </p></div> <div class="plan-section svelte-2cw5wd"><h3 class="svelte-2cw5wd">Estimated Effort</h3> <!></div> <div class="plan-section svelte-2cw5wd"><h3 class="svelte-2cw5wd">Implementation Steps</h3> <div class="steps-list svelte-2cw5wd"></div></div> <!> <div class="metadata svelte-2cw5wd"><div class="metadata-item svelte-2cw5wd"><span class="label svelte-2cw5wd">Tokens Used:</span> <span class="value svelte-2cw5wd"> </span></div> <div class="metadata-item svelte-2cw5wd"><span class="label svelte-2cw5wd">Cost:</span> <span class="value svelte-2cw5wd"> </span></div> <div class="metadata-item svelte-2cw5wd"><span class="label svelte-2cw5wd">Duration:</span> <span class="value svelte-2cw5wd"> </span></div></div></div>'),fe=n('<div class="prompt-view svelte-2cw5wd"><div class="prompt-header svelte-2cw5wd"><h3 class="svelte-2cw5wd">Execution Prompt</h3> <div class="prompt-actions svelte-2cw5wd"><!> <!></div></div> <pre class="prompt-text svelte-2cw5wd"> </pre></div>'),Se=n('<div class="deliverable-viewer svelte-2cw5wd"><div class="tabs svelte-2cw5wd"><button>Implementation Plan</button> <button>Execution Prompt</button></div> <div class="tab-content svelte-2cw5wd"><!></div></div>');L(["click"]);var ke=n("<!> <!>",1),be=n('<div class="error-message svelte-dy79yi"><h3 class="svelte-dy79yi">Error</h3> <p> </p></div>'),ye=n('<div class="empty-state svelte-dy79yi"><h2 class="svelte-dy79yi">Start a Planning Session</h2> <p>Fill out the form on the left to begin planning a new task.</p></div>'),$e=n('<div class="planning-page svelte-dy79yi"><header class="page-header svelte-dy79yi"><h1 class="svelte-dy79yi">Planning Agent</h1> <p class="text-muted svelte-dy79yi">Define and plan complex implementation tasks</p></header> <div class="content-grid svelte-dy79yi"><div class="left-column"><!> <!></div> <div class="right-column"><!></div></div></div>');function Ee(s,t){i(t,!0);const a=u(()=>G.currentSession),n=u(()=>G.isStreaming),k=u(()=>G.currentStage),E=u(()=>G.streamingOutput);P(s,{children:(s,t)=>{var u=$e(),L=o(r(u),2),P=r(L),q=r(P);x(q,{title:"New Planning Request",children:(e,s)=>{H(e,{})},$$slots:{default:!0}});var I=o(q,2),F=e=>{x(e,{title:"Session History",class:"mt-6",children:(e,s)=>{oe(e,{})},$$slots:{default:!0}})};l(I,e=>{c(a)&&e(F)}),f(P);var j=o(P,2),R=r(j),U=s=>{var t=N(),u=C(t),L=e=>{x(e,{title:"Planning in Progress",children:(e,s)=>{var t=ke(),a=C(t);Q(a,{get stage(){return c(k)}}),function(e,s){let t;i(s,!0);let a=d(!0);function n(){if(!t)return;const{scrollTop:e,scrollHeight:s,clientHeight:i}=t;v(a,s-(e+i)<100)}O(()=>{t&&c(a)&&s.output&&(t.scrollTop=t.scrollHeight)});var u=ie(),p=r(u),g=e=>{var i=te(),d=C(i);let u;var p=r(d),g=e=>{var t=X(),a=r(t,!0);f(t),m(()=>w(a,s.output)),h(e,t)},k=e=>{var s=Y();h(e,s)};l(p,e=>{s.output?e(g):e(k,!1)});var b=o(p,2),y=e=>{var s=ee();h(e,s)};l(b,e=>{s.isStreaming&&e(y)}),f(d),D(d,e=>t=e,()=>t);var E=o(d,2),N=e=>{var s=se();s.__click=()=>{v(a,!0),t&&(t.scrollTop=t.scrollHeight)},h(e,s)};l(E,e=>{!c(a)&&s.isStreaming&&e(N)}),m(()=>u=$(d,1,"output-container svelte-8glc1h",null,u,{streaming:s.isStreaming})),S("scroll",d,n),h(e,i)},k=e=>{var s=ae();h(e,s)};l(p,e=>{s.isStreaming||s.output?e(g):e(k,!1)}),f(u),h(e,u),b()}(o(a,2),{get output(){return c(E)},get isStreaming(){return c(n)}}),h(e,t)},$$slots:{default:!0}})},P=s=>{var t=N(),n=C(t),u=e=>{x(e,{title:"Planning Complete",children:(e,s)=>{!function(e,s){i(s,!0);let t=d("plan");async function a(e){try{await navigator.clipboard.writeText(e)}catch(s){}}function n(e,s){const t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download=s,i.click(),URL.revokeObjectURL(a)}var u=Se(),S=r(u),k=r(S);let E;k.__click=()=>v(t,"plan");var N=o(k,2);let C;N.__click=()=>v(t,"prompt"),f(S);var O=o(S,2),D=r(O),L=e=>{var t=he(),i=r(t),d=r(i),v=r(d,!0);f(d);var u=o(d,2),S=r(u);T(S,{variant:"secondary",size:"sm",onclick:()=>a(JSON.stringify(s.deliverable.plan,null,2)),children:(e,s)=>{p();var t=g("Copy");h(e,t)},$$slots:{default:!0}});var k=o(S,2);T(k,{variant:"secondary",size:"sm",onclick:()=>n(JSON.stringify(s.deliverable.plan,null,2),`${s.deliverable.plan.title}.json`),children:(e,s)=>{p();var t=g("Download");h(e,t)},$$slots:{default:!0}}),f(u),f(i);var b=o(i,2),$=o(r(b),2),E=r($,!0);f($),f(b);var N=o(b,2),C=o(r(N),2);M(C,{variant:"info",children:(e,t)=>{p();var a=g();m(()=>w(a,s.deliverable.plan.estimatedEffort)),h(e,a)},$$slots:{default:!0}}),f(N);var O=o(N,2),D=o(r(O),2);y(D,21,()=>s.deliverable.plan.steps,A,(e,s,t)=>{var a=ge(),i=r(a),n=r(i);n.textContent=t+1;var d=o(n,2),v=r(d,!0);f(d),f(i);var u=o(i,2),S=r(u,!0);f(u);var k=o(u,2),b=e=>{var t=ue(),a=o(r(t),2);y(a,21,()=>c(s).acceptanceCriteria,A,(e,s)=>{var t=ve(),a=r(t,!0);f(t),m(()=>w(a,c(s))),h(e,t)}),f(a),f(t),h(e,t)};l(k,e=>{c(s).acceptanceCriteria.length>0&&e(b)});var $=o(k,2),E=e=>{var t=pe(),a=o(r(t));f(t),m(e=>w(a,` ${e??""}`),[()=>c(s).dependencies.join(", ")]),h(e,t)};l($,e=>{c(s).dependencies.length>0&&e(E)});var N=o($,2),C=r(N);M(C,{variant:"info",children:(e,t)=>{p();var a=g();m(()=>w(a,c(s).estimatedEffort)),h(e,a)},$$slots:{default:!0}}),f(N),f(a),m(()=>{w(v,c(s).title),w(S,c(s).description)}),h(e,a)}),f(D),f(O);var L=o(O,2),P=e=>{var t=we(),a=o(r(t),2);y(a,21,()=>s.deliverable.plan.risks,A,(e,s)=>{var t=me(),a=r(t,!0);f(t),m(()=>w(a,c(s))),h(e,t)}),f(a),f(t),h(e,t)};l(L,e=>{s.deliverable.plan.risks.length>0&&e(P)});var x=o(L,2),q=r(x),I=o(r(q),2),F=r(I,!0);f(I),f(q);var j=o(q,2),R=o(r(j),2),U=r(R,!0);f(R),f(j);var G=o(j,2),_=o(r(G),2),z=r(_,!0);f(_),f(G),f(x),f(t),m((e,t,a)=>{w(v,s.deliverable.plan.title),w(E,s.deliverable.plan.overview),w(F,e),w(U,t),w(z,a)},[()=>{return(e=s.deliverable.metadata.totalTokens)<1e3?`${e} tokens`:e<1e6?`${(e/1e3).toFixed(1)}K tokens`:`${(e/1e6).toFixed(1)}M tokens`;var e},()=>{return(e=s.deliverable.metadata.totalCost)<.01?`$${e.toFixed(4)}`:`$${e.toFixed(2)}`;var e},()=>{return(e=s.deliverable.metadata.duration)<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:e<36e5?`${(e/6e4).toFixed(1)}m`:`${(e/36e5).toFixed(1)}h`;var e}]),h(e,t)},P=e=>{var t=fe(),i=r(t),l=o(r(i),2),c=r(l);T(c,{variant:"secondary",size:"sm",onclick:()=>a(s.deliverable.prompt),children:(e,s)=>{p();var t=g("Copy");h(e,t)},$$slots:{default:!0}});var d=o(c,2);T(d,{variant:"secondary",size:"sm",onclick:()=>n(s.deliverable.prompt,`${s.deliverable.plan.title}-prompt.txt`),children:(e,s)=>{p();var t=g("Download");h(e,t)},$$slots:{default:!0}}),f(l),f(i);var v=o(i,2),u=r(v,!0);f(v),f(t),m(()=>w(u,s.deliverable.prompt)),h(e,t)};l(D,e=>{"plan"===c(t)?e(L):e(P,!1)}),f(O),f(u),m(()=>{E=$(k,1,"tab svelte-2cw5wd",null,E,{active:"plan"===c(t)}),C=$(N,1,"tab svelte-2cw5wd",null,C,{active:"prompt"===c(t)})}),h(e,u),b()}(e,{get deliverable(){return c(a).deliverable}})},$$slots:{default:!0}})},S=s=>{var t=N(),i=C(t),n=e=>{x(e,{title:"Planning Failed",variant:"error",children:(e,s)=>{var t=be(),i=o(r(t),2),n=r(i,!0);f(i),f(t),m(()=>w(n,c(a).error||"An unknown error occurred")),h(e,t)},$$slots:{default:!0}})};l(i,s=>{c(a).status===e.FAILED&&s(n)},!0),h(s,t)};l(n,s=>{c(a).status===e.COMPLETED&&c(a).deliverable?s(u):s(S,!1)},!0),h(s,t)};l(u,s=>{c(a).status===e.RUNNING||c(a).status===e.PENDING?s(L):s(P,!1)}),h(s,t)},G=e=>{x(e,{title:"Welcome",children:(e,s)=>{var t=ye();h(e,t)},$$slots:{default:!0}})};l(R,e=>{c(a)?e(U):e(G,!1)}),f(j),f(L),f(u),h(s,u)},$$slots:{default:!0}}),b()}export{Ee as component};
