import{T as dt,p as ct,s as I,R as $e,o as ut,b as ft,g as t,f as d,i as x,w as p,h as i,j as pt,c as g,e as s,m as a,r,x as v,H,v as L,q as oe,k as mt,d as ie}from"../chunks/CJ97sMGe.js";import"../chunks/CUflB2Gp.js";import{B as be,P as ve}from"../chunks/D8s3w_7f.js";import{I as _t}from"../chunks/BhbBKy91.js";import{S as ne}from"../chunks/Bo2G-ODY.js";import{B as V}from"../chunks/DZ9aZlWI.js";import{A as xt}from"../chunks/BsnCgw2C.js";import{V as ht}from"../chunks/twdYWlXB.js";var gt=d('<div class="filters-section svelte-1xl2tfr"><!> <div class="filter-row svelte-1xl2tfr"><!> <!> <!></div></div>'),yt=d('<div class="loading-state svelte-1xl2tfr"><div class="spinner svelte-1xl2tfr"></div> <p>Loading history...</p></div>'),$t=d('<div class="empty-state svelte-1xl2tfr"><div class="empty-icon svelte-1xl2tfr">ðŸ“‹</div> <p class="empty-message svelte-1xl2tfr">No execution history found</p> <p class="empty-hint svelte-1xl2tfr"> </p></div>'),bt=d('<span class="separator svelte-1xl2tfr">â€¢</span> <!>',1),kt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Session ID</span> <code class="svelte-1xl2tfr"> </code></div>'),St=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Model</span> <code class="svelte-1xl2tfr"> </code></div>'),wt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Tokens</span> <code class="svelte-1xl2tfr"> </code></div>'),Pt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Latency</span> <code class="svelte-1xl2tfr"> </code></div>'),It=d('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Metadata</h3> <div class="metadata-grid svelte-1xl2tfr"><!> <!> <!> <!></div></div>'),Nt=d('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Inputs</h3> <pre class="code-block svelte-1xl2tfr"> </pre></div>'),Ot=d('<div class="output-box svelte-1xl2tfr"> </div>'),At=d('<div class="entry-details svelte-1xl2tfr"><!> <!> <div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr"> </h3> <!></div> <div class="entry-actions svelte-1xl2tfr"><!></div></div>'),Ht=d('<button class="entry-header svelte-1xl2tfr"><div class="entry-info svelte-1xl2tfr"><div class="entry-title svelte-1xl2tfr"><span class="skill-name svelte-1xl2tfr"> </span> <!></div> <div class="entry-meta svelte-1xl2tfr"><span> </span> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <!></div></div> <span class="expand-icon svelte-1xl2tfr"> </span></button> <!>',1),Lt=d('<div class="history-item-wrapper svelte-1xl2tfr"><!></div>'),Ct=d('<div class="virtual-container svelte-1xl2tfr"><!></div>'),Dt=d('<div class="history-container svelte-1xl2tfr"><div class="page-header svelte-1xl2tfr"><div class="header-content svelte-1xl2tfr"><h1 class="page-title svelte-1xl2tfr">Execution History</h1> <p class="page-description svelte-1xl2tfr"> </p></div> <!></div> <!> <!></div>');function Ut(ke,Se){ct(Se,!0);let b=I($e([])),B=I($e([])),de=I(!0),C=I(""),D=I("all"),E=I("all"),j=I("recent"),J=I(null);const we=100,Pe=oe(()=>Array.from(new Set(t(b).map(e=>e.section))).sort()),Ie=oe(()=>[{value:"all",label:"All Sections"},...t(Pe).map(e=>({value:e,label:e}))]),Ne=[{value:"all",label:"All Status"},{value:"success",label:"Success Only"},{value:"error",label:"Errors Only"}],Oe=[{value:"recent",label:"Most Recent"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Skill Name"},{value:"cost",label:"Highest Cost"}];ut(()=>{Ae(),g(de,!1)});function Ae(){const e=localStorage.getItem("execution_history");if(e)try{g(b,JSON.parse(e),!0),Q()}catch(o){console.error("Failed to load history:",o),g(b,[],!0)}}function Q(){let e=[...t(b)];if(t(C)){const o=t(C).toLowerCase();e=e.filter(m=>m.skillName.toLowerCase().includes(o)||m.section.toLowerCase().includes(o)||m.category.toLowerCase().includes(o))}if(t(D)!=="all"&&(e=e.filter(o=>o.section===t(D))),t(E)!=="all"){const o=t(E)==="success";e=e.filter(m=>m.success===o)}e.sort((o,m)=>{switch(t(j)){case"recent":return new Date(m.timestamp).getTime()-new Date(o.timestamp).getTime();case"oldest":return new Date(o.timestamp).getTime()-new Date(m.timestamp).getTime();case"name":return o.skillName.localeCompare(m.skillName);case"cost":return(m.metadata.cost||0)-(o.metadata.cost||0);default:return 0}}),g(B,e,!0)}ft(()=>{t(C),t(D),t(E),t(j),Q()});function He(e){g(J,t(J)===e?null:e,!0)}function Le(){confirm("Are you sure you want to clear all execution history?")&&(localStorage.removeItem("execution_history"),g(b,[],!0),g(B,[],!0))}function Ce(e){g(b,t(b).filter(o=>o.id!==e),!0),localStorage.setItem("execution_history",JSON.stringify(t(b))),Q()}function De(e){return new Date(e).toLocaleString()}function Ee(e){return e!==void 0?`$${e.toFixed(4)}`:"N/A"}function Te(e){return e!==void 0?`${e}ms`:"N/A"}var G=Dt(),K=a(G),X=a(K),ce=s(a(X),2),ze=a(ce);r(ce),r(X);var Be=s(X,2);{var Fe=e=>{be(e,{variant:"danger",$$events:{click:Le},children:(o,m)=>{H();var N=L("Clear All History");i(o,N)},$$slots:{default:!0}})};x(Be,e=>{t(b).length>0&&e(Fe)})}r(K);var ue=s(K,2);{var Me=e=>{ve(e,{variant:"bordered",padding:"lg",children:(o,m)=>{var N=gt(),U=a(N);_t(U,{type:"search",placeholder:"Search by skill name, section, or category...",fullWidth:!0,get value(){return t(C)},set value(h){g(C,h,!0)}});var w=s(U,2),P=a(w);ne(P,{get options(){return t(Ie)},fullWidth:!0,get value(){return t(D)},set value(h){g(D,h,!0)}});var F=s(P,2);ne(F,{get options(){return Ne},fullWidth:!0,get value(){return t(E)},set value(h){g(E,h,!0)}});var T=s(F,2);ne(T,{get options(){return Oe},fullWidth:!0,get value(){return t(j)},set value(h){g(j,h,!0)}}),r(w),r(N),i(o,N)},$$slots:{default:!0}})};x(ue,e=>{t(b).length>0&&e(Me)})}var We=s(ue,2);{var je=e=>{var o=yt();i(e,o)},Je=e=>{var o=mt(),m=ie(o);{var N=w=>{ve(w,{variant:"elevated",padding:"lg",children:(P,F)=>{var T=$t(),h=s(a(T),4),M=a(h,!0);r(h),r(T),p(()=>v(M,t(C)||t(D)!=="all"||t(E)!=="all"?"Try adjusting your filters":"Execute skills to see them appear here")),i(P,T)},$$slots:{default:!0}})},U=w=>{var P=Ct(),F=a(P);ht(F,{get items(){return t(B)},itemHeight:we,height:"calc(100vh - 400px)",gap:16,children:(h,M)=>{let l=()=>M==null?void 0:M().item;var Y=Lt(),Ue=a(Y);ve(Ue,{variant:"bordered",padding:"none",children:(qe,Et)=>{var fe=Ht(),q=ie(fe);q.__click=()=>He(l().id);var Z=a(q),ee=a(Z),te=a(ee),Re=a(te,!0);r(te);var Ve=s(te,2);{let c=oe(()=>l().success?"success":"error");V(Ve,{get variant(){return t(c)},size:"sm",children:(k,y)=>{H();var z=L();p(()=>v(z,l().success?"Success":"Error")),i(k,z)},$$slots:{default:!0}})}r(ee);var pe=s(ee,2),ae=a(pe),Qe=a(ae,!0);r(ae);var me=s(ae,4);V(me,{variant:"default",size:"sm",children:(c,k)=>{H();var y=L();p(()=>v(y,l().section)),i(c,y)},$$slots:{default:!0}});var _e=s(me,4);V(_e,{variant:"default",size:"sm",children:(c,k)=>{H();var y=L();p(()=>v(y,l().category)),i(c,y)},$$slots:{default:!0}});var Ge=s(_e,2);{var Ke=c=>{var k=bt(),y=s(ie(k),2);V(y,{variant:"accent",size:"sm",children:(z,re)=>{H();var R=L();p(W=>v(R,W),[()=>Ee(l().metadata.cost)]),i(z,R)},$$slots:{default:!0}}),i(c,k)};x(Ge,c=>{l().metadata.cost&&c(Ke)})}r(pe),r(Z);var xe=s(Z,2),Xe=a(xe,!0);r(xe),r(q);var Ye=s(q,2);{var Ze=c=>{var k=At(),y=a(k);{var z=n=>{var _=It(),S=s(a(_),2),O=a(S);{var le=u=>{var f=kt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.sessionId)),i(u,f)};x(O,u=>{l().metadata.sessionId&&u(le)})}var ge=s(O,2);{var lt=u=>{var f=St(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.model)),i(u,f)};x(ge,u=>{l().metadata.model&&u(lt)})}var ye=s(ge,2);{var ot=u=>{var f=wt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.tokensUsed)),i(u,f)};x(ye,u=>{l().metadata.tokensUsed&&u(ot)})}var it=s(ye,2);{var vt=u=>{var f=Pt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(nt=>v(A,nt),[()=>Te(l().metadata.latency)]),i(u,f)};x(it,u=>{l().metadata.latency&&u(vt)})}r(S),r(_),i(n,_)};x(y,n=>{l().metadata&&n(z)})}var re=s(y,2);{var R=n=>{var _=Nt(),S=s(a(_),2),O=a(S,!0);r(S),r(_),p(le=>v(O,le),[()=>JSON.stringify(l().inputs,null,2)]),i(n,_)};x(re,n=>{Object.keys(l().inputs).length>0&&n(R)})}var W=s(re,2),se=a(W),et=a(se,!0);r(se);var tt=s(se,2);{var at=n=>{var _=Ot(),S=a(_,!0);r(_),p(()=>v(S,l().output)),i(n,_)},rt=n=>{xt(n,{variant:"error",children:(_,S)=>{H();var O=L();p(()=>v(O,l().error||"Unknown error occurred")),i(_,O)},$$slots:{default:!0}})};x(tt,n=>{l().success?n(at):n(rt,!1)})}r(W);var he=s(W,2),st=a(he);be(st,{variant:"danger",size:"sm",$$events:{click:()=>Ce(l().id)},children:(n,_)=>{H();var S=L("Delete Entry");i(n,S)},$$slots:{default:!0}}),r(he),r(k),p(()=>v(et,l().success?"Output":"Error")),i(c,k)};x(Ye,c=>{t(J)===l().id&&c(Ze)})}p(c=>{v(Re,l().skillName),v(Qe,c),v(Xe,t(J)===l().id?"â–¼":"â–¶")},[()=>De(l().timestamp)]),i(qe,fe)},$$slots:{default:!0}}),r(Y),i(h,Y)},$$slots:{default:!0}}),r(P),i(w,P)};x(m,w=>{t(B).length===0?w(N):w(U,!1)},!0)}i(e,o)};x(We,e=>{t(de)?e(je):e(Je,!1)})}r(G),p(()=>v(ze,`${t(B).length??""} execution entries`)),i(ke,G),pt()}dt(["click"]);export{Ut as component};
