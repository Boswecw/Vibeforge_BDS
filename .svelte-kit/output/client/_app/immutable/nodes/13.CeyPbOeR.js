import{s as e,T as s,o as l,d as a,e as t,i as r,z as i,k as c,l as n,p as v,g as o,j as d,q as g,a as u,r as m,I as p,x as k,y as h,A as f,m as $,h as y,G as b,H as C,N as w,M as S}from"../chunks/CS1oB8eq.js";import{s as A}from"../chunks/DRhfx38_.js";import{V as L}from"../chunks/Dqlj23k1.js";import{P as j}from"../chunks/BcpFO3YO.js";import{I as B}from"../chunks/B9KmbTeL.js";import{S as z}from"../chunks/D4deE_xW.js";import{B as x}from"../chunks/B_xsWB_l.js";import{B as F}from"../chunks/BXiH49b8.js";import{A as O}from"../chunks/oHG5MZam.js";var P=t('<div class="filters-section svelte-c8k2rg"><div class="filter-row svelte-c8k2rg"><!></div> <div class="filter-row svelte-c8k2rg"><!> <!> <!> <!></div> <div class="controls-row svelte-c8k2rg"><div class="sort-section svelte-c8k2rg"><!></div> <div class="view-section svelte-c8k2rg"><!> <!></div> <div class="result-count svelte-c8k2rg"><!></div></div></div>'),D=t('<div class="loading-state svelte-c8k2rg"><div class="spinner svelte-c8k2rg"></div> <p>Loading skills...</p></div>'),I=t('<div class="empty-state svelte-c8k2rg"><p class="empty-message svelte-c8k2rg">No skills found matching your filters.</p> <!></div>'),N=t('<span class="tag-more svelte-c8k2rg"> </span>'),T=t('<div class="skill-header svelte-c8k2rg"><h3 class="skill-name svelte-c8k2rg"> </h3> <!></div> <p class="skill-description svelte-c8k2rg"> </p> <div class="skill-meta svelte-c8k2rg"><div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Section:</span> <!></div> <div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Category:</span> <!></div></div> <div class="skill-tags svelte-c8k2rg"><!> <!></div> <div class="skill-footer svelte-c8k2rg"><div class="cost-info svelte-c8k2rg"><span class="cost-label svelte-c8k2rg">Est. Cost:</span> <!></div></div>',1),W=t('<div><a class="skill-link svelte-c8k2rg"><!></a></div>'),G=t('<div class="virtual-container svelte-c8k2rg"><!></div>'),H=t('<div class="library-container svelte-c8k2rg"><div class="page-header svelte-c8k2rg"><div class="header-content svelte-c8k2rg"><h1 class="page-title svelte-c8k2rg">Skill Library</h1> <div class="stats-row svelte-c8k2rg"><div class="stat-item svelte-c8k2rg"><span class="stat-value svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Total</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value success svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Public</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value warning svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">BDS Only</span></div></div></div></div> <!> <div class="library-content svelte-c8k2rg"><!></div></div>');function U(t,U){v(U,!0);let E=e(s([])),M=e(s([])),Y=e(!0),_=e(null),q=e(""),V=e(""),J=e("all"),K=e("all"),Q=e("all"),R=e("grid"),X=e("name");let Z=k(()=>{const e=new Set(o(E).map(e=>e.section));return["all",...Array.from(e)]}),ee=k(()=>{const e=new Set(o(E).map(e=>e.category));return["all",...Array.from(e)]}),se=k(()=>({total:o(E).length,public:o(E).filter(e=>"PUBLIC"===e.access).length,bdsOnly:o(E).filter(e=>"BDS_ONLY"===e.access).length,filtered:o(M).length})),le=k(()=>o(Z).map(e=>({value:e,label:"all"===e?"All Sections":e}))),ae=k(()=>o(ee).map(e=>({value:e,label:"all"===e?"All Categories":e})));const te=[{value:"all",label:"All Access"},{value:"PUBLIC",label:"Public"},{value:"BDS_ONLY",label:"BDS Only"}],re=[{value:"name",label:"Name"},{value:"section",label:"Section"},{value:"category",label:"Category"}];l(async()=>{try{u(E,await A.getAllSkills(),!0),ce(),u(Y,!1)}catch(e){u(_,e instanceof Error?e.message:"Failed to load skills",!0),u(Y,!1)}});const ie=function(e,s=300){let l=null;const a=function(...a){null!==l&&clearTimeout(l),l=setTimeout(()=>{e.apply(this,a),l=null},s)};return a.cancel=()=>{null!==l&&(clearTimeout(l),l=null)},a}(e=>{u(V,e,!0)},300);function ce(){let e=[...o(E)];if(o(V).trim()){const s=o(V).toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.tags.some(e=>e.toLowerCase().includes(s)))}"all"!==o(J)&&(e=e.filter(e=>e.section===o(J))),"all"!==o(K)&&(e=e.filter(e=>e.category===o(K))),"all"!==o(Q)&&(e=e.filter(e=>e.access===o(Q))),e.sort((e,s)=>"name"===o(X)?e.name.localeCompare(s.name):"section"===o(X)?e.section.localeCompare(s.section):"category"===o(X)?e.category.localeCompare(s.category):0),u(M,e,!0)}function ne(){u(q,""),u(V,""),u(J,"all"),u(K,"all"),u(Q,"all")}a(()=>{o(V),o(J),o(K),o(Q),o(X),ce()}),a(()=>{ie(o(q))});var ve=H(),oe=g(ve),de=g(oe),ge=d(g(de),2),ue=g(ge),me=g(ue),pe=g(me,!0);m(me),p(2),m(ue);var ke=d(ue,2),he=g(ke),fe=g(he,!0);m(he),p(2),m(ke);var $e=d(ke,2),ye=g($e),be=g(ye,!0);m(ye),p(2),m($e),m(ge),m(de),m(oe);var Ce=d(oe,2);j(Ce,{variant:"bordered",padding:"lg",children:(e,s)=>{var l=P(),a=g(l),t=g(a);B(t,{type:"search",placeholder:"Search skills by name, description, or tags...",fullWidth:!0,get value(){return o(q)},set value(e){u(q,e,!0)}}),m(a);var r=d(a,2),n=g(r);z(n,{get options(){return o(le)},placeholder:"All Sections",fullWidth:!0,get value(){return o(J)},set value(e){u(J,e,!0)}});var v=d(n,2);z(v,{get options(){return o(ae)},placeholder:"All Categories",fullWidth:!0,get value(){return o(K)},set value(e){u(K,e,!0)}});var $=d(v,2);z($,{get options(){return te},placeholder:"All Access",fullWidth:!0,get value(){return o(Q)},set value(e){u(Q,e,!0)}});var y=d($,2);x(y,{variant:"secondary",$$events:{click:ne},children:(e,s)=>{p();var l=h("Clear");c(e,l)},$$slots:{default:!0}}),m(r);var b=d(r,2),C=g(b),w=g(C);z(w,{get options(){return re},get value(){return o(X)},set value(e){u(X,e,!0)}}),m(C);var S=d(C,2),A=g(S);{let e=k(()=>"grid"===o(R)?"primary":"ghost");x(A,{get variant(){return o(e)},size:"sm",$$events:{click:()=>u(R,"grid")},children:(e,s)=>{p();var l=h("Grid");c(e,l)},$$slots:{default:!0}})}var L=d(A,2);{let e=k(()=>"list"===o(R)?"primary":"ghost");x(L,{get variant(){return o(e)},size:"sm",$$events:{click:()=>u(R,"list")},children:(e,s)=>{p();var l=h("List");c(e,l)},$$slots:{default:!0}})}m(S);var j=d(S,2),O=g(j);F(O,{variant:"default",children:(e,s)=>{p();var l=h();i(()=>f(l,`${o(se).filtered??""} skills`)),c(e,l)},$$slots:{default:!0}}),m(j),m(b),m(l),c(e,l)},$$slots:{default:!0}});var we=d(Ce,2),Se=g(we),Ae=e=>{var s=D();c(e,s)},Le=e=>{var s=$(),l=y(s),a=e=>{O(e,{variant:"error",title:"Failed to Load Skills",children:(e,s)=>{p();var l=h();i(()=>f(l,o(_))),c(e,l)},$$slots:{default:!0}})},t=e=>{var s=$(),l=y(s),a=e=>{j(e,{variant:"elevated",padding:"lg",children:(e,s)=>{var l=I(),a=d(g(l),2);x(a,{variant:"primary",$$events:{click:ne},children:(e,s)=>{p();var l=h("Clear Filters");c(e,l)},$$slots:{default:!0}}),m(l),c(e,l)},$$slots:{default:!0}})},t=e=>{var s=G(),l=g(s);{const e=(e,s)=>{let l=()=>s?.().item;var a=W(),t=g(a),n=g(t);j(n,{variant:"bordered",padding:"lg",children:(e,s)=>{var a=T(),t=y(a),n=g(t),v=g(n,!0);m(n);var u=d(n,2);{let e=k(()=>"PUBLIC"===l().access?"success":"warning");F(u,{get variant(){return o(e)},size:"sm",children:(e,s)=>{p();var a=h();i(()=>f(a,l().access)),c(e,a)},$$slots:{default:!0}})}m(t);var $=d(t,2),w=g($,!0);m($);var S=d($,2),A=g(S),L=d(g(A),2);F(L,{variant:"default",size:"sm",children:(e,s)=>{p();var a=h();i(()=>f(a,l().section)),c(e,a)},$$slots:{default:!0}}),m(A);var j=d(A,2),B=d(g(j),2);F(B,{variant:"default",size:"sm",children:(e,s)=>{p();var a=h();i(()=>f(a,l().category)),c(e,a)},$$slots:{default:!0}}),m(j),m(S);var z=d(S,2),x=g(z);b(x,17,()=>l().tags.slice(0,4),C,(e,s)=>{F(e,{variant:"info",size:"sm",outline:!0,children:(e,l)=>{p();var a=h();i(()=>f(a,o(s))),c(e,a)},$$slots:{default:!0}})});var O=d(x,2),P=e=>{var s=N(),a=g(s);m(s),i(()=>f(a,"+"+(l().tags.length-4))),c(e,s)};r(O,e=>{l().tags.length>4&&e(P)}),m(z);var D=d(z,2),I=g(D),W=d(g(I),2);F(W,{variant:"accent",size:"sm",children:(e,s)=>{p();var a=h();i((e,s)=>f(a,`$${e??""} - $${s??""}`),[()=>l().estimatedCost.min.toFixed(3),()=>l().estimatedCost.max.toFixed(3)]),c(e,a)},$$slots:{default:!0}}),m(I),m(D),i(()=>{f(v,l().name),f(w,l().description)}),c(e,a)},$$slots:{default:!0}}),m(t),m(a),i(()=>{w(a,1,`skill-wrapper ${o(R)??""}`,"svelte-c8k2rg"),S(t,"href",`/library/${l().id??""}`)}),c(e,a)};let s=k(()=>"grid"===o(R)?300:200),a=k(()=>"grid"===o(R)?24:16);L(l,{get items(){return o(M)},get itemHeight(){return o(s)},height:"calc(100vh - 400px)",get gap(){return o(a)},children:e,$$slots:{default:!0}})}m(s),c(e,s)};r(l,e=>{0===o(M).length?e(a):e(t,!1)},!0),c(e,s)};r(l,e=>{o(_)?e(a):e(t,!1)},!0),c(e,s)};r(Se,e=>{o(Y)?e(Ae):e(Le,!1)}),m(we),m(ve),i(()=>{f(pe,o(se).total),f(fe,o(se).public),f(be,o(se).bdsOnly)}),c(t,ve),n()}export{U as component};
