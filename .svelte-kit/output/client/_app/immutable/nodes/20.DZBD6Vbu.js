import{s as e}from"../chunks/Ccx2Brwz.js";import{s,T as t,o as a,f as l,w as i,h as r,j as d,p as v,e as n,m as o,c,r as u,G as p,d as k,v as f,g as h,i as w,q as m,E as g,k as z,x as $,S as b,M as y}from"../chunks/6oQqUEYU.js";import{A as S}from"../chunks/DVFTkJZ1.js";import{P as D}from"../chunks/CuaX3alS.js";import{B as A}from"../chunks/DmHK5tH5.js";import{I as N}from"../chunks/DYasWFAf.js";import{B as W}from"../chunks/CXED05OM.js";import{S as j}from"../chunks/qD4pWFSZ.js";var C=l("The visual workflow builder is under development. You can create and manage workflows by\n\t\tchaining multiple skills together. This feature will support: <ul><li>Drag-and-drop workflow building</li> <li>Conditional branching and loops</li> <li>Data passing between skills</li> <li>Workflow templates and sharing</li> <li>Execution scheduling and monitoring</li></ul>",1),x=l('<div class="create-workflow-form svelte-1k5z4u1"><!> <!> <div class="form-actions svelte-1k5z4u1"><!> <!></div></div>'),I=l('<div class="empty-state svelte-1k5z4u1"><p>No workflows yet. Create your first workflow to get started.</p></div>'),R=l('<div role="button" tabindex="0"><div class="workflow-info svelte-1k5z4u1"><div class="workflow-name svelte-1k5z4u1"> </div> <div class="workflow-description svelte-1k5z4u1"> </div> <div class="workflow-meta svelte-1k5z4u1"><!> <span class="workflow-steps svelte-1k5z4u1"> </span></div></div> <!></div>'),T=l('<div class="workflows-list svelte-1k5z4u1"></div>'),B=l('<div class="section-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1">My Workflows</h2> <!></div> <!> <!>',1),_=l('<div class="empty-state svelte-1k5z4u1"><p>No steps added yet. Add skills below to build your workflow.</p></div>'),E=l('<div class="step-connector svelte-1k5z4u1">â†“</div>'),q=l('<div class="step-card svelte-1k5z4u1"><div class="step-number svelte-1k5z4u1"> </div> <div class="step-content svelte-1k5z4u1"><div class="step-name svelte-1k5z4u1"> </div> <code class="step-id svelte-1k5z4u1"> </code></div> <!></div> <!>',1),J=l('<div class="steps-list svelte-1k5z4u1"></div>'),M=l('<div class="workflow-builder svelte-1k5z4u1"><div class="builder-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1"> </h2> <!></div> <p class="builder-description svelte-1k5z4u1"> </p> <div class="steps-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Workflow Steps</h3> <!></div> <div class="add-step-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Add Step</h3> <div class="add-step-form"><!></div></div></div>'),O=l('<div class="no-selection svelte-1k5z4u1"><p>Select a workflow from the list to view and edit its steps.</p></div>'),P=l('<div class="workflows-container svelte-1k5z4u1"><div class="page-header svelte-1k5z4u1"><div class="header-content svelte-1k5z4u1"><h1 class="page-title svelte-1k5z4u1">Skill Workflows</h1> <p class="page-description svelte-1k5z4u1">Build multi-step workflows by chaining skills together for complex automation</p></div> <div class="stats-row svelte-1k5z4u1"><div class="stat-item svelte-1k5z4u1"><span class="stat-value svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Total</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value default svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Draft</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value success svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Active</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value warning svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Archived</span></div></div></div> <!> <div class="content-grid svelte-1k5z4u1"><!> <!></div></div>');function G(l,b){v(b,!0);let G=s(t([])),Y=s(t([])),F=s(!0),H=s(null),K=s(!1),L=s(""),Q=s("");function U(){localStorage.setItem("workflows",JSON.stringify(h(G)))}function V(){if(!h(L).trim())return;const e={id:`wf-${Date.now()}`,name:h(L),description:h(Q),steps:[],createdAt:new Date,status:"draft"};c(G,[...h(G),e],!0),U(),c(H,e,!0),c(K,!1),c(L,""),c(Q,"")}function X(e){return{draft:"default",active:"success",archived:"warning"}[e]}a(async()=>{try{c(Y,await e.getAllSkills(),!0),function(){const e=localStorage.getItem("workflows");if(e)try{const s=JSON.parse(e);c(G,s.map(e=>({...e,createdAt:new Date(e.createdAt),lastRun:e.lastRun?new Date(e.lastRun):void 0})),!0)}catch(s){c(G,[],!0)}}(),c(F,!1)}catch(s){c(F,!1)}});let Z=m(()=>({total:h(G).length,draft:h(G).filter(e=>"draft"===e.status).length,active:h(G).filter(e=>"active"===e.status).length,archived:h(G).filter(e=>"archived"===e.status).length}));var ee=P(),se=o(ee),te=n(o(se),2),ae=o(te),le=o(ae),ie=o(le,!0);u(le),p(2),u(ae);var re=n(ae,2),de=o(re),ve=o(de,!0);u(de),p(2),u(re);var ne=n(re,2),oe=o(ne),ce=o(oe,!0);u(oe),p(2),u(ne);var ue=n(ne,2),pe=o(ue),ke=o(pe,!0);u(pe),p(2),u(ue),u(te),u(se);var fe=n(se,2);S(fe,{variant:"info",title:"Workflow Builder Coming Soon",children:(e,s)=>{p();var t=C();p(),r(e,t)},$$slots:{default:!0}});var he=n(fe,2),we=o(he);D(we,{variant:"bordered",padding:"lg",children:(e,s)=>{var t=B(),a=k(t),l=n(o(a),2);A(l,{variant:"primary",size:"sm",get disabled(){return h(K)},$$events:{click:()=>c(K,!0)},children:(e,s)=>{p();var t=f("+ New Workflow");r(e,t)},$$slots:{default:!0}}),u(a);var d=n(a,2),v=e=>{D(e,{variant:"elevated",padding:"md",children:(e,s)=>{var t=x(),a=o(t);N(a,{label:"Workflow Name",placeholder:"e.g., Code Review & Test",required:!0,fullWidth:!0,get value(){return h(L)},set value(e){c(L,e,!0)}});var l=n(a,2);N(l,{label:"Description",placeholder:"Describe what this workflow does...",fullWidth:!0,get value(){return h(Q)},set value(e){c(Q,e,!0)}});var i=n(l,2),d=o(i);{let e=m(()=>!h(L).trim());A(d,{variant:"primary",get disabled(){return h(e)},$$events:{click:V},children:(e,s)=>{p();var t=f("Create");r(e,t)},$$slots:{default:!0}})}var v=n(d,2);A(v,{variant:"ghost",$$events:{click:()=>c(K,!1)},children:(e,s)=>{p();var t=f("Cancel");r(e,t)},$$slots:{default:!0}}),u(i),u(t),r(e,t)},$$slots:{default:!0}})};w(d,e=>{h(K)&&e(v)});var z=n(d,2),b=e=>{var s=I();r(e,s)},S=e=>{var s=T();g(s,21,()=>h(G),e=>e.id,(e,s)=>{var t=R();let a;t.__click=()=>c(H,h(s),!0),t.__keydown=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c(H,h(s),!0))};var l=o(t),d=o(l),v=o(d,!0);u(d);var k=n(d,2),w=o(k,!0);u(k);var g=n(k,2),z=o(g);{let e=m(()=>X(h(s).status));W(z,{get variant(){return h(e)},size:"sm",children:(e,t)=>{p();var a=f();i(()=>$(a,h(s).status)),r(e,a)},$$slots:{default:!0}})}var b=n(z,2),S=o(b);u(b),u(g),u(l);var D=n(l,2);A(D,{variant:"danger",size:"sm",$$events:{click:e=>{var t,a;e.stopPropagation(),t=h(s).id,c(G,h(G).filter(e=>e.id!==t),!0),U(),(null==(a=h(H))?void 0:a.id)===t&&c(H,null)}},children:(e,s)=>{p();var t=f("Delete");r(e,t)},$$slots:{default:!0}}),u(t),i(()=>{var e;a=y(t,1,"workflow-item svelte-1k5z4u1",null,a,{selected:(null==(e=h(H))?void 0:e.id)===h(s).id}),$(v,h(s).name),$(w,h(s).description||"No description"),$(S,`${h(s).steps.length??""} steps`)}),r(e,t)}),u(s),r(e,s)};w(z,e=>{0===h(G).length?e(b):e(S,!1)}),r(e,t)},$$slots:{default:!0}});var me=n(we,2);D(me,{variant:"bordered",padding:"lg",children:(e,s)=>{var t=z(),a=k(t),l=e=>{var s=M(),t=o(s),a=o(t),l=o(a,!0);u(a);var d=n(a,2);{let e=m(()=>X(h(H).status));W(d,{get variant(){return h(e)},size:"sm",children:(e,s)=>{p();var t=f();i(()=>$(t,h(H).status)),r(e,t)},$$slots:{default:!0}})}u(t);var v=n(t,2),z=o(v,!0);u(v);var b=n(v,2),y=n(o(b),2),S=e=>{var s=_();r(e,s)},D=e=>{var s=J();g(s,23,()=>h(H).steps,e=>e.id,(e,s,t)=>{var a=q(),l=k(a),d=o(l),v=o(d,!0);u(d);var m=n(d,2),g=o(m),z=o(g,!0);u(g);var b=n(g,2),y=o(b,!0);u(b),u(m);var S=n(m,2);A(S,{variant:"ghost",size:"sm",$$events:{click:()=>{return e=h(H).id,t=h(s).id,c(G,h(G).map(s=>s.id===e?{...s,steps:s.steps.filter(e=>e.id!==t).map((e,s)=>({...e,order:s+1}))}:s),!0),U(),void c(H,h(G).find(s=>s.id===e)||null,!0);var e,t}},children:(e,s)=>{p();var t=f("Remove");r(e,t)},$$slots:{default:!0}}),u(l);var D=n(l,2),N=e=>{var s=E();r(e,s)};w(D,e=>{h(t)<h(H).steps.length-1&&e(N)}),i(()=>{$(v,h(t)+1),$(z,h(s).skillName),$(y,h(s).skillId)}),r(e,a)}),u(s),r(e,s)};w(y,e=>{0===h(H).steps.length?e(S):e(D,!1)}),u(b);var N=n(b,2),C=n(o(N),2),x=o(C);{let e=m(()=>h(Y).map(e=>({value:e.id,label:e.name})));j(x,{get options(){return h(e)},placeholder:"Select a skill to add...",fullWidth:!0,$$events:{change:e=>{const s=e.target.value;s&&(!function(e,s){const t=h(Y).find(e=>e.id===s);t&&(c(G,h(G).map(s=>{if(s.id===e){const e={id:`step-${Date.now()}`,skillId:t.id,skillName:t.name,order:s.steps.length+1,inputs:{}};return{...s,steps:[...s.steps,e]}}return s}),!0),U(),c(H,h(G).find(s=>s.id===e)||null,!0))}(h(H).id,s),e.target.value="")}}})}u(C),u(N),u(s),i(()=>{$(l,h(H).name),$(z,h(H).description||"No description provided")}),r(e,s)},d=e=>{var s=O();r(e,s)};w(a,e=>{h(H)?e(l):e(d,!1)}),r(e,t)},$$slots:{default:!0}}),u(he),u(ee),i(()=>{$(ie,h(Z).total),$(ve,h(Z).draft),$(ce,h(Z).active),$(ke,h(Z).archived)}),r(l,ee),d()}b(["click","keydown"]);export{G as component};
