import{f as c,a as o,t as N,c as ut}from"../chunks/9XWdspYM.js";import{o as ft}from"../chunks/pKpJ46-q.js";import{p as pt,al as C,a5 as Ne,am as mt,i as e,t as n,j as _t,s as m,b as r,c as s,g as a,ak as O,aj as F,x as ae}from"../chunks/Cr9rJIyK.js";import{d as xt,i as g,s as v}from"../chunks/O9ATySAj.js";import{e as gt}from"../chunks/BEZi9W-P.js";import"../chunks/BsLrHCZA.js";import"../chunks/C2WxzHaP.js";import"../chunks/DsSU34pe.js";import{B as se,P as pe}from"../chunks/Ci9HWMjh.js";import{I as $t}from"../chunks/DBn6PFen.js";import{S as me}from"../chunks/Dh-X1iYj.js";import{B as G}from"../chunks/CJmKRmqT.js";import{A as ht}from"../chunks/CWNTjX5g.js";var yt=c('<div class="filters-section svelte-1xl2tfr"><!> <div class="filter-row svelte-1xl2tfr"><!> <!> <!></div></div>'),bt=c('<div class="loading-state svelte-1xl2tfr"><div class="spinner svelte-1xl2tfr"></div> <p>Loading history...</p></div>'),kt=c('<div class="empty-state svelte-1xl2tfr"><div class="empty-icon svelte-1xl2tfr">ðŸ“‹</div> <p class="empty-message svelte-1xl2tfr">No execution history found</p> <p class="empty-hint svelte-1xl2tfr"> </p></div>'),Pt=c('<span class="separator svelte-1xl2tfr">â€¢</span> <!>',1),St=c('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Session ID</span> <code class="svelte-1xl2tfr"> </code></div>'),wt=c('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Model</span> <code class="svelte-1xl2tfr"> </code></div>'),Nt=c('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Tokens</span> <code class="svelte-1xl2tfr"> </code></div>'),Ot=c('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Latency</span> <code class="svelte-1xl2tfr"> </code></div>'),It=c('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Metadata</h3> <div class="metadata-grid svelte-1xl2tfr"><!> <!> <!> <!></div></div>'),At=c('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Inputs</h3> <pre class="code-block svelte-1xl2tfr"> </pre></div>'),Ct=c('<div class="output-box svelte-1xl2tfr"> </div>'),Dt=c('<div class="entry-details svelte-1xl2tfr"><!> <!> <div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr"> </h3> <!></div> <div class="entry-actions svelte-1xl2tfr"><!></div></div>'),Et=c('<button class="entry-header svelte-1xl2tfr"><div class="entry-info svelte-1xl2tfr"><div class="entry-title svelte-1xl2tfr"><span class="skill-name svelte-1xl2tfr"> </span> <!></div> <div class="entry-meta svelte-1xl2tfr"><span> </span> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <!></div></div> <span class="expand-icon svelte-1xl2tfr"> </span></button> <!>',1),Lt=c('<div class="pagination svelte-1xl2tfr"><!> <!> <!></div>'),zt=c('<div class="history-list svelte-1xl2tfr"></div> <!>',1),Ht=c('<div class="history-container svelte-1xl2tfr"><div class="page-header svelte-1xl2tfr"><div class="header-content svelte-1xl2tfr"><h1 class="page-title svelte-1xl2tfr">Execution History</h1> <p class="page-description svelte-1xl2tfr"> </p></div> <!></div> <!> <!></div>');function Vt(Oe,Ie){pt(Ie,!0);let b=C(Ne([])),Q=C(Ne([])),_e=C(!0),W=C(""),J=C("all"),U=C("all"),K=C("recent"),k=C(1),re=20,V=C(null),X=F(()=>Math.ceil(e(Q).length/re)),xe=F(()=>e(Q).slice((e(k)-1)*re,e(k)*re));const Ae=F(()=>Array.from(new Set(e(b).map(t=>t.section))).sort()),Ce=F(()=>[{value:"all",label:"All Sections"},...e(Ae).map(t=>({value:t,label:t}))]),De=[{value:"all",label:"All Status"},{value:"success",label:"Success Only"},{value:"error",label:"Errors Only"}],Ee=[{value:"recent",label:"Most Recent"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Skill Name"},{value:"cost",label:"Highest Cost"}];ft(()=>{Le(),m(_e,!1)});function Le(){const t=localStorage.getItem("execution_history");if(t)try{m(b,JSON.parse(t),!0),le()}catch(i){console.error("Failed to load history:",i),m(b,[],!0)}}function le(){let t=[...e(b)];if(e(W)){const i=e(W).toLowerCase();t=t.filter(_=>_.skillName.toLowerCase().includes(i)||_.section.toLowerCase().includes(i)||_.category.toLowerCase().includes(i))}if(e(J)!=="all"&&(t=t.filter(i=>i.section===e(J))),e(U)!=="all"){const i=e(U)==="success";t=t.filter(_=>_.success===i)}t.sort((i,_)=>{switch(e(K)){case"recent":return new Date(_.timestamp).getTime()-new Date(i.timestamp).getTime();case"oldest":return new Date(i.timestamp).getTime()-new Date(_.timestamp).getTime();case"name":return i.skillName.localeCompare(_.skillName);case"cost":return(_.metadata.cost||0)-(i.metadata.cost||0);default:return 0}}),m(Q,t,!0),m(k,1)}mt(()=>{e(W),e(J),e(U),e(K),le()});function ze(t){m(V,e(V)===t?null:t,!0)}function He(){confirm("Are you sure you want to clear all execution history?")&&(localStorage.removeItem("execution_history"),m(b,[],!0),m(Q,[],!0))}function Me(t){m(b,e(b).filter(i=>i.id!==t),!0),localStorage.setItem("execution_history",JSON.stringify(e(b))),le()}function Te(t){return new Date(t).toLocaleString()}function Be(t){return t!==void 0?`$${t.toFixed(4)}`:"N/A"}function je(t){return t!==void 0?`${t}ms`:"N/A"}var oe=Ht(),ie=s(oe),ve=s(ie),ge=r(s(ve),2),Fe=s(ge);a(ge),a(ve);var We=r(ve,2);{var Je=t=>{se(t,{variant:"danger",$$events:{click:He},children:(i,_)=>{O();var L=N("Clear All History");o(i,L)},$$slots:{default:!0}})};g(We,t=>{e(b).length>0&&t(Je)})}a(ie);var $e=r(ie,2);{var Ue=t=>{pe(t,{variant:"bordered",padding:"lg",children:(i,_)=>{var L=yt(),Y=s(L);$t(Y,{type:"search",placeholder:"Search by skill name, section, or category...",fullWidth:!0,get value(){return e(W)},set value($){m(W,$,!0)}});var I=r(Y,2),z=s(I);me(z,{get options(){return e(Ce)},fullWidth:!0,get value(){return e(J)},set value($){m(J,$,!0)}});var H=r(z,2);me(H,{get options(){return De},fullWidth:!0,get value(){return e(U)},set value($){m(U,$,!0)}});var M=r(H,2);me(M,{get options(){return Ee},fullWidth:!0,get value(){return e(K)},set value($){m(K,$,!0)}}),a(I),a(L),o(i,L)},$$slots:{default:!0}})};g($e,t=>{e(b).length>0&&t(Ue)})}var qe=r($e,2);{var Qe=t=>{var i=bt();o(t,i)},Re=t=>{var i=ut(),_=ae(i);{var L=I=>{pe(I,{variant:"elevated",padding:"lg",children:(z,H)=>{var M=kt(),$=r(s(M),4),A=s($,!0);a($),a(M),n(()=>v(A,e(W)||e(J)!=="all"||e(U)!=="all"?"Try adjusting your filters":"Execute skills to see them appear here")),o(z,M)},$$slots:{default:!0}})},Y=I=>{var z=zt(),H=ae(z);gt(H,21,()=>e(xe),A=>A.id,(A,l)=>{pe(A,{variant:"bordered",padding:"none",children:(Z,de)=>{var ee=Et(),P=ae(ee);P.__click=()=>ze(e(l).id);var D=s(P),E=s(D),T=s(E),Ge=s(T,!0);a(T);var Ke=r(T,2);{let u=F(()=>e(l).success?"success":"error");G(Ke,{get variant(){return e(u)},size:"sm",children:(S,h)=>{O();var q=N();n(()=>v(q,e(l).success?"Success":"Error")),o(S,q)},$$slots:{default:!0}})}a(E);var he=r(E,2),ne=s(he),Ve=s(ne,!0);a(ne);var ye=r(ne,4);G(ye,{variant:"default",size:"sm",children:(u,S)=>{O();var h=N();n(()=>v(h,e(l).section)),o(u,h)},$$slots:{default:!0}});var be=r(ye,4);G(be,{variant:"default",size:"sm",children:(u,S)=>{O();var h=N();n(()=>v(h,e(l).category)),o(u,h)},$$slots:{default:!0}});var Xe=r(be,2);{var Ye=u=>{var S=Pt(),h=r(ae(S),2);G(h,{variant:"accent",size:"sm",children:(q,ce)=>{O();var te=N();n(R=>v(te,R),[()=>Be(e(l).metadata.cost)]),o(q,te)},$$slots:{default:!0}}),o(u,S)};g(Xe,u=>{e(l).metadata.cost&&u(Ye)})}a(he),a(D);var ke=r(D,2),Ze=s(ke,!0);a(ke),a(P);var et=r(P,2);{var tt=u=>{var S=Dt(),h=s(S);{var q=d=>{var x=It(),w=r(s(x),2),B=s(w);{var fe=f=>{var p=St(),y=r(s(p),2),j=s(y,!0);a(y),a(p),n(()=>v(j,e(l).metadata.sessionId)),o(f,p)};g(B,f=>{e(l).metadata.sessionId&&f(fe)})}var Se=r(B,2);{var it=f=>{var p=wt(),y=r(s(p),2),j=s(y,!0);a(y),a(p),n(()=>v(j,e(l).metadata.model)),o(f,p)};g(Se,f=>{e(l).metadata.model&&f(it)})}var we=r(Se,2);{var vt=f=>{var p=Nt(),y=r(s(p),2),j=s(y,!0);a(y),a(p),n(()=>v(j,e(l).metadata.tokensUsed)),o(f,p)};g(we,f=>{e(l).metadata.tokensUsed&&f(vt)})}var dt=r(we,2);{var nt=f=>{var p=Ot(),y=r(s(p),2),j=s(y,!0);a(y),a(p),n(ct=>v(j,ct),[()=>je(e(l).metadata.latency)]),o(f,p)};g(dt,f=>{e(l).metadata.latency&&f(nt)})}a(w),a(x),o(d,x)};g(h,d=>{e(l).metadata&&d(q)})}var ce=r(h,2);{var te=d=>{var x=At(),w=r(s(x),2),B=s(w,!0);a(w),a(x),n(fe=>v(B,fe),[()=>JSON.stringify(e(l).inputs,null,2)]),o(d,x)};g(ce,d=>{Object.keys(e(l).inputs).length>0&&d(te)})}var R=r(ce,2),ue=s(R),at=s(ue,!0);a(ue);var st=r(ue,2);{var rt=d=>{var x=Ct(),w=s(x,!0);a(x),n(()=>v(w,e(l).output)),o(d,x)},lt=d=>{ht(d,{variant:"error",children:(x,w)=>{O();var B=N();n(()=>v(B,e(l).error||"Unknown error occurred")),o(x,B)},$$slots:{default:!0}})};g(st,d=>{e(l).success?d(rt):d(lt,!1)})}a(R);var Pe=r(R,2),ot=s(Pe);se(ot,{variant:"danger",size:"sm",$$events:{click:()=>Me(e(l).id)},children:(d,x)=>{O();var w=N("Delete Entry");o(d,w)},$$slots:{default:!0}}),a(Pe),a(S),n(()=>v(at,e(l).success?"Output":"Error")),o(u,S)};g(et,u=>{e(V)===e(l).id&&u(tt)})}n(u=>{v(Ge,e(l).skillName),v(Ve,u),v(Ze,e(V)===e(l).id?"â–¼":"â–¶")},[()=>Te(e(l).timestamp)]),o(Z,ee)},$$slots:{default:!0}})}),a(H);var M=r(H,2);{var $=A=>{var l=Lt(),Z=s(l);{let P=F(()=>e(k)===1);se(Z,{variant:"secondary",size:"sm",get disabled(){return e(P)},$$events:{click:()=>m(k,Math.max(1,e(k)-1),!0)},children:(D,E)=>{O();var T=N("Previous");o(D,T)},$$slots:{default:!0}})}var de=r(Z,2);G(de,{variant:"default",children:(P,D)=>{O();var E=N();n(()=>v(E,`Page ${e(k)??""} of ${e(X)??""}`)),o(P,E)},$$slots:{default:!0}});var ee=r(de,2);{let P=F(()=>e(k)===e(X));se(ee,{variant:"secondary",size:"sm",get disabled(){return e(P)},$$events:{click:()=>m(k,Math.min(e(X),e(k)+1),!0)},children:(D,E)=>{O();var T=N("Next");o(D,T)},$$slots:{default:!0}})}a(l),o(A,l)};g(M,A=>{e(X)>1&&A($)})}o(I,z)};g(_,I=>{e(xe).length===0?I(L):I(Y,!1)},!0)}o(t,i)};g(qe,t=>{e(_e)?t(Qe):t(Re,!1)})}a(oe),n(()=>v(Fe,`${e(Q).length??""} execution entries`)),o(Oe,oe),_t()}xt(["click"]);export{Vt as component};
