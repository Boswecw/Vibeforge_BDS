{"version":3,"mappings":"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","names":["analyticsService","constructor","__publicField","this","getHistory","stored","localStorage","getItem","storageKey","JSON","parse","error","filterByTimeRange","history","range","now","Date","cutoff","getTime","filter","entry","timestamp","getAnalytics","timeRange","allHistory","length","getEmptyAnalytics","totalInvocations","successRate","h","success","errorRate","latencies","metadata","latency","map","avgResponseTime","reduce","a","b","totalCost","sum","cost","skillStats","Map","forEach","has","skillId","set","entries","name","skillName","get","push","topSkills","Array","from","successCount","e","avgLatency","count","avgCost","sort","slice","modelStats","model","modelUsage","timeSeriesData","generateTimeSeries","costTrend","generateCostTrend","grouped","date","getFullYear","String","getMonth","padStart","getDate","getHours","formatDate","invocations","errors","localeCompare","exportToCSV","analytics","lines","toFixed","skill","point","join","downloadCSV","csv","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","toISOString","split","setAttribute","style","visibility","body","appendChild","click","removeChild","revokeObjectURL","LineChartPromise","__VITE_PRELOAD__","BarChartPromise","$.state","loading","refreshing","timeRangeOptions","value","label","loadAnalytics","$.set","formatCurrency","formatPercent","formatTime","seconds","getSuccessRateBadge","rate","onMount","$.user_effect","invocationsChartData","$.derived","labels","$.get","d","datasets","data","borderColor","backgroundColor","fill","tension","costChartData","topSkillsChartData","s","borderWidth","modelUsageChartData","colors","m","c","replace","div","root","div_1","div_2","Select","node","$$value","Button","node_1","setTimeout","node_2","alert","div_3","root_3","div_4","$.first_child","fragment_2","Panel","node_5","div_5","root_6","div_6","div_7","toLocaleString","node_6","div_8","root_7","div_9","div_10","Badge","node_7","node_8","div_11","root_9","div_12","div_13","node_9","div_14","root_10","div_15","div_16","div_17","node_10","div_18","root_13","default","LineChart","$$source","LineChart_1","$$anchor","div_19","node_13","div_20","root_16","LineChart_2","div_21","node_16","div_22","root_19","BarChart","BarChart_1","node_19","div_23","root_22","BarChart_2","node_22","div_24","$.sibling","fragment_12","table","tbody","$.index","index","tr","root_24","td","node_23","text_6","nodeValue","td_1","div_25","div_26","td_2","td_3","node_24","td_4","td_5","$.set_text","text_7","text_8","text_9","node_25","div_27","fragment_15","table_1","tbody_1","$.each","tr_1","root_28","td_6","div_28","td_7","td_8","node_26","td_9","td_10","text_13","text_14","div_29","root_31","node_27","$$render","consequent_1","alternate","consequent","alternate_1"],"ignoreList":[],"sources":["../../../../../../src/lib/services/analyticsService.ts","../../../../../../src/routes/analytics/+page.svelte"],"sourcesContent":["/**\n * Analytics Service\n * Aggregates execution history into analytics metrics\n */\n\nexport interface HistoryEntry {\n\tid: string;\n\ttimestamp: string;\n\tskillId: string;\n\tskillName: string;\n\tsection: string;\n\tcategory: string;\n\tinputs: Record<string, any>;\n\toutput: string;\n\tmetadata: {\n\t\tsessionId?: string;\n\t\ttokensUsed?: number;\n\t\tcost?: number;\n\t\tlatency?: number;\n\t\tmodel?: string;\n\t};\n\tsuccess: boolean;\n\terror?: string;\n}\n\nexport interface AnalyticsData {\n\ttotalInvocations: number;\n\tsuccessRate: number;\n\tavgResponseTime: number;\n\ttotalCost: number;\n\ttopSkills: SkillUsage[];\n\tmodelUsage: ModelUsage[];\n\terrorRate: number;\n\ttimeSeriesData: TimeSeriesPoint[];\n\tcostTrend: CostTrendPoint[];\n}\n\nexport interface SkillUsage {\n\tskillId: string;\n\tskillName: string;\n\tcount: number;\n\tsuccessRate: number;\n\tavgCost: number;\n\tavgLatency: number;\n}\n\nexport interface ModelUsage {\n\tmodel: string;\n\tcount: number;\n\tavgResponseTime: number;\n\ttotalCost: number;\n\tsuccessRate: number;\n}\n\nexport interface TimeSeriesPoint {\n\tdate: string;\n\tinvocations: number;\n\terrors: number;\n\tcost: number;\n}\n\nexport interface CostTrendPoint {\n\tdate: string;\n\tcost: number;\n\tinvocations: number;\n}\n\nexport type TimeRange = '24h' | '7d' | '30d' | 'all';\n\nclass AnalyticsService {\n\tprivate storageKey = 'execution_history';\n\n\t/**\n\t * Get all history entries from localStorage\n\t */\n\tprivate getHistory(): HistoryEntry[] {\n\t\ttry {\n\t\t\tconst stored = localStorage.getItem(this.storageKey);\n\t\t\tif (!stored) return [];\n\t\t\treturn JSON.parse(stored) as HistoryEntry[];\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load history:', error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Filter history by time range\n\t */\n\tprivate filterByTimeRange(history: HistoryEntry[], range: TimeRange): HistoryEntry[] {\n\t\tif (range === 'all') return history;\n\n\t\tconst now = new Date();\n\t\tlet cutoff: Date;\n\n\t\tswitch (range) {\n\t\t\tcase '24h':\n\t\t\t\tcutoff = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n\t\t\t\tbreak;\n\t\t\tcase '7d':\n\t\t\t\tcutoff = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\t\t\t\tbreak;\n\t\t\tcase '30d':\n\t\t\t\tcutoff = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn history;\n\t\t}\n\n\t\treturn history.filter((entry) => new Date(entry.timestamp) >= cutoff);\n\t}\n\n\t/**\n\t * Get analytics data for a given time range\n\t */\n\tgetAnalytics(timeRange: TimeRange = '7d'): AnalyticsData {\n\t\tconst allHistory = this.getHistory();\n\t\tconst history = this.filterByTimeRange(allHistory, timeRange);\n\n\t\tif (history.length === 0) {\n\t\t\treturn this.getEmptyAnalytics();\n\t\t}\n\n\t\t// Calculate basic metrics\n\t\tconst totalInvocations = history.length;\n\t\tconst successCount = history.filter((h) => h.success).length;\n\t\tconst successRate = (successCount / totalInvocations) * 100;\n\t\tconst errorRate = 100 - successRate;\n\n\t\t// Calculate average response time\n\t\tconst latencies = history\n\t\t\t.filter((h) => h.metadata.latency !== undefined)\n\t\t\t.map((h) => h.metadata.latency!);\n\t\tconst avgResponseTime =\n\t\t\tlatencies.length > 0 ? latencies.reduce((a, b) => a + b, 0) / latencies.length : 0;\n\n\t\t// Calculate total cost\n\t\tconst totalCost = history.reduce((sum, h) => sum + (h.metadata.cost || 0), 0);\n\n\t\t// Get top skills\n\t\tconst skillStats = new Map<string, { entries: HistoryEntry[]; name: string }>();\n\t\thistory.forEach((entry) => {\n\t\t\tif (!skillStats.has(entry.skillId)) {\n\t\t\t\tskillStats.set(entry.skillId, {\n\t\t\t\t\tentries: [],\n\t\t\t\t\tname: entry.skillName\n\t\t\t\t});\n\t\t\t}\n\t\t\tskillStats.get(entry.skillId)!.entries.push(entry);\n\t\t});\n\n\t\tconst topSkills: SkillUsage[] = Array.from(skillStats.entries())\n\t\t\t.map(([skillId, { entries, name }]) => {\n\t\t\t\tconst successCount = entries.filter((e) => e.success).length;\n\t\t\t\tconst totalCost = entries.reduce((sum, e) => sum + (e.metadata.cost || 0), 0);\n\t\t\t\tconst latencies = entries\n\t\t\t\t\t.filter((e) => e.metadata.latency !== undefined)\n\t\t\t\t\t.map((e) => e.metadata.latency!);\n\t\t\t\tconst avgLatency =\n\t\t\t\t\tlatencies.length > 0 ? latencies.reduce((a, b) => a + b, 0) / latencies.length : 0;\n\n\t\t\t\treturn {\n\t\t\t\t\tskillId,\n\t\t\t\t\tskillName: name,\n\t\t\t\t\tcount: entries.length,\n\t\t\t\t\tsuccessRate: (successCount / entries.length) * 100,\n\t\t\t\t\tavgCost: totalCost / entries.length,\n\t\t\t\t\tavgLatency\n\t\t\t\t};\n\t\t\t})\n\t\t\t.sort((a, b) => b.count - a.count)\n\t\t\t.slice(0, 10);\n\n\t\t// Get model usage\n\t\tconst modelStats = new Map<string, HistoryEntry[]>();\n\t\thistory.forEach((entry) => {\n\t\t\tconst model = entry.metadata.model || 'Unknown';\n\t\t\tif (!modelStats.has(model)) {\n\t\t\t\tmodelStats.set(model, []);\n\t\t\t}\n\t\t\tmodelStats.get(model)!.push(entry);\n\t\t});\n\n\t\tconst modelUsage: ModelUsage[] = Array.from(modelStats.entries())\n\t\t\t.map(([model, entries]) => {\n\t\t\t\tconst successCount = entries.filter((e) => e.success).length;\n\t\t\t\tconst totalCost = entries.reduce((sum, e) => sum + (e.metadata.cost || 0), 0);\n\t\t\t\tconst latencies = entries\n\t\t\t\t\t.filter((e) => e.metadata.latency !== undefined)\n\t\t\t\t\t.map((e) => e.metadata.latency!);\n\t\t\t\tconst avgResponseTime =\n\t\t\t\t\tlatencies.length > 0 ? latencies.reduce((a, b) => a + b, 0) / latencies.length : 0;\n\n\t\t\t\treturn {\n\t\t\t\t\tmodel,\n\t\t\t\t\tcount: entries.length,\n\t\t\t\t\tavgResponseTime,\n\t\t\t\t\ttotalCost,\n\t\t\t\t\tsuccessRate: (successCount / entries.length) * 100\n\t\t\t\t};\n\t\t\t})\n\t\t\t.sort((a, b) => b.count - a.count);\n\n\t\t// Generate time series data\n\t\tconst timeSeriesData = this.generateTimeSeries(history, timeRange);\n\n\t\t// Generate cost trend\n\t\tconst costTrend = this.generateCostTrend(history, timeRange);\n\n\t\treturn {\n\t\t\ttotalInvocations,\n\t\t\tsuccessRate,\n\t\t\tavgResponseTime,\n\t\t\ttotalCost,\n\t\t\ttopSkills,\n\t\t\tmodelUsage,\n\t\t\terrorRate,\n\t\t\ttimeSeriesData,\n\t\t\tcostTrend\n\t\t};\n\t}\n\n\t/**\n\t * Generate time series data grouped by day/hour\n\t */\n\tprivate generateTimeSeries(history: HistoryEntry[], range: TimeRange): TimeSeriesPoint[] {\n\t\t// Group by date\n\t\tconst grouped = new Map<string, HistoryEntry[]>();\n\n\t\tconst formatDate = (date: Date): string => {\n\t\t\tif (range === '24h') {\n\t\t\t\t// Hourly granularity for 24h\n\t\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:00`;\n\t\t\t} else {\n\t\t\t\t// Daily granularity for 7d, 30d, all\n\t\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n\t\t\t}\n\t\t};\n\n\t\thistory.forEach((entry) => {\n\t\t\tconst date = formatDate(new Date(entry.timestamp));\n\t\t\tif (!grouped.has(date)) {\n\t\t\t\tgrouped.set(date, []);\n\t\t\t}\n\t\t\tgrouped.get(date)!.push(entry);\n\t\t});\n\n\t\t// Convert to time series points\n\t\tconst points: TimeSeriesPoint[] = Array.from(grouped.entries())\n\t\t\t.map(([date, entries]) => ({\n\t\t\t\tdate,\n\t\t\t\tinvocations: entries.length,\n\t\t\t\terrors: entries.filter((e) => !e.success).length,\n\t\t\t\tcost: entries.reduce((sum, e) => sum + (e.metadata.cost || 0), 0)\n\t\t\t}))\n\t\t\t.sort((a, b) => a.date.localeCompare(b.date));\n\n\t\treturn points;\n\t}\n\n\t/**\n\t * Generate cost trend data\n\t */\n\tprivate generateCostTrend(history: HistoryEntry[], range: TimeRange): CostTrendPoint[] {\n\t\tconst grouped = new Map<string, HistoryEntry[]>();\n\n\t\tconst formatDate = (date: Date): string => {\n\t\t\tif (range === '24h') {\n\t\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:00`;\n\t\t\t} else {\n\t\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n\t\t\t}\n\t\t};\n\n\t\thistory.forEach((entry) => {\n\t\t\tconst date = formatDate(new Date(entry.timestamp));\n\t\t\tif (!grouped.has(date)) {\n\t\t\t\tgrouped.set(date, []);\n\t\t\t}\n\t\t\tgrouped.get(date)!.push(entry);\n\t\t});\n\n\t\tconst points: CostTrendPoint[] = Array.from(grouped.entries())\n\t\t\t.map(([date, entries]) => ({\n\t\t\t\tdate,\n\t\t\t\tcost: entries.reduce((sum, e) => sum + (e.metadata.cost || 0), 0),\n\t\t\t\tinvocations: entries.length\n\t\t\t}))\n\t\t\t.sort((a, b) => a.date.localeCompare(b.date));\n\n\t\treturn points;\n\t}\n\n\t/**\n\t * Get empty analytics data (no history)\n\t */\n\tprivate getEmptyAnalytics(): AnalyticsData {\n\t\treturn {\n\t\t\ttotalInvocations: 0,\n\t\t\tsuccessRate: 0,\n\t\t\tavgResponseTime: 0,\n\t\t\ttotalCost: 0,\n\t\t\ttopSkills: [],\n\t\t\tmodelUsage: [],\n\t\t\terrorRate: 0,\n\t\t\ttimeSeriesData: [],\n\t\t\tcostTrend: []\n\t\t};\n\t}\n\n\t/**\n\t * Export analytics data to CSV\n\t */\n\texportToCSV(timeRange: TimeRange = '7d'): string {\n\t\tconst analytics = this.getAnalytics(timeRange);\n\t\tconst lines: string[] = [];\n\n\t\t// Summary section\n\t\tlines.push('Analytics Summary');\n\t\tlines.push(`Time Range,${timeRange}`);\n\t\tlines.push(`Total Invocations,${analytics.totalInvocations}`);\n\t\tlines.push(`Success Rate,${analytics.successRate.toFixed(2)}%`);\n\t\tlines.push(`Error Rate,${analytics.errorRate.toFixed(2)}%`);\n\t\tlines.push(`Average Response Time,${analytics.avgResponseTime.toFixed(3)}s`);\n\t\tlines.push(`Total Cost,$${analytics.totalCost.toFixed(4)}`);\n\t\tlines.push('');\n\n\t\t// Top Skills section\n\t\tlines.push('Top Skills by Usage');\n\t\tlines.push('Skill ID,Skill Name,Count,Success Rate,Avg Cost,Avg Latency');\n\t\tanalytics.topSkills.forEach((skill) => {\n\t\t\tlines.push(\n\t\t\t\t`${skill.skillId},${skill.skillName},${skill.count},${skill.successRate.toFixed(2)}%,$${skill.avgCost.toFixed(4)},${skill.avgLatency.toFixed(3)}s`\n\t\t\t);\n\t\t});\n\t\tlines.push('');\n\n\t\t// Model Usage section\n\t\tlines.push('Model Usage Breakdown');\n\t\tlines.push('Model,Count,Avg Response Time,Total Cost,Success Rate');\n\t\tanalytics.modelUsage.forEach((model) => {\n\t\t\tlines.push(\n\t\t\t\t`${model.model},${model.count},${model.avgResponseTime.toFixed(3)}s,$${model.totalCost.toFixed(4)},${model.successRate.toFixed(2)}%`\n\t\t\t);\n\t\t});\n\t\tlines.push('');\n\n\t\t// Time Series section\n\t\tlines.push('Time Series Data');\n\t\tlines.push('Date,Invocations,Errors,Cost');\n\t\tanalytics.timeSeriesData.forEach((point) => {\n\t\t\tlines.push(`${point.date},${point.invocations},${point.errors},$${point.cost.toFixed(4)}`);\n\t\t});\n\n\t\treturn lines.join('\\n');\n\t}\n\n\t/**\n\t * Download CSV file\n\t */\n\tdownloadCSV(timeRange: TimeRange = '7d') {\n\t\tconst csv = this.exportToCSV(timeRange);\n\t\tconst blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n\t\tconst link = document.createElement('a');\n\t\tconst url = URL.createObjectURL(blob);\n\n\t\tconst timestamp = new Date().toISOString().split('T')[0];\n\t\tlink.setAttribute('href', url);\n\t\tlink.setAttribute('download', `vibeforge_analytics_${timeRange}_${timestamp}.csv`);\n\t\tlink.style.visibility = 'hidden';\n\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t\tURL.revokeObjectURL(url);\n\t}\n}\n\n// Export singleton instance\nexport const analyticsService = new AnalyticsService();\n","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { Panel, Badge, Button, Select } from '$lib/components';\n\timport {\n\t\tanalyticsService,\n\t\ttype AnalyticsData,\n\t\ttype TimeRange\n\t} from '$lib/services/analyticsService';\n\n\t// Lazy load chart components\n\tconst LineChartPromise = import('$lib/components/charts/LineChart.svelte');\n\tconst BarChartPromise = import('$lib/components/charts/BarChart.svelte');\n\n\t// State\n\tlet analytics = $state<AnalyticsData | null>(null);\n\tlet loading = $state(true);\n\tlet timeRange = $state<TimeRange>('7d');\n\tlet refreshing = $state(false);\n\n\t// Options\n\tconst timeRangeOptions = [\n\t\t{ value: '24h', label: 'Last 24 Hours' },\n\t\t{ value: '7d', label: 'Last 7 Days' },\n\t\t{ value: '30d', label: 'Last 30 Days' },\n\t\t{ value: 'all', label: 'All Time' }\n\t];\n\n\t// Lifecycle\n\tonMount(() => {\n\t\tloadAnalytics();\n\t});\n\n\t// Load analytics data\n\tfunction loadAnalytics() {\n\t\tloading = true;\n\t\ttry {\n\t\t\tanalytics = analyticsService.getAnalytics(timeRange);\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load analytics:', error);\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t}\n\n\t// Refresh analytics\n\tfunction refreshAnalytics() {\n\t\trefreshing = true;\n\t\tsetTimeout(() => {\n\t\t\tloadAnalytics();\n\t\t\trefreshing = false;\n\t\t}, 500);\n\t}\n\n\t// Export to CSV\n\tfunction exportCSV() {\n\t\ttry {\n\t\t\tanalyticsService.downloadCSV(timeRange);\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to export CSV:', error);\n\t\t\talert('Failed to export CSV. Please try again.');\n\t\t}\n\t}\n\n\t// Reload when time range changes\n\t$effect(() => {\n\t\ttimeRange;\n\t\tloadAnalytics();\n\t});\n\n\t// Format currency\n\tfunction formatCurrency(value: number): string {\n\t\treturn `$${value.toFixed(4)}`;\n\t}\n\n\t// Format percentage\n\tfunction formatPercent(value: number): string {\n\t\treturn `${value.toFixed(1)}%`;\n\t}\n\n\t// Format time\n\tfunction formatTime(seconds: number): string {\n\t\tif (seconds < 1) return `${(seconds * 1000).toFixed(0)}ms`;\n\t\treturn `${seconds.toFixed(2)}s`;\n\t}\n\n\t// Get badge variant for success rate\n\tfunction getSuccessRateBadge(rate: number): 'success' | 'warning' | 'error' {\n\t\tif (rate >= 95) return 'success';\n\t\tif (rate >= 85) return 'warning';\n\t\treturn 'error';\n\t}\n\n\t// Chart data\n\tlet invocationsChartData = $derived.by(() => {\n\t\tif (!analytics) return { labels: [], datasets: [] };\n\t\treturn {\n\t\t\tlabels: analytics.timeSeriesData.map((d) => d.date),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Invocations',\n\t\t\t\t\tdata: analytics.timeSeriesData.map((d) => d.invocations),\n\t\t\t\t\tborderColor: 'rgb(197, 167, 123)',\n\t\t\t\t\tbackgroundColor: 'rgba(197, 167, 123, 0.1)',\n\t\t\t\t\tfill: true,\n\t\t\t\t\ttension: 0.4\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Errors',\n\t\t\t\t\tdata: analytics.timeSeriesData.map((d) => d.errors),\n\t\t\t\t\tborderColor: 'rgb(220, 68, 68)',\n\t\t\t\t\tbackgroundColor: 'rgba(220, 68, 68, 0.1)',\n\t\t\t\t\tfill: true,\n\t\t\t\t\ttension: 0.4\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t});\n\n\tlet costChartData = $derived.by(() => {\n\t\tif (!analytics) return { labels: [], datasets: [] };\n\t\treturn {\n\t\t\tlabels: analytics.costTrend.map((d) => d.date),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Cost ($)',\n\t\t\t\t\tdata: analytics.costTrend.map((d) => d.cost),\n\t\t\t\t\tborderColor: 'rgb(45, 212, 191)',\n\t\t\t\t\tbackgroundColor: 'rgba(45, 212, 191, 0.1)',\n\t\t\t\t\tfill: true,\n\t\t\t\t\ttension: 0.4\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t});\n\n\tlet topSkillsChartData = $derived.by(() => {\n\t\tif (!analytics) return { labels: [], datasets: [] };\n\t\treturn {\n\t\t\tlabels: analytics.topSkills.slice(0, 10).map((s) => s.skillName),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Usage Count',\n\t\t\t\t\tdata: analytics.topSkills.slice(0, 10).map((s) => s.count),\n\t\t\t\t\tbackgroundColor: analytics.topSkills\n\t\t\t\t\t\t.slice(0, 10)\n\t\t\t\t\t\t.map(() => 'rgba(197, 167, 123, 0.7)'),\n\t\t\t\t\tborderColor: analytics.topSkills.slice(0, 10).map(() => 'rgb(197, 167, 123)'),\n\t\t\t\t\tborderWidth: 1\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t});\n\n\tlet modelUsageChartData = $derived.by(() => {\n\t\tif (!analytics) return { labels: [], datasets: [] };\n\t\tconst colors = [\n\t\t\t'rgba(197, 167, 123, 0.7)', // BDS brass\n\t\t\t'rgba(45, 212, 191, 0.7)', // Teal\n\t\t\t'rgba(99, 102, 241, 0.7)', // Indigo\n\t\t\t'rgba(236, 72, 153, 0.7)' // Pink\n\t\t];\n\t\treturn {\n\t\t\tlabels: analytics.modelUsage.map((m) => m.model),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Usage Count',\n\t\t\t\t\tdata: analytics.modelUsage.map((m) => m.count),\n\t\t\t\t\tbackgroundColor: colors.slice(0, analytics.modelUsage.length),\n\t\t\t\t\tborderColor: colors.map((c) => c.replace('0.7', '1')).slice(0, analytics.modelUsage.length),\n\t\t\t\t\tborderWidth: 1\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t});\n</script>\n\n<div class=\"analytics-container\">\n\t<!-- Page Header -->\n\t<div class=\"page-header\">\n\t\t<div class=\"header-content\">\n\t\t\t<h1 class=\"page-title\">Analytics Dashboard</h1>\n\t\t\t<p class=\"page-description\">Track usage, performance, and costs across all skills</p>\n\t\t</div>\n\n\t\t<div class=\"header-actions\">\n\t\t\t<Select bind:value={timeRange} options={timeRangeOptions} />\n\t\t\t<Button variant=\"secondary\" size=\"sm\" onclick={refreshAnalytics} loading={refreshing}>\n\t\t\t\t{refreshing ? 'Refreshing...' : 'Refresh'}\n\t\t\t</Button>\n\t\t\t<Button variant=\"primary\" size=\"sm\" onclick={exportCSV}>Export CSV</Button>\n\t\t</div>\n\t</div>\n\n\t{#if loading}\n\t\t<div class=\"loading-state\">\n\t\t\t<div class=\"spinner\"></div>\n\t\t\t<p>Loading analytics...</p>\n\t\t</div>\n\t{:else if analytics && analytics.totalInvocations > 0}\n\t\t<!-- Key Metrics -->\n\t\t<div class=\"metrics-grid\">\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">üìä</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Total Invocations</div>\n\t\t\t\t\t\t<div class=\"metric-value\">{analytics.totalInvocations.toLocaleString()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">‚úÖ</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Success Rate</div>\n\t\t\t\t\t\t<div class=\"metric-value\">\n\t\t\t\t\t\t\t<Badge variant={getSuccessRateBadge(analytics.successRate)}>\n\t\t\t\t\t\t\t\t{formatPercent(analytics.successRate)}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">‚ö°</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Avg Response Time</div>\n\t\t\t\t\t\t<div class=\"metric-value\">{formatTime(analytics.avgResponseTime)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">üí∞</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Total Cost</div>\n\t\t\t\t\t\t<div class=\"metric-value\">{formatCurrency(analytics.totalCost)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\t\t</div>\n\n\t\t<!-- Time Series Charts -->\n\t\t<div class=\"charts-row\">\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<h2 class=\"chart-title\">Invocations & Errors Over Time</h2>\n\t\t\t\t{#await LineChartPromise}\n\t\t\t\t\t<div class=\"chart-loading\">\n\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t<p>Loading chart...</p>\n\t\t\t\t\t</div>\n\t\t\t\t{:then { default: LineChart }}\n\t\t\t\t\t<LineChart\n\t\t\t\t\t\tlabels={invocationsChartData.labels}\n\t\t\t\t\t\tdatasets={invocationsChartData.datasets}\n\t\t\t\t\t\theight={300}\n\t\t\t\t\t/>\n\t\t\t\t{/await}\n\t\t\t</Panel>\n\t\t</div>\n\n\t\t<div class=\"charts-row\">\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<h2 class=\"chart-title\">Cost Trend</h2>\n\t\t\t\t{#await LineChartPromise}\n\t\t\t\t\t<div class=\"chart-loading\">\n\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t<p>Loading chart...</p>\n\t\t\t\t\t</div>\n\t\t\t\t{:then { default: LineChart }}\n\t\t\t\t\t<LineChart labels={costChartData.labels} datasets={costChartData.datasets} height={300} />\n\t\t\t\t{/await}\n\t\t\t</Panel>\n\t\t</div>\n\n\t\t<!-- Top Skills and Model Usage -->\n\t\t<div class=\"charts-grid\">\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<h2 class=\"chart-title\">Top 10 Skills by Usage</h2>\n\t\t\t\t{#await BarChartPromise}\n\t\t\t\t\t<div class=\"chart-loading\">\n\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t<p>Loading chart...</p>\n\t\t\t\t\t</div>\n\t\t\t\t{:then { default: BarChart }}\n\t\t\t\t\t<BarChart\n\t\t\t\t\t\tlabels={topSkillsChartData.labels}\n\t\t\t\t\t\tdatasets={topSkillsChartData.datasets}\n\t\t\t\t\t\theight={350}\n\t\t\t\t\t\thorizontal={true}\n\t\t\t\t\t/>\n\t\t\t\t{/await}\n\t\t\t</Panel>\n\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<h2 class=\"chart-title\">Model Usage Distribution</h2>\n\t\t\t\t{#await BarChartPromise}\n\t\t\t\t\t<div class=\"chart-loading\">\n\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t<p>Loading chart...</p>\n\t\t\t\t\t</div>\n\t\t\t\t{:then { default: BarChart }}\n\t\t\t\t\t<BarChart\n\t\t\t\t\t\tlabels={modelUsageChartData.labels}\n\t\t\t\t\t\tdatasets={modelUsageChartData.datasets}\n\t\t\t\t\t\theight={350}\n\t\t\t\t\t/>\n\t\t\t\t{/await}\n\t\t\t</Panel>\n\t\t</div>\n\n\t\t<!-- Top Skills Table -->\n\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t<h2 class=\"section-title\">Top Skills by Usage</h2>\n\t\t\t<div class=\"table-container\">\n\t\t\t\t<table class=\"skills-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Rank</th>\n\t\t\t\t\t\t\t<th>Skill</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Usage</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Success Rate</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Avg Cost</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Avg Latency</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{#each analytics.topSkills.slice(0, 10) as skill, index}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td><Badge variant=\"default\">{index + 1}</Badge></td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"skill-name\">{skill.skillName}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"skill-id\">{skill.skillId}</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{skill.count}</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t\t\t<Badge variant={getSuccessRateBadge(skill.successRate)}>\n\t\t\t\t\t\t\t\t\t\t{formatPercent(skill.successRate)}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{formatCurrency(skill.avgCost)}</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{formatTime(skill.avgLatency)}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</Panel>\n\n\t\t<!-- Model Usage Table -->\n\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t<h2 class=\"section-title\">Model Usage Statistics</h2>\n\t\t\t<div class=\"table-container\">\n\t\t\t\t<table class=\"skills-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Model</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Usage</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Success Rate</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Avg Response Time</th>\n\t\t\t\t\t\t\t<th class=\"text-right\">Total Cost</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{#each analytics.modelUsage as model}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"model-name\">{model.model}</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{model.count}</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t\t\t<Badge variant={getSuccessRateBadge(model.successRate)}>\n\t\t\t\t\t\t\t\t\t\t{formatPercent(model.successRate)}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{formatTime(model.avgResponseTime)}</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">{formatCurrency(model.totalCost)}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</Panel>\n\t{:else}\n\t\t<!-- Empty State -->\n\t\t<Panel variant=\"elevated\" padding=\"lg\">\n\t\t\t<div class=\"empty-state\">\n\t\t\t\t<div class=\"empty-icon\">üìä</div>\n\t\t\t\t<h2 class=\"empty-title\">No Analytics Data Available</h2>\n\t\t\t\t<p class=\"empty-message\">\n\t\t\t\t\tStart using skills to see analytics and insights. Your usage statistics will appear here.\n\t\t\t\t</p>\n\t\t\t\t<Button variant=\"primary\" href=\"/library\">Browse Skills</Button>\n\t\t\t</div>\n\t\t</Panel>\n\t{/if}\n</div>\n\n<style>\n\t/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n     Analytics Container\n     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n\t.analytics-container {\n\t\tmax-width: 1400px;\n\t\tmargin: 0 auto;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xl);\n\t}\n\n\t/* Page Header */\n\t.page-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.header-content {\n\t\tflex: 1;\n\t}\n\n\t.page-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 2.5rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-sm) 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.page-description {\n\t\tfont-size: 1rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t.header-actions {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-md);\n\t\talign-items: center;\n\t}\n\n\t/* Metrics Grid */\n\t.metrics-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.metric-card {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.metric-icon {\n\t\tfont-size: 2.5rem;\n\t\tline-height: 1;\n\t}\n\n\t.metric-content {\n\t\tflex: 1;\n\t}\n\n\t.metric-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tmargin-bottom: var(--spacing-xs);\n\t}\n\n\t.metric-value {\n\t\tfont-size: 1.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--color-text-primary);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t/* Charts */\n\t.charts-row {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.charts-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(500px, 1fr));\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.chart-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-lg) 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.section-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-lg) 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t/* Tables */\n\t.table-container {\n\t\toverflow-x: auto;\n\t}\n\n\t.skills-table {\n\t\twidth: 100%;\n\t\tborder-collapse: collapse;\n\t}\n\n\t.skills-table th {\n\t\ttext-align: left;\n\t\tpadding: var(--spacing-md);\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--color-text-secondary);\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t.skills-table td {\n\t\tpadding: var(--spacing-md);\n\t\tborder-bottom: 1px solid var(--color-border-subtle);\n\t}\n\n\t.skills-table tr:last-child td {\n\t\tborder-bottom: none;\n\t}\n\n\t.skills-table tr:hover {\n\t\tbackground: var(--color-surface-tertiary);\n\t}\n\n\t.text-right {\n\t\ttext-align: right;\n\t}\n\n\t.skill-name {\n\t\tfont-weight: 500;\n\t\tcolor: var(--color-text-primary);\n\t}\n\n\t.skill-id {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\tfont-family: var(--font-family-mono);\n\t\tmargin-top: var(--spacing-2xs);\n\t}\n\n\t.model-name {\n\t\tfont-family: var(--font-family-mono);\n\t\tfont-weight: 500;\n\t\tcolor: var(--color-text-primary);\n\t}\n\n\t/* Loading State */\n\t.loading-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-lg);\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\ttext-align: center;\n\t}\n\n\t.spinner {\n\t\twidth: 48px;\n\t\theight: 48px;\n\t\tborder: 4px solid var(--color-border-subtle);\n\t\tborder-top-color: var(--color-brass);\n\t\tborder-radius: 50%;\n\t\tanimation: spin 0.8s linear infinite;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Chart Loading State */\n\t.chart-loading {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-md);\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\tmin-height: 300px;\n\t\ttext-align: center;\n\t}\n\n\t.chart-loading p {\n\t\tcolor: var(--color-text-tertiary);\n\t\tmargin: 0;\n\t}\n\n\t/* Empty State */\n\t.empty-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-lg);\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\ttext-align: center;\n\t}\n\n\t.empty-icon {\n\t\tfont-size: 4rem;\n\t\tline-height: 1;\n\t\topacity: 0.5;\n\t}\n\n\t.empty-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.empty-message {\n\t\tfont-size: 1rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmax-width: 400px;\n\t\tmargin: 0;\n\t\tline-height: 1.6;\n\t}\n\n\t/* Responsive */\n\t@media (max-width: 768px) {\n\t\t.page-header {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t.header-actions {\n\t\t\twidth: 100%;\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n\t\t.metrics-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\n\t\t.charts-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\n\t\t.page-title {\n\t\t\tfont-size: 2rem;\n\t\t}\n\n\t\t.table-container {\n\t\t\toverflow-x: scroll;\n\t\t}\n\t}\n</style>\n"],"file":"_app/immutable/nodes/7.CXdhb5D9.js"}