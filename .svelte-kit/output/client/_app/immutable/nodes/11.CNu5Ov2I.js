import{S as e,P as s,s as t}from"../chunks/YOoqYTui.js";import{T as a,p as i,e as l,q as r,i as n,g as c,s as v,j as d,r as o,k as u,l as p,I as m,y as g,z as h,A as f,h as x,P as w,x as y,W as $,a as b,c as S,v as q,N as E,V as z,G as k,H as A,m as D,S as C}from"../chunks/DMG9opGF.js";import{E as N}from"../chunks/BUOzqyaV.js";import{P as T}from"../chunks/B9fUN0C4.js";import{B as P}from"../chunks/CPI7VlXT.js";import{A as F}from"../chunks/IY61Ops4.js";import{B as L}from"../chunks/Bd01I2fe.js";import{c as M}from"../chunks/Be9ROwSi.js";const O=a({sessions:[],currentSession:null,isExecuting:!1,streamingOutput:"",currentStage:null}),R={get sessions(){return O.sessions},get currentSession(){return O.currentSession},get isExecuting(){return O.isExecuting},get streamingOutput(){return O.streamingOutput},get currentStage(){return O.currentStage},get activeSessions(){return O.sessions.filter(s=>s.status===e.RUNNING||s.status===e.PENDING)},get completedSessions(){return O.sessions.filter(s=>s.status===e.COMPLETED)},get failedSessions(){return O.sessions.filter(s=>s.status===e.FAILED)},createSession(s){const t={id:`execution_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"execution",status:e.PENDING,createdAt:new Date,request:s,stages:{}};return O.sessions=[...O.sessions,t],O.currentSession=t,t},startSession(t){const a=O.sessions.find(e=>e.id===t);a&&(a.status=e.RUNNING,a.startedAt=new Date,a.currentStage=s.PLAN,O.currentStage=s.PLAN,O.isExecuting=!0,O.streamingOutput="",O.sessions=[...O.sessions])},updateStageOutput(e,t,a){const i=O.sessions.find(s=>s.id===e);if(i){switch(t){case s.PLAN:i.stages.plan=a;break;case s.ACT:i.stages.act=a;break;case s.OBSERVE:i.stages.observe=a;break;case s.REFLECT:i.stages.reflect=a}O.sessions=[...O.sessions]}},appendStreamingOutput(e){O.streamingOutput+=e},clearStreamingOutput(){O.streamingOutput=""},advanceStage(e,s){const t=O.sessions.find(s=>s.id===e);t&&(s?(t.currentStage=s,O.currentStage=s,O.streamingOutput=""):(t.currentStage=void 0,O.currentStage=null,O.isExecuting=!1),O.sessions=[...O.sessions])},completeSession(s,t){const a=O.sessions.find(e=>e.id===s);a&&(a.status=e.COMPLETED,a.completedAt=new Date,a.result=t,a.currentStage=void 0,O.currentStage=null,O.isExecuting=!1,O.streamingOutput="",O.sessions=[...O.sessions])},failSession(s,t){const a=O.sessions.find(e=>e.id===s);a&&(a.status=e.FAILED,a.completedAt=new Date,a.error=t,a.currentStage=void 0,O.currentStage=null,O.isExecuting=!1,O.streamingOutput="",O.sessions=[...O.sessions])},cancelSession(s){const t=O.sessions.find(e=>e.id===s);t&&(t.status=e.CANCELLED,t.completedAt=new Date,t.currentStage=void 0,O.currentSession?.id===s&&(O.currentStage=null,O.isExecuting=!1,O.streamingOutput=""),O.sessions=[...O.sessions])},setCurrentSession(e){if(null===e)return void(O.currentSession=null);const s=O.sessions.find(s=>s.id===e);s&&(O.currentSession=s)},deleteSession(e){O.sessions=O.sessions.filter(s=>s.id!==e),O.currentSession?.id===e&&(O.currentSession=null,O.currentStage=null,O.isExecuting=!1,O.streamingOutput="")},clearAll(){O.sessions=[],O.currentSession=null,O.isExecuting=!1,O.streamingOutput="",O.currentStage=null}};var I=l('<div class="plan-summary svelte-bs7sxw"><h3 class="svelte-bs7sxw"> </h3> <p class="plan-overview svelte-bs7sxw"> </p> <div class="plan-meta svelte-bs7sxw"><!> <!></div></div> <div class="execution-options svelte-bs7sxw"><h4 class="svelte-bs7sxw">Execution Options</h4> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Run tests after code generation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Generate documentation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox" class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Auto-commit changes (if tests pass)</span></label></div> <div class="actions svelte-bs7sxw"><!></div>',1),U=l('<div class="empty-state svelte-bs7sxw"><p>Load a plan from the Planning Agent to begin execution.</p></div>'),G=l('<div class="execution-request svelte-bs7sxw"><!> <!></div>');function H(e,s){i(s,!0);let a=v(null),l=v(!1),S=v(!0),q=v(!1),E=v(!1);const z=y(()=>R.isExecuting);async function k(){if(!s.planDeliverable||!s.planSessionId)return;b(a,null),b(l,!0);const e={planSessionId:s.planSessionId,plan:s.planDeliverable,options:{runTests:c(S),generateDocs:c(q),autoCommit:c(E)}};try{const s=await async function(e){try{const s=R.createSession(e);R.startSession(s.id);const a=`http://localhost:8787/api/v1/bds/execution/${s.id}/stream`;return t.subscribe(a,{onChunk:e=>{R.appendStreamingOutput(e)},onStageStart:e=>{const t=e;R.advanceStage(s.id,t)},onStageEnd:(e,t)=>{const a=e,i=t;R.updateStageOutput(s.id,a,i),R.clearStreamingOutput()},onComplete:e=>{const t=e;R.completeSession(s.id,t)},onError:e=>{R.failSession(s.id,e.message)}}),{success:!0,sessionId:s.id}}catch(a){return{success:!1,error:M(a)}}}(e);!s.success&&s.error&&b(a,s.error,!0)}catch(i){}finally{b(l,!1)}}var A=G(),D=r(A),C=e=>{F(e,{variant:"error",children:(e,s)=>{m();var t=g();h(()=>f(t,c(a).userMessage)),u(e,t)},$$slots:{default:!0}})};n(D,e=>{c(a)&&e(C)});var N=d(D,2),T=e=>{var t=I(),a=x(t),i=r(a),n=r(i,!0);o(i);var v=d(i,2),p=r(v,!0);o(v);var A=d(v,2),D=r(A);L(D,{variant:"info",children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.planDeliverable.plan.steps.length??""} steps`)),u(e,a)},$$slots:{default:!0}});var C=d(D,2);L(C,{variant:"info",children:(e,t)=>{m();var a=g();h(()=>f(a,s.planDeliverable.plan.estimatedEffort)),u(e,a)},$$slots:{default:!0}}),o(A),o(a);var N=d(a,2),T=d(r(N),2),F=r(T);w(F),m(2),o(T);var M=d(T,2),O=r(M);w(O),m(2),o(M);var R=d(M,2),U=r(R);w(U),m(2),o(R),o(N);var G=d(N,2),H=r(G);{let e=y(()=>c(z)||c(l));P(H,{variant:"primary",onclick:k,get disabled(){return c(e)},get loading(){return c(l)},children:(e,s)=>{m();var t=g();h(()=>f(t,c(l)?"Starting Execution...":"Execute Plan")),u(e,t)},$$slots:{default:!0}})}o(G),h(()=>{f(n,s.planDeliverable.plan.title),f(p,s.planDeliverable.plan.overview),F.disabled=c(z),O.disabled=c(z),U.disabled=c(z)}),$(F,()=>c(S),e=>b(S,e)),$(O,()=>c(q),e=>b(q,e)),$(U,()=>c(E),e=>b(E,e)),u(e,t)},O=e=>{var s=U();u(e,s)};n(N,e=>{s.planDeliverable?e(T):e(O,!1)}),o(A),u(e,A),p()}var j=l('<div class="streaming-indicator svelte-205pas"><div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <span class="svelte-205pas">Generating code...</span></div>'),B=l('<div><pre><code class="svelte-205pas"> </code></pre> <!></div>'),V=l('<div class="empty-state svelte-205pas"><p class="svelte-205pas">Code will appear here when execution starts.</p></div>'),_=l('<div class="code-generation svelte-205pas"><div class="code-header svelte-205pas"><h4 class="svelte-205pas">Generated Code</h4> <div class="code-actions svelte-205pas"><!></div></div> <!></div>');function K(e,s){let t,a=S(s,"language",3,"typescript");var i=_(),l=r(i),v=d(r(l),2),p=r(v);{let e=y(()=>!s.code);P(p,{variant:"secondary",size:"sm",onclick:async function(){try{await navigator.clipboard.writeText(s.code)}catch(e){}},get disabled(){return c(e)},children:(e,s)=>{m();var t=g("Copy");u(e,t)},$$slots:{default:!0}})}o(v),o(l);var x=d(l,2),w=e=>{var i=B();let l;var c=r(i),v=r(c),p=r(v,!0);o(v),o(c),q(c,e=>t=e,()=>t);var m=d(c,2),g=e=>{var s=j();u(e,s)};n(m,e=>{s.isStreaming&&e(g)}),o(i),h(()=>{l=E(i,1,"code-container svelte-205pas",null,l,{streaming:s.isStreaming}),E(c,1,`code-block language-${a()??""}`,"svelte-205pas"),f(p,s.code)}),u(e,i)},$=e=>{var s=V();u(e,s)};n(x,e=>{s.code||s.isStreaming?e(w):e($,!1)}),o(i),u(e,i)}var W=l('<div class="coverage svelte-czdiq9"><h5 class="svelte-czdiq9">Coverage</h5> <div class="coverage-items svelte-czdiq9"><div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Lines:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Functions:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Branches:</span> <!></div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Statements:</span> <!></div></div></div>'),J=l('<details class="failure-stack svelte-czdiq9"><summary class="svelte-czdiq9">Stack Trace</summary> <pre class="svelte-czdiq9"> </pre></details>'),Q=l('<div class="failure-card svelte-czdiq9"><div class="failure-header svelte-czdiq9"><span class="failure-name svelte-czdiq9"> </span> <span class="failure-path svelte-czdiq9"> </span></div> <pre class="failure-error svelte-czdiq9"> </pre> <!></div>'),X=l('<div class="failures svelte-czdiq9"><h5 class="svelte-czdiq9">Failed Tests</h5> <!></div>'),Y=l('<div class="results-summary svelte-czdiq9"><div class="summary-card passed svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Passed</span></div> <div class="summary-card failed svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Failed</span></div> <div class="summary-card skipped svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Skipped</span></div> <div class="summary-card total svelte-czdiq9"><span class="count svelte-czdiq9"> </span> <span class="label svelte-czdiq9">Total</span></div></div> <div class="pass-rate svelte-czdiq9"><div class="pass-rate-bar svelte-czdiq9"><div class="pass-rate-fill svelte-czdiq9"></div></div> <span class="pass-rate-text svelte-czdiq9"> </span></div> <!> <!>',1),Z=l('<div class="empty-state svelte-czdiq9"><p>Test results will appear here after execution.</p></div>'),ee=l('<div class="test-results svelte-czdiq9"><h4 class="svelte-czdiq9">Test Results</h4> <!></div>');var se=l('<span class="text-success svelte-1p8lewm"> </span> <span class="text-danger svelte-1p8lewm"> </span>',1),te=l('<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ“</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Files Modified</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div>'),ae=l('<span class="text-success svelte-1p8lewm"> </span> <span class="text-danger svelte-1p8lewm"> </span>',1),ie=l('<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ§ª</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tests Executed</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div>'),le=l('<div class="insights svelte-1p8lewm"><div class="insight-card warning svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>High token usage detected. Consider breaking down complex tasks.</span></div></div>'),re=l('<div class="insights svelte-1p8lewm"><div class="insight-card info svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z"></path></svg> <span>Long execution time. Consider optimizing prompts or breaking into smaller steps.</span></div></div>'),ne=l('<div class="metrics-grid svelte-1p8lewm"><div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ”¢</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tokens Used</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm"> </span> <span class="text-muted svelte-1p8lewm"> </span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ’°</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Estimated Cost</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Per 1M tokens</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">â±ï¸</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Execution Time</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm"> </span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ğŸ¤–</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Model</div> <div class="metric-value svelte-1p8lewm"> </div> <div class="metric-detail svelte-1p8lewm"><!></div></div></div> <!> <!></div> <!> <!>',1),ce=l('<div class="empty-state svelte-1p8lewm"><p class="text-muted svelte-1p8lewm">No metrics available yet. Start an execution to see metrics.</p></div>'),ve=l('<div class="metrics-display svelte-1p8lewm"><!></div>');var de=l('<span class="stat-addition svelte-c6rpoy"> </span>'),oe=l('<span class="stat-deletion svelte-c6rpoy"> </span>'),ue=l('<div class="change-stats svelte-c6rpoy"><!> <!></div>'),pe=l('<div class="change-detail svelte-c6rpoy"><span class="text-muted svelte-c6rpoy">Renamed from:</span> <code class="old-path svelte-c6rpoy"> </code></div>'),me=l('<div class="change-description svelte-c6rpoy"> </div>'),ge=l('<div class="change-bar svelte-c6rpoy"><div class="change-bar-addition svelte-c6rpoy"></div> <div class="change-bar-deletion svelte-c6rpoy"></div></div>'),he=l('<div class="change-item svelte-c6rpoy"><div class="change-header svelte-c6rpoy"><div class="change-info svelte-c6rpoy"><span class="change-icon svelte-c6rpoy"> </span> <span class="change-path svelte-c6rpoy"> </span> <!></div> <!></div> <!> <!> <!></div>'),fe=l('<div class="streaming-indicator svelte-c6rpoy"><div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <span class="svelte-c6rpoy">Generating more changes...</span></div>'),xe=l('<div class="changes-summary svelte-c6rpoy"><div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Files Changed:</span> <span class="summary-value svelte-c6rpoy"> </span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Additions:</span> <span class="summary-value text-success svelte-c6rpoy"> </span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Deletions:</span> <span class="summary-value text-danger svelte-c6rpoy"> </span></div></div> <div class="change-types svelte-c6rpoy"><!> <!> <!> <!></div> <div class="changes-list svelte-c6rpoy"></div> <!>',1),we=l('<div class="empty-state svelte-c6rpoy"><p class="text-muted svelte-c6rpoy">No file changes yet. Start an execution to see changes.</p></div>'),ye=l('<div class="file-changes svelte-c6rpoy"><!></div>');var $e=l('<span class="session-duration"> </span>'),be=l('<span class="session-duration"> </span>'),Se=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ“</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">files</span></div>'),qe=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ§ª</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">passed</span></div>'),Ee=l('<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">ğŸ”¢</span> <span class="stat-value svelte-100842h"> </span> <span class="stat-label svelte-100842h">tokens</span></div>'),ze=l('<div class="session-stats svelte-100842h"><!> <!> <!></div>'),ke=l('<div class="session-error svelte-100842h"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span> </span></div>'),Ae=l('<div role="button" tabindex="0"><div class="session-header svelte-100842h"><div class="session-info svelte-100842h"><span class="session-icon svelte-100842h"> </span> <div class="session-title-group svelte-100842h"><div class="session-title svelte-100842h"><!></div> <div class="session-meta svelte-100842h"><span class="session-date"> </span> <!></div></div></div> <!></div> <!> <!> <div class="session-actions svelte-100842h"><!> <!></div></div>'),De=l('<div class="history-header svelte-100842h"><h3 class="svelte-100842h"> </h3> <!></div> <div class="sessions-list svelte-100842h"></div>',1),Ce=l('<div class="empty-state svelte-100842h"><div class="empty-icon svelte-100842h">ğŸ“‹</div> <p class="empty-title svelte-100842h">No execution history</p> <p class="empty-description svelte-100842h">Start an execution to see your history here.</p></div>'),Ne=l('<div class="execution-history svelte-100842h"><!></div>');function Te(s,t){i(t,!0);const a=y(()=>R.sessions);function l(e,s){const t=(s||new Date).getTime()-e.getTime();return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${(t/6e4).toFixed(1)}m`}function v(e){R.setCurrentSession(e)}var w=Ne(),$=r(w),b=s=>{var t=De(),i=x(t),p=r(i),w=r(p);o(p);var $=d(p,2);P($,{variant:"ghost",size:"sm",onclick:()=>R.clearAll(),children:(e,s)=>{m();var t=g("Clear All");u(e,t)},$$slots:{default:!0}}),o(i);var b=d(i,2);k(b,21,()=>c(a),A,(s,t)=>{const a=y(()=>R.currentSession?.id===c(t).id);var i=Ae();let p;i.__click=()=>v(c(t).id),i.__keydown=e=>"Enter"===e.key&&v(c(t).id);var w=r(i),$=r(w),b=r($),S=r(b,!0);o(b);var q=d(b,2),z=r(q),k=r(z),A=e=>{var s=g();h(()=>f(s,c(t).request.plan.plan.title)),u(e,s)},C=e=>{var s=g();h(e=>f(s,`Execution #${e??""}`),[()=>c(t).id.split("_")[1]]),u(e,s)};n(k,e=>{c(t).request.plan?.plan?.title?e(A):e(C,!1)}),o(z);var N=d(z,2),T=r(N),F=r(T,!0);o(T);var M=d(T,2),O=e=>{var s=$e(),a=r(s,!0);o(s),h(e=>f(a,e),[()=>l(c(t).startedAt,c(t).completedAt)]),u(e,s)},I=e=>{var s=D(),a=x(s),i=e=>{var s=be(),a=r(s,!0);o(s),h(e=>f(a,e),[()=>l(c(t).startedAt)]),u(e,s)};n(a,e=>{c(t).startedAt&&e(i)},!0),u(e,s)};n(M,e=>{c(t).startedAt&&c(t).completedAt?e(O):e(I,!1)}),o(N),o(q),o($);var U=d($,2);{let s=y(()=>function(s){switch(s){case e.COMPLETED:return"success";case e.RUNNING:return"warning";case e.FAILED:case e.CANCELLED:return"danger";default:return"neutral"}}(c(t).status));L(U,{get variant(){return c(s)},children:(e,s)=>{m();var a=g();h(()=>f(a,c(t).status)),u(e,a)},$$slots:{default:!0}})}o(w);var G=d(w,2),H=e=>{var s=ze(),a=r(s),i=e=>{var s=Se(),a=d(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(()=>f(i,c(t).result.filesModified.length)),u(e,s)};n(a,e=>{c(t).result.filesModified&&e(i)});var l=d(a,2),v=e=>{var s=qe(),a=d(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(()=>f(i,c(t).result.testResults.passed)),u(e,s)};n(l,e=>{c(t).result.testResults&&e(v)});var p=d(l,2),g=e=>{var s=Ee(),a=d(r(s),2),i=r(a,!0);o(a),m(2),o(s),h(e=>f(i,e),[()=>c(t).result.metrics.tokensUsed<1e3?c(t).result.metrics.tokensUsed:`${(c(t).result.metrics.tokensUsed/1e3).toFixed(1)}K`]),u(e,s)};n(p,e=>{c(t).result.metrics&&e(g)}),o(s),u(e,s)};n(G,e=>{c(t).result&&e(H)});var j=d(G,2),B=e=>{var s=ke(),a=d(r(s),2),i=r(a,!0);o(a),o(s),h(()=>f(i,c(t).error)),u(e,s)};n(j,e=>{c(t).error&&e(B)});var V=d(j,2),_=r(V);P(_,{variant:"ghost",size:"sm",onclick:e=>{e.stopPropagation(),v(c(t).id)},children:(e,s)=>{m();var t=g("View Details");u(e,t)},$$slots:{default:!0}});var K=d(_,2);P(K,{variant:"ghost",size:"sm",onclick:e=>{var s;e.stopPropagation(),s=c(t).id,confirm("Are you sure you want to delete this session?")&&R.deleteSession(s)},children:(e,s)=>{m();var t=g("Delete");u(e,t)},$$slots:{default:!0}}),o(V),o(i),h((e,s)=>{p=E(i,1,"session-card svelte-100842h",null,p,{active:c(a)}),f(S,e),f(F,s)},[()=>function(s){switch(s){case e.COMPLETED:return"âœ…";case e.RUNNING:return"â³";case e.FAILED:return"âŒ";case e.CANCELLED:return"ğŸš«";default:return"â¸ï¸"}}(c(t).status),()=>{return e=c(t).createdAt,new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);var e}]),u(s,i)}),o(b),h(()=>f(w,`Past Executions (${c(a).length??""})`)),u(s,t)},S=e=>{var s=Ce();u(e,s)};n($,e=>{c(a).length>0?e(b):e(S,!1)}),o(w),u(s,w),p()}C(["click","keydown"]);var Pe=l('<div class="progress-message svelte-2mqxtd"><div class="spinner svelte-2mqxtd"></div> <p class="svelte-2mqxtd">Initializing execution...</p></div>'),Fe=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Generated Code</h3> <!></div>'),Le=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Test Results</h3> <!></div>'),Me=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">File Changes</h3> <!></div>'),Oe=l('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Execution Metrics</h3> <!></div>'),Re=l('<div class="results-section svelte-2mqxtd"><!> <!> <!> <!></div>'),Ie=l('<p class="error-message svelte-2mqxtd"> </p>'),Ue=l('<div class="error-state svelte-2mqxtd"><svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" class="svelte-2mqxtd"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <h3 class="svelte-2mqxtd">Execution Failed</h3> <!></div>'),Ge=l('<div class="empty-state svelte-2mqxtd"><div class="empty-icon svelte-2mqxtd">âš¡</div> <h2 class="svelte-2mqxtd">Start an Execution Session</h2> <p class="svelte-2mqxtd">Load a plan from the Planning Agent or create a new execution request to begin.</p></div>'),He=l('<div class="execution-page svelte-2mqxtd"><header class="page-header svelte-2mqxtd"><h1 class="svelte-2mqxtd">Execution Agent</h1> <p class="text-muted svelte-2mqxtd">Execute code generation and implementation tasks</p></header> <div class="content-grid svelte-2mqxtd"><div class="left-column svelte-2mqxtd"><!> <!></div> <div class="right-column svelte-2mqxtd"><!></div></div></div>');function je(s,t){i(t,!0);const a=y(()=>R.currentSession),l=y(()=>R.isExecuting),v=y(()=>R.streamingOutput);N(s,{children:(s,t)=>{var w=He(),$=d(r(w),2),b=r($),q=r(b);T(q,{title:"New Execution Request",children:(e,s)=>{H(e,{})},$$slots:{default:!0}});var E=d(q,2),C=e=>{T(e,{title:"Execution History",class:"mt-6",children:(e,s)=>{Te(e,{})},$$slots:{default:!0}})};n(E,e=>{c(a)&&e(C)}),o(b);var N=d(b,2),P=r(N),F=s=>{var t=D(),w=x(t),$=e=>{T(e,{title:"Execution in Progress",children:(e,s)=>{var t=D(),a=x(t),i=e=>{K(e,{get code(){return c(v)},get isStreaming(){return c(l)}})},r=e=>{var s=Pe();u(e,s)};n(a,e=>{c(v)?e(i):e(r,!1)}),u(e,t)},$$slots:{default:!0}})},b=s=>{var t=D(),l=x(t),v=e=>{T(e,{title:"Execution Complete",children:(e,s)=>{var t=Re(),l=r(t),v=e=>{var s=Fe();K(d(r(s),2),{get code(){return c(a).result.code},isStreaming:!1}),o(s),u(e,s)};n(l,e=>{c(a).result.code&&e(v)});var w=d(l,2),$=e=>{var s=Le();!function(e,s){i(s,!0);const t=y(()=>s.results&&s.results.total>0?(s.results.passed/s.results.total*100).toFixed(1):"0");var a=ee(),l=d(r(a),2),v=e=>{var a=Y(),i=x(a),l=r(i),v=r(l),p=r(v,!0);o(v),m(2),o(l);var w=d(l,2),$=r(w),b=r($,!0);o($),m(2),o(w);var S=d(w,2),q=r(S),E=r(q,!0);o(q),m(2),o(S);var D=d(S,2),C=r(D),N=r(C,!0);o(C),m(2),o(D),o(i);var T=d(i,2),P=r(T),F=r(P);o(P);var M=d(P,2),O=r(M);o(M),o(T);var R=d(T,2),I=e=>{var t=W(),a=d(r(t),2),i=r(a),l=d(r(i),2);{let e=y(()=>s.results.coverage.lines>=80?"success":"warning");L(l,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.lines??""}%`)),u(e,a)},$$slots:{default:!0}})}o(i);var n=d(i,2),v=d(r(n),2);{let e=y(()=>s.results.coverage.functions>=80?"success":"warning");L(v,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.functions??""}%`)),u(e,a)},$$slots:{default:!0}})}o(n);var p=d(n,2),x=d(r(p),2);{let e=y(()=>s.results.coverage.branches>=80?"success":"warning");L(x,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.branches??""}%`)),u(e,a)},$$slots:{default:!0}})}o(p);var w=d(p,2),$=d(r(w),2);{let e=y(()=>s.results.coverage.statements>=80?"success":"warning");L($,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,`${s.results.coverage.statements??""}%`)),u(e,a)},$$slots:{default:!0}})}o(w),o(a),o(t),u(e,t)};n(R,e=>{s.results.coverage&&e(I)});var U=d(R,2),G=e=>{var t=X(),a=d(r(t),2);k(a,17,()=>s.results.failures,A,(e,s)=>{var t=Q(),a=r(t),i=r(a),l=r(i,!0);o(i);var v=d(i,2),p=r(v,!0);o(v),o(a);var m=d(a,2),g=r(m,!0);o(m);var x=d(m,2),w=e=>{var t=J(),a=d(r(t),2),i=r(a,!0);o(a),o(t),h(()=>f(i,c(s).stack)),u(e,t)};n(x,e=>{c(s).stack&&e(w)}),o(t),h(()=>{f(l,c(s).testName),f(p,c(s).filePath),f(g,c(s).error)}),u(e,t)}),o(t),u(e,t)};n(U,e=>{s.results.failures.length>0&&e(G)}),h(()=>{f(p,s.results.passed),f(b,s.results.failed),f(E,s.results.skipped),f(N,s.results.total),z(F,`width: ${c(t)??""}%`),f(O,`${c(t)??""}% Pass Rate`)}),u(e,a)},w=e=>{var s=Z();u(e,s)};n(l,e=>{s.results?e(v):e(w,!1)}),o(a),u(e,a),p()}(d(r(s),2),{get results(){return c(a).result.testResults}}),o(s),u(e,s)};n(w,e=>{c(a).result.testResults&&e($)});var b=d(w,2),q=e=>{var s=Me();!function(e,s){i(s,!0);let t=S(s,"isStreaming",3,!1);const a=y(()=>s.changes.reduce((e,s)=>e+(s.additions||0),0)),l=y(()=>s.changes.reduce((e,s)=>e+(s.deletions||0),0)),v=y(()=>()=>{const e={added:0,modified:0,deleted:0,renamed:0};return s.changes.forEach(s=>{s.type in e&&e[s.type]++}),e});var w=ye(),$=r(w),b=e=>{var i=xe(),p=x(i),w=r(p),$=d(r(w),2),b=r($,!0);o($),o(w);var S=d(w,2),q=d(r(S),2),E=r(q);o(q),o(S);var D=d(S,2),C=d(r(D),2),N=r(C);o(C),o(D),o(p);var T=d(p,2),P=r(T),F=e=>{L(e,{variant:"success",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Added`),[()=>c(v)().added]),u(e,t)},$$slots:{default:!0}})};n(P,e=>{c(v)().added>0&&e(F)});var M=d(P,2),O=e=>{L(e,{variant:"warning",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Modified`),[()=>c(v)().modified]),u(e,t)},$$slots:{default:!0}})};n(M,e=>{c(v)().modified>0&&e(O)});var R=d(M,2),I=e=>{L(e,{variant:"danger",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Deleted`),[()=>c(v)().deleted]),u(e,t)},$$slots:{default:!0}})};n(R,e=>{c(v)().deleted>0&&e(I)});var U=d(R,2),G=e=>{L(e,{variant:"neutral",children:(e,s)=>{m();var t=g();h(e=>f(t,`${e??""} Renamed`),[()=>c(v)().renamed]),u(e,t)},$$slots:{default:!0}})};n(U,e=>{c(v)().renamed>0&&e(G)}),o(T);var H=d(T,2);k(H,21,()=>s.changes,A,(e,s)=>{var t=he(),a=r(t),i=r(a),l=r(i),v=r(l,!0);o(l);var p=d(l,2),x=r(p,!0);o(p);var w=d(p,2);{let e=y(()=>function(e){switch(e){case"added":return"success";case"modified":return"warning";case"deleted":return"danger";default:return"neutral"}}(c(s).type));L(w,{get variant(){return c(e)},children:(e,t)=>{m();var a=g();h(()=>f(a,c(s).type)),u(e,a)},$$slots:{default:!0}})}o(i);var $=d(i,2),b=e=>{var t=ue(),a=r(t),i=e=>{var t=de(),a=r(t);o(t),h(()=>f(a,`+${c(s).additions??""}`)),u(e,t)};n(a,e=>{void 0!==c(s).additions&&c(s).additions>0&&e(i)});var l=d(a,2),v=e=>{var t=oe(),a=r(t);o(t),h(()=>f(a,`-${c(s).deletions??""}`)),u(e,t)};n(l,e=>{void 0!==c(s).deletions&&c(s).deletions>0&&e(v)}),o(t),u(e,t)};n($,e=>{void 0===c(s).additions&&void 0===c(s).deletions||e(b)}),o(a);var S=d(a,2),q=e=>{var t=pe(),a=d(r(t),2),i=r(a,!0);o(a),o(t),h(()=>f(i,c(s).oldPath)),u(e,t)};n(S,e=>{"renamed"===c(s).type&&c(s).oldPath&&e(q)});var E=d(S,2),k=e=>{var t=me(),a=r(t,!0);o(t),h(()=>f(a,c(s).description)),u(e,t)};n(E,e=>{c(s).description&&e(k)});var A=d(E,2),D=e=>{const t=y(()=>c(s).additions+c(s).deletions),a=y(()=>c(t)>0?c(s).additions/c(t)*100:0);var i=ge(),l=r(i),n=d(l,2);o(i),h(()=>{z(l,`width: ${c(a)??""}%`),z(n,`width: ${100-c(a)}%`)}),u(e,i)};n(A,e=>{void 0!==c(s).additions&&void 0!==c(s).deletions&&e(D)}),o(t),h(e=>{f(v,e),f(x,c(s).path)},[()=>function(e){switch(e){case"added":return"â•";case"modified":return"âœï¸";case"deleted":return"ğŸ—‘ï¸";case"renamed":return"ğŸ“";default:return"ğŸ“„"}}(c(s).type)]),u(e,t)}),o(H);var j=d(H,2),B=e=>{var s=fe();u(e,s)};n(j,e=>{t()&&e(B)}),h(()=>{f(b,s.changes.length),f(E,`+${c(a)??""}`),f(N,`-${c(l)??""}`)}),u(e,i)},q=e=>{var s=we();u(e,s)};n($,e=>{s.changes.length>0?e(b):e(q,!1)}),o(w),u(e,w),p()}(d(r(s),2),{get changes(){return c(a).result.filesModified}}),o(s),u(e,s)};n(b,e=>{c(a).result.filesModified&&c(a).result.filesModified.length>0&&e(q)});var E=d(b,2),D=e=>{var s=Oe();!function(e,s){function t(e){return e<1e3?e.toString():e<1e6?`${(e/1e3).toFixed(1)}K`:`${(e/1e6).toFixed(1)}M`}i(s,!0);var a=ve(),l=r(a),c=e=>{var a=ne(),i=x(a),l=r(i),c=d(r(l),2),v=d(r(c),2),p=r(v,!0);o(v);var w=d(v,2),y=r(w),$=r(y);o(y);var b=d(y,2),S=r(b);o(b),o(w),o(c),o(l);var q=d(l,2),E=d(r(q),2),z=d(r(E),2),k=r(z,!0);o(z),m(2),o(E),o(q);var A=d(q,2),D=d(r(A),2),C=d(r(D),2),N=r(C,!0);o(C);var T=d(C,2),P=r(T),F=r(P);o(P),o(T),o(D),o(A);var M=d(A,2),O=d(r(M),2),R=d(r(O),2),I=r(R,!0);o(R);var U=d(R,2),G=r(U),H=e=>{L(e,{variant:"neutral",children:(e,t)=>{m();var a=g();h(()=>f(a,s.metrics.provider)),u(e,a)},$$slots:{default:!0}})};n(G,e=>{s.metrics.provider&&e(H)}),o(U),o(O),o(M);var j=d(M,2),B=e=>{var t=te(),a=d(r(t),2),i=d(r(a),2),l=r(i,!0);o(i);var c=d(i,2),v=r(c),p=e=>{var t=se(),a=x(t),i=r(a);o(a);var l=d(a,2),n=r(l);o(l),h(()=>{f(i,`+${s.metrics.linesAdded??""}`),f(n,`-${s.metrics.linesRemoved??""}`)}),u(e,t)};n(v,e=>{void 0!==s.metrics.linesAdded&&void 0!==s.metrics.linesRemoved&&e(p)}),o(c),o(a),o(t),h(()=>f(l,s.metrics.filesModified)),u(e,t)};n(j,e=>{void 0!==s.metrics.filesModified&&e(B)});var V=d(j,2),_=e=>{var t=ie(),a=d(r(t),2),i=d(r(a),2),l=r(i,!0);o(i);var c=d(i,2),v=r(c),p=e=>{var t=ae(),a=x(t),i=r(a);o(a);var l=d(a,2),n=r(l);o(l),h(()=>{f(i,`${s.metrics.testsPassed??""} passed`),f(n,`${s.metrics.testsFailed??""} failed`)}),u(e,t)};n(v,e=>{void 0!==s.metrics.testsPassed&&void 0!==s.metrics.testsFailed&&e(p)}),o(c),o(a),o(t),h(()=>f(l,s.metrics.testsRun)),u(e,t)};n(V,e=>{void 0!==s.metrics.testsRun&&e(_)}),o(i);var K=d(i,2),W=e=>{var s=le();u(e,s)};n(K,e=>{s.metrics.tokensUsed>1e5&&e(W)});var J=d(K,2),Q=e=>{var s=re();u(e,s)};n(J,e=>{s.metrics.duration>3e5&&e(Q)}),h((e,t,a,i,l,r,n)=>{f(p,e),f($,`Input: ${t??""}`),f(S,`Output: ${a??""}`),f(k,i),f(N,l),f(F,`${r??""} -\n\t\t\t\t\t\t\t${n??""}`),f(I,s.metrics.modelUsed||"Unknown")},[()=>t(s.metrics.tokensUsed),()=>t(s.metrics.inputTokens),()=>t(s.metrics.outputTokens),()=>`$${s.metrics.cost.toFixed(4)}`,()=>{return(e=s.metrics.duration)<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`;var e},()=>s.metrics.startTime?new Date(s.metrics.startTime).toLocaleTimeString():"",()=>s.metrics.endTime?new Date(s.metrics.endTime).toLocaleTimeString():""]),u(e,a)},v=e=>{var s=ce();u(e,s)};n(l,e=>{s.metrics?e(c):e(v,!1)}),o(a),u(e,a),p()}(d(r(s),2),{get metrics(){return c(a).result.metrics}}),o(s),u(e,s)};n(E,e=>{c(a).result.metrics&&e(D)}),o(t),u(e,t)},$$slots:{default:!0}})},w=s=>{var t=D(),i=x(t),l=e=>{T(e,{title:"Execution Failed",children:(e,s)=>{var t=Ue(),i=d(r(t),4),l=e=>{var s=Ie(),t=r(s,!0);o(s),h(()=>f(t,c(a).error)),u(e,s)};n(i,e=>{c(a).error&&e(l)}),o(t),u(e,t)},$$slots:{default:!0}})};n(i,s=>{c(a).status===e.FAILED&&s(l)},!0),u(s,t)};n(l,s=>{c(a).status===e.COMPLETED&&c(a).result?s(v):s(w,!1)},!0),u(s,t)};n(w,s=>{c(a).status===e.RUNNING?s($):s(b,!1)}),u(s,t)},M=e=>{T(e,{title:"Welcome",children:(e,s)=>{var t=Ge();u(e,t)},$$slots:{default:!0}})};n(P,e=>{c(a)?e(F):e(M,!1)}),o(N),o($),o(w),u(s,w)},$$slots:{default:!0}}),p()}export{je as component};
