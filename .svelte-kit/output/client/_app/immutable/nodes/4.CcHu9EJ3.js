import{d as de,f as i,s as n,a as o,c as _e}from"../chunks/CAK2u2Ng.js";import{ae as pe,an as H,W as Ct,al as ue,ao as fe,k as t,ah as me,X as u,ai as a,af as r,aj as e,ag as b,ak as ft,ap as mt}from"../chunks/DvJ0wH-P.js";import{i as f}from"../chunks/DjilkBmk.js";import{e as Dt,i as xe}from"../chunks/BoH0SDAF.js";import{r as he}from"../chunks/w-4I74Yw.js";import{s as It}from"../chunks/Ck0dqJlc.js";import{b as ge}from"../chunks/BVWqoBiK.js";import{b as xt}from"../chunks/cOC8RnKw.js";import"../chunks/CoVrU6Ml.js";import"../chunks/l0sNRNKZ.js";import{E as be}from"../chunks/BBIMj1gM.js";var ye=i('<button class="btn-clear-history svelte-1xl2tfr">Clear All History</button>'),ke=i("<option> </option>"),Se=i('<div class="controls svelte-1xl2tfr"><div class="search-box svelte-1xl2tfr"><input type="text" placeholder="Search by skill name, section, or category..." class="search-input svelte-1xl2tfr"/></div> <div class="filters svelte-1xl2tfr"><select class="filter-select svelte-1xl2tfr"><option>All Sections</option><!></select> <select class="filter-select svelte-1xl2tfr"><option>All Status</option><option>Success Only</option><option>Errors Only</option></select> <select class="filter-select svelte-1xl2tfr"><option>Most Recent</option><option>Oldest First</option><option>Skill Name</option><option>Highest Cost</option></select></div></div>'),we=i('<div class="empty-state svelte-1xl2tfr"><p class="svelte-1xl2tfr">Loading history...</p></div>'),Ne=i('<p class="empty-hint svelte-1xl2tfr">Try adjusting your filters</p>'),Ee=i('<p class="empty-hint svelte-1xl2tfr">Execute skills to see them appear here</p>'),Ce=i('<div class="empty-state svelte-1xl2tfr"><div class="empty-icon svelte-1xl2tfr">ðŸ“‹</div> <p class="svelte-1xl2tfr">No execution history found</p> <!></div>'),De=i('<span class="meta-separator svelte-1xl2tfr">â€¢</span> <span class="meta-item"> </span>',1),Ie=i('<div class="meta-field svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Session ID:</span> <span class="meta-value svelte-1xl2tfr"> </span></div>'),Le=i('<div class="meta-field svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Model:</span> <span class="meta-value svelte-1xl2tfr"> </span></div>'),Oe=i('<div class="meta-field svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Tokens:</span> <span class="meta-value svelte-1xl2tfr"> </span></div>'),Ae=i('<div class="meta-field svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Latency:</span> <span class="meta-value svelte-1xl2tfr"> </span></div>'),He=i('<div class="details-section svelte-1xl2tfr"><h3 class="svelte-1xl2tfr">Metadata</h3> <div class="metadata-grid svelte-1xl2tfr"><!> <!> <!> <!></div></div>'),Me=i('<div class="details-section svelte-1xl2tfr"><h3 class="svelte-1xl2tfr">Inputs</h3> <pre class="code-block svelte-1xl2tfr"> </pre></div>'),Pe=i('<div class="output-box svelte-1xl2tfr"> </div>'),Te=i('<div class="error-box svelte-1xl2tfr"> </div>'),Fe=i('<div class="entry-details svelte-1xl2tfr"><!> <!> <div class="details-section svelte-1xl2tfr"><h3 class="svelte-1xl2tfr"> </h3> <!></div> <div class="entry-actions svelte-1xl2tfr"><button class="btn-delete svelte-1xl2tfr">Delete Entry</button></div></div>'),je=i('<div class="history-entry svelte-1xl2tfr"><div class="entry-header svelte-1xl2tfr" role="button" tabindex="0"><div class="entry-info svelte-1xl2tfr"><div class="entry-title svelte-1xl2tfr"><span class="skill-name svelte-1xl2tfr"> </span> <span> </span></div> <div class="entry-meta svelte-1xl2tfr"><span class="meta-item"> </span> <span class="meta-separator svelte-1xl2tfr">â€¢</span> <span class="meta-item"> </span> <span class="meta-separator svelte-1xl2tfr">â€¢</span> <span class="meta-item"> </span> <!></div></div> <button> </button></div> <!></div>'),Je=i('<div class="pagination svelte-1xl2tfr"><button class="pagination-btn svelte-1xl2tfr">Previous</button> <span class="pagination-info svelte-1xl2tfr"> </span> <button class="pagination-btn svelte-1xl2tfr">Next</button></div>'),Ue=i('<div class="history-list svelte-1xl2tfr"></div> <!>',1),Be=i('<div class="history-container svelte-1xl2tfr"><div class="history-header svelte-1xl2tfr"><div><h1 class="svelte-1xl2tfr">Execution History</h1> <p class="history-subtitle svelte-1xl2tfr"> </p></div> <!></div> <!> <!></div>');function Ze(Lt,Ot){pe(Ot,!0);let C=H(Ct([])),R=H(Ct([])),ht=H(!0),U=H(""),B=H("all"),$=H("all"),G=H("recent"),D=H(1),at=20,K=ft(()=>Math.ceil(t(R).length/at)),gt=ft(()=>t(R).slice((t(D)-1)*at,t(D)*at)),V=H(null);ue(()=>{At(),u(ht,!1)});function At(){const l=localStorage.getItem("execution_history");if(l)try{u(C,JSON.parse(l),!0),st()}catch(c){console.error("Failed to load history:",c),u(C,[],!0)}}function st(){let l=[...t(C)];if(t(U)){const c=t(U).toLowerCase();l=l.filter(m=>m.skillName.toLowerCase().includes(c)||m.section.toLowerCase().includes(c)||m.category.toLowerCase().includes(c))}if(t(B)!=="all"&&(l=l.filter(c=>c.section===t(B))),t($)!=="all"){const c=t($)==="success";l=l.filter(m=>m.success===c)}l.sort((c,m)=>{switch(t(G)){case"recent":return new Date(m.timestamp).getTime()-new Date(c.timestamp).getTime();case"oldest":return new Date(c.timestamp).getTime()-new Date(m.timestamp).getTime();case"name":return c.skillName.localeCompare(m.skillName);case"cost":return(m.metadata.cost||0)-(c.metadata.cost||0);default:return 0}}),u(R,l,!0),u(D,1)}fe(()=>{t(U),t(B),t($),t(G),st()});function bt(l){u(V,t(V)===l?null:l,!0)}function Ht(){confirm("Are you sure you want to clear all execution history?")&&(localStorage.removeItem("execution_history"),u(C,[],!0),u(R,[],!0))}function Mt(l){u(C,t(C).filter(c=>c.id!==l),!0),localStorage.setItem("execution_history",JSON.stringify(t(C))),st()}function Pt(l){return new Date(l).toLocaleString()}function Tt(l){return l!==void 0?`$${l.toFixed(4)}`:"N/A"}function Ft(l){return l!==void 0?`${l}ms`:"N/A"}const jt=ft(()=>Array.from(new Set(t(C).map(l=>l.section))).sort());be(Lt,{children:(l,c)=>{var m=Be(),rt=a(m),lt=a(rt),yt=r(a(lt),2),Jt=a(yt);e(yt),e(lt);var Ut=r(lt,2);{var Bt=x=>{var y=ye();y.__click=Ht,o(x,y)};f(Ut,x=>{t(C).length>0&&x(Bt)})}e(rt);var kt=r(rt,2);{var $t=x=>{var y=Se(),W=a(y),Y=a(W);he(Y),e(W);var Z=r(W,2),k=a(Z),I=a(k);I.value=I.__value="all";var T=r(I);Dt(T,17,()=>t(jt),xe,(w,j)=>{var P=ke(),ot=a(P,!0);e(P);var X={};b(()=>{n(ot,t(j)),X!==(X=t(j))&&(P.value=(P.__value=t(j))??"")}),o(w,P)}),e(k);var M=r(k,2),F=a(M);F.value=F.__value="all";var v=r(F);v.value=v.__value="success";var s=r(v);s.value=s.__value="error",e(M);var S=r(M,2),g=a(S);g.value=g.__value="recent";var O=r(g);O.value=O.__value="oldest";var L=r(O);L.value=L.__value="name";var q=r(L);q.value=q.__value="cost",e(S),e(Z),e(y),ge(Y,()=>t(U),w=>u(U,w)),xt(k,()=>t(B),w=>u(B,w)),xt(M,()=>t($),w=>u($,w)),xt(S,()=>t(G),w=>u(G,w)),o(x,y)};f(kt,x=>{t(C).length>0&&x($t)})}var qt=r(kt,2);{var Qt=x=>{var y=we();o(x,y)},Rt=x=>{var y=_e(),W=mt(y);{var Y=k=>{var I=Ce(),T=r(a(I),4);{var M=v=>{var s=Ne();o(v,s)},F=v=>{var s=Ee();o(v,s)};f(T,v=>{t(U)||t(B)!=="all"||t($)!=="all"?v(M):v(F,!1)})}e(I),o(k,I)},Z=k=>{var I=Ue(),T=mt(I);Dt(T,21,()=>t(gt),v=>v.id,(v,s)=>{var S=je(),g=a(S);g.__click=()=>bt(t(s).id),g.__keydown=N=>N.key==="Enter"&&bt(t(s).id);var O=a(g),L=a(O),q=a(L),w=a(q,!0);e(q);var j=r(q,2);let P;var ot=a(j,!0);e(j),e(L);var X=r(L,2),it=a(X),Vt=a(it,!0);e(it);var vt=r(it,4),Wt=a(vt,!0);e(vt);var nt=r(vt,4),Xt=a(nt,!0);e(nt);var zt=r(nt,2);{var Gt=N=>{var Q=De(),z=r(mt(Q),2),dt=a(z,!0);e(z),b(tt=>n(dt,tt),[()=>Tt(t(s).metadata.cost)]),o(N,Q)};f(zt,N=>{t(s).metadata.cost&&N(Gt)})}e(X),e(O);var ct=r(O,2);let St;var Kt=a(ct,!0);e(ct),e(g);var Yt=r(g,2);{var Zt=N=>{var Q=Fe(),z=a(Q);{var dt=h=>{var d=He(),A=r(a(d),2),et=a(A);{var ut=_=>{var p=Ie(),E=r(a(p),2),J=a(E,!0);e(E),e(p),b(()=>n(J,t(s).metadata.sessionId)),o(_,p)};f(et,_=>{t(s).metadata.sessionId&&_(ut)})}var Nt=r(et,2);{var oe=_=>{var p=Le(),E=r(a(p),2),J=a(E,!0);e(E),e(p),b(()=>n(J,t(s).metadata.model)),o(_,p)};f(Nt,_=>{t(s).metadata.model&&_(oe)})}var Et=r(Nt,2);{var ie=_=>{var p=Oe(),E=r(a(p),2),J=a(E,!0);e(E),e(p),b(()=>n(J,t(s).metadata.tokensUsed)),o(_,p)};f(Et,_=>{t(s).metadata.tokensUsed&&_(ie)})}var ve=r(Et,2);{var ne=_=>{var p=Ae(),E=r(a(p),2),J=a(E,!0);e(E),e(p),b(ce=>n(J,ce),[()=>Ft(t(s).metadata.latency)]),o(_,p)};f(ve,_=>{t(s).metadata.latency&&_(ne)})}e(A),e(d),o(h,d)};f(z,h=>{t(s).metadata&&h(dt)})}var tt=r(z,2);{var te=h=>{var d=Me(),A=r(a(d),2),et=a(A,!0);e(A),e(d),b(ut=>n(et,ut),[()=>JSON.stringify(t(s).inputs,null,2)]),o(h,d)};f(tt,h=>{Object.keys(t(s).inputs).length>0&&h(te)})}var _t=r(tt,2),pt=a(_t),ee=a(pt,!0);e(pt);var ae=r(pt,2);{var se=h=>{var d=Pe(),A=a(d,!0);e(d),b(()=>n(A,t(s).output)),o(h,d)},re=h=>{var d=Te(),A=a(d,!0);e(d),b(()=>n(A,t(s).error||"Unknown error occurred")),o(h,d)};f(ae,h=>{t(s).success?h(se):h(re,!1)})}e(_t);var wt=r(_t,2),le=a(wt);le.__click=()=>Mt(t(s).id),e(wt),e(Q),b(()=>n(ee,t(s).success?"Output":"Error")),o(N,Q)};f(Yt,N=>{t(V)===t(s).id&&N(Zt)})}e(S),b(N=>{n(w,t(s).skillName),P=It(j,1,"entry-status svelte-1xl2tfr",null,P,{success:t(s).success,error:!t(s).success}),n(ot,t(s).success?"âœ“ Success":"âœ— Error"),n(Vt,N),n(Wt,t(s).section),n(Xt,t(s).category),St=It(ct,1,"expand-btn svelte-1xl2tfr",null,St,{expanded:t(V)===t(s).id}),n(Kt,t(V)===t(s).id?"â–¼":"â–¶")},[()=>Pt(t(s).timestamp)]),o(v,S)}),e(T);var M=r(T,2);{var F=v=>{var s=Je(),S=a(s);S.__click=()=>u(D,Math.max(1,t(D)-1),!0);var g=r(S,2),O=a(g);e(g);var L=r(g,2);L.__click=()=>u(D,Math.min(t(K),t(D)+1),!0),e(s),b(()=>{S.disabled=t(D)===1,n(O,`Page ${t(D)??""} of ${t(K)??""}`),L.disabled=t(D)===t(K)}),o(v,s)};f(M,v=>{t(K)>1&&v(F)})}o(k,I)};f(W,k=>{t(gt).length===0?k(Y):k(Z,!1)},!0)}o(x,y)};f(qt,x=>{t(ht)?x(Qt):x(Rt,!1)})}e(m),b(()=>n(Jt,`View and manage your skill invocation history (${t(R).length??""} entries)`)),o(l,m)},$$slots:{default:!0}}),me()}de(["click","keydown"]);export{Ze as component};
