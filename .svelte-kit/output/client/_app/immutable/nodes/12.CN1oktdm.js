import{f as d,a as i,t as L,c as dt}from"../chunks/CHRq6SN2.js";import{o as ct}from"../chunks/afJwds1U.js";import{p as ut,b as I,a9 as $e,an as ft,g as t,t as p,a as pt,s as g,d as s,c as a,r,n as C,u as oe,f as ie}from"../chunks/LjYFlPRR.js";import{d as mt,i as x,s as v}from"../chunks/CedpH895.js";import"../chunks/C5SEkKG1.js";import"../chunks/DT77gqAl.js";import"../chunks/CIhCbREJ.js";import{B as be,P as ve}from"../chunks/B4R2PCZ7.js";import{I as _t}from"../chunks/DaRQYglL.js";import{S as ne}from"../chunks/CEI1VR2Q.js";import{B as Q}from"../chunks/BKaTCBmy.js";import{A as xt}from"../chunks/DVZU4egd.js";import{V as ht}from"../chunks/NvYsKEbS.js";var gt=d('<div class="filters-section svelte-1xl2tfr"><!> <div class="filter-row svelte-1xl2tfr"><!> <!> <!></div></div>'),yt=d('<div class="loading-state svelte-1xl2tfr"><div class="spinner svelte-1xl2tfr"></div> <p>Loading history...</p></div>'),$t=d('<div class="empty-state svelte-1xl2tfr"><div class="empty-icon svelte-1xl2tfr">ðŸ“‹</div> <p class="empty-message svelte-1xl2tfr">No execution history found</p> <p class="empty-hint svelte-1xl2tfr"> </p></div>'),bt=d('<span class="separator svelte-1xl2tfr">â€¢</span> <!>',1),St=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Session ID</span> <code class="svelte-1xl2tfr"> </code></div>'),kt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Model</span> <code class="svelte-1xl2tfr"> </code></div>'),wt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Tokens</span> <code class="svelte-1xl2tfr"> </code></div>'),Pt=d('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Latency</span> <code class="svelte-1xl2tfr"> </code></div>'),It=d('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Metadata</h3> <div class="metadata-grid svelte-1xl2tfr"><!> <!> <!> <!></div></div>'),Nt=d('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Inputs</h3> <pre class="code-block svelte-1xl2tfr"> </pre></div>'),Ot=d('<div class="output-box svelte-1xl2tfr"> </div>'),At=d('<div class="entry-details svelte-1xl2tfr"><!> <!> <div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr"> </h3> <!></div> <div class="entry-actions svelte-1xl2tfr"><!></div></div>'),Lt=d('<button class="entry-header svelte-1xl2tfr"><div class="entry-info svelte-1xl2tfr"><div class="entry-title svelte-1xl2tfr"><span class="skill-name svelte-1xl2tfr"> </span> <!></div> <div class="entry-meta svelte-1xl2tfr"><span> </span> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <!></div></div> <span class="expand-icon svelte-1xl2tfr"> </span></button> <!>',1),Ct=d('<div class="history-item-wrapper svelte-1xl2tfr"><!></div>'),Dt=d('<div class="virtual-container svelte-1xl2tfr"><!></div>'),Et=d('<div class="history-container svelte-1xl2tfr"><div class="page-header svelte-1xl2tfr"><div class="header-content svelte-1xl2tfr"><h1 class="page-title svelte-1xl2tfr">Execution History</h1> <p class="page-description svelte-1xl2tfr"> </p></div> <!></div> <!> <!></div>');function Gt(Se,ke){ut(ke,!0);let b=I($e([])),B=I($e([])),de=I(!0),D=I(""),E=I("all"),H=I("all"),J=I("recent"),U=I(null);const we=100,Pe=oe(()=>Array.from(new Set(t(b).map(e=>e.section))).sort()),Ie=oe(()=>[{value:"all",label:"All Sections"},...t(Pe).map(e=>({value:e,label:e}))]),Ne=[{value:"all",label:"All Status"},{value:"success",label:"Success Only"},{value:"error",label:"Errors Only"}],Oe=[{value:"recent",label:"Most Recent"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Skill Name"},{value:"cost",label:"Highest Cost"}];ct(()=>{Ae(),g(de,!1)});function Ae(){const e=localStorage.getItem("execution_history");if(e)try{g(b,JSON.parse(e),!0),R()}catch(o){console.error("Failed to load history:",o),g(b,[],!0)}}function R(){let e=[...t(b)];if(t(D)){const o=t(D).toLowerCase();e=e.filter(m=>m.skillName.toLowerCase().includes(o)||m.section.toLowerCase().includes(o)||m.category.toLowerCase().includes(o))}if(t(E)!=="all"&&(e=e.filter(o=>o.section===t(E))),t(H)!=="all"){const o=t(H)==="success";e=e.filter(m=>m.success===o)}e.sort((o,m)=>{switch(t(J)){case"recent":return new Date(m.timestamp).getTime()-new Date(o.timestamp).getTime();case"oldest":return new Date(o.timestamp).getTime()-new Date(m.timestamp).getTime();case"name":return o.skillName.localeCompare(m.skillName);case"cost":return(m.metadata.cost||0)-(o.metadata.cost||0);default:return 0}}),g(B,e,!0)}ft(()=>{t(D),t(E),t(H),t(J),R()});function Le(e){g(U,t(U)===e?null:e,!0)}function Ce(){confirm("Are you sure you want to clear all execution history?")&&(localStorage.removeItem("execution_history"),g(b,[],!0),g(B,[],!0))}function De(e){g(b,t(b).filter(o=>o.id!==e),!0),localStorage.setItem("execution_history",JSON.stringify(t(b))),R()}function Ee(e){return new Date(e).toLocaleString()}function He(e){return e!==void 0?`$${e.toFixed(4)}`:"N/A"}function Te(e){return e!==void 0?`${e}ms`:"N/A"}var G=Et(),K=a(G),X=a(K),ce=s(a(X),2),ze=a(ce);r(ce),r(X);var Be=s(X,2);{var Fe=e=>{be(e,{variant:"danger",$$events:{click:Ce},children:(o,m)=>{C();var N=L("Clear All History");i(o,N)},$$slots:{default:!0}})};x(Be,e=>{t(b).length>0&&e(Fe)})}r(K);var ue=s(K,2);{var Me=e=>{ve(e,{variant:"bordered",padding:"lg",children:(o,m)=>{var N=gt(),j=a(N);_t(j,{type:"search",placeholder:"Search by skill name, section, or category...",fullWidth:!0,get value(){return t(D)},set value(h){g(D,h,!0)}});var w=s(j,2),P=a(w);ne(P,{get options(){return t(Ie)},fullWidth:!0,get value(){return t(E)},set value(h){g(E,h,!0)}});var F=s(P,2);ne(F,{get options(){return Ne},fullWidth:!0,get value(){return t(H)},set value(h){g(H,h,!0)}});var T=s(F,2);ne(T,{get options(){return Oe},fullWidth:!0,get value(){return t(J)},set value(h){g(J,h,!0)}}),r(w),r(N),i(o,N)},$$slots:{default:!0}})};x(ue,e=>{t(b).length>0&&e(Me)})}var We=s(ue,2);{var Je=e=>{var o=yt();i(e,o)},Ue=e=>{var o=dt(),m=ie(o);{var N=w=>{ve(w,{variant:"elevated",padding:"lg",children:(P,F)=>{var T=$t(),h=s(a(T),4),M=a(h,!0);r(h),r(T),p(()=>v(M,t(D)||t(E)!=="all"||t(H)!=="all"?"Try adjusting your filters":"Execute skills to see them appear here")),i(P,T)},$$slots:{default:!0}})},j=w=>{var P=Dt(),F=a(P);ht(F,{get items(){return t(B)},itemHeight:we,height:"calc(100vh - 400px)",gap:16,children:(h,M)=>{let l=()=>M==null?void 0:M().item;var Y=Ct(),je=a(Y);ve(je,{variant:"bordered",padding:"none",children:(Ve,Ht)=>{var fe=Lt(),V=ie(fe);V.__click=()=>Le(l().id);var Z=a(V),ee=a(Z),te=a(ee),qe=a(te,!0);r(te);var Qe=s(te,2);{let c=oe(()=>l().success?"success":"error");Q(Qe,{get variant(){return t(c)},size:"sm",children:(S,y)=>{C();var z=L();p(()=>v(z,l().success?"Success":"Error")),i(S,z)},$$slots:{default:!0}})}r(ee);var pe=s(ee,2),ae=a(pe),Re=a(ae,!0);r(ae);var me=s(ae,4);Q(me,{variant:"default",size:"sm",children:(c,S)=>{C();var y=L();p(()=>v(y,l().section)),i(c,y)},$$slots:{default:!0}});var _e=s(me,4);Q(_e,{variant:"default",size:"sm",children:(c,S)=>{C();var y=L();p(()=>v(y,l().category)),i(c,y)},$$slots:{default:!0}});var Ge=s(_e,2);{var Ke=c=>{var S=bt(),y=s(ie(S),2);Q(y,{variant:"accent",size:"sm",children:(z,re)=>{C();var q=L();p(W=>v(q,W),[()=>He(l().metadata.cost)]),i(z,q)},$$slots:{default:!0}}),i(c,S)};x(Ge,c=>{l().metadata.cost&&c(Ke)})}r(pe),r(Z);var xe=s(Z,2),Xe=a(xe,!0);r(xe),r(V);var Ye=s(V,2);{var Ze=c=>{var S=At(),y=a(S);{var z=n=>{var _=It(),k=s(a(_),2),O=a(k);{var le=u=>{var f=St(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.sessionId)),i(u,f)};x(O,u=>{l().metadata.sessionId&&u(le)})}var ge=s(O,2);{var lt=u=>{var f=kt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.model)),i(u,f)};x(ge,u=>{l().metadata.model&&u(lt)})}var ye=s(ge,2);{var ot=u=>{var f=wt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(()=>v(A,l().metadata.tokensUsed)),i(u,f)};x(ye,u=>{l().metadata.tokensUsed&&u(ot)})}var it=s(ye,2);{var vt=u=>{var f=Pt(),$=s(a(f),2),A=a($,!0);r($),r(f),p(nt=>v(A,nt),[()=>Te(l().metadata.latency)]),i(u,f)};x(it,u=>{l().metadata.latency&&u(vt)})}r(k),r(_),i(n,_)};x(y,n=>{l().metadata&&n(z)})}var re=s(y,2);{var q=n=>{var _=Nt(),k=s(a(_),2),O=a(k,!0);r(k),r(_),p(le=>v(O,le),[()=>JSON.stringify(l().inputs,null,2)]),i(n,_)};x(re,n=>{Object.keys(l().inputs).length>0&&n(q)})}var W=s(re,2),se=a(W),et=a(se,!0);r(se);var tt=s(se,2);{var at=n=>{var _=Ot(),k=a(_,!0);r(_),p(()=>v(k,l().output)),i(n,_)},rt=n=>{xt(n,{variant:"error",children:(_,k)=>{C();var O=L();p(()=>v(O,l().error||"Unknown error occurred")),i(_,O)},$$slots:{default:!0}})};x(tt,n=>{l().success?n(at):n(rt,!1)})}r(W);var he=s(W,2),st=a(he);be(st,{variant:"danger",size:"sm",$$events:{click:()=>De(l().id)},children:(n,_)=>{C();var k=L("Delete Entry");i(n,k)},$$slots:{default:!0}}),r(he),r(S),p(()=>v(et,l().success?"Output":"Error")),i(c,S)};x(Ye,c=>{t(U)===l().id&&c(Ze)})}p(c=>{v(qe,l().skillName),v(Re,c),v(Xe,t(U)===l().id?"â–¼":"â–¶")},[()=>Ee(l().timestamp)]),i(Ve,fe)},$$slots:{default:!0}}),r(Y),i(h,Y)},$$slots:{default:!0}}),r(P),i(w,P)};x(m,w=>{t(B).length===0?w(N):w(j,!1)},!0)}i(e,o)};x(We,e=>{t(de)?e(Je):e(Ue,!1)})}r(G),p(()=>v(ze,`${t(B).length??""} execution entries`)),i(Se,G),pt()}mt(["click"]);export{Gt as component};
