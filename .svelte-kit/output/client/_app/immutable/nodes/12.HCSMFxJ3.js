import{s as e,T as t,o as s,d as a,e as l,i as r,z as i,k as n,l as c,p as v,g as o,j as d,q as u,a as m,r as f,A as p,S as h,I as x,y as g,x as y,m as $,h as k}from"../chunks/BBEC77oO.js";import{V as b}from"../chunks/Cv44uBGk.js";import{B as S}from"../chunks/DHMzYP54.js";import{P as w}from"../chunks/B2n38f_9.js";import{I as j}from"../chunks/DJbQjZGk.js";import{S as N}from"../chunks/BFrF1liP.js";import{B as A}from"../chunks/BLNhyOUm.js";import{A as I}from"../chunks/hkv9Cn3v.js";var C=l('<div class="filters-section svelte-1xl2tfr"><!> <div class="filter-row svelte-1xl2tfr"><!> <!> <!></div></div>'),O=l('<div class="loading-state svelte-1xl2tfr"><div class="spinner svelte-1xl2tfr"></div> <p>Loading history...</p></div>'),D=l('<div class="empty-state svelte-1xl2tfr"><div class="empty-icon svelte-1xl2tfr">ðŸ“‹</div> <p class="empty-message svelte-1xl2tfr">No execution history found</p> <p class="empty-hint svelte-1xl2tfr"> </p></div>'),L=l('<span class="separator svelte-1xl2tfr">â€¢</span> <!>',1),T=l('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Session ID</span> <code class="svelte-1xl2tfr"> </code></div>'),z=l('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Model</span> <code class="svelte-1xl2tfr"> </code></div>'),E=l('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Tokens</span> <code class="svelte-1xl2tfr"> </code></div>'),H=l('<div class="meta-item svelte-1xl2tfr"><span class="meta-label svelte-1xl2tfr">Latency</span> <code class="svelte-1xl2tfr"> </code></div>'),_=l('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Metadata</h3> <div class="metadata-grid svelte-1xl2tfr"><!> <!> <!> <!></div></div>'),M=l('<div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr">Inputs</h3> <pre class="code-block svelte-1xl2tfr"> </pre></div>'),W=l('<div class="output-box svelte-1xl2tfr"> </div>'),B=l('<div class="entry-details svelte-1xl2tfr"><!> <!> <div class="details-section svelte-1xl2tfr"><h3 class="section-title svelte-1xl2tfr"> </h3> <!></div> <div class="entry-actions svelte-1xl2tfr"><!></div></div>'),F=l('<button class="entry-header svelte-1xl2tfr"><div class="entry-info svelte-1xl2tfr"><div class="entry-title svelte-1xl2tfr"><span class="skill-name svelte-1xl2tfr"> </span> <!></div> <div class="entry-meta svelte-1xl2tfr"><span> </span> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <span class="separator svelte-1xl2tfr">â€¢</span> <!> <!></div></div> <span class="expand-icon svelte-1xl2tfr"> </span></button> <!>',1),J=l('<div class="history-item-wrapper svelte-1xl2tfr"><!></div>'),U=l('<div class="virtual-container svelte-1xl2tfr"><!></div>'),q=l('<div class="history-container svelte-1xl2tfr"><div class="page-header svelte-1xl2tfr"><div class="header-content svelte-1xl2tfr"><h1 class="page-title svelte-1xl2tfr">Execution History</h1> <p class="page-description svelte-1xl2tfr"> </p></div> <!></div> <!> <!></div>');function G(l,h){v(h,!0);let G=e(t([])),P=e(t([])),R=e(!0),V=e(""),K=e("all"),Q=e("all"),X=e("recent"),Y=e(null);const Z=y(()=>Array.from(new Set(o(G).map(e=>e.section))).sort()),ee=y(()=>[{value:"all",label:"All Sections"},...o(Z).map(e=>({value:e,label:e}))]),te=[{value:"all",label:"All Status"},{value:"success",label:"Success Only"},{value:"error",label:"Errors Only"}],se=[{value:"recent",label:"Most Recent"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Skill Name"},{value:"cost",label:"Highest Cost"}];function ae(){let e=[...o(G)];if(o(V)){const t=o(V).toLowerCase();e=e.filter(e=>e.skillName.toLowerCase().includes(t)||e.section.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}if("all"!==o(K)&&(e=e.filter(e=>e.section===o(K))),"all"!==o(Q)){const t="success"===o(Q);e=e.filter(e=>e.success===t)}e.sort((e,t)=>{switch(o(X)){case"recent":return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();case"oldest":return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime();case"name":return e.skillName.localeCompare(t.skillName);case"cost":return(t.metadata.cost||0)-(e.metadata.cost||0);default:return 0}}),m(P,e,!0)}function le(){confirm("Are you sure you want to clear all execution history?")&&(localStorage.removeItem("execution_history"),m(G,[],!0),m(P,[],!0))}s(()=>{!function(){const e=localStorage.getItem("execution_history");if(e)try{m(G,JSON.parse(e),!0),ae()}catch(t){m(G,[],!0)}}(),m(R,!1)}),a(()=>{o(V),o(K),o(Q),o(X),ae()});var re=q(),ie=u(re),ne=u(ie),ce=d(u(ne),2),ve=u(ce);f(ce),f(ne);var oe=d(ne,2),de=e=>{S(e,{variant:"danger",$$events:{click:le},children:(e,t)=>{x();var s=g("Clear All History");n(e,s)},$$slots:{default:!0}})};r(oe,e=>{o(G).length>0&&e(de)}),f(ie);var ue=d(ie,2),me=e=>{w(e,{variant:"bordered",padding:"lg",children:(e,t)=>{var s=C(),a=u(s);j(a,{type:"search",placeholder:"Search by skill name, section, or category...",fullWidth:!0,get value(){return o(V)},set value(e){m(V,e,!0)}});var l=d(a,2),r=u(l);N(r,{get options(){return o(ee)},fullWidth:!0,get value(){return o(K)},set value(e){m(K,e,!0)}});var i=d(r,2);N(i,{get options(){return te},fullWidth:!0,get value(){return o(Q)},set value(e){m(Q,e,!0)}});var c=d(i,2);N(c,{get options(){return se},fullWidth:!0,get value(){return o(X)},set value(e){m(X,e,!0)}}),f(l),f(s),n(e,s)},$$slots:{default:!0}})};r(ue,e=>{o(G).length>0&&e(me)});var fe=d(ue,2),pe=e=>{var t=O();n(e,t)},he=e=>{var t=$(),s=k(t),a=e=>{w(e,{variant:"elevated",padding:"lg",children:(e,t)=>{var s=D(),a=d(u(s),4),l=u(a,!0);f(a),f(s),i(()=>p(l,o(V)||"all"!==o(K)||"all"!==o(Q)?"Try adjusting your filters":"Execute skills to see them appear here")),n(e,s)},$$slots:{default:!0}})},l=e=>{var t=U(),s=u(t);{const e=(e,t)=>{let s=()=>t?.().item;var a=J(),l=u(a);w(l,{variant:"bordered",padding:"none",children:(e,t)=>{var a=F(),l=k(a);l.__click=()=>{return e=s().id,void m(Y,o(Y)===e?null:e,!0);var e};var c=u(l),v=u(c),h=u(v),$=u(h,!0);f(h);var b=d(h,2);{let e=y(()=>s().success?"success":"error");A(b,{get variant(){return o(e)},size:"sm",children:(e,t)=>{x();var a=g();i(()=>p(a,s().success?"Success":"Error")),n(e,a)},$$slots:{default:!0}})}f(v);var w=d(v,2),j=u(w),N=u(j,!0);f(j);var C=d(j,4);A(C,{variant:"default",size:"sm",children:(e,t)=>{x();var a=g();i(()=>p(a,s().section)),n(e,a)},$$slots:{default:!0}});var O=d(C,4);A(O,{variant:"default",size:"sm",children:(e,t)=>{x();var a=g();i(()=>p(a,s().category)),n(e,a)},$$slots:{default:!0}});var D=d(O,2),J=e=>{var t=L(),a=d(k(t),2);A(a,{variant:"accent",size:"sm",children:(e,t)=>{x();var a=g();i(e=>p(a,e),[()=>{return void 0!==(e=s().metadata.cost)?`$${e.toFixed(4)}`:"N/A";var e}]),n(e,a)},$$slots:{default:!0}}),n(e,t)};r(D,e=>{s().metadata.cost&&e(J)}),f(w),f(c);var U=d(c,2),q=u(U,!0);f(U),f(l);var P=d(l,2),R=e=>{var t=B(),a=u(t),l=e=>{var t=_(),a=d(u(t),2),l=u(a),c=e=>{var t=T(),a=d(u(t),2),l=u(a,!0);f(a),f(t),i(()=>p(l,s().metadata.sessionId)),n(e,t)};r(l,e=>{s().metadata.sessionId&&e(c)});var v=d(l,2),o=e=>{var t=z(),a=d(u(t),2),l=u(a,!0);f(a),f(t),i(()=>p(l,s().metadata.model)),n(e,t)};r(v,e=>{s().metadata.model&&e(o)});var m=d(v,2),h=e=>{var t=E(),a=d(u(t),2),l=u(a,!0);f(a),f(t),i(()=>p(l,s().metadata.tokensUsed)),n(e,t)};r(m,e=>{s().metadata.tokensUsed&&e(h)});var x=d(m,2),g=e=>{var t=H(),a=d(u(t),2),l=u(a,!0);f(a),f(t),i(e=>p(l,e),[()=>{return void 0!==(e=s().metadata.latency)?`${e}ms`:"N/A";var e}]),n(e,t)};r(x,e=>{s().metadata.latency&&e(g)}),f(a),f(t),n(e,t)};r(a,e=>{s().metadata&&e(l)});var c=d(a,2),v=e=>{var t=M(),a=d(u(t),2),l=u(a,!0);f(a),f(t),i(e=>p(l,e),[()=>JSON.stringify(s().inputs,null,2)]),n(e,t)};r(c,e=>{Object.keys(s().inputs).length>0&&e(v)});var h=d(c,2),y=u(h),$=u(y,!0);f(y);var k=d(y,2),b=e=>{var t=W(),a=u(t,!0);f(t),i(()=>p(a,s().output)),n(e,t)},w=e=>{I(e,{variant:"error",children:(e,t)=>{x();var a=g();i(()=>p(a,s().error||"Unknown error occurred")),n(e,a)},$$slots:{default:!0}})};r(k,e=>{s().success?e(b):e(w,!1)}),f(h);var j=d(h,2),N=u(j);S(N,{variant:"danger",size:"sm",$$events:{click:()=>{return e=s().id,m(G,o(G).filter(t=>t.id!==e),!0),localStorage.setItem("execution_history",JSON.stringify(o(G))),void ae();var e}},children:(e,t)=>{x();var s=g("Delete Entry");n(e,s)},$$slots:{default:!0}}),f(j),f(t),i(()=>p($,s().success?"Output":"Error")),n(e,t)};r(P,e=>{o(Y)===s().id&&e(R)}),i(e=>{p($,s().skillName),p(N,e),p(q,o(Y)===s().id?"â–¼":"â–¶")},[()=>{return e=s().timestamp,new Date(e).toLocaleString();var e}]),n(e,a)},$$slots:{default:!0}}),f(a),n(e,a)};b(s,{get items(){return o(P)},itemHeight:100,height:"calc(100vh - 400px)",gap:16,children:e,$$slots:{default:!0}})}f(t),n(e,t)};r(s,e=>{0===o(P).length?e(a):e(l,!1)},!0),n(e,t)};r(fe,e=>{o(R)?e(pe):e(he,!1)}),f(re),i(()=>p(ve,`${o(P).length??""} execution entries`)),n(l,re),c()}h(["click"]);export{G as component};
