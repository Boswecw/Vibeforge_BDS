{"version":3,"file":"18.DFGrVFeR.js","sources":["../../../../../../src/routes/test-api/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { forgeAgentsClient } from '$lib/api/forgeAgentsClient';\n\timport { skillRegistry } from '$lib/api/skillRegistry';\n\timport { Panel, Button, Badge, Alert } from '$lib/components';\n\n\tlet testResults = $state<any[]>([]);\n\tlet loading = $state(false);\n\tlet currentTest = $state('');\n\n\tfunction addResult(test: string, status: 'success' | 'error', message: string, data?: any) {\n\t\ttestResults = [\n\t\t\t...testResults,\n\t\t\t{\n\t\t\t\ttest,\n\t\t\t\tstatus,\n\t\t\t\tmessage,\n\t\t\t\tdata,\n\t\t\t\ttimestamp: new Date().toISOString()\n\t\t\t}\n\t\t];\n\t}\n\n\tasync function runTests() {\n\t\ttestResults = [];\n\t\tloading = true;\n\n\t\ttry {\n\t\t\t// Test 1: List skills without auth (should get PUBLIC skills only)\n\t\t\tcurrentTest = 'Loading PUBLIC skills without authentication...';\n\t\t\ttry {\n\t\t\t\tconst skills = await skillRegistry.getAllSkills();\n\t\t\t\taddResult(\n\t\t\t\t\t'Public Skills (No Auth)',\n\t\t\t\t\t'success',\n\t\t\t\t\t`Loaded ${skills.length} skills`,\n\t\t\t\t\tskills.slice(0, 3)\n\t\t\t\t);\n\t\t\t} catch (err: any) {\n\t\t\t\taddResult('Public Skills (No Auth)', 'error', err.message, err);\n\t\t\t}\n\n\t\t\t// Test 2: Login as admin\n\t\t\tcurrentTest = 'Authenticating as admin@bds.com...';\n\t\t\ttry {\n\t\t\t\tconst authResponse = await forgeAgentsClient.login('admin@bds.com', 'password123');\n\t\t\t\taddResult(\n\t\t\t\t\t'Authentication',\n\t\t\t\t\t'success',\n\t\t\t\t\t`Logged in successfully (expires: ${authResponse.expires_at})`,\n\t\t\t\t\t{\n\t\t\t\t\t\texpires_at: authResponse.expires_at,\n\t\t\t\t\t\taccess_token: authResponse.access_token.slice(0, 50) + '...'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch (err: any) {\n\t\t\t\taddResult('Authentication', 'error', err.message, err);\n\t\t\t}\n\n\t\t\t// Test 3: List skills with auth (should get ALL skills including BDS_ONLY)\n\t\t\tcurrentTest = 'Loading ALL skills with authentication...';\n\t\t\ttry {\n\t\t\t\t// Force reload after auth\n\t\t\t\tconst skills = await forgeAgentsClient.listSkills();\n\t\t\t\taddResult(\n\t\t\t\t\t'All Skills (With Auth)',\n\t\t\t\t\t'success',\n\t\t\t\t\t`Loaded ${skills.skills.length} skills`,\n\t\t\t\t\tskills.skills.slice(0, 3)\n\t\t\t\t);\n\t\t\t} catch (err: any) {\n\t\t\t\taddResult('All Skills (With Auth)', 'error', err.message, err);\n\t\t\t}\n\n\t\t\t// Test 4: Get specific skill\n\t\t\tcurrentTest = 'Fetching specific skill...';\n\t\t\ttry {\n\t\t\t\tconst skill = await forgeAgentsClient.getSkill('A1');\n\t\t\t\taddResult('Get Skill (A1)', 'success', `Retrieved skill: ${skill.name}`, skill);\n\t\t\t} catch (err: any) {\n\t\t\t\taddResult('Get Skill (A1)', 'error', err.message, err);\n\t\t\t}\n\n\t\t\t// Test 5: Invoke a skill (non-streaming)\n\t\t\tcurrentTest = 'Invoking skill...';\n\t\t\ttry {\n\t\t\t\tconst result = await forgeAgentsClient.invokeSkill('A1', {\n\t\t\t\t\tinputs: {\n\t\t\t\t\t\tprompt: 'Test prompt for API integration'\n\t\t\t\t\t},\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttemperature: 0.7\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\taddResult('Invoke Skill (A1)', 'success', `Invocation completed`, result);\n\t\t\t} catch (err: any) {\n\t\t\t\taddResult('Invoke Skill (A1)', 'error', err.message, err);\n\t\t\t}\n\t\t} finally {\n\t\t\tloading = false;\n\t\t\tcurrentTest = '';\n\t\t}\n\t}\n\n\tfunction clearResults() {\n\t\ttestResults = [];\n\t}\n</script>\n\n<div class=\"test-page\">\n\t<div class=\"test-header\">\n\t\t<h1 class=\"test-title\">ForgeAgents API Integration Test</h1>\n\t\t<p class=\"test-description\">\n\t\t\tThis page tests the connection between VibeForge_BDS frontend and the ForgeAgents BDS API.\n\t\t</p>\n\n\t\t<div class=\"test-actions\">\n\t\t\t<Button variant=\"primary\" onclick={runTests} disabled={loading}>\n\t\t\t\t{loading ? 'Running Tests...' : 'Run All Tests'}\n\t\t\t</Button>\n\t\t\t<Button variant=\"secondary\" onclick={clearResults} disabled={loading}>Clear Results</Button>\n\t\t</div>\n\n\t\t{#if loading}\n\t\t\t<Alert variant=\"info\" title=\"Testing in progress\">\n\t\t\t\t{currentTest}\n\t\t\t</Alert>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"test-results\">\n\t\t{#if testResults.length === 0}\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t<p>No test results yet. Click \"Run All Tests\" to begin.</p>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\t\t{:else}\n\t\t\t{#each testResults as result}\n\t\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t\t<div class=\"result-header\">\n\t\t\t\t\t\t<div class=\"result-info\">\n\t\t\t\t\t\t\t<h3 class=\"result-test\">{result.test}</h3>\n\t\t\t\t\t\t\t<span class=\"result-time\">{new Date(result.timestamp).toLocaleTimeString()}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Badge variant={result.status === 'success' ? 'success' : 'error'}>\n\t\t\t\t\t\t\t{result.status.toUpperCase()}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<p class=\"result-message\">{result.message}</p>\n\n\t\t\t\t\t{#if result.data}\n\t\t\t\t\t\t<details class=\"result-details\">\n\t\t\t\t\t\t\t<summary>View Data</summary>\n\t\t\t\t\t\t\t<pre class=\"result-data\">{JSON.stringify(result.data, null, 2)}</pre>\n\t\t\t\t\t\t</details>\n\t\t\t\t\t{/if}\n\t\t\t\t</Panel>\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n\n\t<div class=\"test-info\">\n\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t<h3 class=\"info-title\">Test Information</h3>\n\t\t\t<dl class=\"info-list\">\n\t\t\t\t<dt>API Base URL:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t<code>http://localhost:3000</code>\n\t\t\t\t</dd>\n\t\t\t\t<dt>Test Credentials:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t<code>admin@bds.com</code> / <code>password123</code>\n\t\t\t\t</dd>\n\t\t\t\t<dt>Expected Results:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Test 1: Should load ~67 PUBLIC skills</li>\n\t\t\t\t\t\t<li>Test 2: Should authenticate successfully</li>\n\t\t\t\t\t\t<li>Test 3: Should load all 120 skills (67 PUBLIC + 53 BDS_ONLY)</li>\n\t\t\t\t\t\t<li>Test 4: Should retrieve specific skill details</li>\n\t\t\t\t\t\t<li>Test 5: Should invoke skill and get response</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</dd>\n\t\t\t\t<dt>Console Logging:</dt>\n\t\t\t\t<dd>Open browser DevTools Console to see detailed request/response logs</dd>\n\t\t\t</dl>\n\t\t</Panel>\n\t</div>\n</div>\n\n<style>\n\t.test-page {\n\t\tmax-width: 1200px;\n\t\tmargin: 0 auto;\n\t\tpadding: var(--spacing-xl);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xl);\n\t}\n\n\t.test-header {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.test-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 2rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.test-description {\n\t\tfont-size: 1rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t.test-actions {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.test-results {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\tcolor: var(--color-text-secondary);\n\t}\n\n\t.result-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: var(--spacing-md);\n\t\tmargin-bottom: var(--spacing-md);\n\t}\n\n\t.result-info {\n\t\tflex: 1;\n\t}\n\n\t.result-test {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 400;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-xs) 0;\n\t}\n\n\t.result-time {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t.result-message {\n\t\tfont-size: 0.9375rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmargin: 0 0 var(--spacing-md) 0;\n\t}\n\n\t.result-details {\n\t\tmargin-top: var(--spacing-md);\n\t}\n\n\t.result-details summary {\n\t\tcursor: pointer;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--color-brass);\n\t\tuser-select: none;\n\t}\n\n\t.result-details summary:hover {\n\t\ttext-decoration: underline;\n\t}\n\n\t.result-data {\n\t\tmargin-top: var(--spacing-sm);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-2);\n\t\tborder: 1px solid var(--color-border-subtle);\n\t\tborder-radius: var(--radius-md);\n\t\tfont-family: var(--font-family-mono);\n\t\tfont-size: 0.8125rem;\n\t\tcolor: var(--color-text-secondary);\n\t\toverflow-x: auto;\n\t\twhite-space: pre-wrap;\n\t\tword-break: break-all;\n\t}\n\n\t.test-info {\n\t\tmargin-top: var(--spacing-xl);\n\t}\n\n\t.info-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-lg) 0;\n\t}\n\n\t.info-list {\n\t\tdisplay: grid;\n\t\tgap: var(--spacing-md);\n\t\tmargin: 0;\n\t}\n\n\t.info-list dt {\n\t\tfont-weight: 600;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t}\n\n\t.info-list dd {\n\t\tmargin: var(--spacing-xs) 0 0 0;\n\t\tcolor: var(--color-text-secondary);\n\t}\n\n\t.info-list code {\n\t\tbackground-color: var(--color-surface-2);\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: var(--radius-sm);\n\t\tfont-family: var(--font-family-mono);\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-brass);\n\t}\n\n\t.info-list ul {\n\t\tmargin: var(--spacing-xs) 0 0 0;\n\t\tpadding-left: var(--spacing-lg);\n\t}\n\n\t.info-list li {\n\t\tmargin-bottom: var(--spacing-xs);\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.5;\n\t}\n</style>\n"],"names":["testResults","$.state","$.proxy","loading","currentTest","addResult","test","status","message","data","timestamp","Date","toISOString","div","root","div_1","div_2","Button","node","async","$.set","skills","skillRegistry","getAllSkills","length","slice","err","authResponse","forgeAgentsClient","login","expires_at","access_token","listSkills","skill","getSkill","name","invokeSkill","inputs","prompt","options","temperature","node_1","Alert","$$anchor","$$render","consequent","div_3","Panel","div_4","root_6","$.each","node_4","$.get","result","div_5","$.first_child","fragment_6","div_6","h3","span","$0","$.derived","Badge","node_5","toUpperCase","p","details","root_11","pre","JSON","stringify","consequent_2","$.set_text","text_3","text_6","toLocaleTimeString","consequent_1","alternate","div_7","node_7"],"mappings":"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"}