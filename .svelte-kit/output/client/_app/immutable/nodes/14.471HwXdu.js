import{p as yt,s as B,R as Pt,o as St,b as Tt,g as e,c as v,f,i as k,h as t,j as zt,I as It,q as le,m as s,r as a,A as qt,J as wt,k as U,d as O,H as u,v as m,w as p,x as o,e as r,O as Ce,V as Qe,P as Xe,F as Ye,G as et,Z as Ct}from"../chunks/DkYuCCRR.js";import{s as Et}from"../chunks/v9ZTRfye.js";import{f as tt}from"../chunks/DZdTBaFY.js";import"../chunks/ZXpR-Cq1.js";import{B as Ee,P as Re}from"../chunks/NBWhFnqU.js";import{I as at}from"../chunks/DJ6tW-_S.js";import{S as Bt}from"../chunks/CzJ_pneL.js";import{T as st}from"../chunks/CpbF74mb.js";import{B as F}from"../chunks/BZBw9RiU.js";import{A as De}from"../chunks/B_6VVtGD.js";var Ot=f('<div class="loading-state svelte-112kdh0"><div class="spinner svelte-112kdh0"></div> <p>Loading skill...</p></div>'),Ft=f('<!> <div style="text-align: center; margin-top: 1rem;"><!></div>',1),Lt=f('<div class="skill-metadata svelte-112kdh0"><div class="meta-group svelte-112kdh0"><span class="meta-label svelte-112kdh0">Skill ID</span> <!></div> <div class="meta-group svelte-112kdh0"><span class="meta-label svelte-112kdh0">Section</span> <!></div> <div class="meta-group svelte-112kdh0"><span class="meta-label svelte-112kdh0">Category</span> <!></div> <div class="meta-group svelte-112kdh0"><span class="meta-label svelte-112kdh0">Est. Cost</span> <!></div></div>'),Wt=f('<div class="skill-tags svelte-112kdh0"><span class="tags-label svelte-112kdh0">Tags</span> <div class="tags-list svelte-112kdh0"></div></div>'),Mt=f('<p class="no-inputs svelte-112kdh0">This skill requires no inputs.</p>'),jt=f('<span class="required svelte-112kdh0">*</span>'),At=f('<p class="input-description svelte-112kdh0"> </p>'),Gt=f('<div class="checkbox-group svelte-112kdh0"><label class="svelte-112kdh0"><input type="checkbox" class="svelte-112kdh0"/> <!></label> <!></div>'),Rt=f('<div class="inputs-form svelte-112kdh0"></div>'),Dt=f('<h2 class="svelte-112kdh0">Inputs</h2> <!> <div class="options-panel svelte-112kdh0"><h3 class="svelte-112kdh0">Execution Options</h3> <div class="option-group svelte-112kdh0"><label class="svelte-112kdh0"><input type="checkbox"/> Enable Streaming</label></div> <!> <div class="option-group svelte-112kdh0"><label for="temperature" class="svelte-112kdh0"> </label> <input type="range" id="temperature" min="0" max="1" step="0.1" class="option-slider svelte-112kdh0"/></div> <div class="option-group svelte-112kdh0"><label for="maxTokens" class="svelte-112kdh0"> </label> <input type="range" id="maxTokens" min="256" max="8192" step="256" class="option-slider svelte-112kdh0"/></div></div> <!>',1),Ht=f('<div class="streaming-output svelte-112kdh0"><pre> </pre> <div class="streaming-indicator svelte-112kdh0"><!></div></div>'),Jt=f('<div class="spinner svelte-112kdh0"></div> <p>Executing skill...</p>',1),Nt=f('<div class="output-loading svelte-112kdh0"><!></div>'),Ut=f('<div class="output-success svelte-112kdh0"><div class="output-content svelte-112kdh0"><pre class="svelte-112kdh0"> </pre></div></div>'),Vt=f('<div class="output-content svelte-112kdh0"><pre class="svelte-112kdh0"> </pre></div>'),Zt=f('<div class="output-success svelte-112kdh0"><div class="output-metadata svelte-112kdh0"><div class="meta-item svelte-112kdh0"><span class="meta-label svelte-112kdh0">Session ID</span> <!></div> <div class="meta-item svelte-112kdh0"><span class="meta-label svelte-112kdh0">Model</span> <!></div> <div class="meta-item svelte-112kdh0"><span class="meta-label svelte-112kdh0">Tokens</span> <!></div> <div class="meta-item svelte-112kdh0"><span class="meta-label svelte-112kdh0">Cost</span> <!></div> <div class="meta-item svelte-112kdh0"><span class="meta-label svelte-112kdh0">Latency</span> <!></div></div> <!></div>'),Kt=f('<div class="output-empty svelte-112kdh0"><p>No output yet. Configure inputs and click "Invoke Skill" to run.</p></div>'),Qt=f('<div class="output-header svelte-112kdh0"><h2 class="svelte-112kdh0">Output</h2> <!></div> <!>',1),Xt=f('<div class="skill-detail"><div class="detail-header svelte-112kdh0"><!> <div class="header-content svelte-112kdh0"><div class="header-main svelte-112kdh0"><h1 class="svelte-112kdh0"> </h1> <!></div> <p class="skill-description svelte-112kdh0"> </p></div></div> <!> <!> <div class="content-grid svelte-112kdh0"><!> <!></div></div>'),Yt=f('<div class="skill-detail-container svelte-112kdh0"><!></div>');function na(rt,lt){yt(lt,!0);const it=()=>qt(wt,"$page",vt),[vt,dt]=It();let n=B(null),Be=B(!0),D=B(null),I=B(Pt({})),ue=B(!1),q=B(null),V=B(""),Se=B(!1),Oe=B(!0),Te=B("claude-3.5-sonnet"),pe=B(.2),ce=B(4096);const He=le(()=>it().params.id);St(async()=>{try{v(n,await Et.getSkill(e(He))||null,!0),e(n)||v(D,`Skill not found: ${e(He)}`),v(Be,!1)}catch(c){v(D,c instanceof Error?c.message:"Failed to load skill",!0),v(Be,!1)}}),Tt(()=>{if(e(n)){const c={};for(const[L,_e]of Object.entries(e(n).inputs))_e.type==="boolean"?c[L]=!1:_e.type==="number"?c[L]=0:_e.type==="array"?c[L]=[]:c[L]="";v(I,c,!0)}});async function ot(){if(!(!e(n)||e(ue))){v(ue,!0),v(q,null),v(V,""),v(D,null);try{if(e(Oe)){v(Se,!0);const c=tt.invokeSkillStreaming(e(n).id,{inputs:e(I),options:{model:e(Te),temperature:e(pe),max_tokens:e(ce)}});for await(const L of c)v(V,e(V)+L);v(Se,!1)}else v(q,await tt.invokeSkill(e(n).id,{inputs:e(I),options:{model:e(Te),temperature:e(pe),max_tokens:e(ce)}}),!0)}catch(c){v(D,c instanceof Error?c.message:"Invocation failed",!0),v(Se,!1)}finally{v(ue,!1)}}}function nt(){v(q,null),v(V,""),v(D,null)}var Fe=Yt(),ut=s(Fe);{var pt=c=>{var L=Ot();t(c,L)},ct=c=>{var L=U(),_e=O(L);{var _t=ie=>{var fe=Ft(),ze=O(fe);De(ze,{variant:"error",title:"Failed to Load Skill",children:(ee,he)=>{u();var te=m();p(()=>o(te,e(D))),t(ee,te)},$$slots:{default:!0}});var Ie=r(ze,2),me=s(Ie);Ee(me,{variant:"secondary",$$events:{click:()=>window.location.href="/library"},children:(ee,he)=>{u();var te=m("← Back to Library");t(ee,te)},$$slots:{default:!0}}),a(Ie),t(ie,fe)},ft=ie=>{var fe=U(),ze=O(fe);{var Ie=me=>{var ee=Xt(),he=s(ee),te=s(he);Ee(te,{variant:"ghost",size:"sm",$$events:{click:()=>window.location.href="/library"},children:(w,H)=>{u();var x=m("← Back to Library");t(w,x)},$$slots:{default:!0}});var Je=r(te,2),Le=s(Je),We=s(Le),mt=s(We,!0);a(We);var ht=r(We,2);{let w=le(()=>e(n).access==="PUBLIC"?"success":"warning");F(ht,{get variant(){return e(w)},size:"lg",children:(H,x)=>{u();var b=m();p(()=>o(b,e(n).access)),t(H,b)},$$slots:{default:!0}})}a(Le);var Ne=r(Le,2),kt=s(Ne,!0);a(Ne),a(Je),a(he);var Ue=r(he,2);Re(Ue,{variant:"bordered",padding:"lg",children:(w,H)=>{var x=Lt(),b=s(x),ae=r(s(b),2);F(ae,{variant:"default",size:"sm",children:(y,z)=>{u();var P=m();p(()=>o(P,e(n).id)),t(y,P)},$$slots:{default:!0}}),a(b);var J=r(b,2),Z=r(s(J),2);F(Z,{variant:"info",size:"sm",children:(y,z)=>{u();var P=m();p(()=>o(P,e(n).section)),t(y,P)},$$slots:{default:!0}}),a(J);var C=r(J,2),ve=r(s(C),2);F(ve,{variant:"info",size:"sm",children:(y,z)=>{u();var P=m();p(()=>o(P,e(n).category)),t(y,P)},$$slots:{default:!0}}),a(C);var $=r(C,2),W=r(s($),2);F(W,{variant:"accent",size:"sm",children:(y,z)=>{u();var P=m();p((M,j)=>o(P,`$${M??""} - $${j??""}`),[()=>e(n).estimatedCost.min.toFixed(3),()=>e(n).estimatedCost.max.toFixed(3)]),t(y,P)},$$slots:{default:!0}}),a($),a(x),t(w,x)},$$slots:{default:!0}});var Ve=r(Ue,2);{var gt=w=>{var H=Wt(),x=r(s(H),2);Ye(x,21,()=>e(n).tags,et,(b,ae)=>{F(b,{variant:"default",size:"sm",outline:!0,children:(J,Z)=>{u();var C=m();p(()=>o(C,e(ae))),t(J,C)},$$slots:{default:!0}})}),a(x),a(H),t(w,H)};k(Ve,w=>{e(n).tags.length>0&&w(gt)})}var Ze=r(Ve,2),Ke=s(Ze);Re(Ke,{variant:"bordered",padding:"lg",children:(w,H)=>{var x=Dt(),b=r(O(x),2);{var ae=l=>{var T=Mt();t(l,T)},J=l=>{var T=Rt();Ye(T,21,()=>Object.entries(e(n).inputs),et,(G,K)=>{var A=le(()=>Ct(e(K),2));let d=()=>e(A)[0],_=()=>e(A)[1];var Q=U(),Me=O(Q);{var ge=R=>{{let oe=le(()=>_().description||"");at(R,{get label(){return d()},get helperText(){return e(oe)},get required(){return _().required},fullWidth:!0,get value(){return e(I)[d()]},set value(re){e(I)[d()]=re}})}},je=R=>{var oe=U(),re=O(oe);{var Ae=X=>{{let ne=le(()=>_().description||"");at(X,{type:"number",get label(){return d()},get helperText(){return e(ne)},get required(){return _().required},fullWidth:!0,get value(){return e(I)[d()]},set value($e){e(I)[d()]=$e}})}},qe=X=>{var ne=U(),$e=O(ne);{var Ge=g=>{var i=Gt(),E=s(i),xe=s(E);Ce(xe);var we=r(xe),Y=r(we);{var be=N=>{var Pe=jt();t(N,Pe)};k(Y,N=>{_().required&&N(be)})}a(E);var ye=r(E,2);{var xt=N=>{var Pe=At(),bt=s(Pe,!0);a(Pe),p(()=>o(bt,_().description)),t(N,Pe)};k(ye,N=>{_().description&&N(xt)})}a(i),p(()=>o(we,` ${d()??""} `)),Qe(xe,()=>e(I)[d()],N=>e(I)[d()]=N),t(g,i)},h=g=>{var i=U(),E=O(i);{var xe=Y=>{{let be=le(()=>_().description||"Enter comma-separated values");st(Y,{get label(){return d()},get helperText(){return e(be)},get required(){return _().required},rows:3,fullWidth:!0,get value(){return e(I)[d()]},set value(ye){e(I)[d()]=ye}})}},we=Y=>{{let be=le(()=>_().description||"");st(Y,{get label(){return d()},get helperText(){return e(be)},get required(){return _().required},rows:5,fullWidth:!0,get value(){return e(I)[d()]},set value(ye){e(I)[d()]=ye}})}};k(E,Y=>{_().type==="array"?Y(xe):Y(we,!1)},!0)}t(g,i)};k($e,g=>{_().type==="boolean"?g(Ge):g(h,!1)},!0)}t(X,ne)};k(re,X=>{_().type==="number"?X(Ae):X(qe,!1)},!0)}t(R,oe)};k(Me,R=>{_().type==="string"?R(ge):R(je,!1)})}t(G,Q)}),a(T),t(l,T)};k(b,l=>{Object.keys(e(n).inputs).length===0?l(ae):l(J,!1)})}var Z=r(b,2),C=r(s(Z),2),ve=s(C),$=s(ve);Ce($),u(),a(ve),a(C);var W=r(C,2);Bt(W,{label:"Model",options:[{value:"claude-3.5-sonnet",label:"Claude 3.5 Sonnet"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"},{value:"gpt-4",label:"GPT-4"}],fullWidth:!0,get value(){return e(Te)},set value(l){v(Te,l,!0)}});var y=r(W,2),z=s(y),P=s(z);a(z);var M=r(z,2);Ce(M),a(y);var j=r(y,2),se=s(j),ke=s(se);a(se);var de=r(se,2);Ce(de),a(j),a(Z);var S=r(Z,2);Ee(S,{variant:"primary",size:"lg",fullWidth:!0,get loading(){return e(ue)},$$events:{click:ot},children:(l,T)=>{u();var G=m("Invoke Skill");t(l,G)},$$slots:{default:!0}}),p(()=>{o(P,`Temperature: ${e(pe)??""}`),o(ke,`Max Tokens: ${e(ce)??""}`)}),Qe($,()=>e(Oe),l=>v(Oe,l)),Xe(M,()=>e(pe),l=>v(pe,l)),Xe(de,()=>e(ce),l=>v(ce,l)),t(w,x)},$$slots:{default:!0}});var $t=r(Ke,2);Re($t,{variant:"bordered",padding:"lg",children:(w,H)=>{var x=Qt(),b=O(x),ae=r(s(b),2);{var J=$=>{Ee($,{variant:"ghost",size:"sm",$$events:{click:nt},children:(W,y)=>{u();var z=m("Clear");t(W,z)},$$slots:{default:!0}})};k(ae,$=>{(e(q)||e(V))&&$(J)})}a(b);var Z=r(b,2);{var C=$=>{De($,{variant:"error",title:"Error",children:(W,y)=>{u();var z=m();p(()=>o(z,e(D))),t(W,z)},$$slots:{default:!0}})},ve=$=>{var W=U(),y=O(W);{var z=M=>{var j=Nt(),se=s(j);{var ke=S=>{var l=Ht(),T=s(l),G=s(T,!0);a(T);var K=r(T,2),A=s(K);F(A,{variant:"accent",dot:!0,children:(d,_)=>{u();var Q=m("Streaming...");t(d,Q)},$$slots:{default:!0}}),a(K),a(l),p(()=>o(G,e(V))),t(S,l)},de=S=>{var l=Jt();u(2),t(S,l)};k(se,S=>{e(Se)?S(ke):S(de,!1)})}a(j),t(M,j)},P=M=>{var j=U(),se=O(j);{var ke=S=>{var l=Ut(),T=s(l),G=s(T),K=s(G,!0);a(G),a(T),a(l),p(()=>o(K,e(V))),t(S,l)},de=S=>{var l=U(),T=O(l);{var G=A=>{var d=Zt(),_=s(d),Q=s(_),Me=r(s(Q),2);F(Me,{variant:"default",size:"sm",children:(h,g)=>{u();var i=m();p(()=>o(i,e(q).sessionId)),t(h,i)},$$slots:{default:!0}}),a(Q);var ge=r(Q,2),je=r(s(ge),2);F(je,{variant:"info",size:"sm",children:(h,g)=>{u();var i=m();p(()=>o(i,e(q).metadata.model_used)),t(h,i)},$$slots:{default:!0}}),a(ge);var R=r(ge,2),oe=r(s(R),2);F(oe,{variant:"default",size:"sm",children:(h,g)=>{u();var i=m();p(()=>o(i,e(q).metadata.tokens_used)),t(h,i)},$$slots:{default:!0}}),a(R);var re=r(R,2),Ae=r(s(re),2);F(Ae,{variant:"accent",size:"sm",children:(h,g)=>{u();var i=m();p(E=>o(i,`$${E??""}`),[()=>e(q).metadata.cost.toFixed(4)]),t(h,i)},$$slots:{default:!0}}),a(re);var qe=r(re,2),X=r(s(qe),2);F(X,{variant:"default",size:"sm",children:(h,g)=>{u();var i=m();p(()=>o(i,`${e(q).metadata.latency_ms??""}ms`)),t(h,i)},$$slots:{default:!0}}),a(qe),a(_);var ne=r(_,2);{var $e=h=>{var g=Vt(),i=s(g),E=s(i,!0);a(i),a(g),p(()=>o(E,e(q).output)),t(h,g)},Ge=h=>{De(h,{variant:"error",title:"Execution Error",children:(g,i)=>{u();var E=m();p(()=>o(E,e(q).error)),t(g,E)},$$slots:{default:!0}})};k(ne,h=>{e(q).status==="success"?h($e):h(Ge,!1)})}a(d),t(A,d)},K=A=>{var d=Kt();t(A,d)};k(T,A=>{e(q)?A(G):A(K,!1)},!0)}t(S,l)};k(se,S=>{e(V)?S(ke):S(de,!1)},!0)}t(M,j)};k(y,M=>{e(ue)?M(z):M(P,!1)},!0)}t($,W)};k(Z,$=>{e(D)?$(C):$(ve,!1)})}t(w,x)},$$slots:{default:!0}}),a(Ze),a(ee),p(()=>{o(mt,e(n).name),o(kt,e(n).description)}),t(me,ee)};k(ze,me=>{e(n)&&me(Ie)},!0)}t(ie,fe)};k(_e,ie=>{e(D)&&!e(n)?ie(_t):ie(ft,!1)},!0)}t(c,L)};k(ut,c=>{e(Be)?c(pt):c(ct,!1)})}a(Fe),t(rt,Fe),zt(),dt()}export{na as component};
