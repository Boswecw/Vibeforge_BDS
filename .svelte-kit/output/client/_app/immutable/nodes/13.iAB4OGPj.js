import{p as lt,s as _,R as Oe,o as rt,b as Fe,g as e,f as C,i as J,w as m,h as v,j as it,c as o,e as r,m as s,q as b,v as f,r as a,H as n,x as p,k as Ie,d as pe,F as vt,G as ot,M as ct,L as nt}from"../chunks/CJ97sMGe.js";import{s as dt}from"../chunks/COsVEw7V.js";import"../chunks/CUflB2Gp.js";import{P as _e,B as K}from"../chunks/D8s3w_7f.js";import{I as ut}from"../chunks/BhbBKy91.js";import{S as X}from"../chunks/Bo2G-ODY.js";import{B as T}from"../chunks/DZ9aZlWI.js";import{A as gt}from"../chunks/BsnCgw2C.js";import{V as pt}from"../chunks/twdYWlXB.js";function _t(Z,ee=300){let c=null;const w=function(...W){c!==null&&clearTimeout(c),c=setTimeout(()=>{Z.apply(this,W),c=null},ee)};return w.cancel=()=>{c!==null&&(clearTimeout(c),c=null)},w}var mt=C('<div class="filters-section svelte-c8k2rg"><div class="filter-row svelte-c8k2rg"><!></div> <div class="filter-row svelte-c8k2rg"><!> <!> <!> <!></div> <div class="controls-row svelte-c8k2rg"><div class="sort-section svelte-c8k2rg"><!></div> <div class="view-section svelte-c8k2rg"><!> <!></div> <div class="result-count svelte-c8k2rg"><!></div></div></div>'),ft=C('<div class="loading-state svelte-c8k2rg"><div class="spinner svelte-c8k2rg"></div> <p>Loading skills...</p></div>'),kt=C('<div class="empty-state svelte-c8k2rg"><p class="empty-message svelte-c8k2rg">No skills found matching your filters.</p> <!></div>'),$t=C('<span class="tag-more svelte-c8k2rg"> </span>'),ht=C('<div class="skill-header svelte-c8k2rg"><h3 class="skill-name svelte-c8k2rg"> </h3> <!></div> <p class="skill-description svelte-c8k2rg"> </p> <div class="skill-meta svelte-c8k2rg"><div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Section:</span> <!></div> <div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Category:</span> <!></div></div> <div class="skill-tags svelte-c8k2rg"><!> <!></div> <div class="skill-footer svelte-c8k2rg"><div class="cost-info svelte-c8k2rg"><span class="cost-label svelte-c8k2rg">Est. Cost:</span> <!></div></div>',1),yt=C('<div><a class="skill-link svelte-c8k2rg"><!></a></div>'),bt=C('<div class="virtual-container svelte-c8k2rg"><!></div>'),xt=C('<div class="library-container svelte-c8k2rg"><div class="page-header svelte-c8k2rg"><div class="header-content svelte-c8k2rg"><h1 class="page-title svelte-c8k2rg">Skill Library</h1> <div class="stats-row svelte-c8k2rg"><div class="stat-item svelte-c8k2rg"><span class="stat-value svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Total</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value success svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Public</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value warning svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">BDS Only</span></div></div></div></div> <!> <div class="library-content svelte-c8k2rg"><!></div></div>');function zt(Z,ee){lt(ee,!0);let c=_(Oe([])),w=_(Oe([])),W=_(!0),te=_(null),R=_(""),M=_(""),I=_("all"),z=_("all"),D=_("all"),L=_("grid"),H=_("name");const ze=300,De=200;let He=b(()=>{const t=new Set(e(c).map(i=>i.section));return["all",...Array.from(t)]}),Ne=b(()=>{const t=new Set(e(c).map(i=>i.category));return["all",...Array.from(t)]}),V=b(()=>({total:e(c).length,public:e(c).filter(t=>t.access==="PUBLIC").length,bdsOnly:e(c).filter(t=>t.access==="BDS_ONLY").length,filtered:e(w).length})),Te=b(()=>e(He).map(t=>({value:t,label:t==="all"?"All Sections":t}))),We=b(()=>e(Ne).map(t=>({value:t,label:t==="all"?"All Categories":t})));const Me=[{value:"all",label:"All Access"},{value:"PUBLIC",label:"Public"},{value:"BDS_ONLY",label:"BDS Only"}],Ue=[{value:"name",label:"Name"},{value:"section",label:"Section"},{value:"category",label:"Category"}];rt(async()=>{try{o(c,await dt.getAllSkills(),!0),me(),o(W,!1)}catch(t){o(te,t instanceof Error?t.message:"Failed to load skills",!0),o(W,!1)}});const qe=_t(t=>{o(M,t,!0)},300);function me(){let t=[...e(c)];if(e(M).trim()){const i=e(M).toLowerCase();t=t.filter(d=>d.name.toLowerCase().includes(i)||d.description.toLowerCase().includes(i)||d.tags.some(A=>A.toLowerCase().includes(i)))}e(I)!=="all"&&(t=t.filter(i=>i.section===e(I))),e(z)!=="all"&&(t=t.filter(i=>i.category===e(z))),e(D)!=="all"&&(t=t.filter(i=>i.access===e(D))),t.sort((i,d)=>e(H)==="name"?i.name.localeCompare(d.name):e(H)==="section"?i.section.localeCompare(d.section):e(H)==="category"?i.category.localeCompare(d.category):0),o(w,t,!0)}Fe(()=>{e(M),e(I),e(z),e(D),e(H),me()}),Fe(()=>{qe(e(R))});function fe(){o(R,""),o(M,""),o(I,"all"),o(z,"all"),o(D,"all")}var se=xt(),ae=s(se),ke=s(ae),$e=r(s(ke),2),le=s($e),he=s(le),Ee=s(he,!0);a(he),n(2),a(le);var re=r(le,2),ye=s(re),Ge=s(ye,!0);a(ye),n(2),a(re);var be=r(re,2),xe=s(be),Qe=s(xe,!0);a(xe),n(2),a(be),a($e),a(ke),a(ae);var Se=r(ae,2);_e(Se,{variant:"bordered",padding:"lg",children:(t,i)=>{var d=mt(),A=s(d),ie=s(A);ut(ie,{type:"search",placeholder:"Search skills by name, description, or tags...",fullWidth:!0,get value(){return e(R)},set value(l){o(R,l,!0)}}),a(A);var k=r(A,2),B=s(k);X(B,{get options(){return e(Te)},placeholder:"All Sections",fullWidth:!0,get value(){return e(I)},set value(l){o(I,l,!0)}});var U=r(B,2);X(U,{get options(){return e(We)},placeholder:"All Categories",fullWidth:!0,get value(){return e(z)},set value(l){o(z,l,!0)}});var O=r(U,2);X(O,{get options(){return Me},placeholder:"All Access",fullWidth:!0,get value(){return e(D)},set value(l){o(D,l,!0)}});var ve=r(O,2);K(ve,{variant:"secondary",$$events:{click:fe},children:(l,$)=>{n();var h=f("Clear");v(l,h)},$$slots:{default:!0}}),a(k);var x=r(k,2),S=s(x),Y=s(S);X(Y,{get options(){return Ue},get value(){return e(H)},set value(l){o(H,l,!0)}}),a(S);var P=r(S,2),N=s(P);{let l=b(()=>e(L)==="grid"?"primary":"ghost");K(N,{get variant(){return e(l)},size:"sm",$$events:{click:()=>o(L,"grid")},children:($,h)=>{n();var G=f("Grid");v($,G)},$$slots:{default:!0}})}var q=r(N,2);{let l=b(()=>e(L)==="list"?"primary":"ghost");K(q,{get variant(){return e(l)},size:"sm",$$events:{click:()=>o(L,"list")},children:($,h)=>{n();var G=f("List");v($,G)},$$slots:{default:!0}})}a(P);var E=r(P,2),F=s(E);T(F,{variant:"default",children:(l,$)=>{n();var h=f();m(()=>p(h,`${e(V).filtered??""} skills`)),v(l,h)},$$slots:{default:!0}}),a(E),a(x),a(d),v(t,d)},$$slots:{default:!0}});var Pe=r(Se,2),Re=s(Pe);{var Ve=t=>{var i=ft();v(t,i)},Ye=t=>{var i=Ie(),d=pe(i);{var A=k=>{gt(k,{variant:"error",title:"Failed to Load Skills",children:(B,U)=>{n();var O=f();m(()=>p(O,e(te))),v(B,O)},$$slots:{default:!0}})},ie=k=>{var B=Ie(),U=pe(B);{var O=x=>{_e(x,{variant:"elevated",padding:"lg",children:(S,Y)=>{var P=kt(),N=r(s(P),2);K(N,{variant:"primary",$$events:{click:fe},children:(q,E)=>{n();var F=f("Clear Filters");v(q,F)},$$slots:{default:!0}}),a(P),v(S,P)},$$slots:{default:!0}})},ve=x=>{var S=bt(),Y=s(S);{const P=(E,F)=>{let l=()=>F==null?void 0:F().item;var $=yt(),h=s($),G=s(h);_e(G,{variant:"bordered",padding:"lg",children:(je,St)=>{var Ce=ht(),oe=pe(Ce),ce=s(oe),Je=s(ce,!0);a(ce);var Ke=r(ce,2);{let u=b(()=>l().access==="PUBLIC"?"success":"warning");T(Ke,{get variant(){return e(u)},size:"sm",children:(y,g)=>{n();var Q=f();m(()=>p(Q,l().access)),v(y,Q)},$$slots:{default:!0}})}a(oe);var ne=r(oe,2),Xe=s(ne,!0);a(ne);var de=r(ne,2),ue=s(de),Ze=r(s(ue),2);T(Ze,{variant:"default",size:"sm",children:(u,y)=>{n();var g=f();m(()=>p(g,l().section)),v(u,g)},$$slots:{default:!0}}),a(ue);var we=r(ue,2),et=r(s(we),2);T(et,{variant:"default",size:"sm",children:(u,y)=>{n();var g=f();m(()=>p(g,l().category)),v(u,g)},$$slots:{default:!0}}),a(we),a(de);var ge=r(de,2),Le=s(ge);vt(Le,17,()=>l().tags.slice(0,4),ot,(u,y)=>{T(u,{variant:"info",size:"sm",outline:!0,children:(g,Q)=>{n();var j=f();m(()=>p(j,e(y))),v(g,j)},$$slots:{default:!0}})});var tt=r(Le,2);{var st=u=>{var y=$t(),g=s(y);a(y),m(()=>p(g,`+${l().tags.length-4}`)),v(u,y)};J(tt,u=>{l().tags.length>4&&u(st)})}a(ge);var Ae=r(ge,2),Be=s(Ae),at=r(s(Be),2);T(at,{variant:"accent",size:"sm",children:(u,y)=>{n();var g=f();m((Q,j)=>p(g,`$${Q??""} - $${j??""}`),[()=>l().estimatedCost.min.toFixed(3),()=>l().estimatedCost.max.toFixed(3)]),v(u,g)},$$slots:{default:!0}}),a(Be),a(Ae),m(()=>{p(Je,l().name),p(Xe,l().description)}),v(je,Ce)},$$slots:{default:!0}}),a(h),a($),m(()=>{ct($,1,`skill-wrapper ${e(L)??""}`,"svelte-c8k2rg"),nt(h,"href",`/library/${l().id??""}`)}),v(E,$)};let N=b(()=>e(L)==="grid"?ze:De),q=b(()=>e(L)==="grid"?24:16);pt(Y,{get items(){return e(w)},get itemHeight(){return e(N)},height:"calc(100vh - 400px)",get gap(){return e(q)},children:P,$$slots:{default:!0}})}a(S),v(x,S)};J(U,x=>{e(w).length===0?x(O):x(ve,!1)},!0)}v(k,B)};J(d,k=>{e(te)?k(A):k(ie,!1)},!0)}v(t,i)};J(Re,t=>{e(W)?t(Ve):t(Ye,!1)})}a(Pe),a(se),m(()=>{p(Ee,e(V).total),p(Ge,e(V).public),p(Qe,e(V).bdsOnly)}),v(Z,se),it()}export{zt as component};
