import{d as _t,f as g,a as d,s as v,c as Me}from"../chunks/CAK2u2Ng.js";import{ae as dt,an as u,W as Re,al as ut,ao as gt,k as e,ah as kt,X as o,af as s,ai as a,ag as x,aj as t,ak as ue,ap as Ue}from"../chunks/DvJ0wH-P.js";import{i as q}from"../chunks/DjilkBmk.js";import{e as G,i as ge}from"../chunks/BoH0SDAF.js";import{r as ft,s as mt}from"../chunks/w-4I74Yw.js";import{s as I}from"../chunks/Ck0dqJlc.js";import{b as bt}from"../chunks/BVWqoBiK.js";import{b as Q}from"../chunks/cOC8RnKw.js";import{s as yt}from"../chunks/BxCIaFLT.js";import"../chunks/l0sNRNKZ.js";import"../chunks/CoVrU6Ml.js";import{E as ht,a as xt}from"../chunks/BBIMj1gM.js";var Ct=g("<option> </option>"),St=g("<option> </option>"),wt=g('<div class="loading-state svelte-c8k2rg"><div class="spinner svelte-c8k2rg"></div> <p>Loading skills...</p></div>'),Lt=g('<div class="empty-state svelte-c8k2rg"><p>No skills found matching your filters.</p> <button class="btn-clear svelte-c8k2rg">Clear Filters</button></div>'),$t=g('<span class="tag svelte-c8k2rg"> </span>'),At=g('<span class="tag-more svelte-c8k2rg"> </span>'),Bt=g('<a><div class="skill-header svelte-c8k2rg"><h3 class="skill-name svelte-c8k2rg"> </h3> <span> </span></div> <p class="skill-description svelte-c8k2rg"> </p> <div class="skill-meta svelte-c8k2rg"><span class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Section:</span> </span> <span class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Category:</span> </span></div> <div class="skill-tags svelte-c8k2rg"><!> <!></div> <div class="skill-cost svelte-c8k2rg"><span class="cost-label svelte-c8k2rg">Est. Cost:</span> <span class="cost-value svelte-c8k2rg"> </span></div></a>'),Ft=g("<div></div>"),Dt=g('<div class="library-container svelte-c8k2rg"><div class="library-header svelte-c8k2rg"><div class="header-top svelte-c8k2rg"><h1 class="svelte-c8k2rg">Skill Library</h1> <div class="stats svelte-c8k2rg"><span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">Total:</span> <span class="stat-value svelte-c8k2rg"> </span></span> <span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">Public:</span> <span class="stat-value public svelte-c8k2rg"> </span></span> <span class="stat svelte-c8k2rg"><span class="stat-label svelte-c8k2rg">BDS Only:</span> <span class="stat-value bds svelte-c8k2rg"> </span></span></div></div> <div class="filters svelte-c8k2rg"><div class="filter-row svelte-c8k2rg"><input type="text" placeholder="Search skills..." class="search-input svelte-c8k2rg"/> <select class="filter-select svelte-c8k2rg"><option>All Sections</option><!></select> <select class="filter-select svelte-c8k2rg"><option>All Categories</option><!></select> <select class="filter-select svelte-c8k2rg"><option>All Access</option><option>Public</option><option>BDS Only</option></select> <button class="btn-clear svelte-c8k2rg">Clear Filters</button></div> <div class="controls-row svelte-c8k2rg"><div class="sort-controls svelte-c8k2rg"><label for="sort-select" class="svelte-c8k2rg">Sort by:</label> <select id="sort-select" class="sort-select svelte-c8k2rg"><option>Name</option><option>Section</option><option>Category</option></select></div> <div class="view-controls svelte-c8k2rg"><button>Grid</button> <button>List</button></div> <div class="result-count svelte-c8k2rg"> </div></div></div></div> <div class="library-content svelte-c8k2rg"><!></div></div>');function Qt(Ye,je){dt(je,!0);let f=u(Re([])),M=u(Re([])),T=u(!0),R=u(null),C=u(""),S=u("all"),w=u("all"),L=u("all"),$=u("grid"),A=u("name"),qe=ue(()=>{const l=new Set(e(f).map(i=>i.section));return["all",...Array.from(l)]}),Ge=ue(()=>{const l=new Set(e(f).map(i=>i.category));return["all",...Array.from(l)]}),D=ue(()=>({total:e(f).length,public:e(f).filter(l=>l.access==="PUBLIC").length,bdsOnly:e(f).filter(l=>l.access==="BDS_ONLY").length,filtered:e(M).length}));ut(async()=>{try{o(f,await yt.getAllSkills(),!0),ke(),o(T,!1)}catch(l){o(R,l instanceof Error?l.message:"Failed to load skills",!0),o(T,!1)}});function ke(){let l=[...e(f)];if(e(C).trim()){const i=e(C).toLowerCase();l=l.filter(_=>_.name.toLowerCase().includes(i)||_.description.toLowerCase().includes(i)||_.tags.some(O=>O.toLowerCase().includes(i)))}e(S)!=="all"&&(l=l.filter(i=>i.section===e(S))),e(w)!=="all"&&(l=l.filter(i=>i.category===e(w))),e(L)!=="all"&&(l=l.filter(i=>i.access===e(L))),l.sort((i,_)=>e(A)==="name"?i.name.localeCompare(_.name):e(A)==="section"?i.section.localeCompare(_.section):e(A)==="category"?i.category.localeCompare(_.category):0),o(M,l,!0)}gt(()=>{e(C),e(S),e(w),e(L),e(A),ke()});function fe(){o(C,""),o(S,"all"),o(w,"all"),o(L,"all")}ht(Ye,{children:(l,i)=>{var _=Dt(),O=a(_),W=a(O),me=s(a(W),2),X=a(me),be=s(a(X),2),Qe=a(be,!0);t(be),t(X);var z=s(X,2),ye=s(a(z),2),Te=a(ye,!0);t(ye),t(z);var he=s(z,2),xe=s(a(he),2),We=a(xe,!0);t(xe),t(he),t(me),t(W);var Ce=s(W,2),H=a(Ce),J=a(H);ft(J);var U=s(J,2),K=a(U);K.value=K.__value="all";var Xe=s(K);G(Xe,17,()=>e(qe).slice(1),ge,(r,n)=>{var c=Ct(),E=a(c,!0);t(c);var m={};x(()=>{v(E,e(n)),m!==(m=e(n))&&(c.value=(c.__value=e(n))??"")}),d(r,c)}),t(U);var Y=s(U,2),V=a(Y);V.value=V.__value="all";var ze=s(V);G(ze,17,()=>e(Ge).slice(1),ge,(r,n)=>{var c=St(),E=a(c,!0);t(c);var m={};x(()=>{v(E,e(n)),m!==(m=e(n))&&(c.value=(c.__value=e(n))??"")}),d(r,c)}),t(Y);var j=s(Y,2),Z=a(j);Z.value=Z.__value="all";var ee=s(Z);ee.value=ee.__value="PUBLIC";var Se=s(ee);Se.value=Se.__value="BDS_ONLY",t(j);var He=s(j,2);He.__click=fe,t(H);var we=s(H,2),te=a(we),ae=s(a(te),2),se=a(ae);se.value=se.__value="name";var le=s(se);le.value=le.__value="section";var Le=s(le);Le.value=Le.__value="category",t(ae),t(te);var re=s(te,2),ie=a(re);ie.__click=()=>o($,"grid");let $e;var Ae=s(ie,2);Ae.__click=()=>o($,"list");let Be;t(re);var Fe=s(re,2),Je=a(Fe);t(Fe),t(we),t(Ce),t(O);var De=s(O,2),Ke=a(De);{var Ve=r=>{var n=wt();d(r,n)},Ze=r=>{var n=Me(),c=Ue(n);{var E=B=>{xt(B,{get error(){return e(R)},title:"Failed to Load Skills",onRetry:()=>window.location.reload(),onDismiss:()=>o(R,null)})},m=B=>{var Oe=Me(),et=Ue(Oe);{var tt=F=>{var k=Lt(),P=s(a(k),2);P.__click=fe,t(k),d(F,k)},at=F=>{var k=Ft();G(k,21,()=>e(M),P=>P.id,(P,p)=>{var N=Bt(),oe=a(N),ve=a(oe),st=a(ve,!0);t(ve);var ce=s(ve,2),lt=a(ce,!0);t(ce),t(oe);var ne=s(oe,2),rt=a(ne,!0);t(ne);var pe=s(ne,2),_e=a(pe),it=s(a(_e));t(_e);var Ee=s(_e,2),ot=s(a(Ee));t(Ee),t(pe);var de=s(pe,2),Pe=a(de);G(Pe,17,()=>e(p).tags.slice(0,3),ge,(b,y)=>{var h=$t(),pt=a(h,!0);t(h),x(()=>v(pt,e(y))),d(b,h)});var vt=s(Pe,2);{var ct=b=>{var y=At(),h=a(y);t(y),x(()=>v(h,`+${e(p).tags.length-3}`)),d(b,y)};q(vt,b=>{e(p).tags.length>3&&b(ct)})}t(de);var Ne=s(de,2),Ie=s(a(Ne),2),nt=a(Ie);t(Ie),t(Ne),t(N),x((b,y,h)=>{mt(N,"href",`/library/${e(p).id??""}`),I(N,1,`skill-card ${e($)??""}`,"svelte-c8k2rg"),v(st,e(p).name),I(ce,1,`skill-access ${b??""}`,"svelte-c8k2rg"),v(lt,e(p).access),v(rt,e(p).description),v(it,` ${e(p).section??""}`),v(ot,` ${e(p).category??""}`),v(nt,`$${y??""} - $${h??""}`)},[()=>e(p).access.toLowerCase(),()=>e(p).estimatedCost.min.toFixed(3),()=>e(p).estimatedCost.max.toFixed(3)]),d(P,N)}),t(k),x(()=>I(k,1,`skills-${e($)??""}`,"svelte-c8k2rg")),d(F,k)};q(et,F=>{e(M).length===0?F(tt):F(at,!1)},!0)}d(B,Oe)};q(c,B=>{e(R)?B(E):B(m,!1)},!0)}d(r,n)};q(Ke,r=>{e(T)?r(Ve):r(Ze,!1)})}t(De),t(_),x(()=>{v(Qe,e(D).total),v(Te,e(D).public),v(We,e(D).bdsOnly),$e=I(ie,1,"btn-view svelte-c8k2rg",null,$e,{active:e($)==="grid"}),Be=I(Ae,1,"btn-view svelte-c8k2rg",null,Be,{active:e($)==="list"}),v(Je,`${e(D).filtered??""} skill${e(D).filtered!==1?"s":""}`)}),bt(J,()=>e(C),r=>o(C,r)),Q(U,()=>e(S),r=>o(S,r)),Q(Y,()=>e(w),r=>o(w,r)),Q(j,()=>e(L),r=>o(L,r)),Q(ae,()=>e(A),r=>o(A,r)),d(l,_)},$$slots:{default:!0}}),kt()}_t(["click"]);export{Qt as component};
