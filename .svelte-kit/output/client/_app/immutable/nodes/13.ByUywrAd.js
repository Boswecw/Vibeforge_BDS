import{f as C,a as o,t as m,c as Oe}from"../chunks/CHRq6SN2.js";import{o as lt}from"../chunks/afJwds1U.js";import{p as rt,b as f,a9 as Ie,an as ze,g as e,t as _,a as it,s as v,d as r,c as s,u as b,r as a,n,f as pe}from"../chunks/LjYFlPRR.js";import{i as J,s as p}from"../chunks/CedpH895.js";import{e as ot,i as vt}from"../chunks/xbjVpMZg.js";import{P as me,B as K,s as ct}from"../chunks/B4R2PCZ7.js";import{s as nt}from"../chunks/jEP8XUUD.js";import{s as dt}from"../chunks/C4bto54Z.js";import"../chunks/C5SEkKG1.js";import"../chunks/DT77gqAl.js";import"../chunks/CIhCbREJ.js";import{I as ut}from"../chunks/DaRQYglL.js";import{S as X}from"../chunks/CEI1VR2Q.js";import{B as W}from"../chunks/BKaTCBmy.js";import{A as gt}from"../chunks/DVZU4egd.js";import{V as pt}from"../chunks/NvYsKEbS.js";function mt(Z,ee=300){let c=null;const w=function(...H){c!==null&&clearTimeout(c),c=setTimeout(()=>{Z.apply(this,H),c=null},ee)};return w.cancel=()=>{c!==null&&(clearTimeout(c),c=null)},w}var ft=C('<div class="filters-section svelte-c8k2rg"><div class="filter-row svelte-c8k2rg"><!></div> <div class="filter-row svelte-c8k2rg"><!> <!> <!> <!></div> <div class="controls-row svelte-c8k2rg"><div class="sort-section svelte-c8k2rg"><!></div> <div class="view-section svelte-c8k2rg"><!> <!></div> <div class="result-count svelte-c8k2rg"><!></div></div></div>'),_t=C('<div class="loading-state svelte-c8k2rg"><div class="spinner svelte-c8k2rg"></div> <p>Loading skills...</p></div>'),kt=C('<div class="empty-state svelte-c8k2rg"><p class="empty-message svelte-c8k2rg">No skills found matching your filters.</p> <!></div>'),$t=C('<span class="tag-more svelte-c8k2rg"> </span>'),ht=C('<div class="skill-header svelte-c8k2rg"><h3 class="skill-name svelte-c8k2rg"> </h3> <!></div> <p class="skill-description svelte-c8k2rg"> </p> <div class="skill-meta svelte-c8k2rg"><div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Section:</span> <!></div> <div class="meta-item svelte-c8k2rg"><span class="meta-label svelte-c8k2rg">Category:</span> <!></div></div> <div class="skill-tags svelte-c8k2rg"><!> <!></div> <div class="skill-footer svelte-c8k2rg"><div class="cost-info svelte-c8k2rg"><span class="cost-label svelte-c8k2rg">Est. Cost:</span> <!></div></div>',1),yt=C('<div><a class="skill-link svelte-c8k2rg"><!></a></div>'),bt=C('<div class="virtual-container svelte-c8k2rg"><!></div>'),xt=C('<div class="library-container svelte-c8k2rg"><div class="page-header svelte-c8k2rg"><div class="header-content svelte-c8k2rg"><h1 class="page-title svelte-c8k2rg">Skill Library</h1> <div class="stats-row svelte-c8k2rg"><div class="stat-item svelte-c8k2rg"><span class="stat-value svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Total</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value success svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">Public</span></div> <div class="stat-item svelte-c8k2rg"><span class="stat-value warning svelte-c8k2rg"> </span> <span class="stat-label svelte-c8k2rg">BDS Only</span></div></div></div></div> <!> <div class="library-content svelte-c8k2rg"><!></div></div>');function Et(Z,ee){rt(ee,!0);let c=f(Ie([])),w=f(Ie([])),H=f(!0),te=f(null),q=f(""),U=f(""),z=f("all"),F=f("all"),D=f("all"),A=f("grid"),N=f("name");const Fe=300,De=200;let Ne=b(()=>{const t=new Set(e(c).map(i=>i.section));return["all",...Array.from(t)]}),Te=b(()=>{const t=new Set(e(c).map(i=>i.category));return["all",...Array.from(t)]}),G=b(()=>({total:e(c).length,public:e(c).filter(t=>t.access==="PUBLIC").length,bdsOnly:e(c).filter(t=>t.access==="BDS_ONLY").length,filtered:e(w).length})),We=b(()=>e(Ne).map(t=>({value:t,label:t==="all"?"All Sections":t}))),He=b(()=>e(Te).map(t=>({value:t,label:t==="all"?"All Categories":t})));const Ue=[{value:"all",label:"All Access"},{value:"PUBLIC",label:"Public"},{value:"BDS_ONLY",label:"BDS Only"}],Ee=[{value:"name",label:"Name"},{value:"section",label:"Section"},{value:"category",label:"Category"}];lt(async()=>{try{v(c,await dt.getAllSkills(),!0),fe(),v(H,!1)}catch(t){v(te,t instanceof Error?t.message:"Failed to load skills",!0),v(H,!1)}});const Me=mt(t=>{v(U,t,!0)},300);function fe(){let t=[...e(c)];if(e(U).trim()){const i=e(U).toLowerCase();t=t.filter(d=>d.name.toLowerCase().includes(i)||d.description.toLowerCase().includes(i)||d.tags.some(L=>L.toLowerCase().includes(i)))}e(z)!=="all"&&(t=t.filter(i=>i.section===e(z))),e(F)!=="all"&&(t=t.filter(i=>i.category===e(F))),e(D)!=="all"&&(t=t.filter(i=>i.access===e(D))),t.sort((i,d)=>e(N)==="name"?i.name.localeCompare(d.name):e(N)==="section"?i.section.localeCompare(d.section):e(N)==="category"?i.category.localeCompare(d.category):0),v(w,t,!0)}ze(()=>{e(U),e(z),e(F),e(D),e(N),fe()}),ze(()=>{Me(e(q))});function _e(){v(q,""),v(U,""),v(z,"all"),v(F,"all"),v(D,"all")}var se=xt(),ae=s(se),ke=s(ae),$e=r(s(ke),2),le=s($e),he=s(le),Qe=s(he,!0);a(he),n(2),a(le);var re=r(le,2),ye=s(re),Ve=s(ye,!0);a(ye),n(2),a(re);var be=r(re,2),xe=s(be),Ye=s(xe,!0);a(xe),n(2),a(be),a($e),a(ke),a(ae);var Se=r(ae,2);me(Se,{variant:"bordered",padding:"lg",children:(t,i)=>{var d=ft(),L=s(d),ie=s(L);ut(ie,{type:"search",placeholder:"Search skills by name, description, or tags...",fullWidth:!0,get value(){return e(q)},set value(l){v(q,l,!0)}}),a(L);var k=r(L,2),B=s(k);X(B,{get options(){return e(We)},placeholder:"All Sections",fullWidth:!0,get value(){return e(z)},set value(l){v(z,l,!0)}});var E=r(B,2);X(E,{get options(){return e(He)},placeholder:"All Categories",fullWidth:!0,get value(){return e(F)},set value(l){v(F,l,!0)}});var O=r(E,2);X(O,{get options(){return Ue},placeholder:"All Access",fullWidth:!0,get value(){return e(D)},set value(l){v(D,l,!0)}});var oe=r(O,2);K(oe,{variant:"secondary",$$events:{click:_e},children:(l,$)=>{n();var h=m("Clear");o(l,h)},$$slots:{default:!0}}),a(k);var x=r(k,2),S=s(x),R=s(S);X(R,{get options(){return Ee},get value(){return e(N)},set value(l){v(N,l,!0)}}),a(S);var P=r(S,2),T=s(P);{let l=b(()=>e(A)==="grid"?"primary":"ghost");K(T,{get variant(){return e(l)},size:"sm",$$events:{click:()=>v(A,"grid")},children:($,h)=>{n();var V=m("Grid");o($,V)},$$slots:{default:!0}})}var M=r(T,2);{let l=b(()=>e(A)==="list"?"primary":"ghost");K(M,{get variant(){return e(l)},size:"sm",$$events:{click:()=>v(A,"list")},children:($,h)=>{n();var V=m("List");o($,V)},$$slots:{default:!0}})}a(P);var Q=r(P,2),I=s(Q);W(I,{variant:"default",children:(l,$)=>{n();var h=m();_(()=>p(h,`${e(G).filtered??""} skills`)),o(l,h)},$$slots:{default:!0}}),a(Q),a(x),a(d),o(t,d)},$$slots:{default:!0}});var Pe=r(Se,2),qe=s(Pe);{var Ge=t=>{var i=_t();o(t,i)},Re=t=>{var i=Oe(),d=pe(i);{var L=k=>{gt(k,{variant:"error",title:"Failed to Load Skills",children:(B,E)=>{n();var O=m();_(()=>p(O,e(te))),o(B,O)},$$slots:{default:!0}})},ie=k=>{var B=Oe(),E=pe(B);{var O=x=>{me(x,{variant:"elevated",padding:"lg",children:(S,R)=>{var P=kt(),T=r(s(P),2);K(T,{variant:"primary",$$events:{click:_e},children:(M,Q)=>{n();var I=m("Clear Filters");o(M,I)},$$slots:{default:!0}}),a(P),o(S,P)},$$slots:{default:!0}})},oe=x=>{var S=bt(),R=s(S);{const P=(Q,I)=>{let l=()=>I==null?void 0:I().item;var $=yt(),h=s($),V=s(h);me(V,{variant:"bordered",padding:"lg",children:(je,St)=>{var Ce=ht(),ve=pe(Ce),ce=s(ve),Je=s(ce,!0);a(ce);var Ke=r(ce,2);{let u=b(()=>l().access==="PUBLIC"?"success":"warning");W(Ke,{get variant(){return e(u)},size:"sm",children:(y,g)=>{n();var Y=m();_(()=>p(Y,l().access)),o(y,Y)},$$slots:{default:!0}})}a(ve);var ne=r(ve,2),Xe=s(ne,!0);a(ne);var de=r(ne,2),ue=s(de),Ze=r(s(ue),2);W(Ze,{variant:"default",size:"sm",children:(u,y)=>{n();var g=m();_(()=>p(g,l().section)),o(u,g)},$$slots:{default:!0}}),a(ue);var we=r(ue,2),et=r(s(we),2);W(et,{variant:"default",size:"sm",children:(u,y)=>{n();var g=m();_(()=>p(g,l().category)),o(u,g)},$$slots:{default:!0}}),a(we),a(de);var ge=r(de,2),Ae=s(ge);ot(Ae,17,()=>l().tags.slice(0,4),vt,(u,y)=>{W(u,{variant:"info",size:"sm",outline:!0,children:(g,Y)=>{n();var j=m();_(()=>p(j,e(y))),o(g,j)},$$slots:{default:!0}})});var tt=r(Ae,2);{var st=u=>{var y=$t(),g=s(y);a(y),_(()=>p(g,`+${l().tags.length-4}`)),o(u,y)};J(tt,u=>{l().tags.length>4&&u(st)})}a(ge);var Le=r(ge,2),Be=s(Le),at=r(s(Be),2);W(at,{variant:"accent",size:"sm",children:(u,y)=>{n();var g=m();_((Y,j)=>p(g,`$${Y??""} - $${j??""}`),[()=>l().estimatedCost.min.toFixed(3),()=>l().estimatedCost.max.toFixed(3)]),o(u,g)},$$slots:{default:!0}}),a(Be),a(Le),_(()=>{p(Je,l().name),p(Xe,l().description)}),o(je,Ce)},$$slots:{default:!0}}),a(h),a($),_(()=>{nt($,1,`skill-wrapper ${e(A)??""}`,"svelte-c8k2rg"),ct(h,"href",`/library/${l().id??""}`)}),o(Q,$)};let T=b(()=>e(A)==="grid"?Fe:De),M=b(()=>e(A)==="grid"?24:16);pt(R,{get items(){return e(w)},get itemHeight(){return e(T)},height:"calc(100vh - 400px)",get gap(){return e(M)},children:P,$$slots:{default:!0}})}a(S),o(x,S)};J(E,x=>{e(w).length===0?x(O):x(oe,!1)},!0)}o(k,B)};J(d,k=>{e(te)?k(L):k(ie,!1)},!0)}o(t,i)};J(qe,t=>{e(H)?t(Ge):t(Re,!1)})}a(Pe),a(se),_(()=>{p(Qe,e(G).total),p(Ve,e(G).public),p(Ye,e(G).bdsOnly)}),o(Z,se),it()}export{Et as component};
