import{T as He,p as Ve,s as C,R as ze,o as Ye,f as w,w as q,h as v,j as Ge,e as r,m as s,d as ve,c as i,v as R,g as e,i as H,k as Ke,r as t,H as $,q as V,F as be,x as h,M as Le}from"../chunks/DkYuCCRR.js";import"../chunks/ZXpR-Cq1.js";import{P as oe,B as Y}from"../chunks/NBWhFnqU.js";import{I as xe}from"../chunks/DJ6tW-_S.js";import{S as Qe}from"../chunks/CzJ_pneL.js";import{B as ye}from"../chunks/BZBw9RiU.js";import{A as Ue}from"../chunks/B_6VVtGD.js";import{s as Xe}from"../chunks/v9ZTRfye.js";var Ze=w(`The visual workflow builder is under development. You can create and manage workflows by
		chaining multiple skills together. This feature will support: <ul><li>Drag-and-drop workflow building</li> <li>Conditional branching and loops</li> <li>Data passing between skills</li> <li>Workflow templates and sharing</li> <li>Execution scheduling and monitoring</li></ul>`,1),et=w('<div class="create-workflow-form svelte-1k5z4u1"><!> <!> <div class="form-actions svelte-1k5z4u1"><!> <!></div></div>'),tt=w('<div class="empty-state svelte-1k5z4u1"><p>No workflows yet. Create your first workflow to get started.</p></div>'),st=w('<div role="button" tabindex="0"><div class="workflow-info svelte-1k5z4u1"><div class="workflow-name svelte-1k5z4u1"> </div> <div class="workflow-description svelte-1k5z4u1"> </div> <div class="workflow-meta svelte-1k5z4u1"><!> <span class="workflow-steps svelte-1k5z4u1"> </span></div></div> <!></div>'),at=w('<div class="workflows-list svelte-1k5z4u1"></div>'),rt=w('<div class="section-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1">My Workflows</h2> <!></div> <!> <!>',1),lt=w('<div class="empty-state svelte-1k5z4u1"><p>No steps added yet. Add skills below to build your workflow.</p></div>'),it=w('<div class="step-connector svelte-1k5z4u1">â†“</div>'),vt=w('<div class="step-card svelte-1k5z4u1"><div class="step-number svelte-1k5z4u1"> </div> <div class="step-content svelte-1k5z4u1"><div class="step-name svelte-1k5z4u1"> </div> <code class="step-id svelte-1k5z4u1"> </code></div> <!></div> <!>',1),ot=w('<div class="steps-list svelte-1k5z4u1"></div>'),dt=w('<div class="workflow-builder svelte-1k5z4u1"><div class="builder-header svelte-1k5z4u1"><h2 class="svelte-1k5z4u1"> </h2> <!></div> <p class="builder-description svelte-1k5z4u1"> </p> <div class="steps-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Workflow Steps</h3> <!></div> <div class="add-step-section svelte-1k5z4u1"><h3 class="svelte-1k5z4u1">Add Step</h3> <div class="add-step-form"><!></div></div></div>'),nt=w('<div class="no-selection svelte-1k5z4u1"><p>Select a workflow from the list to view and edit its steps.</p></div>'),ut=w('<div class="workflows-container svelte-1k5z4u1"><div class="page-header svelte-1k5z4u1"><div class="header-content svelte-1k5z4u1"><h1 class="page-title svelte-1k5z4u1">Skill Workflows</h1> <p class="page-description svelte-1k5z4u1">Build multi-step workflows by chaining skills together for complex automation</p></div> <div class="stats-row svelte-1k5z4u1"><div class="stat-item svelte-1k5z4u1"><span class="stat-value svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Total</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value default svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Draft</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value success svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Active</span></div> <div class="stat-item svelte-1k5z4u1"><span class="stat-value warning svelte-1k5z4u1"> </span> <span class="stat-label svelte-1k5z4u1">Archived</span></div></div></div> <!> <div class="content-grid svelte-1k5z4u1"><!> <!></div></div>');function $t(We,Se){Ve(Se,!0);let o=C(ze([])),Z=C(ze([])),de=C(!0),n=C(null),E=C(!1),B=C(""),G=C("");Ye(async()=>{try{i(Z,await Xe.getAllSkills(),!0),Pe(),i(de,!1)}catch(a){console.error("Failed to load data:",a),i(de,!1)}});function Pe(){const a=localStorage.getItem("workflows");if(a)try{const k=JSON.parse(a);i(o,k.map(l=>({...l,createdAt:new Date(l.createdAt),lastRun:l.lastRun?new Date(l.lastRun):void 0})),!0)}catch(k){console.error("Failed to parse workflows:",k),i(o,[],!0)}}function K(){localStorage.setItem("workflows",JSON.stringify(e(o)))}function De(){if(!e(B).trim())return;const a={id:`wf-${Date.now()}`,name:e(B),description:e(G),steps:[],createdAt:new Date,status:"draft"};i(o,[...e(o),a],!0),K(),i(n,a,!0),i(E,!1),i(B,""),i(G,"")}function Ne(a){var k;i(o,e(o).filter(l=>l.id!==a),!0),K(),((k=e(n))==null?void 0:k.id)===a&&i(n,null)}function Ae(a,k){const l=e(Z).find(d=>d.id===k);l&&(i(o,e(o).map(d=>{if(d.id===a){const D={id:`step-${Date.now()}`,skillId:l.id,skillName:l.name,order:d.steps.length+1,inputs:{}};return{...d,steps:[...d.steps,D]}}return d}),!0),K(),i(n,e(o).find(d=>d.id===a)||null,!0))}function Ce(a,k){i(o,e(o).map(l=>l.id===a?{...l,steps:l.steps.filter(d=>d.id!==k).map((d,D)=>({...d,order:D+1}))}:l),!0),K(),i(n,e(o).find(l=>l.id===a)||null,!0)}function ne(a){return{draft:"default",active:"success",archived:"warning"}[a]}let L=V(()=>({total:e(o).length,draft:e(o).filter(a=>a.status==="draft").length,active:e(o).filter(a=>a.status==="active").length,archived:e(o).filter(a=>a.status==="archived").length}));var ee=ut(),te=s(ee),ue=r(s(te),2),se=s(ue),ce=s(se),Re=s(ce,!0);t(ce),$(2),t(se);var ae=r(se,2),pe=s(ae),Be=s(pe,!0);t(pe),$(2),t(ae);var re=r(ae,2),fe=s(re),Te=s(fe,!0);t(fe),$(2),t(re);var ke=r(re,2),_e=s(ke),Ie=s(_e,!0);t(_e),$(2),t(ke),t(ue),t(te);var me=r(te,2);Ue(me,{variant:"info",title:"Workflow Builder Coming Soon",children:(a,k)=>{$();var l=Ze();$(),v(a,l)},$$slots:{default:!0}});var he=r(me,2),ge=s(he);oe(ge,{variant:"bordered",padding:"lg",children:(a,k)=>{var l=rt(),d=ve(l),D=r(s(d),2);Y(D,{variant:"primary",size:"sm",get disabled(){return e(E)},$$events:{click:()=>i(E,!0)},children:(_,z)=>{$();var b=R("+ New Workflow");v(_,b)},$$slots:{default:!0}}),t(d);var Q=r(d,2);{var y=_=>{oe(_,{variant:"elevated",padding:"md",children:(z,b)=>{var p=et(),g=s(p);xe(g,{label:"Workflow Name",placeholder:"e.g., Code Review & Test",required:!0,fullWidth:!0,get value(){return e(B)},set value(m){i(B,m,!0)}});var A=r(g,2);xe(A,{label:"Description",placeholder:"Describe what this workflow does...",fullWidth:!0,get value(){return e(G)},set value(m){i(G,m,!0)}});var W=r(A,2),S=s(W);{let m=V(()=>!e(B).trim());Y(S,{variant:"primary",get disabled(){return e(m)},$$events:{click:De},children:(I,c)=>{$();var u=R("Create");v(I,u)},$$slots:{default:!0}})}var T=r(S,2);Y(T,{variant:"ghost",$$events:{click:()=>i(E,!1)},children:(m,I)=>{$();var c=R("Cancel");v(m,c)},$$slots:{default:!0}}),t(W),t(p),v(z,p)},$$slots:{default:!0}})};H(Q,_=>{e(E)&&_(y)})}var N=r(Q,2);{var J=_=>{var z=tt();v(_,z)},O=_=>{var z=at();be(z,21,()=>e(o),b=>b.id,(b,p)=>{var g=st();let A;g.__click=()=>i(n,e(p),!0),g.__keydown=f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),i(n,e(p),!0))};var W=s(g),S=s(W),T=s(S,!0);t(S);var m=r(S,2),I=s(m,!0);t(m);var c=r(m,2),u=s(c);{let f=V(()=>ne(e(p).status));ye(u,{get variant(){return e(f)},size:"sm",children:(F,M)=>{$();var X=R();q(()=>h(X,e(p).status)),v(F,X)},$$slots:{default:!0}})}var x=r(u,2),P=s(x);t(x),t(c),t(W);var U=r(W,2);Y(U,{variant:"danger",size:"sm",$$events:{click:f=>{f.stopPropagation(),Ne(e(p).id)}},children:(f,F)=>{$();var M=R("Delete");v(f,M)},$$slots:{default:!0}}),t(g),q(()=>{var f;A=Le(g,1,"workflow-item svelte-1k5z4u1",null,A,{selected:((f=e(n))==null?void 0:f.id)===e(p).id}),h(T,e(p).name),h(I,e(p).description||"No description"),h(P,`${e(p).steps.length??""} steps`)}),v(b,g)}),t(z),v(_,z)};H(N,_=>{e(o).length===0?_(J):_(O,!1)})}v(a,l)},$$slots:{default:!0}});var Fe=r(ge,2);oe(Fe,{variant:"bordered",padding:"lg",children:(a,k)=>{var l=Ke(),d=ve(l);{var D=y=>{var N=dt(),J=s(N),O=s(J),_=s(O,!0);t(O);var z=r(O,2);{let c=V(()=>ne(e(n).status));ye(z,{get variant(){return e(c)},size:"sm",children:(u,x)=>{$();var P=R();q(()=>h(P,e(n).status)),v(u,P)},$$slots:{default:!0}})}t(J);var b=r(J,2),p=s(b,!0);t(b);var g=r(b,2),A=r(s(g),2);{var W=c=>{var u=lt();v(c,u)},S=c=>{var u=ot();be(u,23,()=>e(n).steps,x=>x.id,(x,P,U)=>{var f=vt(),F=ve(f),M=s(F),X=s(M,!0);t(M);var le=r(M,2),ie=s(le),Me=s(ie,!0);t(ie);var $e=r(ie,2),qe=s($e,!0);t($e),t(le);var Ee=r(le,2);Y(Ee,{variant:"ghost",size:"sm",$$events:{click:()=>Ce(e(n).id,e(P).id)},children:(j,we)=>{$();var je=R("Remove");v(j,je)},$$slots:{default:!0}}),t(F);var Je=r(F,2);{var Oe=j=>{var we=it();v(j,we)};H(Je,j=>{e(U)<e(n).steps.length-1&&j(Oe)})}q(()=>{h(X,e(U)+1),h(Me,e(P).skillName),h(qe,e(P).skillId)}),v(x,f)}),t(u),v(c,u)};H(A,c=>{e(n).steps.length===0?c(W):c(S,!1)})}t(g);var T=r(g,2),m=r(s(T),2),I=s(m);{let c=V(()=>e(Z).map(u=>({value:u.id,label:u.name})));Qe(I,{get options(){return e(c)},placeholder:"Select a skill to add...",fullWidth:!0,$$events:{change:u=>{const x=u.target.value;x&&(Ae(e(n).id,x),u.target.value="")}}})}t(m),t(T),t(N),q(()=>{h(_,e(n).name),h(p,e(n).description||"No description provided")}),v(y,N)},Q=y=>{var N=nt();v(y,N)};H(d,y=>{e(n)?y(D):y(Q,!1)})}v(a,l)},$$slots:{default:!0}}),t(he),t(ee),q(()=>{h(Re,e(L).total),h(Be,e(L).draft),h(Te,e(L).active),h(Ie,e(L).archived)}),v(We,ee),Ge()}He(["click","keydown"]);export{$t as component};
