{"version":3,"file":"11.Dxcym_f8.js","sources":["../../../../../../src/lib/stores/execution.svelte.ts","../../../../../../src/routes/execution/+page.svelte"],"sourcesContent":["/**\n * Execution Store\n *\n * Manages execution agent sessions using Svelte 5 runes.\n */\n\nimport type {\n\tExecutionSession,\n\tExecutionRequest,\n\tExecutionResult,\n\tPAORTStage,\n\tStageOutput\n} from '$lib/types/agents';\nimport { SessionStatus, PAORTStage as Stage } from '$lib/types/agents';\n\n// ═══════════════════════════════════════════════════════════════════════\n// Execution Store State\n// ═══════════════════════════════════════════════════════════════════════\n\ninterface ExecutionState {\n\tsessions: ExecutionSession[];\n\tcurrentSession: ExecutionSession | null;\n\tisExecuting: boolean;\n\tstreamingOutput: string;\n\tcurrentStage: PAORTStage | null;\n}\n\nconst state = $state<ExecutionState>({\n\tsessions: [],\n\tcurrentSession: null,\n\tisExecuting: false,\n\tstreamingOutput: '',\n\tcurrentStage: null\n});\n\n// ═══════════════════════════════════════════════════════════════════════\n// Execution Store\n// ═══════════════════════════════════════════════════════════════════════\n\nexport const executionStore = {\n\t// Getters\n\tget sessions() {\n\t\treturn state.sessions;\n\t},\n\n\tget currentSession() {\n\t\treturn state.currentSession;\n\t},\n\n\tget isExecuting() {\n\t\treturn state.isExecuting;\n\t},\n\n\tget streamingOutput() {\n\t\treturn state.streamingOutput;\n\t},\n\n\tget currentStage() {\n\t\treturn state.currentStage;\n\t},\n\n\tget activeSessions() {\n\t\treturn state.sessions.filter(\n\t\t\t(s) => s.status === SessionStatus.RUNNING || s.status === SessionStatus.PENDING\n\t\t);\n\t},\n\n\tget completedSessions() {\n\t\treturn state.sessions.filter((s) => s.status === SessionStatus.COMPLETED);\n\t},\n\n\tget failedSessions() {\n\t\treturn state.sessions.filter((s) => s.status === SessionStatus.FAILED);\n\t},\n\n\t// Actions\n\tcreateSession(request: ExecutionRequest): ExecutionSession {\n\t\tconst session: ExecutionSession = {\n\t\t\tid: generateSessionId(),\n\t\t\ttype: 'execution',\n\t\t\tstatus: SessionStatus.PENDING,\n\t\t\tcreatedAt: new Date(),\n\t\t\trequest,\n\t\t\tstages: {}\n\t\t};\n\n\t\tstate.sessions = [...state.sessions, session];\n\t\tstate.currentSession = session;\n\n\t\treturn session;\n\t},\n\n\tstartSession(sessionId: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.RUNNING;\n\t\tsession.startedAt = new Date();\n\t\tsession.currentStage = Stage.PLAN;\n\n\t\tstate.currentStage = Stage.PLAN;\n\t\tstate.isExecuting = true;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tupdateStageOutput(sessionId: string, stage: PAORTStage, output: StageOutput): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\t// Update stage output\n\t\tswitch (stage) {\n\t\t\tcase Stage.PLAN:\n\t\t\t\tsession.stages.plan = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.ACT:\n\t\t\t\tsession.stages.act = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.OBSERVE:\n\t\t\t\tsession.stages.observe = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.REFLECT:\n\t\t\t\tsession.stages.reflect = output;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tappendStreamingOutput(content: string): void {\n\t\tstate.streamingOutput += content;\n\t},\n\n\tclearStreamingOutput(): void {\n\t\tstate.streamingOutput = '';\n\t},\n\n\tadvanceStage(sessionId: string, nextStage: PAORTStage | null): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tif (nextStage) {\n\t\t\tsession.currentStage = nextStage;\n\t\t\tstate.currentStage = nextStage;\n\t\t\tstate.streamingOutput = '';\n\t\t} else {\n\t\t\tsession.currentStage = undefined;\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tcompleteSession(sessionId: string, result: ExecutionResult): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.COMPLETED;\n\t\tsession.completedAt = new Date();\n\t\tsession.result = result;\n\t\tsession.currentStage = undefined;\n\n\t\tstate.currentStage = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tfailSession(sessionId: string, error: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.FAILED;\n\t\tsession.completedAt = new Date();\n\t\tsession.error = error;\n\t\tsession.currentStage = undefined;\n\n\t\tstate.currentStage = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tcancelSession(sessionId: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.CANCELLED;\n\t\tsession.completedAt = new Date();\n\t\tsession.currentStage = undefined;\n\n\t\tif (state.currentSession?.id === sessionId) {\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t\tstate.streamingOutput = '';\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tsetCurrentSession(sessionId: string | null): void {\n\t\tif (sessionId === null) {\n\t\t\tstate.currentSession = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (session) {\n\t\t\tstate.currentSession = session;\n\t\t}\n\t},\n\n\tdeleteSession(sessionId: string): void {\n\t\tstate.sessions = state.sessions.filter((s) => s.id !== sessionId);\n\n\t\tif (state.currentSession?.id === sessionId) {\n\t\t\tstate.currentSession = null;\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t\tstate.streamingOutput = '';\n\t\t}\n\t},\n\n\tclearAll(): void {\n\t\tstate.sessions = [];\n\t\tstate.currentSession = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\t\tstate.currentStage = null;\n\t}\n};\n\n// ═══════════════════════════════════════════════════════════════════════\n// Helper Functions\n// ═══════════════════════════════════════════════════════════════════════\n\nfunction generateSessionId(): string {\n\treturn `execution_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n","<script lang=\"ts\">\n\timport { executionStore } from '$lib/stores/execution.svelte';\n\timport ErrorBoundary from '$lib/components/ErrorBoundary.svelte';\n\timport Panel from '$lib/components/Panel.svelte';\n\timport { SessionStatus } from '$lib/types/agents';\n\n\tconst currentSession = $derived(executionStore.currentSession);\n\tconst isExecuting = $derived(executionStore.isExecuting);\n</script>\n\n<ErrorBoundary>\n\t<div class=\"execution-page\">\n\t\t<header class=\"page-header\">\n\t\t\t<h1>Execution Agent</h1>\n\t\t\t<p class=\"text-muted\">Execute code generation and implementation tasks</p>\n\t\t</header>\n\n\t\t<div class=\"content-grid\">\n\t\t\t<div class=\"left-column\">\n\t\t\t\t<Panel title=\"Execution Request\">\n\t\t\t\t\t<p>Load from Planning Panel or create new execution request</p>\n\t\t\t\t</Panel>\n\t\t\t</div>\n\n\t\t\t<div class=\"right-column\">\n\t\t\t\t{#if currentSession}\n\t\t\t\t\t<Panel title=\"Execution Output\">\n\t\t\t\t\t\t<p>Session {currentSession.id}</p>\n\t\t\t\t\t\t<p>Status: {currentSession.status}</p>\n\t\t\t\t\t</Panel>\n\t\t\t\t{:else}\n\t\t\t\t\t<Panel title=\"Welcome\">\n\t\t\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t\t\t<h2>Start an Execution Session</h2>\n\t\t\t\t\t\t\t<p>Load a plan from the Planning Agent to begin execution.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Panel>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</ErrorBoundary>\n\n<style>\n\t.execution-page {\n\t\tpadding: 24px;\n\t\tmax-width: 1400px;\n\t\tmargin: 0 auto;\n\t}\n\t.page-header {\n\t\tmargin-bottom: 24px;\n\t}\n\t.page-header h1 {\n\t\tfont-family: 'Cinzel', serif;\n\t\tfont-weight: 300;\n\t\tfont-size: 2rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 8px;\n\t}\n\t.text-muted {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t}\n\t.content-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgap: 24px;\n\t}\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 48px 24px;\n\t\tcolor: var(--color-text-muted);\n\t}\n\t.empty-state h2 {\n\t\tfont-size: 1.5rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 12px;\n\t}\n</style>\n"],"names":["state","sessions","currentSession","isExecuting","streamingOutput","currentStage","executionStore","$.derived","ErrorBoundary","$$anchor","div","root_1","div_1","div_2","Panel","node","p","root_2","div_3","p_1","$.first_child","fragment_2","p_2","$.set_text","text","$.get","id","text_1","status","div_4","root_6","$$render","consequent","alternate"],"mappings":"+NA2BMA,KACLC,YACAC,eAAgB,KAChBC,aAAa,EACbC,gBAAiB,GACjBC,aAAc,OAOFC,EAAA,CAMR,kBAAAJ,GACI,OAAAF,EAAME,cACd,2pBCzCMA,EAAcK,EAAA,IAAYD,EAAeJ,gBAI/CM,EAAaC,EAAA,sBACZC,EAAGC,IAMFC,MANDF,GAAG,GAODG,IADDD,OACCC,GACCC,EAAKC,EAAA,gDACJC,EAACC,QAADD,6BAFFH,GAMA,IAAAK,IANAL,EAAG,OAMHK,SAEEJ,EAAKL,EAAA,qDACJU,EAACC,EAAAC,OAADF,KAAAA,GACA,IAAAG,IADAH,EAAC,OACDG,KAAAA,UADWC,EAAAC,EAAA,WAAAC,EAAAvB,GAAewB,IAAE,MACjBH,EAAAI,EAAA,WAAAF,EAAAvB,GAAe0B,QAAM,8CAGjCd,EAAKL,EAAA,sCACJoB,EAAGC,QAAHD,sCAPE3B,GAAc6B,EAAAC,GAAAD,EAAAE,GAAA,OADnBf,KAPDN,KANDF,OAAAA,8BAHF"}