{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/stores/coordinator.svelte.ts","../../../../../../src/lib/services/coordinatorService.ts","../../../../../../src/lib/components/panels/coordinator/WorkflowRequest.svelte","../../../../../../src/lib/components/panels/coordinator/WorkflowVisualization.svelte","../../../../../../src/routes/coordinator/+page.svelte","../../../../../../src/lib/components/panels/coordinator/WorkflowHistory.svelte"],"sourcesContent":["/**\n * Coordinator Store\n *\n * Manages multi-agent workflow coordination using Svelte 5 runes.\n */\n\nimport type {\n  CoordinationSession,\n  WorkflowRequest,\n  WorkflowExecution,\n  WorkflowNodeExecution,\n} from \"$lib/types/agents\";\nimport { SessionStatus, WorkflowStatus } from \"$lib/types/agents\";\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Coordinator Store State\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\ninterface CoordinatorState {\n  sessions: CoordinationSession[];\n  currentSession: CoordinationSession | null;\n  isCoordinating: boolean;\n}\n\nconst state = $state<CoordinatorState>({\n  sessions: [],\n  currentSession: null,\n  isCoordinating: false,\n});\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Coordinator Store\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nexport const coordinatorStore = {\n  // Getters\n  get sessions() {\n    return state.sessions;\n  },\n\n  get currentSession() {\n    return state.currentSession;\n  },\n\n  get isCoordinating() {\n    return state.isCoordinating;\n  },\n\n  get activeSessions() {\n    return state.sessions.filter(\n      (s) =>\n        s.status === SessionStatus.RUNNING || s.status === SessionStatus.PENDING\n    );\n  },\n\n  get completedSessions() {\n    return state.sessions.filter((s) => s.status === SessionStatus.COMPLETED);\n  },\n\n  get failedSessions() {\n    return state.sessions.filter((s) => s.status === SessionStatus.FAILED);\n  },\n\n  // Actions\n  createSession(request: WorkflowRequest): CoordinationSession {\n    // Initialize workflow node executions\n    const nodeExecutions: WorkflowNodeExecution[] = request.agents.map(\n      (agent) => ({\n        nodeId: agent.id,\n        status: \"pending\",\n        progress: 0,\n      })\n    );\n\n    const workflow: WorkflowExecution = {\n      nodes: nodeExecutions,\n      status: WorkflowStatus.PENDING,\n    };\n\n    const session: CoordinationSession = {\n      id: generateSessionId(),\n      type: \"coordination\",\n      status: SessionStatus.PENDING,\n      createdAt: new Date(),\n      request,\n      workflow,\n    };\n\n    state.sessions = [...state.sessions, session];\n    state.currentSession = session;\n\n    return session;\n  },\n\n  startSession(sessionId: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    session.status = SessionStatus.RUNNING;\n    session.startedAt = new Date();\n    session.workflow.status = WorkflowStatus.RUNNING;\n    session.workflow.startedAt = new Date();\n\n    state.isCoordinating = true;\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  updateNodeExecution(\n    sessionId: string,\n    nodeId: string,\n    updates: Partial<WorkflowNodeExecution>\n  ): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === nodeId);\n    if (!node) return;\n\n    // Apply updates\n    Object.assign(node, updates);\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  startNode(sessionId: string, nodeId: string, agentSessionId: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === nodeId);\n    if (!node) return;\n\n    node.status = \"running\";\n    node.sessionId = agentSessionId;\n    node.startedAt = new Date();\n    node.progress = 0;\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  updateNodeProgress(\n    sessionId: string,\n    nodeId: string,\n    progress: number\n  ): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === nodeId);\n    if (!node) return;\n\n    node.progress = Math.min(100, Math.max(0, progress));\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  completeNode(sessionId: string, nodeId: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === nodeId);\n    if (!node) return;\n\n    node.status = \"completed\";\n    node.completedAt = new Date();\n    node.progress = 100;\n\n    // Check if all nodes are completed\n    const allCompleted = session.workflow.nodes.every(\n      (n) => n.status === \"completed\"\n    );\n    if (allCompleted) {\n      this.completeSession(sessionId);\n    }\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  failNode(sessionId: string, nodeId: string, error: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === nodeId);\n    if (!node) return;\n\n    node.status = \"failed\";\n    node.completedAt = new Date();\n    node.error = error;\n\n    // Mark workflow as partial failure\n    session.workflow.status = WorkflowStatus.PARTIAL;\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  completeSession(sessionId: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    session.status = SessionStatus.COMPLETED;\n    session.completedAt = new Date();\n    session.workflow.status = WorkflowStatus.COMPLETED;\n    session.workflow.completedAt = new Date();\n\n    state.isCoordinating = false;\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  failSession(sessionId: string, error: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    session.status = SessionStatus.FAILED;\n    session.completedAt = new Date();\n    session.error = error;\n    session.workflow.status = WorkflowStatus.FAILED;\n    session.workflow.error = error;\n    session.workflow.completedAt = new Date();\n\n    state.isCoordinating = false;\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  cancelSession(sessionId: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    session.status = SessionStatus.CANCELLED;\n    session.completedAt = new Date();\n    session.workflow.status = WorkflowStatus.FAILED;\n    session.workflow.error = \"Workflow cancelled by user\";\n    session.workflow.completedAt = new Date();\n\n    if (state.currentSession?.id === sessionId) {\n      state.isCoordinating = false;\n    }\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  setCurrentSession(sessionId: string | null): void {\n    if (sessionId === null) {\n      state.currentSession = null;\n      return;\n    }\n\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (session) {\n      state.currentSession = session;\n    }\n  },\n\n  deleteSession(sessionId: string): void {\n    state.sessions = state.sessions.filter((s) => s.id !== sessionId);\n\n    if (state.currentSession?.id === sessionId) {\n      state.currentSession = null;\n      state.isCoordinating = false;\n    }\n  },\n\n  clearAll(): void {\n    state.sessions = [];\n    state.currentSession = null;\n    state.isCoordinating = false;\n  },\n\n  // Additional methods for workflow coordination\n  get isRunning() {\n    return state.isCoordinating;\n  },\n\n  updateAgentStatus(sessionId: string, agentId: string, status: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session) return;\n\n    const node = session.workflow.nodes.find((n) => n.nodeId === agentId);\n    if (!node) return;\n\n    node.status = status as \"pending\" | \"running\" | \"completed\" | \"failed\";\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  updateAgentOutput(sessionId: string, agentId: string, output: string): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session || !session.workflow.agent_states) return;\n\n    const agentState = session.workflow.agent_states.find(\n      (a) => a.id === agentId || a.agent_id === agentId\n    );\n    if (agentState) {\n      agentState.output = output;\n    }\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n\n  appendStreamingOutput(\n    sessionId: string,\n    agentId: string,\n    chunk: string\n  ): void {\n    const session = state.sessions.find((s) => s.id === sessionId);\n    if (!session || !session.workflow.agent_states) return;\n\n    const agentState = session.workflow.agent_states.find(\n      (a) => a.id === agentId || a.agent_id === agentId\n    );\n    if (agentState) {\n      agentState.output = (agentState.output || \"\") + chunk;\n    }\n\n    // Trigger reactivity\n    state.sessions = [...state.sessions];\n  },\n};\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Helper Functions\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nfunction generateSessionId(): string {\n  return `coordination_${Date.now()}_${Math.random()\n    .toString(36)\n    .substr(2, 9)}`;\n}\n","/**\n * Coordinator Service\n *\n * Business logic for coordinator agent operations\n */\n\nimport { coordinatorStore } from \"$lib/stores/coordinator.svelte\";\nimport { streamingService } from \"./streaming\";\nimport type {\n  WorkflowRequest,\n  WorkflowExecution,\n  AgentNode,\n  Dependency,\n} from \"$lib/types/agents\";\nimport {\n  createValidationError,\n  classifyError,\n  type AppError,\n} from \"$lib/utils/errors\";\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Configuration\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nconst API_BASE_URL =\n  import.meta.env.VITE_FORGE_AGENTS_URL || \"http://localhost:8787\";\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Validation Functions\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nexport function validateWorkflowRequest(\n  request: WorkflowRequest\n): AppError | null {\n  // Validate task description\n  if (!request.task || request.task.trim().length === 0) {\n    return createValidationError(\"Task description is required\");\n  }\n\n  // Validate agent nodes\n  if (!request.agents || request.agents.length === 0) {\n    return createValidationError(\"At least one agent node is required\");\n  }\n\n  // Validate agent types\n  const validTypes = [\"planning\", \"execution\", \"evaluation\"];\n  for (const agent of request.agents) {\n    if (!validTypes.includes(agent.type)) {\n      return createValidationError(`Invalid agent type: ${agent.type}`);\n    }\n  }\n\n  // Validate dependencies don't create cycles\n  const hasCycle = detectCycle(request.agents, request.dependencies || []);\n  if (hasCycle) {\n    return createValidationError(\"Workflow contains circular dependencies\");\n  }\n\n  return null;\n}\n\nfunction detectCycle(nodes: AgentNode[], edges: Dependency[]): boolean {\n  const graph = new Map<string, Set<string>>();\n\n  // Build adjacency list\n  nodes.forEach((node) => graph.set(node.id, new Set()));\n  edges.forEach((edge) => {\n    const deps = graph.get(edge.from);\n    if (deps) deps.add(edge.to);\n  });\n\n  const visited = new Set<string>();\n  const recStack = new Set<string>();\n\n  function hasCycleUtil(nodeId: string): boolean {\n    if (recStack.has(nodeId)) return true;\n    if (visited.has(nodeId)) return false;\n\n    visited.add(nodeId);\n    recStack.add(nodeId);\n\n    const neighbors = graph.get(nodeId);\n    if (neighbors) {\n      for (const neighbor of neighbors) {\n        if (hasCycleUtil(neighbor)) return true;\n      }\n    }\n\n    recStack.delete(nodeId);\n    return false;\n  }\n\n  for (const nodeId of graph.keys()) {\n    if (hasCycleUtil(nodeId)) return true;\n  }\n\n  return false;\n}\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Workflow Session Management\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nexport async function startWorkflowSession(\n  request: WorkflowRequest\n): Promise<{ success: boolean; sessionId?: string; error?: AppError }> {\n  // Validate request\n  const validationError = validateWorkflowRequest(request);\n  if (validationError) {\n    return { success: false, error: validationError };\n  }\n\n  try {\n    // Start session on backend\n    const startResponse = await fetch(\n      `${API_BASE_URL}/api/v1/bds/workflow/start`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          task: request.task,\n          agents: request.agents,\n          dependencies: request.dependencies || [],\n          options: request.options || {},\n        }),\n      }\n    );\n\n    if (!startResponse.ok) {\n      const error = await startResponse.json();\n      return {\n        success: false,\n        error: createValidationError(\n          error.detail || \"Failed to start workflow session\"\n        ),\n      };\n    }\n\n    const { sessionId } = await startResponse.json();\n\n    // Create local session with backend session ID\n    const session = coordinatorStore.createSession(request);\n    session.id = sessionId;\n\n    // Start the session\n    coordinatorStore.startSession(session.id);\n\n    // Subscribe to SSE stream\n    const streamUrl = `${API_BASE_URL}/api/v1/bds/workflow/${sessionId}/stream`;\n\n    let currentAgentId: string | null = null;\n\n    streamingService.subscribe(streamUrl, {\n      onChunk: (content: string) => {\n        if (currentAgentId) {\n          coordinatorStore.appendStreamingOutput(\n            session.id,\n            currentAgentId,\n            content\n          );\n        }\n      },\n      onStageStart: (agentId: string) => {\n        currentAgentId = agentId;\n        coordinatorStore.updateAgentStatus(session.id, agentId, \"running\");\n      },\n      onStageEnd: (agentId: string, output: unknown) => {\n        coordinatorStore.updateAgentStatus(session.id, agentId, \"completed\");\n        coordinatorStore.updateAgentOutput(\n          session.id,\n          agentId,\n          typeof output === \"string\" ? output : JSON.stringify(output)\n        );\n        currentAgentId = null;\n      },\n      onComplete: (_result: unknown) => {\n        coordinatorStore.completeSession(session.id);\n      },\n      onError: (error: AppError) => {\n        coordinatorStore.failSession(session.id, error.message);\n      },\n    });\n\n    return { success: true, sessionId: session.id };\n  } catch (error) {\n    const appError = classifyError(error);\n    return { success: false, error: appError };\n  }\n}\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Formatting Utilities\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nexport function getAgentTypeIcon(type: string): string {\n  switch (type) {\n    case \"planning\":\n      return \"ğŸ“\";\n    case \"execution\":\n      return \"âš¡\";\n    case \"evaluation\":\n      return \"âœ“\";\n    default:\n      return \"ğŸ¤–\";\n  }\n}\n\nexport function getAgentStatusColor(\n  status: string\n): \"success\" | \"warning\" | \"danger\" | \"neutral\" {\n  switch (status) {\n    case \"completed\":\n      return \"success\";\n    case \"running\":\n      return \"warning\";\n    case \"failed\":\n      return \"danger\";\n    default:\n      return \"neutral\";\n  }\n}\n\nexport function calculateWorkflowProgress(workflow: WorkflowExecution): number {\n  const total = workflow.agent_states.length;\n  if (total === 0) return 0;\n\n  const completed = workflow.agent_states.filter(\n    (s) => s.status === \"completed\"\n  ).length;\n  return (completed / total) * 100;\n}\n","<script lang=\"ts\">\n\timport Button from '$lib/components/Button.svelte';\n\timport Alert from '$lib/components/Alert.svelte';\n\timport Badge from '$lib/components/Badge.svelte';\n\timport { startWorkflowSession, getAgentTypeIcon } from '$lib/services/coordinatorService';\n\timport type { AgentNode, DependencyEdge } from '$lib/types/agents';\n\n\t// Form state\n\tlet taskDescription = $state('');\n\tlet selectedAgents = $state<Set<string>>(new Set(['planning', 'execution', 'evaluation']));\n\tlet parallelExecution = $state(false);\n\tlet retryFailures = $state(true);\n\tlet maxRetries = $state(3);\n\n\t// Error state\n\tlet error = $state<string | null>(null);\n\tlet isSubmitting = $state(false);\n\n\tconst availableAgents = [\n\t\t{ type: 'planning', label: 'Planning Agent', icon: 'ğŸ“', description: 'Define task strategy' },\n\t\t{ type: 'execution', label: 'Execution Agent', icon: 'âš¡', description: 'Generate code' },\n\t\t{ type: 'evaluation', label: 'Evaluator Agent', icon: 'âœ“', description: 'Assess quality' }\n\t];\n\n\tfunction toggleAgent(type: string): void {\n\t\tif (selectedAgents.has(type)) {\n\t\t\tselectedAgents.delete(type);\n\t\t} else {\n\t\t\tselectedAgents.add(type);\n\t\t}\n\t\tselectedAgents = new Set(selectedAgents);\n\t}\n\n\tasync function handleStartWorkflow(): Promise<void> {\n\t\tif (!taskDescription.trim()) {\n\t\t\terror = 'Task description is required';\n\t\t\treturn;\n\t\t}\n\n\t\tif (selectedAgents.size === 0) {\n\t\t\terror = 'Select at least one agent';\n\t\t\treturn;\n\t\t}\n\n\t\terror = null;\n\t\tisSubmitting = true;\n\n\t\ttry {\n\t\t\t// Build agent nodes\n\t\t\tconst agents: AgentNode[] = Array.from(selectedAgents).map((type, index) => ({\n\t\t\t\tid: `${type}_${index}`,\n\t\t\t\ttype,\n\t\t\t\tstatus: 'pending'\n\t\t\t}));\n\n\t\t\t// Build dependencies (linear workflow)\n\t\t\tconst dependencies: DependencyEdge[] = [];\n\t\t\tconst agentOrder = ['planning', 'execution', 'evaluation'];\n\t\t\tconst orderedAgents = agents.sort(\n\t\t\t\t(a, b) => agentOrder.indexOf(a.type) - agentOrder.indexOf(b.type)\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < orderedAgents.length; i++) {\n\t\t\t\tdependencies.push({\n\t\t\t\t\tfrom: orderedAgents[i - 1].id,\n\t\t\t\t\tto: orderedAgents[i].id\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst result = await startWorkflowSession({\n\t\t\t\ttask: taskDescription,\n\t\t\t\tagents,\n\t\t\t\tdependencies,\n\t\t\t\toptions: {\n\t\t\t\t\tparallel_execution: parallelExecution,\n\t\t\t\t\tretry_on_failure: retryFailures,\n\t\t\t\t\tmax_retries: maxRetries\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!result.success) {\n\t\t\t\terror = result.error?.message || 'Failed to start workflow';\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'An unknown error occurred';\n\t\t} finally {\n\t\t\tisSubmitting = false;\n\t\t}\n\t}\n</script>\n\n<div class=\"workflow-request\">\n\t<div class=\"form-section\">\n\t\t<label class=\"form-label\" for=\"task\">\n\t\t\tTask Description\n\t\t</label>\n\t\t<textarea\n\t\t\tid=\"task\"\n\t\t\tbind:value={taskDescription}\n\t\t\tplaceholder=\"Describe the multi-step task to be executed by the agent workflow...\"\n\t\t\trows=\"4\"\n\t\t></textarea>\n\t</div>\n\n\t<div class=\"form-section\">\n\t\t<label class=\"form-label\">Agent Pipeline</label>\n\t\t<p class=\"text-muted\">Select agents to include in the workflow</p>\n\n\t\t<div class=\"agents-grid\">\n\t\t\t{#each availableAgents as agent}\n\t\t\t\t<label class=\"agent-card\" class:selected={selectedAgents.has(agent.type)}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={selectedAgents.has(agent.type)}\n\t\t\t\t\t\tonchange={() => toggleAgent(agent.type)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"agent-content\">\n\t\t\t\t\t\t<div class=\"agent-header\">\n\t\t\t\t\t\t\t<span class=\"agent-icon\">{agent.icon}</span>\n\t\t\t\t\t\t\t<span class=\"agent-label\">{agent.label}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"agent-description\">{agent.description}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-section\">\n\t\t<label class=\"form-label\">Workflow Options</label>\n\n\t\t<div class=\"options-list\">\n\t\t\t<label class=\"option\">\n\t\t\t\t<input type=\"checkbox\" bind:checked={retryFailures} />\n\t\t\t\t<div class=\"option-content\">\n\t\t\t\t\t<span class=\"option-title\">Retry on Failure</span>\n\t\t\t\t\t<span class=\"option-description\">Automatically retry failed agents</span>\n\t\t\t\t</div>\n\t\t\t</label>\n\n\t\t\t{#if retryFailures}\n\t\t\t\t<div class=\"option-detail\">\n\t\t\t\t\t<label for=\"maxRetries\">Max Retries:</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tid=\"maxRetries\"\n\t\t\t\t\t\tbind:value={maxRetries}\n\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\tmax=\"10\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\n\t{#if error}\n\t\t<Alert variant=\"error\">{error}</Alert>\n\t{/if}\n\n\t<Button\n\t\tonclick={handleStartWorkflow}\n\t\tdisabled={isSubmitting || selectedAgents.size === 0}\n\t\tfullWidth\n\t>\n\t\t{isSubmitting ? 'Starting Workflow...' : 'Start Workflow'}\n\t</Button>\n</div>\n\n<style>\n\t.workflow-request {\n\t\tpadding: 1rem;\n\t}\n\n\t.form-section {\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.form-label {\n\t\tdisplay: block;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.text-muted {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--text-secondary);\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\ttextarea {\n\t\twidth: 100%;\n\t\tpadding: 0.75rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 6px;\n\t\tcolor: var(--text-primary);\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.5;\n\t\tresize: vertical;\n\t\tfont-family: inherit;\n\t}\n\n\ttextarea:focus {\n\t\toutline: none;\n\t\tborder-color: var(--accent-color);\n\t}\n\n\t.agents-grid {\n\t\tdisplay: grid;\n\t\tgap: 0.75rem;\n\t}\n\n\t.agent-card {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 0.75rem;\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 2px solid var(--border-color);\n\t\tborder-radius: 6px;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.agent-card:hover {\n\t\tborder-color: var(--accent-color);\n\t\tbackground: var(--surface-3);\n\t}\n\n\t.agent-card.selected {\n\t\tborder-color: var(--accent-color);\n\t\tbackground: rgba(var(--accent-rgb), 0.05);\n\t}\n\n\t.agent-card input[type='checkbox'] {\n\t\tmargin-top: 2px;\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tcursor: pointer;\n\t}\n\n\t.agent-content {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.agent-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.agent-icon {\n\t\tfont-size: 1.125rem;\n\t}\n\n\t.agent-label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.agent-description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--text-secondary);\n\t\tline-height: 1.4;\n\t}\n\n\t.options-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.option {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 6px;\n\t\tcursor: pointer;\n\t}\n\n\t.option input[type='checkbox'] {\n\t\tmargin-top: 2px;\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tcursor: pointer;\n\t}\n\n\t.option-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.25rem;\n\t}\n\n\t.option-title {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.option-description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.option-detail {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding-left: 2.5rem;\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.option-detail input[type='number'] {\n\t\twidth: 80px;\n\t\tpadding: 0.375rem 0.5rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 4px;\n\t\tcolor: var(--text-primary);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.agents-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport { getAgentTypeIcon, getAgentStatusColor } from '$lib/services/coordinatorService';\n\timport type { WorkflowExecution, AgentState } from '$lib/types/agents';\n\n\tinterface Props {\n\t\tworkflow: WorkflowExecution | null;\n\t}\n\n\tlet { workflow }: Props = $props();\n\n\tfunction getStatusIcon(status: string): string {\n\t\tswitch (status) {\n\t\t\tcase 'completed':\n\t\t\t\treturn 'âœ…';\n\t\t\tcase 'running':\n\t\t\t\treturn 'â³';\n\t\t\tcase 'failed':\n\t\t\t\treturn 'âŒ';\n\t\t\tcase 'pending':\n\t\t\t\treturn 'â¸ï¸';\n\t\t\tdefault:\n\t\t\t\treturn 'âšª';\n\t\t}\n\t}\n</script>\n\n<div class=\"workflow-visualization\">\n\t{#if workflow && workflow.agent_states}\n\t\t<div class=\"workflow-pipeline\">\n\t\t\t{#each workflow.agent_states as agentState, index}\n\t\t\t\t<div class=\"pipeline-step\">\n\t\t\t\t\t<div class=\"agent-node\" class:active={agentState.status === 'running'} class:completed={agentState.status === 'completed'} class:failed={agentState.status === 'failed'}>\n\t\t\t\t\t\t<div class=\"node-icon\">\n\t\t\t\t\t\t\t{getAgentTypeIcon(agentState.agent_id.split('_')[0])}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"node-content\">\n\t\t\t\t\t\t\t<div class=\"node-title\">{agentState.agent_id}</div>\n\t\t\t\t\t\t\t<Badge variant={getAgentStatusColor(agentState.status)}>\n\t\t\t\t\t\t\t\t{getStatusIcon(agentState.status)} {agentState.status}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if index < workflow.agent_states.length - 1}\n\t\t\t\t\t\t<div class=\"pipeline-arrow\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t<path d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\n\t\t{#if workflow.current_agent}\n\t\t\t<div class=\"current-agent-info\">\n\t\t\t\t<div class=\"info-label\">Currently Executing:</div>\n\t\t\t\t<div class=\"info-value\">{workflow.current_agent}</div>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p class=\"text-muted\">No workflow visualization available</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.workflow-visualization {\n\t\tpadding: 1rem;\n\t}\n\n\t.workflow-pipeline {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 1rem;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.pipeline-step {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.agent-node {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 2px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\tmin-width: 200px;\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.agent-node.active {\n\t\tborder-color: var(--accent-color);\n\t\tbackground: rgba(var(--accent-rgb), 0.1);\n\t\tbox-shadow: 0 0 0 4px rgba(var(--accent-rgb), 0.1);\n\t}\n\n\t.agent-node.completed {\n\t\tborder-color: var(--color-success);\n\t\tbackground: rgba(34, 197, 94, 0.05);\n\t}\n\n\t.agent-node.failed {\n\t\tborder-color: var(--color-danger);\n\t\tbackground: rgba(239, 68, 68, 0.05);\n\t}\n\n\t.node-icon {\n\t\tfont-size: 1.5rem;\n\t}\n\n\t.node-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.node-title {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.pipeline-arrow {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.current-agent-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 6px;\n\t}\n\n\t.info-label {\n\t\tfont-size: 0.8125rem;\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.info-value {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 2rem 1rem;\n\t}\n\n\t.text-muted {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.workflow-pipeline {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t.pipeline-arrow {\n\t\t\ttransform: rotate(90deg);\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { coordinatorStore } from '$lib/stores/coordinator.svelte';\n\timport ErrorBoundary from '$lib/components/ErrorBoundary.svelte';\n\timport Panel from '$lib/components/Panel.svelte';\n\timport { SessionStatus } from '$lib/types/agents';\n\timport WorkflowRequest from '$lib/components/panels/coordinator/WorkflowRequest.svelte';\n\timport WorkflowVisualization from '$lib/components/panels/coordinator/WorkflowVisualization.svelte';\n\timport WorkflowHistory from '$lib/components/panels/coordinator/WorkflowHistory.svelte';\n\timport { calculateWorkflowProgress } from '$lib/services/coordinatorService';\n\n\tconst currentSession = $derived(coordinatorStore.currentSession);\n\tconst isRunning = $derived(coordinatorStore.isRunning);\n</script>\n\n<ErrorBoundary>\n\t<div class=\"coordinator-page\">\n\t\t<header class=\"page-header\">\n\t\t\t<h1>Coordinator Agent</h1>\n\t\t\t<p class=\"text-muted\">Orchestrate multi-agent workflows</p>\n\t\t</header>\n\n\t\t<div class=\"content-grid\">\n\t\t\t<div class=\"left-column\">\n\t\t\t\t<Panel title=\"New Workflow\">\n\t\t\t\t\t<WorkflowRequest />\n\t\t\t\t</Panel>\n\n\t\t\t\t{#if currentSession}\n\t\t\t\t\t<Panel title=\"Workflow History\" class=\"mt-6\">\n\t\t\t\t\t\t<WorkflowHistory />\n\t\t\t\t\t</Panel>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"right-column\">\n\t\t\t\t{#if currentSession}\n\t\t\t\t\t{#if currentSession.status === SessionStatus.RUNNING}\n\t\t\t\t\t\t<Panel title=\"Workflow Executing\">\n\t\t\t\t\t\t\t{#if currentSession.workflow}\n\t\t\t\t\t\t\t\t<WorkflowVisualization workflow={currentSession.workflow} />\n\t\t\t\t\t\t\t\t<div class=\"workflow-progress\">\n\t\t\t\t\t\t\t\t\t<div class=\"progress-label\">Overall Progress</div>\n\t\t\t\t\t\t\t\t\t<div class=\"progress-bar\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"progress-bar-fill\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: {calculateWorkflowProgress(currentSession.workflow)}%\"\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"progress-percent\">\n\t\t\t\t\t\t\t\t\t\t{calculateWorkflowProgress(currentSession.workflow).toFixed(0)}%\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div class=\"progress-message\">\n\t\t\t\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t\t\t\t<p>Initializing workflow...</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{:else if currentSession.status === SessionStatus.COMPLETED && currentSession.workflow}\n\t\t\t\t\t\t<Panel title=\"Workflow Completed\">\n\t\t\t\t\t\t\t<div class=\"success-state\">\n\t\t\t\t\t\t\t\t<svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n\t\t\t\t\t\t\t\t\t<path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t\t\t\t<polyline points=\"22 4 12 14.01 9 11.01\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<h3>Workflow Executed Successfully</h3>\n\t\t\t\t\t\t\t\t<p>All agents have completed their tasks.</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"workflow-results\">\n\t\t\t\t\t\t\t\t<WorkflowVisualization workflow={currentSession.workflow} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{:else if currentSession.status === SessionStatus.FAILED}\n\t\t\t\t\t\t<Panel title=\"Workflow Failed\">\n\t\t\t\t\t\t\t<div class=\"error-state\">\n\t\t\t\t\t\t\t\t<svg width=\"48\" height=\"48\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<h3>Workflow Failed</h3>\n\t\t\t\t\t\t\t\t{#if currentSession.error}\n\t\t\t\t\t\t\t\t\t<p class=\"error-message\">{currentSession.error}</p>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if currentSession.workflow}\n\t\t\t\t\t\t\t\t<div class=\"workflow-results\">\n\t\t\t\t\t\t\t\t\t<WorkflowVisualization workflow={currentSession.workflow} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<Panel title=\"Welcome\">\n\t\t\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t\t\t<div class=\"empty-icon\">ğŸ¯</div>\n\t\t\t\t\t\t\t<h2>Create a Workflow</h2>\n\t\t\t\t\t\t\t<p>Design and execute multi-agent coordination workflows to handle complex tasks.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Panel>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</ErrorBoundary>\n\n<style>\n\t.coordinator-page {\n\t\tpadding: 24px;\n\t\tmax-width: 1400px;\n\t\tmargin: 0 auto;\n\t}\n\n\t.page-header {\n\t\tmargin-bottom: 24px;\n\t}\n\n\t.page-header h1 {\n\t\tfont-family: 'Cinzel', serif;\n\t\tfont-weight: 300;\n\t\tfont-size: 2rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 8px;\n\t}\n\n\t.text-muted {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.content-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 450px 1fr;\n\t\tgap: 24px;\n\t\talign-items: start;\n\t}\n\n\t.left-column,\n\t.right-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24px;\n\t}\n\n\t:global(.mt-6) {\n\t\tmargin-top: 24px;\n\t}\n\n\t.workflow-progress {\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\tmargin-top: 1.5rem;\n\t}\n\n\t.progress-label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\t.progress-bar {\n\t\theight: 12px;\n\t\tbackground: var(--surface-1);\n\t\tborder-radius: 6px;\n\t\toverflow: hidden;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.progress-bar-fill {\n\t\theight: 100%;\n\t\tbackground: linear-gradient(90deg, var(--accent-color), #10b981);\n\t\tborder-radius: 6px;\n\t\ttransition: width 0.5s ease;\n\t}\n\n\t.progress-percent {\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 700;\n\t\tcolor: var(--text-primary);\n\t\ttext-align: center;\n\t}\n\n\t.progress-message {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t}\n\n\t.spinner {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tborder: 3px solid var(--border-color);\n\t\tborder-top-color: var(--accent-color);\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t\tmargin-bottom: 16px;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.progress-message p {\n\t\tcolor: var(--text-secondary);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.success-state,\n\t.error-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t}\n\n\t.success-state svg {\n\t\tcolor: var(--color-success);\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.success-state h3 {\n\t\tfont-size: 1.25rem;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 8px;\n\t}\n\n\t.success-state p {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t.error-state svg {\n\t\tcolor: var(--color-danger);\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.error-state h3 {\n\t\tfont-size: 1.25rem;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.error-message {\n\t\tcolor: var(--color-danger);\n\t\tfont-size: 0.875rem;\n\t\tpadding: 12px 16px;\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t\tborder-radius: 6px;\n\t\tmax-width: 500px;\n\t}\n\n\t.workflow-results {\n\t\tmargin-top: 1.5rem;\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 48px 24px;\n\t}\n\n\t.empty-icon {\n\t\tfont-size: 4rem;\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.empty-state h2 {\n\t\tfont-size: 1.5rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.empty-state p {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t\tmax-width: 400px;\n\t\tmargin: 0 auto;\n\t}\n\n\t@media (max-width: 1024px) {\n\t\t.content-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport Button from '$lib/components/Button.svelte';\n\timport { coordinatorStore } from '$lib/stores/coordinator.svelte';\n\timport { SessionStatus } from '$lib/types/agents';\n\timport { calculateWorkflowProgress } from '$lib/services/coordinatorService';\n\n\tconst sessions = $derived(coordinatorStore.sessions);\n\n\tfunction formatDate(date: Date): string {\n\t\treturn new Intl.DateTimeFormat('en-US', {\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric',\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit'\n\t\t}).format(date);\n\t}\n\n\tfunction getStatusBadgeVariant(status: SessionStatus): 'success' | 'warning' | 'danger' | 'neutral' {\n\t\tswitch (status) {\n\t\t\tcase SessionStatus.COMPLETED:\n\t\t\t\treturn 'success';\n\t\t\tcase SessionStatus.RUNNING:\n\t\t\t\treturn 'warning';\n\t\t\tcase SessionStatus.FAILED:\n\t\t\tcase SessionStatus.CANCELLED:\n\t\t\t\treturn 'danger';\n\t\t\tdefault:\n\t\t\t\treturn 'neutral';\n\t\t}\n\t}\n\n\tfunction getStatusIcon(status: SessionStatus): string {\n\t\tswitch (status) {\n\t\t\tcase SessionStatus.COMPLETED:\n\t\t\t\treturn 'âœ…';\n\t\t\tcase SessionStatus.RUNNING:\n\t\t\t\treturn 'â³';\n\t\t\tcase SessionStatus.FAILED:\n\t\t\t\treturn 'âŒ';\n\t\t\tcase SessionStatus.CANCELLED:\n\t\t\t\treturn 'ğŸš«';\n\t\t\tdefault:\n\t\t\t\treturn 'â¸ï¸';\n\t\t}\n\t}\n\n\tfunction selectSession(sessionId: string): void {\n\t\tcoordinatorStore.setCurrentSession(sessionId);\n\t}\n\n\tfunction deleteSession(sessionId: string): void {\n\t\tif (confirm('Are you sure you want to delete this workflow session?')) {\n\t\t\tcoordinatorStore.deleteSession(sessionId);\n\t\t}\n\t}\n</script>\n\n<div class=\"workflow-history\">\n\t{#if sessions.length > 0}\n\t\t<div class=\"history-header\">\n\t\t\t<h3>Past Workflows ({sessions.length})</h3>\n\t\t\t<Button variant=\"ghost\" size=\"sm\" onclick={() => coordinatorStore.clearAll()}>\n\t\t\t\tClear All\n\t\t\t</Button>\n\t\t</div>\n\n\t\t<div class=\"sessions-list\">\n\t\t\t{#each sessions as session}\n\t\t\t\t{@const isActive = coordinatorStore.currentSession?.id === session.id}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"session-card\"\n\t\t\t\t\tclass:active={isActive}\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\tonclick={() => selectSession(session.id)}\n\t\t\t\t\tonkeydown={(e) => e.key === 'Enter' && selectSession(session.id)}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"session-header\">\n\t\t\t\t\t\t<div class=\"session-info\">\n\t\t\t\t\t\t\t<span class=\"session-icon\">{getStatusIcon(session.status)}</span>\n\t\t\t\t\t\t\t<div class=\"session-title-group\">\n\t\t\t\t\t\t\t\t<div class=\"session-title\">\n\t\t\t\t\t\t\t\t\t{session.request.task || `Workflow #${session.id.split('_')[1]}`}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"session-meta\">\n\t\t\t\t\t\t\t\t\t<span class=\"session-date\">{formatDate(session.createdAt)}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Badge variant={getStatusBadgeVariant(session.status)}>\n\t\t\t\t\t\t\t{session.status}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if session.workflow}\n\t\t\t\t\t\t<div class=\"session-stats\">\n\t\t\t\t\t\t\t<div class=\"stat\">\n\t\t\t\t\t\t\t\t<span class=\"stat-icon\">ğŸ¤–</span>\n\t\t\t\t\t\t\t\t<span class=\"stat-value\">{session.workflow.agent_states.length}</span>\n\t\t\t\t\t\t\t\t<span class=\"stat-label\">agents</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"stat\">\n\t\t\t\t\t\t\t\t<span class=\"stat-icon\">ğŸ“Š</span>\n\t\t\t\t\t\t\t\t<span class=\"stat-value\">{calculateWorkflowProgress(session.workflow).toFixed(0)}%</span>\n\t\t\t\t\t\t\t\t<span class=\"stat-label\">progress</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if session.error}\n\t\t\t\t\t\t<div class=\"session-error\">\n\t\t\t\t\t\t\t<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t<path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>{session.error}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"session-actions\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonclick={(e: Event) => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tselectSession(session.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tView Details\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonclick={(e: Event) => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tdeleteSession(session.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<div class=\"empty-icon\">ğŸ“‹</div>\n\t\t\t<p class=\"empty-title\">No workflow history</p>\n\t\t\t<p class=\"empty-description\">\n\t\t\t\tStart a workflow to see your history here.\n\t\t\t</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.workflow-history {\n\t\tpadding: 1rem;\n\t}\n\n\t.history-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.history-header h3 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin: 0;\n\t}\n\n\t.sessions-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.session-card {\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 2px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.session-card:hover {\n\t\tborder-color: var(--accent-color);\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.session-card.active {\n\t\tborder-color: var(--accent-color);\n\t\tbackground: var(--surface-3);\n\t}\n\n\t.session-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\t.session-info {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 0.75rem;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.session-icon {\n\t\tfont-size: 1.25rem;\n\t\tline-height: 1;\n\t}\n\n\t.session-title-group {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.session-title {\n\t\tfont-size: 0.9375rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.25rem;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.session-meta {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.session-stats {\n\t\tdisplay: flex;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 0.75rem;\n\t\tpadding: 0.5rem;\n\t\tbackground: var(--surface-1);\n\t\tborder-radius: 6px;\n\t}\n\n\t.stat {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.stat-icon {\n\t\tfont-size: 1rem;\n\t}\n\n\t.stat-value {\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.stat-label {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.session-error {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t\tborder-radius: 6px;\n\t\tcolor: var(--color-danger);\n\t\tfont-size: 0.875rem;\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\t.session-actions {\n\t\tdisplay: flex;\n\t\tgap: 0.5rem;\n\t\tpadding-top: 0.75rem;\n\t\tborder-top: 1px solid var(--border-color);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 3rem 1rem;\n\t}\n\n\t.empty-icon {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.empty-title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.empty-description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.session-stats {\n\t\t\tflex-wrap: wrap;\n\t\t\tgap: 0.5rem;\n\t\t}\n\n\t\t.session-actions {\n\t\t\tflex-direction: column;\n\t\t}\n\t}\n</style>\n"],"names":["state","sessions","currentSession","isCoordinating","coordinatorStore","activeSessions","filter","s","status","SessionStatus","RUNNING","PENDING","completedSessions","COMPLETED","failedSessions","FAILED","createSession","request","workflow","nodes","agents","map","agent","nodeId","id","progress","WorkflowStatus","session","Date","now","Math","random","toString","substr","type","createdAt","startSession","sessionId","find","startedAt","updateNodeExecution","updates","node","n","Object","assign","startNode","agentSessionId","updateNodeProgress","min","max","completeNode","completedAt","every","this","completeSession","failNode","error","PARTIAL","failSession","cancelSession","CANCELLED","setCurrentSession","deleteSession","clearAll","isRunning","updateAgentStatus","agentId","updateAgentOutput","output","agent_states","agentState","a","agent_id","appendStreamingOutput","chunk","API_BASE_URL","validateWorkflowRequest","task","trim","length","createValidationError","validTypes","includes","edges","graph","Map","forEach","set","Set","edge","deps","get","from","add","to","visited","recStack","hasCycleUtil","has","neighbors","neighbor","delete","keys","detectCycle","dependencies","getAgentTypeIcon","getAgentStatusColor","calculateWorkflowProgress","total","selectedAgents","retryFailures","isSubmitting","label","icon","description","each_array","$$index","$.attr","$.escape","async","size","Array","index","agentOrder","orderedAgents","sort","b","indexOf","i","push","result","validationError","success","startResponse","fetch","method","headers","body","JSON","stringify","options","ok","json","detail","streamUrl","currentAgentId","streamingService","subscribe","onChunk","content","onStageStart","onStageEnd","onComplete","_result","onError","message","classifyError","startWorkflowSession","parallel_execution","retry_on_failure","max_retries","err","Error","disabled","$$props","getStatusIcon","$.ensure_array_like","split","$$renderer","current_agent","formatDate","date","Intl","DateTimeFormat","month","day","hour","minute","format","getStatusBadgeVariant","onclick","isActive","toFixed","e","stopPropagation","confirm","WorkflowVisualization","$.attr_style","$.stringify"],"mappings":"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"}