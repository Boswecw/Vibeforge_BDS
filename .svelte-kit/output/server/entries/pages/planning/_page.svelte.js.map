{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/components/panels/planning/RequestForm.svelte","../../../../../../src/lib/components/Textarea.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport Button from '$lib/components/Button.svelte';\n\timport Input from '$lib/components/Input.svelte';\n\timport Textarea from '$lib/components/Textarea.svelte';\n\timport Alert from '$lib/components/Alert.svelte';\n\timport { startPlanningSession, validatePlanningRequest } from '$lib/services/planningService';\n\timport { planningStore } from '$lib/stores/planning.svelte';\n\timport type { PlanningRequest } from '$lib/types/agents';\n\timport type { AppError } from '$lib/utils/errors';\n\n\tlet title = $state('');\n\tlet description = $state('');\n\tlet error = $state<AppError | null>(null);\n\tlet isSubmitting = $state(false);\n\n\tconst isStreaming = $derived(planningStore.isStreaming);\n\n\tasync function handleSubmit(): Promise<void> {\n\t\terror = null;\n\n\t\tconst request: PlanningRequest = {\n\t\t\ttitle: title.trim(),\n\t\t\tdescription: description.trim()\n\t\t};\n\n\t\t// Validate\n\t\tconst validationError = validatePlanningRequest(request);\n\t\tif (validationError) {\n\t\t\terror = validationError;\n\t\t\treturn;\n\t\t}\n\n\t\tisSubmitting = true;\n\n\t\ttry {\n\t\t\tconst result = await startPlanningSession(request);\n\n\t\t\tif (!result.success && result.error) {\n\t\t\t\terror = result.error;\n\t\t\t\tisSubmitting = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Success - clear form\n\t\t\ttitle = '';\n\t\t\tdescription = '';\n\t\t\tisSubmitting = false;\n\t\t} catch (err) {\n\t\t\tisSubmitting = false;\n\t\t}\n\t}\n\n\tfunction handleClear(): void {\n\t\ttitle = '';\n\t\tdescription = '';\n\t\terror = null;\n\t}\n</script>\n\n<form onsubmit={(e) => { e.preventDefault(); handleSubmit(); }} class=\"request-form\">\n\t{#if error}\n\t\t<Alert variant=\"error\">\n\t\t\t{error.userMessage}\n\t\t</Alert>\n\t{/if}\n\n\t<Input\n\t\tlabel=\"Task Title\"\n\t\tplaceholder=\"e.g., Add user authentication system\"\n\t\tbind:value={title}\n\t\tmaxlength={200}\n\t\trequired\n\t\tdisabled={isStreaming || isSubmitting}\n\t/>\n\n\t<Textarea\n\t\tlabel=\"Description\"\n\t\tplaceholder=\"Provide detailed requirements, constraints, and context for this task...\"\n\t\tbind:value={description}\n\t\trows={8}\n\t\tmaxlength={5000}\n\t\trequired\n\t\tdisabled={isStreaming || isSubmitting}\n\t/>\n\n\t<div class=\"form-actions\">\n\t\t<Button\n\t\t\ttype=\"submit\"\n\t\t\tvariant=\"primary\"\n\t\t\tdisabled={isStreaming || isSubmitting || !title.trim() || !description.trim()}\n\t\t\tloading={isSubmitting}\n\t\t>\n\t\t\t{isSubmitting ? 'Starting...' : 'Start Planning'}\n\t\t</Button>\n\n\t\t<Button type=\"button\" variant=\"secondary\" onclick={handleClear} disabled={isStreaming || isSubmitting}>\n\t\t\tClear\n\t\t</Button>\n\t</div>\n\n\t<div class=\"form-hint\">\n\t\t<p>\n\t\t\tThe Planning Agent will analyze your request and generate a detailed implementation plan with\n\t\t\tspecific steps, acceptance criteria, and risk assessment.\n\t\t</p>\n\t</div>\n</form>\n\n<style>\n\t.request-form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 16px;\n\t}\n\n\t.form-actions {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t\tmargin-top: 8px;\n\t}\n\n\t.form-hint {\n\t\tmargin-top: 8px;\n\t\tpadding: 12px;\n\t\tbackground: rgba(193, 151, 69, 0.05);\n\t\tborder-left: 3px solid var(--color-brass);\n\t\tborder-radius: 4px;\n\t}\n\n\t.form-hint p {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.5;\n\t\tmargin: 0;\n\t}\n</style>\n","<script lang=\"ts\">\n  // Props\n  export let value: string = '';\n  export let placeholder: string = '';\n  export let label: string = '';\n  export let helperText: string = '';\n  export let error: string = '';\n  export let disabled: boolean = false;\n  export let required: boolean = false;\n  export let readonly: boolean = false;\n  export let fullWidth: boolean = false;\n  export let rows: number = 4;\n  export let maxLength: number | undefined = undefined;\n  export let resize: 'none' | 'vertical' | 'horizontal' | 'both' = 'vertical';\n  export let name: string = '';\n  export let id: string = name || `textarea-${Math.random().toString(36).substr(2, 9)}`;\n  // Lowercase alias for HTML attribute compatibility\n  let maxlength: number | undefined = undefined;\n  export { maxlength };\n\n  // State\n  let focused = false;\n\n  // Compute classes\n  $: textareaClasses = [\n    'textarea',\n    error && 'textarea-error',\n    disabled && 'textarea-disabled',\n    readonly && 'textarea-readonly',\n    fullWidth && 'textarea-full-width',\n    `resize-${resize}`\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  // Character count\n  $: charCount = value.length;\n  $: showCharCount = maxLength !== undefined;\n\n  // Handlers\n  function handleFocus() {\n    focused = true;\n  }\n\n  function handleBlur() {\n    focused = false;\n  }\n</script>\n\n<div class=\"textarea-wrapper\" class:full-width={fullWidth}>\n  {#if label}\n    <label for={id} class=\"textarea-label\">\n      {label}\n      {#if required}\n        <span class=\"required-indicator\">*</span>\n      {/if}\n    </label>\n  {/if}\n\n  <div class=\"textarea-container\" class:focused class:has-error={!!error}>\n    <textarea\n      {id}\n      {name}\n      {placeholder}\n      {disabled}\n      {required}\n      {readonly}\n      {rows}\n      maxlength={maxLength}\n      bind:value\n      class={textareaClasses}\n      on:focus={handleFocus}\n      on:blur={handleBlur}\n      on:input\n      on:change\n      on:keydown\n      on:keyup\n      on:keypress\n    ></textarea>\n  </div>\n\n  <div class=\"textarea-footer\">\n    {#if helperText && !error}\n      <p class=\"helper-text\">{helperText}</p>\n    {/if}\n\n    {#if error}\n      <p class=\"error-text\">{error}</p>\n    {/if}\n\n    {#if showCharCount}\n      <p class=\"char-count\" class:over-limit={maxLength && charCount > maxLength}>\n        {charCount}{#if maxLength}/{maxLength}{/if}\n      </p>\n    {/if}\n  </div>\n</div>\n\n<style>\n  /* ═══════════════════════════════════════════════════════════════════════\n     Textarea Wrapper\n     ═══════════════════════════════════════════════════════════════════════ */\n\n  .textarea-wrapper {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-xs);\n  }\n\n  .textarea-wrapper.full-width {\n    width: 100%;\n  }\n\n  /* ─────────────────────────────────────────────────────────────────────\n     Label\n     ───────────────────────────────────────────────────────────────────── */\n\n  .textarea-label {\n    display: block;\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: var(--color-text-secondary);\n    margin-bottom: var(--spacing-xs);\n  }\n\n  .required-indicator {\n    color: var(--color-error);\n    margin-left: 2px;\n  }\n\n  /* ─────────────────────────────────────────────────────────────────────\n     Textarea Container\n     ───────────────────────────────────────────────────────────────────── */\n\n  .textarea-container {\n    position: relative;\n    display: flex;\n    align-items: flex-start;\n    background-color: var(--color-surface-2);\n    border: 1px solid var(--color-border-subtle);\n    border-radius: var(--radius-md);\n    transition: all var(--transition-fast);\n  }\n\n  .textarea-container:hover:not(.textarea-disabled) {\n    border-color: var(--color-border-default);\n  }\n\n  .textarea-container.focused {\n    border-color: var(--color-brass);\n    box-shadow: 0 0 0 3px rgba(193, 151, 69, 0.1);\n  }\n\n  .textarea-container.has-error {\n    border-color: var(--color-error);\n  }\n\n  .textarea-container.has-error.focused {\n    box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n  }\n\n  /* ─────────────────────────────────────────────────────────────────────\n     Textarea Element\n     ───────────────────────────────────────────────────────────────────── */\n\n  .textarea {\n    width: 100%;\n    min-height: 80px;\n    padding: var(--spacing-md);\n    background: transparent;\n    border: none;\n    color: var(--color-text-primary);\n    font-family: var(--font-family-body);\n    font-size: 0.9375rem;\n    line-height: 1.5;\n    outline: none;\n  }\n\n  .textarea::placeholder {\n    color: var(--color-text-tertiary);\n  }\n\n  .textarea:disabled {\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n\n  .textarea:readonly {\n    cursor: default;\n    opacity: 0.8;\n  }\n\n  .textarea-full-width {\n    width: 100%;\n  }\n\n  /* Resize options */\n  .resize-none {\n    resize: none;\n  }\n\n  .resize-vertical {\n    resize: vertical;\n  }\n\n  .resize-horizontal {\n    resize: horizontal;\n  }\n\n  .resize-both {\n    resize: both;\n  }\n\n  /* ─────────────────────────────────────────────────────────────────────\n     Textarea Footer\n     ───────────────────────────────────────────────────────────────────── */\n\n  .textarea-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: var(--spacing-sm);\n  }\n\n  .helper-text {\n    font-size: 0.75rem;\n    color: var(--color-text-tertiary);\n    margin: 0;\n    padding: 0 var(--spacing-xs);\n    flex: 1;\n  }\n\n  .error-text {\n    font-size: 0.75rem;\n    color: var(--color-error);\n    margin: 0;\n    padding: 0 var(--spacing-xs);\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-xs);\n    flex: 1;\n  }\n\n  .error-text::before {\n    content: '⚠';\n    font-size: 0.875rem;\n  }\n\n  .char-count {\n    font-size: 0.75rem;\n    color: var(--color-text-tertiary);\n    margin: 0;\n    padding: 0 var(--spacing-xs);\n    font-family: var(--font-family-mono);\n    white-space: nowrap;\n  }\n\n  .char-count.over-limit {\n    color: var(--color-error);\n    font-weight: 600;\n  }\n\n  /* ─────────────────────────────────────────────────────────────────────\n     Scrollbar Styling\n     ───────────────────────────────────────────────────────────────────── */\n\n  .textarea::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  .textarea::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  .textarea::-webkit-scrollbar-thumb {\n    background: var(--color-border-default);\n    border-radius: var(--radius-sm);\n  }\n\n  .textarea::-webkit-scrollbar-thumb:hover {\n    background: var(--color-border-emphasis);\n  }\n</style>\n"],"names":["title","description","error","isSubmitting","handleClear","$$renderer","push","$.escape","userMessage","disabled","$$value","textareaClasses","charCount","showCharCount","value","placeholder","label","helperText","required","readonly","fullWidth","rows","maxLength","resize","name","id","$.fallback","$$props","Math","random","toString","substr","maxlength","filter","Boolean","join","length","$.attr","$.attr_class","focused","trim"],"mappings":"kWAUK,IAAAA,EAAe,GACfC,EAAqB,GACrBC,EAAgC,KAChCC,GAAsB,EAuCjB,SAAAC,IACRJ,EAAQ,GACRC,EAAc,GACdC,EAAQ,IACT,+EAIKA,8DAEFG,EAAAC,KAAA,gBAAAC,EAAAL,EAAMM,kLAQG,gBAEDC,SAAeN,qBAHbH,gBAAAA,EAAKU,qEC7CdC,EAYAC,EACAC,EAnCQC,YAAgB,IAChBC,kBAAsB,IACtBC,YAAgB,IAChBC,iBAAqB,IACrBf,YAAgB,IAChBO,gBAAoB,GACpBS,gBAAoB,GACpBC,gBAAoB,GACpBC,iBAAqB,GACrBC,WAAe,GACfC,qBAAgC,GAChCC,aAAsD,YACtDC,WAAe,IACfC,EAAUC,EAAAC,EAAA,GAAA,IAAGH,GAAI,YAAgBI,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,MAAC,GAE9EC,qBAAgC,GAOjCrB,EAAe,CAChB,WACAT,GAAS,iBACTO,GAAY,oBACZU,GAAY,oBACZC,GAAa,gCACHG,KAETU,OAAOC,SACPC,KAAK,KAGLvB,EAAYE,EAAMsB,OAClBvB,OAA8B,IAAdS,yEAY2BF,QACzCJ,4BACSX,EAAAC,KAAA,SAAA+B,EAAA,MAAAZ,8CACTT,OACIE,sLAMwDb,EAAAC,KAAA,sBAAAgC,EAAA,yCAAA,EAAA,CAAAC,SAtCnD,EAsCmD,cAAArC,uBAE5DuB,KAAEY,EAAA,OACFb,KAAIa,EAAA,cACJtB,KAAWsB,EAAA,WACX5B,GAAQ,KAAA4B,EAAA,WACRnB,qBACAC,GAAQ,KAAAkB,EAAA,OACRhB,KAAIgB,EAAA,YACMf,SAEJX,GAAe,8HAYnBM,IAAef,8EACMe,+DAGrBf,6EACoBA,+DAGpBW,4BACqCR,EAAAC,KAAA,KAAAgC,EAAA,iCAAA,EAAA,CAAA,aAAAhB,GAAaV,EAAYU,SAC9DV,MAAeU,yCAAYA,+YDb5B,YACK,gBAEDb,SAAeN,qBAJbF,gBAAAA,EAAWS,2HAWoBV,EAAMwC,SAAWvC,EAAYuC,eAC9DrC,wCAEuB,qHAGkBC,EAAuBK,SAAeN"}