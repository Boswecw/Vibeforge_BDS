{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/routes/testing/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { skillRegistry } from '$lib/api/skillRegistry';\n\timport { forgeAgentsClient } from '$lib/api/client';\n\timport type { Skill } from '$lib/api/types';\n\timport { Panel, Input, Select, Button, Badge, Alert, Textarea } from '$lib/components';\n\n\t// Types\n\tinterface TestCase {\n\t\tid: string;\n\t\tname: string;\n\t\tskillId: string;\n\t\tskillName: string;\n\t\tinputs: Record<string, any>;\n\t\texpectedOutput?: string;\n\t\texpectedPattern?: string; // Regex pattern\n\t\texecutionOptions: {\n\t\t\tmodel: string;\n\t\t\ttemperature: number;\n\t\t\tmax_tokens: number;\n\t\t};\n\t\tcreatedAt: Date;\n\t\tlastRun?: Date;\n\t\tlastResult?: TestResult;\n\t}\n\n\tinterface TestResult {\n\t\tpassed: boolean;\n\t\tactualOutput: string;\n\t\texecutionTime: number;\n\t\terror?: string;\n\t\tmatchDetails?: string;\n\t\ttimestamp: Date;\n\t}\n\n\tinterface TestRun {\n\t\tid: string;\n\t\ttestCaseId: string;\n\t\tresult: TestResult;\n\t\ttimestamp: Date;\n\t}\n\n\t// State\n\tlet skills: Skill[] = $state([]);\n\tlet testCases: TestCase[] = $state([]);\n\tlet testHistory: TestRun[] = $state([]);\n\tlet loading = $state(true);\n\tlet error = $state<string | null>(null);\n\n\t// Test case builder\n\tlet selectedSkillId = $state<string>('');\n\tlet testName = $state('');\n\tlet testInputs = $state<Record<string, any>>({});\n\tlet expectedOutput = $state('');\n\tlet expectedPattern = $state('');\n\tlet usePattern = $state(false);\n\tlet selectedModel = $state('gpt-4o-mini');\n\tlet temperature = $state(0.7);\n\tlet maxTokens = $state(4096);\n\n\t// Test execution\n\tlet runningTestId = $state<string | null>(null);\n\tlet selectedTestCase = $state<TestCase | null>(null);\n\n\t// View modes\n\tlet viewMode = $state<'builder' | 'results'>('builder');\n\n\t// Derived\n\tlet selectedSkill = $derived.by(() => {\n\t\treturn skills.find((s) => s.id === selectedSkillId) || null;\n\t});\n\n\tlet skillOptions = $derived.by(() => {\n\t\treturn skills.map((s) => ({\n\t\t\tvalue: s.id,\n\t\t\tlabel: `${s.name} (${s.category})`\n\t\t}));\n\t});\n\n\tlet stats = $derived.by(() => ({\n\t\ttotal: testCases.length,\n\t\tpassed: testCases.filter((tc) => tc.lastResult?.passed === true).length,\n\t\tfailed: testCases.filter((tc) => tc.lastResult?.passed === false).length,\n\t\tnotRun: testCases.filter((tc) => !tc.lastResult).length\n\t}));\n\n\tconst modelOptions = [\n\t\t{ value: 'gpt-4o', label: 'GPT-4o' },\n\t\t{ value: 'gpt-4o-mini', label: 'GPT-4o Mini' },\n\t\t{ value: 'claude-3-5-sonnet-20241022', label: 'Claude 3.5 Sonnet' },\n\t\t{ value: 'claude-3-5-haiku-20241022', label: 'Claude 3.5 Haiku' }\n\t];\n\n\t// Lifecycle\n\tonMount(async () => {\n\t\ttry {\n\t\t\tskills = await skillRegistry.getAllSkills();\n\t\t\tloadTestCases();\n\t\t\tloadTestHistory();\n\t\t\tloading = false;\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load skills';\n\t\t\tloading = false;\n\t\t}\n\t});\n\n\t// Persistence\n\tfunction loadTestCases() {\n\t\tconst saved = localStorage.getItem('vibeforge_test_cases');\n\t\tif (saved) {\n\t\t\ttestCases = JSON.parse(saved, (key, value) => {\n\t\t\t\tif (key === 'createdAt' || key === 'lastRun' || key === 'timestamp') {\n\t\t\t\t\treturn new Date(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction saveTestCases() {\n\t\tlocalStorage.setItem('vibeforge_test_cases', JSON.stringify(testCases));\n\t}\n\n\tfunction loadTestHistory() {\n\t\tconst saved = localStorage.getItem('vibeforge_test_history');\n\t\tif (saved) {\n\t\t\ttestHistory = JSON.parse(saved, (key, value) => {\n\t\t\t\tif (key === 'timestamp') {\n\t\t\t\t\treturn new Date(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction saveTestHistory() {\n\t\tlocalStorage.setItem('vibeforge_test_history', JSON.stringify(testHistory));\n\t}\n\n\t// Test case management\n\tfunction createTestCase() {\n\t\tif (!selectedSkill || !testName.trim()) {\n\t\t\terror = 'Please select a skill and provide a test name';\n\t\t\treturn;\n\t\t}\n\n\t\tconst newTestCase: TestCase = {\n\t\t\tid: `test-${Date.now()}`,\n\t\t\tname: testName,\n\t\t\tskillId: selectedSkill.id,\n\t\t\tskillName: selectedSkill.name,\n\t\t\tinputs: { ...testInputs },\n\t\t\texpectedOutput: usePattern ? undefined : expectedOutput,\n\t\t\texpectedPattern: usePattern ? expectedPattern : undefined,\n\t\t\texecutionOptions: {\n\t\t\t\tmodel: selectedModel,\n\t\t\t\ttemperature,\n\t\t\t\tmax_tokens: maxTokens\n\t\t\t},\n\t\t\tcreatedAt: new Date()\n\t\t};\n\n\t\ttestCases = [...testCases, newTestCase];\n\t\tsaveTestCases();\n\n\t\t// Reset form\n\t\ttestName = '';\n\t\ttestInputs = {};\n\t\texpectedOutput = '';\n\t\texpectedPattern = '';\n\t\terror = null;\n\t}\n\n\tfunction deleteTestCase(id: string) {\n\t\ttestCases = testCases.filter((tc) => tc.id !== id);\n\t\tsaveTestCases();\n\n\t\t// Also remove from history\n\t\ttestHistory = testHistory.filter((th) => th.testCaseId !== id);\n\t\tsaveTestHistory();\n\t}\n\n\t// Test execution\n\tasync function runTest(testCase: TestCase) {\n\t\trunningTestId = testCase.id;\n\t\terror = null;\n\n\t\tconst startTime = Date.now();\n\n\t\ttry {\n\t\t\tconst result = await forgeAgentsClient.invokeSkill(testCase.skillId, {\n\t\t\t\tinputs: testCase.inputs,\n\t\t\t\toptions: testCase.executionOptions\n\t\t\t});\n\n\t\t\tconst executionTime = Date.now() - startTime;\n\t\t\tconst actualOutput = result.output;\n\n\t\t\t// Check if test passed\n\t\t\tlet passed = false;\n\t\t\tlet matchDetails = '';\n\n\t\t\tif (testCase.expectedPattern) {\n\t\t\t\t// Regex pattern matching\n\t\t\t\tconst regex = new RegExp(testCase.expectedPattern, 'i');\n\t\t\t\tpassed = regex.test(actualOutput);\n\t\t\t\tmatchDetails = passed\n\t\t\t\t\t? `Output matched pattern: ${testCase.expectedPattern}`\n\t\t\t\t\t: `Output did not match pattern: ${testCase.expectedPattern}`;\n\t\t\t} else if (testCase.expectedOutput) {\n\t\t\t\t// Exact match (case-insensitive, trimmed)\n\t\t\t\tconst expected = testCase.expectedOutput.trim().toLowerCase();\n\t\t\t\tconst actual = actualOutput.trim().toLowerCase();\n\t\t\t\tpassed = actual.includes(expected) || expected.includes(actual);\n\t\t\t\tmatchDetails = passed\n\t\t\t\t\t? 'Output matched expected result'\n\t\t\t\t\t: 'Output did not match expected result';\n\t\t\t} else {\n\t\t\t\t// No assertion - just check for successful execution\n\t\t\t\tpassed = true;\n\t\t\t\tmatchDetails = 'No assertion defined - execution successful';\n\t\t\t}\n\n\t\t\tconst testResult: TestResult = {\n\t\t\t\tpassed,\n\t\t\t\tactualOutput,\n\t\t\t\texecutionTime,\n\t\t\t\tmatchDetails,\n\t\t\t\ttimestamp: new Date()\n\t\t\t};\n\n\t\t\t// Update test case\n\t\t\ttestCases = testCases.map((tc) => {\n\t\t\t\tif (tc.id === testCase.id) {\n\t\t\t\t\treturn { ...tc, lastRun: new Date(), lastResult: testResult };\n\t\t\t\t}\n\t\t\t\treturn tc;\n\t\t\t});\n\t\t\tsaveTestCases();\n\n\t\t\t// Add to history\n\t\t\tconst testRun: TestRun = {\n\t\t\t\tid: `run-${Date.now()}`,\n\t\t\t\ttestCaseId: testCase.id,\n\t\t\t\tresult: testResult,\n\t\t\t\ttimestamp: new Date()\n\t\t\t};\n\t\t\ttestHistory = [testRun, ...testHistory];\n\t\t\tsaveTestHistory();\n\t\t} catch (err) {\n\t\t\tconst testResult: TestResult = {\n\t\t\t\tpassed: false,\n\t\t\t\tactualOutput: '',\n\t\t\t\texecutionTime: Date.now() - startTime,\n\t\t\t\terror: err instanceof Error ? err.message : 'Execution failed',\n\t\t\t\ttimestamp: new Date()\n\t\t\t};\n\n\t\t\t// Update test case\n\t\t\ttestCases = testCases.map((tc) => {\n\t\t\t\tif (tc.id === testCase.id) {\n\t\t\t\t\treturn { ...tc, lastRun: new Date(), lastResult: testResult };\n\t\t\t\t}\n\t\t\t\treturn tc;\n\t\t\t});\n\t\t\tsaveTestCases();\n\t\t} finally {\n\t\t\trunningTestId = null;\n\t\t}\n\t}\n\n\tasync function runAllTests() {\n\t\tfor (const testCase of testCases) {\n\t\t\tawait runTest(testCase);\n\t\t}\n\t}\n\n\t// Input handling\n\tfunction updateTestInput(paramName: string, value: any) {\n\t\ttestInputs = { ...testInputs, [paramName]: value };\n\t}\n\n\t// Clear history\n\tfunction clearHistory() {\n\t\ttestHistory = [];\n\t\tsaveTestHistory();\n\t}\n</script>\n\n<div class=\"testing-container\">\n\t<!-- Page Header -->\n\t<div class=\"page-header\">\n\t\t<div class=\"header-content\">\n\t\t\t<h1 class=\"page-title\">Skill Testing Lab</h1>\n\t\t\t<p class=\"page-description\">\n\t\t\t\tCreate, run, and manage automated tests for your skills\n\t\t\t</p>\n\t\t</div>\n\n\t\t<div class=\"stats-row\">\n\t\t\t<div class=\"stat-item\">\n\t\t\t\t<span class=\"stat-value\">{stats.total}</span>\n\t\t\t\t<span class=\"stat-label\">Total Tests</span>\n\t\t\t</div>\n\t\t\t<div class=\"stat-item\">\n\t\t\t\t<span class=\"stat-value success\">{stats.passed}</span>\n\t\t\t\t<span class=\"stat-label\">Passed</span>\n\t\t\t</div>\n\t\t\t<div class=\"stat-item\">\n\t\t\t\t<span class=\"stat-value error\">{stats.failed}</span>\n\t\t\t\t<span class=\"stat-label\">Failed</span>\n\t\t\t</div>\n\t\t\t<div class=\"stat-item\">\n\t\t\t\t<span class=\"stat-value warning\">{stats.notRun}</span>\n\t\t\t\t<span class=\"stat-label\">Not Run</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<!-- View Mode Tabs -->\n\t<Panel variant=\"bordered\" padding=\"md\">\n\t\t<div class=\"view-tabs\">\n\t\t\t<Button\n\t\t\t\tvariant={viewMode === 'builder' ? 'primary' : 'ghost'}\n\t\t\t\ton:click={() => (viewMode = 'builder')}\n\t\t\t>\n\t\t\t\tTest Builder\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant={viewMode === 'results' ? 'primary' : 'ghost'}\n\t\t\t\ton:click={() => (viewMode = 'results')}\n\t\t\t>\n\t\t\t\tTest Results\n\t\t\t</Button>\n\t\t</div>\n\t</Panel>\n\n\t{#if error}\n\t\t<Alert variant=\"error\" title=\"Error\">\n\t\t\t{error}\n\t\t</Alert>\n\t{/if}\n\n\t{#if loading}\n\t\t<div class=\"loading-state\">\n\t\t\t<div class=\"spinner\"></div>\n\t\t\t<p>Loading skills...</p>\n\t\t</div>\n\t{:else if viewMode === 'builder'}\n\t\t<!-- Test Builder -->\n\t\t<div class=\"builder-layout\">\n\t\t\t<!-- Left: Create Test -->\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"panel-section\">\n\t\t\t\t\t<h2 class=\"section-title\">Create Test Case</h2>\n\n\t\t\t\t\t<div class=\"form-section\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tlabel=\"Test Name\"\n\t\t\t\t\t\t\tbind:value={testName}\n\t\t\t\t\t\t\tplaceholder=\"e.g., Test code generation for Python\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tlabel=\"Skill to Test\"\n\t\t\t\t\t\t\tbind:value={selectedSkillId}\n\t\t\t\t\t\t\toptions={skillOptions}\n\t\t\t\t\t\t\tplaceholder=\"Select a skill...\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{#if selectedSkill}\n\t\t\t\t\t\t\t<div class=\"skill-info\">\n\t\t\t\t\t\t\t\t<Badge variant=\"info\" size=\"sm\">{selectedSkill.category}</Badge>\n\t\t\t\t\t\t\t\t<p class=\"skill-description\">{selectedSkill.description}</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Skill Inputs -->\n\t\t\t\t\t\t\t<div class=\"inputs-section\">\n\t\t\t\t\t\t\t\t<h3 class=\"subsection-title\">Test Inputs</h3>\n\t\t\t\t\t\t\t\t{#each Object.entries(selectedSkill.inputs) as [paramName, paramDef]}\n\t\t\t\t\t\t\t\t\t<div class=\"input-field\">\n\t\t\t\t\t\t\t\t\t\t{#if paramDef.type === 'string'}\n\t\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={paramName}\n\t\t\t\t\t\t\t\t\t\t\t\tbind:value={testInputs[paramName]}\n\t\t\t\t\t\t\t\t\t\t\t\thelperText={paramDef.description}\n\t\t\t\t\t\t\t\t\t\t\t\trequired={paramDef.required}\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{:else if paramDef.type === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={paramName}\n\t\t\t\t\t\t\t\t\t\t\t\tbind:value={testInputs[paramName]}\n\t\t\t\t\t\t\t\t\t\t\t\thelperText={paramDef.description}\n\t\t\t\t\t\t\t\t\t\t\t\trequired={paramDef.required}\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{:else if paramDef.type === 'boolean'}\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:checked={testInputs[paramName]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{paramName}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{#if paramDef.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"helper-text\">{paramDef.description}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Expected Output -->\n\t\t\t\t\t\t\t<div class=\"assertion-section\">\n\t\t\t\t\t\t\t\t<h3 class=\"subsection-title\">Assertion</h3>\n\n\t\t\t\t\t\t\t\t<label class=\"checkbox-label\">\n\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" bind:checked={usePattern} />\n\t\t\t\t\t\t\t\t\t<span>Use regex pattern matching</span>\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t{#if usePattern}\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Expected Pattern (Regex)\"\n\t\t\t\t\t\t\t\t\t\tbind:value={expectedPattern}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"e.g., function.*calculate\"\n\t\t\t\t\t\t\t\t\t\thelperText=\"Regular expression to match against output\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tlabel=\"Expected Output\"\n\t\t\t\t\t\t\t\t\t\tbind:value={expectedOutput}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter the expected output (or leave empty for no assertion)\"\n\t\t\t\t\t\t\t\t\t\thelperText=\"Test will check if output contains this text\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Execution Options -->\n\t\t\t\t\t\t\t<div class=\"options-section\">\n\t\t\t\t\t\t\t\t<h3 class=\"subsection-title\">Execution Options</h3>\n\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tlabel=\"Model\"\n\t\t\t\t\t\t\t\t\tbind:value={selectedModel}\n\t\t\t\t\t\t\t\t\toptions={modelOptions}\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel=\"Temperature\"\n\t\t\t\t\t\t\t\t\tbind:value={temperature}\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel=\"Max Tokens\"\n\t\t\t\t\t\t\t\t\tbind:value={maxTokens}\n\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\tmax={32000}\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button variant=\"primary\" fullWidth on:click={createTestCase}>\n\t\t\t\t\t\t\t\tCreate Test Case\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Panel>\n\n\t\t\t<!-- Right: Test Cases List -->\n\t\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t\t<div class=\"panel-section\">\n\t\t\t\t\t<div class=\"section-header\">\n\t\t\t\t\t\t<h2 class=\"section-title\">Test Cases ({testCases.length})</h2>\n\t\t\t\t\t\t{#if testCases.length > 0}\n\t\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" on:click={runAllTests}>\n\t\t\t\t\t\t\t\tRun All Tests\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if testCases.length === 0}\n\t\t\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t\t\t<p class=\"empty-message\">No test cases created yet.</p>\n\t\t\t\t\t\t\t<p class=\"empty-hint\">Create a test case on the left to get started.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"test-cases-list\">\n\t\t\t\t\t\t\t{#each testCases as testCase (testCase.id)}\n\t\t\t\t\t\t\t\t<div class=\"test-case-card\">\n\t\t\t\t\t\t\t\t\t<div class=\"test-case-header\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"test-info\">\n\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"test-name\">{testCase.name}</h3>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"test-meta\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"default\" size=\"sm\">{testCase.skillName}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t{#if testCase.lastResult}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={testCase.lastResult.passed ? 'success' : 'error'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{testCase.lastResult.passed ? '✓ Passed' : '✗ Failed'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"warning\" size=\"sm\">Not Run</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"test-actions\">\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\tloading={runningTestId === testCase.id}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => runTest(testCase)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tRun\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => deleteTestCase(testCase.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{#if testCase.lastResult}\n\t\t\t\t\t\t\t\t\t\t<div class=\"test-result\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"result-details\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"result-label\">Execution Time:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"result-value\">{testCase.lastResult.executionTime}ms</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"result-details\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"result-label\">Match:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"result-value\">{testCase.lastResult.matchDetails}</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{#if testCase.lastResult.error}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"result-error\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"result-label\">Error:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"error-message\">{testCase.lastResult.error}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</Panel>\n\t\t</div>\n\t{:else}\n\t\t<!-- Test Results -->\n\t\t<Panel variant=\"bordered\" padding=\"lg\">\n\t\t\t<div class=\"panel-section\">\n\t\t\t\t<div class=\"section-header\">\n\t\t\t\t\t<h2 class=\"section-title\">Test History ({testHistory.length})</h2>\n\t\t\t\t\t{#if testHistory.length > 0}\n\t\t\t\t\t\t<Button variant=\"danger\" size=\"sm\" on:click={clearHistory}>Clear History</Button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t{#if testHistory.length === 0}\n\t\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t\t<p class=\"empty-message\">No test results yet.</p>\n\t\t\t\t\t\t<p class=\"empty-hint\">Run some tests to see results here.</p>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"history-list\">\n\t\t\t\t\t\t{#each testHistory as run (run.id)}\n\t\t\t\t\t\t\t{@const testCase = testCases.find((tc) => tc.id === run.testCaseId)}\n\t\t\t\t\t\t\t<div class=\"history-item\">\n\t\t\t\t\t\t\t\t<div class=\"history-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"history-info\">\n\t\t\t\t\t\t\t\t\t\t<h3 class=\"history-title\">{testCase?.name || 'Unknown Test'}</h3>\n\t\t\t\t\t\t\t\t\t\t<div class=\"history-meta\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"timestamp\"\n\t\t\t\t\t\t\t\t\t\t\t\t>{run.timestamp.toLocaleString('en-US', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdateStyle: 'short',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttimeStyle: 'medium'\n\t\t\t\t\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant={run.result.passed ? 'success' : 'error'} size=\"sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t{run.result.passed ? '✓ Passed' : '✗ Failed'}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"execution-time\">{run.result.executionTime}ms</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"history-details\">\n\t\t\t\t\t\t\t\t\t<div class=\"detail-row\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"detail-label\">Match Details:</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"detail-value\">{run.result.matchDetails}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{#if run.result.error}\n\t\t\t\t\t\t\t\t\t\t<div class=\"detail-row error\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"detail-label\">Error:</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"detail-value\">{run.result.error}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<div class=\"detail-row\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"detail-label\">Output:</span>\n\t\t\t\t\t\t\t\t\t\t<pre class=\"output-preview\">{run.result.actualOutput.slice(0, 200)}{run\n\t\t\t\t\t\t\t\t\t\t\t\t.result.actualOutput.length > 200\n\t\t\t\t\t\t\t\t\t\t\t\t? '...'\n\t\t\t\t\t\t\t\t\t\t\t\t: ''}</pre>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</Panel>\n\t{/if}\n</div>\n\n<style>\n\t/* ═══════════════════════════════════════════════════════════════════════\n     Testing Container\n     ═══════════════════════════════════════════════════════════════════════ */\n\n\t.testing-container {\n\t\tmax-width: 1600px;\n\t\tmargin: 0 auto;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xl);\n\t}\n\n\t/* Page Header */\n\t.page-header {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.header-content {\n\t\tflex: 1;\n\t}\n\n\t.page-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 2.5rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-sm) 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.page-description {\n\t\tfont-size: 1.125rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t.stats-row {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-xl);\n\t\tflex-wrap: wrap;\n\t}\n\n\t.stat-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xs);\n\t}\n\n\t.stat-value {\n\t\tfont-size: 2rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--color-text-primary);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t.stat-value.success {\n\t\tcolor: var(--color-success);\n\t}\n\n\t.stat-value.error {\n\t\tcolor: var(--color-error);\n\t}\n\n\t.stat-value.warning {\n\t\tcolor: var(--color-warning);\n\t}\n\n\t.stat-label {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t/* View Tabs */\n\t.view-tabs {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t/* Loading State */\n\t.loading-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-lg);\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\ttext-align: center;\n\t}\n\n\t.spinner {\n\t\twidth: 48px;\n\t\theight: 48px;\n\t\tborder: 4px solid var(--color-border-subtle);\n\t\tborder-top-color: var(--color-brass);\n\t\tborder-radius: 50%;\n\t\tanimation: spin 0.8s linear infinite;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Builder Layout */\n\t.builder-layout {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgap: var(--spacing-xl);\n\t\talign-items: start;\n\t}\n\n\t/* Panel Section */\n\t.panel-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.section-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.section-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.subsection-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0 0 var(--spacing-md) 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t/* Form Section */\n\t.form-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.skill-info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-3);\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t.skill-description {\n\t\tfont-size: 0.9375rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tline-height: 1.6;\n\t\tmargin: 0;\n\t}\n\n\t.inputs-section,\n\t.assertion-section,\n\t.options-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-3);\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t.input-field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t.checkbox-label {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xs);\n\t\tfont-size: 0.9375rem;\n\t\tcolor: var(--color-text-primary);\n\t\tcursor: pointer;\n\t}\n\n\t.checkbox-label input[type='checkbox'] {\n\t\tmargin-right: var(--spacing-sm);\n\t}\n\n\t.helper-text {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\tmargin-left: var(--spacing-lg);\n\t}\n\n\t/* Empty State */\n\t.empty-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-md);\n\t\tpadding: var(--spacing-3xl) var(--spacing-xl);\n\t\ttext-align: center;\n\t}\n\n\t.empty-message {\n\t\tfont-size: 1.125rem;\n\t\tcolor: var(--color-text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t.empty-hint {\n\t\tfont-size: 0.9375rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\tmargin: 0;\n\t}\n\n\t/* Test Cases List */\n\t.test-cases-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.test-case-card {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-3);\n\t\tborder-radius: var(--radius-md);\n\t\tborder: 1px solid var(--color-border-subtle);\n\t}\n\n\t.test-case-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.test-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t.test-name {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.test-meta {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-xs);\n\t\tflex-wrap: wrap;\n\t}\n\n\t.test-actions {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t.test-result {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-2);\n\t\tborder-radius: var(--radius-sm);\n\t}\n\n\t.result-details {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-sm);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.result-label {\n\t\tcolor: var(--color-text-tertiary);\n\t\tfont-weight: 500;\n\t}\n\n\t.result-value {\n\t\tcolor: var(--color-text-secondary);\n\t}\n\n\t.result-error {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xs);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.error-message {\n\t\tcolor: var(--color-error);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t/* History List */\n\t.history-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.history-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-md);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-3);\n\t\tborder-radius: var(--radius-md);\n\t\tborder: 1px solid var(--color-border-subtle);\n\t}\n\n\t.history-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: var(--spacing-md);\n\t}\n\n\t.history-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t.history-title {\n\t\tfont-family: var(--font-family-heading);\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 300;\n\t\tcolor: var(--color-text-primary);\n\t\tmargin: 0;\n\t\tletter-spacing: 0.02em;\n\t}\n\n\t.history-meta {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-md);\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t}\n\n\t.timestamp {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-tertiary);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t.execution-time {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-brass);\n\t\tfont-family: var(--font-family-mono);\n\t}\n\n\t.history-details {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-sm);\n\t\tpadding: var(--spacing-md);\n\t\tbackground-color: var(--color-surface-2);\n\t\tborder-radius: var(--radius-sm);\n\t}\n\n\t.detail-row {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--spacing-xs);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.detail-row.error {\n\t\tcolor: var(--color-error);\n\t}\n\n\t.detail-label {\n\t\tcolor: var(--color-text-tertiary);\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tfont-size: 0.75rem;\n\t}\n\n\t.detail-value {\n\t\tcolor: var(--color-text-secondary);\n\t}\n\n\t.output-preview {\n\t\tfont-family: var(--font-family-mono);\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-primary);\n\t\tbackground-color: var(--color-surface-1);\n\t\tpadding: var(--spacing-sm);\n\t\tborder-radius: var(--radius-sm);\n\t\toverflow-x: auto;\n\t\twhite-space: pre-wrap;\n\t\tword-break: break-word;\n\t\tmargin: 0;\n\t}\n\n\t/* Responsive */\n\t@media (max-width: 1024px) {\n\t\t.builder-layout {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.page-title {\n\t\t\tfont-size: 2rem;\n\t\t}\n\n\t\t.stats-row {\n\t\t\tflex-direction: column;\n\t\t\tgap: var(--spacing-md);\n\t\t}\n\n\t\t.view-tabs {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t.section-header {\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t}\n\t}\n</style>\n"],"names":["testCases","stats","total","length","passed","filter","tc","lastResult","failed","notRun","$$renderer","push","$.escape","variant"],"mappings":"+KA4CKA,EAAqB,GAmCrBC,EAAK,CACRC,MAAOF,EAAUG,OACjBC,OAAQJ,EAAUK,OAAQC,IAAiC,IAA1BA,EAAGC,YAAYH,QAAiBD,OACjEK,OAAQR,EAAUK,OAAQC,IAAiC,IAA1BA,EAAGC,YAAYH,QAAkBD,OAClEM,OAAQT,EAAUK,OAAQC,IAAQA,EAAGC,YAAYJ,2BA0NrBO,EAAAC,KAAA,0ZAAAC,EAAAX,EAAMC,qKAAKU,EAIHX,EAAMG,+JAAMQ,EAIdX,EAAMO,iKAAMI,EAIVX,EAAMQ,kMAU/BI,QAAyB,iHAMzBA,QAAqC"}