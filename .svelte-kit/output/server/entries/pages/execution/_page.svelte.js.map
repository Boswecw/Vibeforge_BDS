{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/stores/execution.svelte.ts","../../../../../../src/lib/services/executionService.ts","../../../../../../src/lib/components/panels/execution/ExecutionRequest.svelte","../../../../../../src/lib/components/panels/execution/CodeGeneration.svelte","../../../../../../src/routes/execution/+page.svelte","../../../../../../src/lib/components/panels/execution/ExecutionHistory.svelte","../../../../../../src/lib/components/panels/execution/TestResults.svelte","../../../../../../src/lib/components/panels/execution/FileChanges.svelte","../../../../../../src/lib/components/panels/execution/MetricsDisplay.svelte"],"sourcesContent":["/**\n * Execution Store\n *\n * Manages execution agent sessions using Svelte 5 runes.\n */\n\nimport type {\n\tExecutionSession,\n\tExecutionRequest,\n\tExecutionResult,\n\tPAORTStage,\n\tStageOutput\n} from '$lib/types/agents';\nimport { SessionStatus, PAORTStage as Stage } from '$lib/types/agents';\n\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n// Execution Store State\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\ninterface ExecutionState {\n\tsessions: ExecutionSession[];\n\tcurrentSession: ExecutionSession | null;\n\tisExecuting: boolean;\n\tstreamingOutput: string;\n\tcurrentStage: PAORTStage | null;\n}\n\nconst state = $state<ExecutionState>({\n\tsessions: [],\n\tcurrentSession: null,\n\tisExecuting: false,\n\tstreamingOutput: '',\n\tcurrentStage: null\n});\n\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n// Execution Store\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nexport const executionStore = {\n\t// Getters\n\tget sessions() {\n\t\treturn state.sessions;\n\t},\n\n\tget currentSession() {\n\t\treturn state.currentSession;\n\t},\n\n\tget isExecuting() {\n\t\treturn state.isExecuting;\n\t},\n\n\tget streamingOutput() {\n\t\treturn state.streamingOutput;\n\t},\n\n\tget currentStage() {\n\t\treturn state.currentStage;\n\t},\n\n\tget activeSessions() {\n\t\treturn state.sessions.filter(\n\t\t\t(s) => s.status === SessionStatus.RUNNING || s.status === SessionStatus.PENDING\n\t\t);\n\t},\n\n\tget completedSessions() {\n\t\treturn state.sessions.filter((s) => s.status === SessionStatus.COMPLETED);\n\t},\n\n\tget failedSessions() {\n\t\treturn state.sessions.filter((s) => s.status === SessionStatus.FAILED);\n\t},\n\n\t// Actions\n\tcreateSession(request: ExecutionRequest): ExecutionSession {\n\t\tconst session: ExecutionSession = {\n\t\t\tid: generateSessionId(),\n\t\t\ttype: 'execution',\n\t\t\tstatus: SessionStatus.PENDING,\n\t\t\tcreatedAt: new Date(),\n\t\t\trequest,\n\t\t\tstages: {}\n\t\t};\n\n\t\tstate.sessions = [...state.sessions, session];\n\t\tstate.currentSession = session;\n\n\t\treturn session;\n\t},\n\n\tstartSession(sessionId: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.RUNNING;\n\t\tsession.startedAt = new Date();\n\t\tsession.currentStage = Stage.PLAN;\n\n\t\tstate.currentStage = Stage.PLAN;\n\t\tstate.isExecuting = true;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tupdateStageOutput(sessionId: string, stage: PAORTStage, output: StageOutput): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\t// Update stage output\n\t\tswitch (stage) {\n\t\t\tcase Stage.PLAN:\n\t\t\t\tsession.stages.plan = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.ACT:\n\t\t\t\tsession.stages.act = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.OBSERVE:\n\t\t\t\tsession.stages.observe = output;\n\t\t\t\tbreak;\n\t\t\tcase Stage.REFLECT:\n\t\t\t\tsession.stages.reflect = output;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tappendStreamingOutput(content: string): void {\n\t\tstate.streamingOutput += content;\n\t},\n\n\tclearStreamingOutput(): void {\n\t\tstate.streamingOutput = '';\n\t},\n\n\tadvanceStage(sessionId: string, nextStage: PAORTStage | null): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tif (nextStage) {\n\t\t\tsession.currentStage = nextStage;\n\t\t\tstate.currentStage = nextStage;\n\t\t\tstate.streamingOutput = '';\n\t\t} else {\n\t\t\tsession.currentStage = undefined;\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tcompleteSession(sessionId: string, result: ExecutionResult): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.COMPLETED;\n\t\tsession.completedAt = new Date();\n\t\tsession.result = result;\n\t\tsession.currentStage = undefined;\n\n\t\tstate.currentStage = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tfailSession(sessionId: string, error: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.FAILED;\n\t\tsession.completedAt = new Date();\n\t\tsession.error = error;\n\t\tsession.currentStage = undefined;\n\n\t\tstate.currentStage = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tcancelSession(sessionId: string): void {\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (!session) return;\n\n\t\tsession.status = SessionStatus.CANCELLED;\n\t\tsession.completedAt = new Date();\n\t\tsession.currentStage = undefined;\n\n\t\tif (state.currentSession?.id === sessionId) {\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t\tstate.streamingOutput = '';\n\t\t}\n\n\t\t// Trigger reactivity\n\t\tstate.sessions = [...state.sessions];\n\t},\n\n\tsetCurrentSession(sessionId: string | null): void {\n\t\tif (sessionId === null) {\n\t\t\tstate.currentSession = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst session = state.sessions.find((s) => s.id === sessionId);\n\t\tif (session) {\n\t\t\tstate.currentSession = session;\n\t\t}\n\t},\n\n\tdeleteSession(sessionId: string): void {\n\t\tstate.sessions = state.sessions.filter((s) => s.id !== sessionId);\n\n\t\tif (state.currentSession?.id === sessionId) {\n\t\t\tstate.currentSession = null;\n\t\t\tstate.currentStage = null;\n\t\t\tstate.isExecuting = false;\n\t\t\tstate.streamingOutput = '';\n\t\t}\n\t},\n\n\tclearAll(): void {\n\t\tstate.sessions = [];\n\t\tstate.currentSession = null;\n\t\tstate.isExecuting = false;\n\t\tstate.streamingOutput = '';\n\t\tstate.currentStage = null;\n\t}\n};\n\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n// Helper Functions\n// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nfunction generateSessionId(): string {\n\treturn `execution_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n","/**\n * Execution Service\n *\n * Business logic for execution agent operations.\n */\n\nimport type { ExecutionRequest, ExecutionResult, StageOutput } from '$lib/types/agents';\nimport { PAORTStage } from '$lib/types/agents';\nimport { executionStore } from '$lib/stores/execution.svelte';\nimport { streamingService } from './streaming';\nimport { classifyError, type AppError } from '$lib/utils/errors';\n\nconst API_BASE_URL = 'http://localhost:8787';\n\nexport async function startExecutionSession(\n\trequest: ExecutionRequest\n): Promise<{ success: boolean; sessionId?: string; error?: AppError }> {\n\ttry {\n\t\t// Start session on backend\n\t\tconst startResponse = await fetch(`${API_BASE_URL}/api/v1/bds/execution/start`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tplan: request.plan || '',\n\t\t\t\tlanguage: request.language || 'typescript',\n\t\t\t\tframework: request.framework || ''\n\t\t\t})\n\t\t});\n\n\t\tif (!startResponse.ok) {\n\t\t\tconst error = await startResponse.json();\n\t\t\tconst appError = classifyError(new Error(error.detail || 'Failed to start session'));\n\t\t\treturn { success: false, error: appError };\n\t\t}\n\n\t\tconst { sessionId } = await startResponse.json();\n\n\t\t// Create local session with backend session ID\n\t\tconst session = executionStore.createSession(request);\n\t\tsession.id = sessionId;\n\n\t\texecutionStore.startSession(session.id);\n\n\t\tconst streamUrl = `${API_BASE_URL}/api/v1/bds/execution/${sessionId}/stream`;\n\n\t\tstreamingService.subscribe(streamUrl, {\n\t\t\tonChunk: (content: string) => {\n\t\t\t\texecutionStore.appendStreamingOutput(content);\n\t\t\t},\n\n\t\t\tonStageStart: (stage: string) => {\n\t\t\t\tconst paortStage = stage as PAORTStage;\n\t\t\t\texecutionStore.advanceStage(session.id, paortStage);\n\t\t\t},\n\n\t\t\tonStageEnd: (stage: string, output: unknown) => {\n\t\t\t\tconst paortStage = stage as PAORTStage;\n\t\t\t\tconst stageOutput = output as StageOutput;\n\t\t\t\texecutionStore.updateStageOutput(session.id, paortStage, stageOutput);\n\t\t\t\texecutionStore.clearStreamingOutput();\n\t\t\t},\n\n\t\t\tonComplete: (result: unknown) => {\n\t\t\t\tconst executionResult = result as ExecutionResult;\n\t\t\t\texecutionStore.completeSession(session.id, executionResult);\n\t\t\t},\n\n\t\t\tonError: (error: AppError) => {\n\t\t\t\texecutionStore.failSession(session.id, error.message);\n\t\t\t}\n\t\t});\n\n\t\treturn { success: true, sessionId: session.id };\n\t} catch (error) {\n\t\tconst appError = classifyError(error);\n\t\treturn { success: false, error: appError };\n\t}\n}\n\nexport function cancelExecutionSession(sessionId: string): void {\n\texecutionStore.cancelSession(sessionId);\n}\n\nexport function deleteExecutionSession(sessionId: string): void {\n\texecutionStore.deleteSession(sessionId);\n}\n","<script lang=\"ts\">\n\timport Button from '$lib/components/Button.svelte';\n\timport Alert from '$lib/components/Alert.svelte';\n\timport Badge from '$lib/components/Badge.svelte';\n\timport { startExecutionSession } from '$lib/services/executionService';\n\timport { executionStore } from '$lib/stores/execution.svelte';\n\timport type { ExecutionRequest as ExecutionRequestType, PlanningDeliverable } from '$lib/types/agents';\n\timport type { AppError } from '$lib/utils/errors';\n\n\tinterface Props {\n\t\tplanDeliverable?: PlanningDeliverable;\n\t\tplanSessionId?: string;\n\t}\n\n\tlet { planDeliverable, planSessionId }: Props = $props();\n\n\tlet error = $state<AppError | null>(null);\n\tlet isSubmitting = $state(false);\n\tlet runTests = $state(true);\n\tlet generateDocs = $state(false);\n\tlet autoCommit = $state(false);\n\n\tconst isExecuting = $derived(executionStore.isExecuting);\n\n\tasync function handleExecute(): Promise<void> {\n\t\tif (!planDeliverable || !planSessionId) {\n\t\t\treturn;\n\t\t}\n\n\t\terror = null;\n\t\tisSubmitting = true;\n\n\t\tconst request: ExecutionRequestType = {\n\t\t\tplanSessionId,\n\t\t\tplan: planDeliverable,\n\t\t\toptions: {\n\t\t\t\trunTests,\n\t\t\t\tgenerateDocs,\n\t\t\t\tautoCommit\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\tconst result = await startExecutionSession(request);\n\n\t\t\tif (!result.success && result.error) {\n\t\t\t\terror = result.error;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('Execution error:', err);\n\t\t} finally {\n\t\t\tisSubmitting = false;\n\t\t}\n\t}\n</script>\n\n<div class=\"execution-request\">\n\t{#if error}\n\t\t<Alert variant=\"error\">\n\t\t\t{error.userMessage}\n\t\t</Alert>\n\t{/if}\n\n\t{#if planDeliverable}\n\t\t<div class=\"plan-summary\">\n\t\t\t<h3>{planDeliverable.plan.title}</h3>\n\t\t\t<p class=\"plan-overview\">{planDeliverable.plan.overview}</p>\n\n\t\t\t<div class=\"plan-meta\">\n\t\t\t\t<Badge variant=\"info\">{planDeliverable.plan.steps.length} steps</Badge>\n\t\t\t\t<Badge variant=\"info\">{planDeliverable.plan.estimatedEffort}</Badge>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"execution-options\">\n\t\t\t<h4>Execution Options</h4>\n\n\t\t\t<label class=\"option\">\n\t\t\t\t<input type=\"checkbox\" bind:checked={runTests} disabled={isExecuting} />\n\t\t\t\t<span>Run tests after code generation</span>\n\t\t\t</label>\n\n\t\t\t<label class=\"option\">\n\t\t\t\t<input type=\"checkbox\" bind:checked={generateDocs} disabled={isExecuting} />\n\t\t\t\t<span>Generate documentation</span>\n\t\t\t</label>\n\n\t\t\t<label class=\"option\">\n\t\t\t\t<input type=\"checkbox\" bind:checked={autoCommit} disabled={isExecuting} />\n\t\t\t\t<span>Auto-commit changes (if tests pass)</span>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class=\"actions\">\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tonclick={handleExecute}\n\t\t\t\tdisabled={isExecuting || isSubmitting}\n\t\t\t\tloading={isSubmitting}\n\t\t\t>\n\t\t\t\t{isSubmitting ? 'Starting Execution...' : 'Execute Plan'}\n\t\t\t</Button>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p>Load a plan from the Planning Agent to begin execution.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.execution-request {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24px;\n\t}\n\n\t.plan-summary {\n\t\tpadding: 16px;\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n\n\t.plan-summary h3 {\n\t\tmargin: 0 0 12px 0;\n\t\tcolor: var(--color-text);\n\t\tfont-size: 1.125rem;\n\t}\n\n\t.plan-overview {\n\t\tcolor: var(--color-text-muted);\n\t\tline-height: 1.6;\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.plan-meta {\n\t\tdisplay: flex;\n\t\tgap: 8px;\n\t}\n\n\t.execution-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t}\n\n\t.execution-options h4 {\n\t\tmargin: 0 0 8px 0;\n\t\tcolor: var(--color-text);\n\t\tfont-size: 1rem;\n\t}\n\n\t.option {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12px;\n\t\tcursor: pointer;\n\t\tpadding: 12px;\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.option:hover:not(:has(input:disabled)) {\n\t\tborder-color: var(--color-brass);\n\t\tbackground: var(--color-surface-alt);\n\t}\n\n\t.option input[type='checkbox'] {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tcursor: pointer;\n\t}\n\n\t.option input[type='checkbox']:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: 0.5;\n\t}\n\n\t.option span {\n\t\tcolor: var(--color-text);\n\t\tfont-size: 0.9375rem;\n\t}\n\n\t.actions {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t}\n\n\t.empty-state {\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t\tcolor: var(--color-text-muted);\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Button from '$lib/components/Button.svelte';\n\timport type { FileModification, FileCreation } from '$lib/types/agents';\n\n\tinterface CodeOutput {\n\t\tfilesModified: FileModification[];\n\t\tfilesCreated: FileCreation[];\n\t\tfilesDeleted: string[];\n\t}\n\n\tinterface Props {\n\t\tcode: CodeOutput | string;\n\t\tisStreaming: boolean;\n\t\tlanguage?: string;\n\t}\n\n\tlet { code, isStreaming, language = 'typescript' }: Props = $props();\n\n\tlet codeContainer: HTMLPreElement;\n\n\t// Type guard for CodeOutput\n\tfunction isCodeOutput(value: CodeOutput | string): value is CodeOutput {\n\t\treturn typeof value === 'object' && value !== null && 'filesModified' in value;\n\t}\n\n\t// Combine all code from created and modified files for display\n\t$effect(() => {\n\t\t// Effect for syntax highlighting if needed in the future\n\t});\n\n\tfunction getCodeContent(): string {\n\t\t// If code is a string (streaming), return it directly\n\t\tif (typeof code === 'string') {\n\t\t\treturn code;\n\t\t}\n\n\t\t// Otherwise, build content from CodeOutput\n\t\tconst sections: string[] = [];\n\t\t\n\t\tif (code.filesCreated?.length > 0) {\n\t\t\tfor (const file of code.filesCreated) {\n\t\t\t\tsections.push(`// === ${file.path} (new file) ===\\n${file.content}`);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (code.filesModified?.length > 0) {\n\t\t\tfor (const file of code.filesModified) {\n\t\t\t\tsections.push(`// === ${file.path} (modified) ===\\n${file.diff}`);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn sections.join('\\n\\n');\n\t}\n\n\tfunction hasContent(): boolean {\n\t\tif (typeof code === 'string') {\n\t\t\treturn code.length > 0;\n\t\t}\n\t\treturn (code.filesCreated?.length ?? 0) > 0 || (code.filesModified?.length ?? 0) > 0;\n\t}\n\n\tasync function copyCode(): Promise<void> {\n\t\ttry {\n\t\t\tawait navigator.clipboard.writeText(getCodeContent());\n\t\t\t// TODO: Show success toast\n\t\t} catch (err) {\n\t\t\tconsole.error('Failed to copy code:', err);\n\t\t}\n\t}\n</script>\n\n<div class=\"code-generation\">\n\t<div class=\"code-header\">\n\t\t<h4>Generated Code</h4>\n\t\t<div class=\"code-actions\">\n\t\t\t<Button variant=\"secondary\" size=\"sm\" onclick={copyCode} disabled={!hasContent()}>\n\t\t\t\tCopy\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n\n\t{#if code || isStreaming}\n\t\t<div class=\"code-container\" class:streaming={isStreaming}>\n\t\t\t<pre bind:this={codeContainer} class=\"code-block language-{language}\"><code>{getCodeContent()}</code></pre>\n\n\t\t\t{#if isStreaming}\n\t\t\t\t<div class=\"streaming-indicator\">\n\t\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t\t<span>Generating code...</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p>Code will appear here when execution starts.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.code-generation {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 16px;\n\t}\n\n\t.code-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.code-header h4 {\n\t\tmargin: 0;\n\t\tcolor: var(--color-brass);\n\t\tfont-size: 1rem;\n\t}\n\n\t.code-actions {\n\t\tdisplay: flex;\n\t\tgap: 8px;\n\t}\n\n\t.code-container {\n\t\tposition: relative;\n\t\tbackground: var(--color-bg);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t\toverflow: hidden;\n\t}\n\n\t.code-container.streaming {\n\t\tborder-color: var(--color-brass);\n\t}\n\n\t.code-block {\n\t\tmargin: 0;\n\t\tpadding: 16px;\n\t\tfont-family: 'JetBrains Mono', monospace;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.6;\n\t\tcolor: var(--color-text);\n\t\tmax-height: 600px;\n\t\toverflow-y: auto;\n\t\twhite-space: pre;\n\t\toverflow-x: auto;\n\t}\n\n\t.streaming-indicator {\n\t\tdisplay: flex;\n\t\tgap: 8px;\n\t\talign-items: center;\n\t\tpadding: 12px 16px;\n\t\tbackground: rgba(193, 151, 69, 0.05);\n\t\tborder-top: 1px solid var(--color-border);\n\t}\n\n\t.dot {\n\t\twidth: 8px;\n\t\theight: 8px;\n\t\tbackground: var(--color-brass);\n\t\tborder-radius: 50%;\n\t\tanimation: pulse-dot 1.4s ease-in-out infinite;\n\t}\n\n\t.dot:nth-child(1) {\n\t\tanimation-delay: 0s;\n\t}\n\n\t.dot:nth-child(2) {\n\t\tanimation-delay: 0.2s;\n\t}\n\n\t.dot:nth-child(3) {\n\t\tanimation-delay: 0.4s;\n\t}\n\n\t@keyframes pulse-dot {\n\t\t0%,\n\t\t80%,\n\t\t100% {\n\t\t\topacity: 0.3;\n\t\t\ttransform: scale(1);\n\t\t}\n\t\t40% {\n\t\t\topacity: 1;\n\t\t\ttransform: scale(1.2);\n\t\t}\n\t}\n\n\t.streaming-indicator span {\n\t\tcolor: var(--color-brass);\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.empty-state {\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t\tcolor: var(--color-text-muted);\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n\n\t/* Custom scrollbar for code block */\n\t.code-block::-webkit-scrollbar {\n\t\twidth: 8px;\n\t\theight: 8px;\n\t}\n\n\t.code-block::-webkit-scrollbar-track {\n\t\tbackground: var(--color-surface);\n\t}\n\n\t.code-block::-webkit-scrollbar-thumb {\n\t\tbackground: var(--color-border-dark);\n\t\tborder-radius: 4px;\n\t}\n\n\t.code-block::-webkit-scrollbar-thumb:hover {\n\t\tbackground: var(--color-brass);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { executionStore } from '$lib/stores/execution.svelte';\n\timport ErrorBoundary from '$lib/components/ErrorBoundary.svelte';\n\timport Panel from '$lib/components/Panel.svelte';\n\timport { SessionStatus } from '$lib/types/agents';\n\timport ExecutionRequest from '$lib/components/panels/execution/ExecutionRequest.svelte';\n\timport CodeGeneration from '$lib/components/panels/execution/CodeGeneration.svelte';\n\timport TestResults from '$lib/components/panels/execution/TestResults.svelte';\n\timport MetricsDisplay from '$lib/components/panels/execution/MetricsDisplay.svelte';\n\timport FileChanges from '$lib/components/panels/execution/FileChanges.svelte';\n\timport ExecutionHistory from '$lib/components/panels/execution/ExecutionHistory.svelte';\n\n\tconst currentSession = $derived(executionStore.currentSession);\n\tconst isExecuting = $derived(executionStore.isExecuting);\n\tconst streamingOutput = $derived(executionStore.streamingOutput);\n</script>\n\n<ErrorBoundary>\n\t<div class=\"execution-page\">\n\t\t<header class=\"page-header\">\n\t\t\t<h1>Execution Agent</h1>\n\t\t\t<p class=\"text-muted\">Execute code generation and implementation tasks</p>\n\t\t</header>\n\n\t\t<div class=\"content-grid\">\n\t\t\t<div class=\"left-column\">\n\t\t\t\t<Panel title=\"New Execution Request\">\n\t\t\t\t\t<ExecutionRequest />\n\t\t\t\t</Panel>\n\n\t\t\t\t{#if currentSession}\n\t\t\t\t\t<Panel title=\"Execution History\" class=\"mt-6\">\n\t\t\t\t\t\t<ExecutionHistory />\n\t\t\t\t\t</Panel>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"right-column\">\n\t\t\t\t{#if currentSession}\n\t\t\t\t\t{#if currentSession.status === SessionStatus.RUNNING}\n\t\t\t\t\t\t<Panel title=\"Execution in Progress\">\n\t\t\t\t\t\t\t{#if streamingOutput}\n\t\t\t\t\t\t\t\t<CodeGeneration code={streamingOutput} isStreaming={isExecuting} />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div class=\"progress-message\">\n\t\t\t\t\t\t\t\t\t<div class=\"spinner\"></div>\n\t\t\t\t\t\t\t\t\t<p>Initializing execution...</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{:else if currentSession.status === SessionStatus.COMPLETED && currentSession.result}\n\t\t\t\t\t\t<Panel title=\"Execution Complete\">\n\t\t\t\t\t\t\t<div class=\"results-section\">\n\t\t\t\t\t\t\t\t{#if currentSession.result.code}\n\t\t\t\t\t\t\t\t\t<div class=\"section-block\">\n\t\t\t\t\t\t\t\t\t\t<h3>Generated Code</h3>\n\t\t\t\t\t\t\t\t\t\t<CodeGeneration\n\t\t\t\t\t\t\t\t\t\t\tcode={currentSession.result.code}\n\t\t\t\t\t\t\t\t\t\t\tisStreaming={false}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if currentSession.result.tests}\n\t\t\t\t\t\t\t\t\t<div class=\"section-block\">\n\t\t\t\t\t\t\t\t\t\t<h3>Test Results</h3>\n\t\t\t\t\t\t\t\t\t\t<TestResults results={currentSession.result.tests} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if currentSession.result.code?.filesModified && currentSession.result.code.filesModified.length > 0}\n\t\t\t\t\t\t\t\t\t<div class=\"section-block\">\n\t\t\t\t\t\t\t\t\t\t<h3>File Changes</h3>\n\t\t\t\t\t\t\t\t\t\t<FileChanges changes={currentSession.result.code.filesModified} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if currentSession.result.metrics}\n\t\t\t\t\t\t\t\t\t<div class=\"section-block\">\n\t\t\t\t\t\t\t\t\t\t<h3>Execution Metrics</h3>\n\t\t\t\t\t\t\t\t\t\t<MetricsDisplay metrics={currentSession.result.metrics} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{:else if currentSession.status === SessionStatus.FAILED}\n\t\t\t\t\t\t<Panel title=\"Execution Failed\">\n\t\t\t\t\t\t\t<div class=\"error-state\">\n\t\t\t\t\t\t\t\t<svg width=\"48\" height=\"48\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<h3>Execution Failed</h3>\n\t\t\t\t\t\t\t\t{#if currentSession.error}\n\t\t\t\t\t\t\t\t\t<p class=\"error-message\">{currentSession.error}</p>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Panel>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<Panel title=\"Welcome\">\n\t\t\t\t\t\t<div class=\"empty-state\">\n\t\t\t\t\t\t\t<div class=\"empty-icon\">‚ö°</div>\n\t\t\t\t\t\t\t<h2>Start an Execution Session</h2>\n\t\t\t\t\t\t\t<p>Load a plan from the Planning Agent or create a new execution request to begin.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Panel>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</ErrorBoundary>\n\n<style>\n\t.execution-page {\n\t\tpadding: 24px;\n\t\tmax-width: 1400px;\n\t\tmargin: 0 auto;\n\t}\n\n\t.page-header {\n\t\tmargin-bottom: 24px;\n\t}\n\n\t.page-header h1 {\n\t\tfont-family: 'Cinzel', serif;\n\t\tfont-weight: 300;\n\t\tfont-size: 2rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 8px;\n\t}\n\n\t.text-muted {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.content-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 450px 1fr;\n\t\tgap: 24px;\n\t\talign-items: start;\n\t}\n\n\t.left-column,\n\t.right-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24px;\n\t}\n\n\t:global(.mt-6) {\n\t\tmargin-top: 24px;\n\t}\n\n\t.results-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24px;\n\t}\n\n\t.section-block {\n\t\tpadding: 16px 0;\n\t}\n\n\t.section-block:not(:last-child) {\n\t\tborder-bottom: 1px solid var(--border-color);\n\t}\n\n\t.section-block h3 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.progress-message {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t}\n\n\t.spinner {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tborder: 3px solid var(--border-color);\n\t\tborder-top-color: var(--accent-color);\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t\tmargin-bottom: 16px;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.progress-message p {\n\t\tcolor: var(--text-secondary);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 48px 24px;\n\t}\n\n\t.empty-icon {\n\t\tfont-size: 4rem;\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.empty-state h2 {\n\t\tfont-size: 1.5rem;\n\t\tcolor: var(--color-text);\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.empty-state p {\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t\tmax-width: 400px;\n\t\tmargin: 0 auto;\n\t}\n\n\t.error-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t}\n\n\t.error-state svg {\n\t\tcolor: var(--color-danger);\n\t\tmargin-bottom: 16px;\n\t}\n\n\t.error-state h3 {\n\t\tfont-size: 1.25rem;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.error-message {\n\t\tcolor: var(--color-danger);\n\t\tfont-size: 0.875rem;\n\t\tpadding: 12px 16px;\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t\tborder-radius: 6px;\n\t\tmax-width: 500px;\n\t}\n\n\t@media (max-width: 1024px) {\n\t\t.content-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport Button from '$lib/components/Button.svelte';\n\timport { executionStore } from '$lib/stores/execution.svelte';\n\timport { SessionStatus, type ExecutionSession } from '$lib/types/agents';\n\n\tconst sessions = $derived(executionStore.sessions);\n\n\tfunction formatDate(date: Date): string {\n\t\treturn new Intl.DateTimeFormat('en-US', {\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric',\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit'\n\t\t}).format(date);\n\t}\n\n\tfunction formatDuration(startDate: Date, endDate?: Date): string {\n\t\tconst end = endDate || new Date();\n\t\tconst ms = end.getTime() - startDate.getTime();\n\t\tif (ms < 1000) return `${ms}ms`;\n\t\tif (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n\t\treturn `${(ms / 60000).toFixed(1)}m`;\n\t}\n\n\tfunction getStatusBadgeVariant(\n\t\tstatus: SessionStatus\n\t): 'success' | 'warning' | 'danger' | 'neutral' {\n\t\tswitch (status) {\n\t\t\tcase SessionStatus.COMPLETED:\n\t\t\t\treturn 'success';\n\t\t\tcase SessionStatus.RUNNING:\n\t\t\t\treturn 'warning';\n\t\t\tcase SessionStatus.FAILED:\n\t\t\tcase SessionStatus.CANCELLED:\n\t\t\t\treturn 'danger';\n\t\t\tdefault:\n\t\t\t\treturn 'neutral';\n\t\t}\n\t}\n\n\tfunction getStatusIcon(status: SessionStatus): string {\n\t\tswitch (status) {\n\t\t\tcase SessionStatus.COMPLETED:\n\t\t\t\treturn '‚úÖ';\n\t\t\tcase SessionStatus.RUNNING:\n\t\t\t\treturn '‚è≥';\n\t\t\tcase SessionStatus.FAILED:\n\t\t\t\treturn '‚ùå';\n\t\t\tcase SessionStatus.CANCELLED:\n\t\t\t\treturn 'üö´';\n\t\t\tdefault:\n\t\t\t\treturn '‚è∏Ô∏è';\n\t\t}\n\t}\n\n\tfunction selectSession(sessionId: string): void {\n\t\texecutionStore.setCurrentSession(sessionId);\n\t}\n\n\tfunction deleteSession(sessionId: string): void {\n\t\tif (confirm('Are you sure you want to delete this session?')) {\n\t\t\texecutionStore.deleteSession(sessionId);\n\t\t}\n\t}\n</script>\n\n<div class=\"execution-history\">\n\t{#if sessions.length > 0}\n\t\t<div class=\"history-header\">\n\t\t\t<h3>Past Executions ({sessions.length})</h3>\n\t\t\t<Button\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"sm\"\n\t\t\t\tonclick={() => executionStore.clearAll()}\n\t\t\t>\n\t\t\t\tClear All\n\t\t\t</Button>\n\t\t</div>\n\n\t\t<div class=\"sessions-list\">\n\t\t\t{#each sessions as session}\n\t\t\t\t{@const isActive = executionStore.currentSession?.id === session.id}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"session-card\"\n\t\t\t\t\tclass:active={isActive}\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\tonclick={() => selectSession(session.id)}\n\t\t\t\t\tonkeydown={(e) => e.key === 'Enter' && selectSession(session.id)}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"session-header\">\n\t\t\t\t\t\t<div class=\"session-info\">\n\t\t\t\t\t\t\t<span class=\"session-icon\">{getStatusIcon(session.status)}</span>\n\t\t\t\t\t\t\t<div class=\"session-title-group\">\n\t\t\t\t\t\t\t\t<div class=\"session-title\">\n\t\t\t\t\t\t\t\t\t{#if session.request.plan?.plan?.title}\n\t\t\t\t\t\t\t\t\t\t{session.request.plan.plan.title}\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\tExecution #{session.id.split('_')[1]}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"session-meta\">\n\t\t\t\t\t\t\t\t\t<span class=\"session-date\">{formatDate(session.createdAt)}</span>\n\t\t\t\t\t\t\t\t\t{#if session.startedAt && session.completedAt}\n\t\t\t\t\t\t\t\t\t\t<span class=\"session-duration\">\n\t\t\t\t\t\t\t\t\t\t\t{formatDuration(session.startedAt, session.completedAt)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{:else if session.startedAt}\n\t\t\t\t\t\t\t\t\t\t<span class=\"session-duration\">\n\t\t\t\t\t\t\t\t\t\t\t{formatDuration(session.startedAt)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Badge variant={getStatusBadgeVariant(session.status)}>\n\t\t\t\t\t\t\t{session.status}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if session.result}\n\t\t\t\t\t\t<div class=\"session-stats\">\n\t\t\t\t\t\t\t{#if session.result.filesModified}\n\t\t\t\t\t\t\t\t<div class=\"stat\">\n\t\t\t\t\t\t\t\t\t<span class=\"stat-icon\">üìÅ</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-value\">{session.result.filesModified.length}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-label\">files</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if session.result.testResults}\n\t\t\t\t\t\t\t\t<div class=\"stat\">\n\t\t\t\t\t\t\t\t\t<span class=\"stat-icon\">üß™</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-value\">{session.result.testResults.passed}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-label\">passed</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if session.result.metrics}\n\t\t\t\t\t\t\t\t<div class=\"stat\">\n\t\t\t\t\t\t\t\t\t<span class=\"stat-icon\">üî¢</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-value\">\n\t\t\t\t\t\t\t\t\t\t{session.result.metrics.tokensUsed < 1000\n\t\t\t\t\t\t\t\t\t\t\t? session.result.metrics.tokensUsed\n\t\t\t\t\t\t\t\t\t\t\t: `${(session.result.metrics.tokensUsed / 1000).toFixed(1)}K`}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"stat-label\">tokens</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if session.error}\n\t\t\t\t\t\t<div class=\"session-error\">\n\t\t\t\t\t\t\t<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>{session.error}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"session-actions\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonclick={(e: Event) => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tselectSession(session.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tView Details\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonclick={(e: Event) => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tdeleteSession(session.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<div class=\"empty-icon\">üìã</div>\n\t\t\t<p class=\"empty-title\">No execution history</p>\n\t\t\t<p class=\"empty-description\">\n\t\t\t\tStart an execution to see your history here.\n\t\t\t</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.execution-history {\n\t\tpadding: 1rem;\n\t}\n\n\t.history-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.history-header h3 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin: 0;\n\t}\n\n\t.sessions-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.session-card {\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 2px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.session-card:hover {\n\t\tborder-color: var(--accent-color);\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.session-card.active {\n\t\tborder-color: var(--accent-color);\n\t\tbackground: var(--surface-3);\n\t}\n\n\t.session-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\t.session-info {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 0.75rem;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.session-icon {\n\t\tfont-size: 1.25rem;\n\t\tline-height: 1;\n\t}\n\n\t.session-title-group {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.session-title {\n\t\tfont-size: 0.9375rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.25rem;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.session-meta {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.session-stats {\n\t\tdisplay: flex;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 0.75rem;\n\t\tpadding: 0.5rem;\n\t\tbackground: var(--surface-1);\n\t\tborder-radius: 6px;\n\t}\n\n\t.stat {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.stat-icon {\n\t\tfont-size: 1rem;\n\t}\n\n\t.stat-value {\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.stat-label {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.session-error {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t\tborder-radius: 6px;\n\t\tcolor: var(--color-danger);\n\t\tfont-size: 0.875rem;\n\t\tmargin-bottom: 0.75rem;\n\t}\n\n\t.session-actions {\n\t\tdisplay: flex;\n\t\tgap: 0.5rem;\n\t\tpadding-top: 0.75rem;\n\t\tborder-top: 1px solid var(--border-color);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 3rem 1rem;\n\t}\n\n\t.empty-icon {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.empty-title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.empty-description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-secondary);\n\t\tmargin: 0;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.session-stats {\n\t\t\tflex-wrap: wrap;\n\t\t\tgap: 0.5rem;\n\t\t}\n\n\t\t.session-actions {\n\t\t\tflex-direction: column;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport type { TestResults as TestResultsType } from '$lib/types/agents';\n\n\tinterface Props {\n\t\tresults: TestResultsType | null;\n\t}\n\n\tlet { results }: Props = $props();\n\n\tconst passRate = $derived(\n\t\tresults && results.total > 0 ? ((results.passed / results.total) * 100).toFixed(1) : '0'\n\t);\n</script>\n\n<div class=\"test-results\">\n\t<h4>Test Results</h4>\n\n\t{#if results}\n\t\t<div class=\"results-summary\">\n\t\t\t<div class=\"summary-card passed\">\n\t\t\t\t<span class=\"count\">{results.passed}</span>\n\t\t\t\t<span class=\"label\">Passed</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"summary-card failed\">\n\t\t\t\t<span class=\"count\">{results.failed}</span>\n\t\t\t\t<span class=\"label\">Failed</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"summary-card skipped\">\n\t\t\t\t<span class=\"count\">{results.skipped}</span>\n\t\t\t\t<span class=\"label\">Skipped</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"summary-card total\">\n\t\t\t\t<span class=\"count\">{results.total}</span>\n\t\t\t\t<span class=\"label\">Total</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"pass-rate\">\n\t\t\t<div class=\"pass-rate-bar\">\n\t\t\t\t<div class=\"pass-rate-fill\" style=\"width: {passRate}%\"></div>\n\t\t\t</div>\n\t\t\t<span class=\"pass-rate-text\">{passRate}% Pass Rate</span>\n\t\t</div>\n\n\t\t{#if results.coverage}\n\t\t\t<div class=\"coverage\">\n\t\t\t\t<h5>Coverage</h5>\n\t\t\t\t<div class=\"coverage-items\">\n\t\t\t\t\t<div class=\"coverage-item\">\n\t\t\t\t\t\t<span class=\"coverage-label\">Lines:</span>\n\t\t\t\t\t\t<Badge variant={results.coverage.lines >= 80 ? 'success' : 'warning'}>\n\t\t\t\t\t\t\t{results.coverage.lines}%\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"coverage-item\">\n\t\t\t\t\t\t<span class=\"coverage-label\">Functions:</span>\n\t\t\t\t\t\t<Badge variant={results.coverage.functions >= 80 ? 'success' : 'warning'}>\n\t\t\t\t\t\t\t{results.coverage.functions}%\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"coverage-item\">\n\t\t\t\t\t\t<span class=\"coverage-label\">Branches:</span>\n\t\t\t\t\t\t<Badge variant={results.coverage.branches >= 80 ? 'success' : 'warning'}>\n\t\t\t\t\t\t\t{results.coverage.branches}%\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"coverage-item\">\n\t\t\t\t\t\t<span class=\"coverage-label\">Statements:</span>\n\t\t\t\t\t\t<Badge variant={results.coverage.statements >= 80 ? 'success' : 'warning'}>\n\t\t\t\t\t\t\t{results.coverage.statements}%\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if results.failures.length > 0}\n\t\t\t<div class=\"failures\">\n\t\t\t\t<h5>Failed Tests</h5>\n\t\t\t\t{#each results.failures as failure}\n\t\t\t\t\t<div class=\"failure-card\">\n\t\t\t\t\t\t<div class=\"failure-header\">\n\t\t\t\t\t\t\t<span class=\"failure-name\">{failure.testName}</span>\n\t\t\t\t\t\t\t<span class=\"failure-path\">{failure.filePath}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<pre class=\"failure-error\">{failure.error}</pre>\n\t\t\t\t\t\t{#if failure.stack}\n\t\t\t\t\t\t\t<details class=\"failure-stack\">\n\t\t\t\t\t\t\t\t<summary>Stack Trace</summary>\n\t\t\t\t\t\t\t\t<pre>{failure.stack}</pre>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p>Test results will appear here after execution.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.test-results {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 16px;\n\t}\n\n\t.test-results h4 {\n\t\tmargin: 0;\n\t\tcolor: var(--color-brass);\n\t\tfont-size: 1rem;\n\t}\n\n\t.test-results h5 {\n\t\tmargin: 0 0 12px 0;\n\t\tcolor: var(--color-text);\n\t\tfont-size: 0.9375rem;\n\t}\n\n\t.results-summary {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(4, 1fr);\n\t\tgap: 12px;\n\t}\n\n\t.summary-card {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 16px;\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n\n\t.summary-card.passed {\n\t\tborder-left: 3px solid var(--color-success);\n\t}\n\n\t.summary-card.failed {\n\t\tborder-left: 3px solid #e8a64d;\n\t}\n\n\t.summary-card.skipped {\n\t\tborder-left: 3px solid var(--color-text-muted);\n\t}\n\n\t.summary-card.total {\n\t\tborder-left: 3px solid var(--color-brass);\n\t}\n\n\t.summary-card .count {\n\t\tfont-size: 2rem;\n\t\tfont-weight: 700;\n\t\tcolor: var(--color-text);\n\t}\n\n\t.summary-card .label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-muted);\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.pass-rate {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8px;\n\t}\n\n\t.pass-rate-bar {\n\t\theight: 8px;\n\t\tbackground: var(--color-surface);\n\t\tborder-radius: 4px;\n\t\toverflow: hidden;\n\t}\n\n\t.pass-rate-fill {\n\t\theight: 100%;\n\t\tbackground: linear-gradient(90deg, var(--color-success), var(--color-brass));\n\t\ttransition: width 0.3s ease;\n\t}\n\n\t.pass-rate-text {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-muted);\n\t\ttext-align: center;\n\t}\n\n\t.coverage {\n\t\tpadding: 16px;\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n\n\t.coverage-items {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(2, 1fr);\n\t\tgap: 12px;\n\t}\n\n\t.coverage-item {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.coverage-label {\n\t\tcolor: var(--color-text);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.failures {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t}\n\n\t.failure-card {\n\t\tpadding: 16px;\n\t\tbackground: rgba(232, 166, 77, 0.05);\n\t\tborder: 1px solid #e8a64d;\n\t\tborder-radius: 4px;\n\t}\n\n\t.failure-header {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4px;\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.failure-name {\n\t\tfont-weight: 600;\n\t\tcolor: var(--color-text);\n\t}\n\n\t.failure-path {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--color-text-muted);\n\t\tfont-family: 'JetBrains Mono', monospace;\n\t}\n\n\t.failure-error {\n\t\tmargin: 0;\n\t\tpadding: 12px;\n\t\tbackground: var(--color-bg);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t\tfont-family: 'JetBrains Mono', monospace;\n\t\tfont-size: 0.875rem;\n\t\tcolor: #e8a64d;\n\t\twhite-space: pre-wrap;\n\t\tword-wrap: break-word;\n\t}\n\n\t.failure-stack {\n\t\tmargin-top: 12px;\n\t}\n\n\t.failure-stack summary {\n\t\tcursor: pointer;\n\t\tcolor: var(--color-text-muted);\n\t\tfont-size: 0.875rem;\n\t\tuser-select: none;\n\t}\n\n\t.failure-stack pre {\n\t\tmargin: 8px 0 0 0;\n\t\tpadding: 12px;\n\t\tbackground: var(--color-bg);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t\tfont-family: 'JetBrains Mono', monospace;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--color-text-muted);\n\t\twhite-space: pre-wrap;\n\t\tword-wrap: break-word;\n\t\tmax-height: 200px;\n\t\toverflow-y: auto;\n\t}\n\n\t.empty-state {\n\t\tpadding: 48px 24px;\n\t\ttext-align: center;\n\t\tcolor: var(--color-text-muted);\n\t\tbackground: var(--color-surface);\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: 4px;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.results-summary {\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t}\n\n\t\t.coverage-items {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport type { FileChange } from '$lib/types/agents';\n\n\tinterface Props {\n\t\tchanges: FileChange[];\n\t\tisStreaming?: boolean;\n\t}\n\n\tlet { changes, isStreaming = false }: Props = $props();\n\n\tconst totalAdditions = $derived(\n\t\tchanges.reduce((sum, change) => sum + (change.additions || 0), 0)\n\t);\n\n\tconst totalDeletions = $derived(\n\t\tchanges.reduce((sum, change) => sum + (change.deletions || 0), 0)\n\t);\n\n\tconst changesByType = $derived(() => {\n\t\tconst types = { added: 0, modified: 0, deleted: 0, renamed: 0 };\n\t\tchanges.forEach((change) => {\n\t\t\tif (change.type in types) {\n\t\t\t\ttypes[change.type as keyof typeof types]++;\n\t\t\t}\n\t\t});\n\t\treturn types;\n\t});\n\n\tfunction getChangeIcon(type: string): string {\n\t\tswitch (type) {\n\t\t\tcase 'added':\n\t\t\t\treturn '‚ûï';\n\t\t\tcase 'modified':\n\t\t\t\treturn '‚úèÔ∏è';\n\t\t\tcase 'deleted':\n\t\t\t\treturn 'üóëÔ∏è';\n\t\t\tcase 'renamed':\n\t\t\t\treturn 'üìù';\n\t\t\tdefault:\n\t\t\t\treturn 'üìÑ';\n\t\t}\n\t}\n\n\tfunction getChangeBadgeVariant(type: string): 'success' | 'warning' | 'danger' | 'neutral' {\n\t\tswitch (type) {\n\t\t\tcase 'added':\n\t\t\t\treturn 'success';\n\t\t\tcase 'modified':\n\t\t\t\treturn 'warning';\n\t\t\tcase 'deleted':\n\t\t\t\treturn 'danger';\n\t\t\tdefault:\n\t\t\t\treturn 'neutral';\n\t\t}\n\t}\n</script>\n\n<div class=\"file-changes\">\n\t{#if changes.length > 0}\n\t\t<!-- Summary Stats -->\n\t\t<div class=\"changes-summary\">\n\t\t\t<div class=\"summary-item\">\n\t\t\t\t<span class=\"summary-label\">Files Changed:</span>\n\t\t\t\t<span class=\"summary-value\">{changes.length}</span>\n\t\t\t</div>\n\t\t\t<div class=\"summary-item\">\n\t\t\t\t<span class=\"summary-label\">Additions:</span>\n\t\t\t\t<span class=\"summary-value text-success\">+{totalAdditions}</span>\n\t\t\t</div>\n\t\t\t<div class=\"summary-item\">\n\t\t\t\t<span class=\"summary-label\">Deletions:</span>\n\t\t\t\t<span class=\"summary-value text-danger\">-{totalDeletions}</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Change Type Badges -->\n\t\t<div class=\"change-types\">\n\t\t\t{#if changesByType().added > 0}\n\t\t\t\t<Badge variant=\"success\">{changesByType().added} Added</Badge>\n\t\t\t{/if}\n\t\t\t{#if changesByType().modified > 0}\n\t\t\t\t<Badge variant=\"warning\">{changesByType().modified} Modified</Badge>\n\t\t\t{/if}\n\t\t\t{#if changesByType().deleted > 0}\n\t\t\t\t<Badge variant=\"danger\">{changesByType().deleted} Deleted</Badge>\n\t\t\t{/if}\n\t\t\t{#if changesByType().renamed > 0}\n\t\t\t\t<Badge variant=\"neutral\">{changesByType().renamed} Renamed</Badge>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- File List -->\n\t\t<div class=\"changes-list\">\n\t\t\t{#each changes as change}\n\t\t\t\t<div class=\"change-item\">\n\t\t\t\t\t<div class=\"change-header\">\n\t\t\t\t\t\t<div class=\"change-info\">\n\t\t\t\t\t\t\t<span class=\"change-icon\">{getChangeIcon(change.type)}</span>\n\t\t\t\t\t\t\t<span class=\"change-path\">{change.path}</span>\n\t\t\t\t\t\t\t<Badge variant={getChangeBadgeVariant(change.type)}>\n\t\t\t\t\t\t\t\t{change.type}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if change.additions !== undefined || change.deletions !== undefined}\n\t\t\t\t\t\t\t<div class=\"change-stats\">\n\t\t\t\t\t\t\t\t{#if change.additions !== undefined && change.additions > 0}\n\t\t\t\t\t\t\t\t\t<span class=\"stat-addition\">+{change.additions}</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{#if change.deletions !== undefined && change.deletions > 0}\n\t\t\t\t\t\t\t\t\t<span class=\"stat-deletion\">-{change.deletions}</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if change.type === 'renamed' && change.oldPath}\n\t\t\t\t\t\t<div class=\"change-detail\">\n\t\t\t\t\t\t\t<span class=\"text-muted\">Renamed from:</span>\n\t\t\t\t\t\t\t<code class=\"old-path\">{change.oldPath}</code>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if change.description}\n\t\t\t\t\t\t<div class=\"change-description\">\n\t\t\t\t\t\t\t{change.description}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if change.additions !== undefined && change.deletions !== undefined}\n\t\t\t\t\t\t{@const total = change.additions + change.deletions}\n\t\t\t\t\t\t{@const additionPercent = total > 0 ? (change.additions / total) * 100 : 0}\n\t\t\t\t\t\t<div class=\"change-bar\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"change-bar-addition\"\n\t\t\t\t\t\t\t\tstyle=\"width: {additionPercent}%\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"change-bar-deletion\"\n\t\t\t\t\t\t\t\tstyle=\"width: {100 - additionPercent}%\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\n\t\t{#if isStreaming}\n\t\t\t<div class=\"streaming-indicator\">\n\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t<div class=\"dot\"></div>\n\t\t\t\t<span>Generating more changes...</span>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p class=\"text-muted\">No file changes yet. Start an execution to see changes.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.file-changes {\n\t\tpadding: 1rem;\n\t}\n\n\t.changes-summary {\n\t\tdisplay: flex;\n\t\tgap: 2rem;\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.summary-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.summary-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.summary-value {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t}\n\n\t.text-success {\n\t\tcolor: var(--color-success);\n\t}\n\n\t.text-danger {\n\t\tcolor: var(--color-danger);\n\t}\n\n\t.text-muted {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.change-types {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 0.5rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.changes-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.change-item {\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 6px;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.change-item:hover {\n\t\tborder-color: var(--accent-color);\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.change-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.change-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.change-icon {\n\t\tfont-size: 1.25rem;\n\t\tline-height: 1;\n\t}\n\n\t.change-path {\n\t\tfont-family: 'JetBrains Mono', 'Fira Code', monospace;\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-primary);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.change-stats {\n\t\tdisplay: flex;\n\t\tgap: 0.5rem;\n\t\tfont-family: 'JetBrains Mono', 'Fira Code', monospace;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.stat-addition {\n\t\tcolor: var(--color-success);\n\t}\n\n\t.stat-deletion {\n\t\tcolor: var(--color-danger);\n\t}\n\n\t.change-detail {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.875rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.old-path {\n\t\tfont-family: 'JetBrains Mono', 'Fira Code', monospace;\n\t\tfont-size: 0.875rem;\n\t\tpadding: 0.125rem 0.375rem;\n\t\tbackground: var(--surface-1);\n\t\tborder-radius: 3px;\n\t}\n\n\t.change-description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--text-secondary);\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.change-bar {\n\t\tdisplay: flex;\n\t\theight: 4px;\n\t\tborder-radius: 2px;\n\t\toverflow: hidden;\n\t\tbackground: var(--surface-1);\n\t}\n\n\t.change-bar-addition {\n\t\tbackground: var(--color-success);\n\t}\n\n\t.change-bar-deletion {\n\t\tbackground: var(--color-danger);\n\t}\n\n\t.streaming-indicator {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 1rem;\n\t\tjustify-content: center;\n\t\tcolor: var(--text-secondary);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.dot {\n\t\twidth: 6px;\n\t\theight: 6px;\n\t\tborder-radius: 50%;\n\t\tbackground: var(--accent-color);\n\t\tanimation: pulse 1.4s infinite ease-in-out;\n\t}\n\n\t.dot:nth-child(1) {\n\t\tanimation-delay: -0.32s;\n\t}\n\n\t.dot:nth-child(2) {\n\t\tanimation-delay: -0.16s;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t80%,\n\t\t100% {\n\t\t\topacity: 0.3;\n\t\t\ttransform: scale(0.8);\n\t\t}\n\t\t40% {\n\t\t\topacity: 1;\n\t\t\ttransform: scale(1);\n\t\t}\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 3rem 1rem;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.changes-summary {\n\t\t\tflex-direction: column;\n\t\t\tgap: 0.75rem;\n\t\t}\n\n\t\t.change-header {\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t}\n\n\t\t.change-stats {\n\t\t\talign-self: flex-end;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Badge from '$lib/components/Badge.svelte';\n\timport type { ExecutionMetrics } from '$lib/types/agents';\n\n\tinterface Props {\n\t\tmetrics: ExecutionMetrics | null;\n\t}\n\n\tlet { metrics }: Props = $props();\n\n\tfunction formatCost(cost: number): string {\n\t\treturn `$${cost.toFixed(4)}`;\n\t}\n\n\tfunction formatDuration(ms: number): string {\n\t\tif (ms < 1000) return `${ms}ms`;\n\t\tif (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n\t\treturn `${(ms / 60000).toFixed(1)}m`;\n\t}\n\n\tfunction formatTokens(tokens: number): string {\n\t\tif (tokens < 1000) return tokens.toString();\n\t\tif (tokens < 1000000) return `${(tokens / 1000).toFixed(1)}K`;\n\t\treturn `${(tokens / 1000000).toFixed(1)}M`;\n\t}\n</script>\n\n<div class=\"metrics-display\">\n\t{#if metrics}\n\t\t<div class=\"metrics-grid\">\n\t\t\t<!-- Token Usage -->\n\t\t\t<div class=\"metric-card\">\n\t\t\t\t<div class=\"metric-icon\">üî¢</div>\n\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t<div class=\"metric-label\">Tokens Used</div>\n\t\t\t\t\t<div class=\"metric-value\">{formatTokens(metrics.tokensUsed)}</div>\n\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t<span class=\"text-muted\">Input: {formatTokens(metrics.inputTokens)}</span>\n\t\t\t\t\t\t<span class=\"text-muted\">Output: {formatTokens(metrics.outputTokens)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Cost -->\n\t\t\t<div class=\"metric-card\">\n\t\t\t\t<div class=\"metric-icon\">üí∞</div>\n\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t<div class=\"metric-label\">Estimated Cost</div>\n\t\t\t\t\t<div class=\"metric-value\">{formatCost(metrics.cost)}</div>\n\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t<span class=\"text-muted\">Per 1M tokens</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Duration -->\n\t\t\t<div class=\"metric-card\">\n\t\t\t\t<div class=\"metric-icon\">‚è±Ô∏è</div>\n\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t<div class=\"metric-label\">Execution Time</div>\n\t\t\t\t\t<div class=\"metric-value\">{formatDuration(metrics.duration)}</div>\n\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t<span class=\"text-muted\">\n\t\t\t\t\t\t\t{metrics.startTime ? new Date(metrics.startTime).toLocaleTimeString() : ''} -\n\t\t\t\t\t\t\t{metrics.endTime ? new Date(metrics.endTime).toLocaleTimeString() : ''}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Model Info -->\n\t\t\t<div class=\"metric-card\">\n\t\t\t\t<div class=\"metric-icon\">ü§ñ</div>\n\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t<div class=\"metric-label\">Model</div>\n\t\t\t\t\t<div class=\"metric-value\">{metrics.modelUsed || 'Unknown'}</div>\n\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t{#if metrics.provider}\n\t\t\t\t\t\t\t<Badge variant=\"neutral\">{metrics.provider}</Badge>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Files Modified -->\n\t\t\t{#if metrics.filesModified !== undefined}\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">üìÅ</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Files Modified</div>\n\t\t\t\t\t\t<div class=\"metric-value\">{metrics.filesModified}</div>\n\t\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t\t{#if metrics.linesAdded !== undefined && metrics.linesRemoved !== undefined}\n\t\t\t\t\t\t\t\t<span class=\"text-success\">+{metrics.linesAdded}</span>\n\t\t\t\t\t\t\t\t<span class=\"text-danger\">-{metrics.linesRemoved}</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Test Execution -->\n\t\t\t{#if metrics.testsRun !== undefined}\n\t\t\t\t<div class=\"metric-card\">\n\t\t\t\t\t<div class=\"metric-icon\">üß™</div>\n\t\t\t\t\t<div class=\"metric-content\">\n\t\t\t\t\t\t<div class=\"metric-label\">Tests Executed</div>\n\t\t\t\t\t\t<div class=\"metric-value\">{metrics.testsRun}</div>\n\t\t\t\t\t\t<div class=\"metric-detail\">\n\t\t\t\t\t\t\t{#if metrics.testsPassed !== undefined && metrics.testsFailed !== undefined}\n\t\t\t\t\t\t\t\t<span class=\"text-success\">{metrics.testsPassed} passed</span>\n\t\t\t\t\t\t\t\t<span class=\"text-danger\">{metrics.testsFailed} failed</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- Performance Insights -->\n\t\t{#if metrics.tokensUsed > 100000}\n\t\t\t<div class=\"insights\">\n\t\t\t\t<div class=\"insight-card warning\">\n\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t<path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span>High token usage detected. Consider breaking down complex tasks.</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if metrics.duration > 300000}\n\t\t\t<div class=\"insights\">\n\t\t\t\t<div class=\"insight-card info\">\n\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t<path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span>Long execution time. Consider optimizing prompts or breaking into smaller steps.</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"empty-state\">\n\t\t\t<p class=\"text-muted\">No metrics available yet. Start an execution to see metrics.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.metrics-display {\n\t\tpadding: 1rem;\n\t}\n\n\t.metrics-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n\t\tgap: 1rem;\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.metric-card {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tpadding: 1rem;\n\t\tbackground: var(--surface-2);\n\t\tborder: 1px solid var(--border-color);\n\t\tborder-radius: 8px;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.metric-card:hover {\n\t\tborder-color: var(--accent-color);\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.metric-icon {\n\t\tfont-size: 1.5rem;\n\t\tline-height: 1;\n\t}\n\n\t.metric-content {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.metric-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tcolor: var(--text-secondary);\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.metric-value {\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--text-primary);\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.metric-detail {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.75rem;\n\t}\n\n\t.text-muted {\n\t\tcolor: var(--text-secondary);\n\t}\n\n\t.text-success {\n\t\tcolor: var(--color-success);\n\t}\n\n\t.text-danger {\n\t\tcolor: var(--color-danger);\n\t}\n\n\t.insights {\n\t\tmargin-top: 1rem;\n\t}\n\n\t.insight-card {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem 1rem;\n\t\tborder-radius: 6px;\n\t\tfont-size: 0.875rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.insight-card.warning {\n\t\tbackground: rgba(255, 193, 7, 0.1);\n\t\tborder: 1px solid rgba(255, 193, 7, 0.3);\n\t\tcolor: var(--color-warning);\n\t}\n\n\t.insight-card.info {\n\t\tbackground: rgba(33, 150, 243, 0.1);\n\t\tborder: 1px solid rgba(33, 150, 243, 0.3);\n\t\tcolor: var(--color-info);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 3rem 1rem;\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.metrics-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\t}\n</style>\n"],"names":["state","sessions","currentSession","isExecuting","streamingOutput","currentStage","executionStore","activeSessions","filter","s","status","SessionStatus","RUNNING","PENDING","completedSessions","COMPLETED","failedSessions","FAILED","createSession","request","session","id","Date","now","Math","random","toString","substr","type","createdAt","stages","startSession","sessionId","find","startedAt","Stage","PLAN","updateStageOutput","stage","output","plan","ACT","act","OBSERVE","observe","REFLECT","reflect","appendStreamingOutput","content","clearStreamingOutput","advanceStage","nextStage","completeSession","result","completedAt","failSession","error","cancelSession","CANCELLED","setCurrentSession","deleteSession","clearAll","API_BASE_URL","planDeliverable","planSessionId","$$props","isSubmitting","runTests","generateDocs","autoCommit","$$renderer","push","$.escape","userMessage","title","overview","steps","length","estimatedEffort","$.attr","async","options","startResponse","fetch","method","headers","body","JSON","stringify","language","framework","ok","json","success","classifyError","Error","detail","streamUrl","streamingService","subscribe","onChunk","onStageStart","paortStage","onStageEnd","stageOutput","onComplete","executionResult","onError","message","startExecutionSession","err","disabled","code","isStreaming","getCodeContent","sections","filesCreated","file","path","filesModified","diff","join","navigator","clipboard","writeText","$.attr_class","$.stringify","formatDate","date","Intl","DateTimeFormat","month","day","hour","minute","format","formatDuration","startDate","endDate","ms","getTime","toFixed","getStatusBadgeVariant","getStatusIcon","onclick","each_array","$$index","isActive","active","split","testResults","passed","metrics","tokensUsed","e","stopPropagation","confirm","CodeGeneration","tests","results","passRate","total","failed","skipped","$.attr_style","coverage","lines","functions","branches","statements","failures","$.ensure_array_like","failure","testName","filePath","stack","changes","totalAdditions","reduce","sum","change","additions","totalDeletions","deletions","changesByType","types","added","modified","deleted","renamed","forEach","getChangeIcon","getChangeBadgeVariant","oldPath","description","additionPercent","FileChanges","formatTokens","tokens","cost","inputTokens","outputTokens","duration","startTime","toLocaleTimeString","endTime","modelUsed","provider","linesAdded","linesRemoved","testsRun","testsPassed","testsFailed"],"mappings":"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"}