import{S as s,P as e,s as t}from"../../../chunks/streaming.js";import{E as i}from"../../../chunks/ErrorBoundary.js";import{P as a}from"../../../chunks/Panel.js";import{B as c}from"../../../chunks/Button.js";import{A as l}from"../../../chunks/Alert.js";import{B as n}from"../../../chunks/Badge.js";import{c as d}from"../../../chunks/errors.js";import{f as p,c as r,d as u,k as o,m as v,e as x}from"../../../chunks/vendor-svelte.js";const h={sessions:[],currentSession:null,isExecuting:!1,streamingOutput:"",currentStage:null},m={get sessions(){return h.sessions},get currentSession(){return h.currentSession},get isExecuting(){return h.isExecuting},get streamingOutput(){return h.streamingOutput},get currentStage(){return h.currentStage},get activeSessions(){return h.sessions.filter(e=>e.status===s.RUNNING||e.status===s.PENDING)},get completedSessions(){return h.sessions.filter(e=>e.status===s.COMPLETED)},get failedSessions(){return h.sessions.filter(e=>e.status===s.FAILED)},createSession(e){const t={id:`execution_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"execution",status:s.PENDING,createdAt:new Date,request:e,stages:{}};return h.sessions=[...h.sessions,t],h.currentSession=t,t},startSession(t){const i=h.sessions.find(s=>s.id===t);i&&(i.status=s.RUNNING,i.startedAt=new Date,i.currentStage=e.PLAN,h.currentStage=e.PLAN,h.isExecuting=!0,h.streamingOutput="",h.sessions=[...h.sessions])},updateStageOutput(s,t,i){const a=h.sessions.find(e=>e.id===s);if(a){switch(t){case e.PLAN:a.stages.plan=i;break;case e.ACT:a.stages.act=i;break;case e.OBSERVE:a.stages.observe=i;break;case e.REFLECT:a.stages.reflect=i}h.sessions=[...h.sessions]}},appendStreamingOutput(s){h.streamingOutput+=s},clearStreamingOutput(){h.streamingOutput=""},advanceStage(s,e){const t=h.sessions.find(e=>e.id===s);t&&(e?(t.currentStage=e,h.currentStage=e,h.streamingOutput=""):(t.currentStage=void 0,h.currentStage=null,h.isExecuting=!1),h.sessions=[...h.sessions])},completeSession(e,t){const i=h.sessions.find(s=>s.id===e);i&&(i.status=s.COMPLETED,i.completedAt=new Date,i.result=t,i.currentStage=void 0,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="",h.sessions=[...h.sessions])},failSession(e,t){const i=h.sessions.find(s=>s.id===e);i&&(i.status=s.FAILED,i.completedAt=new Date,i.error=t,i.currentStage=void 0,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="",h.sessions=[...h.sessions])},cancelSession(e){const t=h.sessions.find(s=>s.id===e);t&&(t.status=s.CANCELLED,t.completedAt=new Date,t.currentStage=void 0,h.currentSession?.id===e&&(h.currentStage=null,h.isExecuting=!1,h.streamingOutput=""),h.sessions=[...h.sessions])},setCurrentSession(s){if(null===s)return void(h.currentSession=null);const e=h.sessions.find(e=>e.id===s);e&&(h.currentSession=e)},deleteSession(s){h.sessions=h.sessions.filter(e=>e.id!==s),h.currentSession?.id===s&&(h.currentSession=null,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="")},clearAll(){h.sessions=[],h.currentSession=null,h.isExecuting=!1,h.streamingOutput="",h.currentStage=null}};function g(s,e){s.component(s=>{let{planDeliverable:i,planSessionId:a}=e,u=null,o=!1,v=!0,x=!1,h=!1;const g=m.isExecuting;s.push('<div class="execution-request svelte-bs7sxw">'),u?(s.push("\x3c!--[--\x3e"),l(s,{variant:"error",children:s=>{s.push(`\x3c!----\x3e${p(u.userMessage)}`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),i?(s.push("\x3c!--[--\x3e"),s.push(`<div class="plan-summary svelte-bs7sxw"><h3 class="svelte-bs7sxw">${p(i.plan.title)}</h3> <p class="plan-overview svelte-bs7sxw">${p(i.plan.overview)}</p> <div class="plan-meta svelte-bs7sxw">`),n(s,{variant:"info",children:s=>{s.push(`\x3c!----\x3e${p(i.plan.steps.length)} steps`)},$$slots:{default:!0}}),s.push("\x3c!----\x3e "),n(s,{variant:"info",children:s=>{s.push(`\x3c!----\x3e${p(i.plan.estimatedEffort)}`)},$$slots:{default:!0}}),s.push(`\x3c!----\x3e</div></div> <div class="execution-options svelte-bs7sxw"><h4 class="svelte-bs7sxw">Execution Options</h4> <label class="option svelte-bs7sxw"><input type="checkbox"${r("checked",v,!0)}${r("disabled",g,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Run tests after code generation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox"${r("checked",x,!0)}${r("disabled",g,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Generate documentation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox"${r("checked",h,!0)}${r("disabled",g,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Auto-commit changes (if tests pass)</span></label></div> <div class="actions svelte-bs7sxw">`),c(s,{variant:"primary",onclick:async function(){if(!i||!a)return;u=null,o=!0;const s={planSessionId:a,plan:i,options:{runTests:v,generateDocs:x,autoCommit:h}};try{const e=await async function(s){try{const e=m.createSession(s);m.startSession(e.id);const i=`http://localhost:8787/api/v1/bds/execution/${e.id}/stream`;return t.subscribe(i,{onChunk:s=>{m.appendStreamingOutput(s)},onStageStart:s=>{const t=s;m.advanceStage(e.id,t)},onStageEnd:(s,t)=>{const i=s,a=t;m.updateStageOutput(e.id,i,a),m.clearStreamingOutput()},onComplete:s=>{const t=s;m.completeSession(e.id,t)},onError:s=>{m.failSession(e.id,s.message)}}),{success:!0,sessionId:e.id}}catch(u){return{success:!1,error:d(u)}}}(s);!e.success&&e.error&&(u=e.error)}catch(e){}finally{o=!1}},disabled:g||o,loading:o,children:s=>{s.push(`\x3c!----\x3e${p(o?"Starting Execution...":"Execute Plan")}`)},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div>")):(s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-bs7sxw"><p>Load a plan from the Planning Agent to begin execution.</p></div>')),s.push("\x3c!--]--\x3e</div>")})}function f(s,e){let{code:t,isStreaming:i,language:a="typescript"}=e;s.push('<div class="code-generation svelte-205pas"><div class="code-header svelte-205pas"><h4 class="svelte-205pas">Generated Code</h4> <div class="code-actions svelte-205pas">'),c(s,{variant:"secondary",size:"sm",onclick:async function(){try{await navigator.clipboard.writeText(t)}catch(s){}},disabled:!t,children:s=>{s.push("\x3c!----\x3eCopy")},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div></div> "),t||i?(s.push("\x3c!--[--\x3e"),s.push(`<div${u("code-container svelte-205pas",void 0,{streaming:i})}><pre${u(`code-block language-${o(a)}`,"svelte-205pas")}><code class="svelte-205pas">${p(t)}</code></pre> `),i?(s.push("\x3c!--[--\x3e"),s.push('<div class="streaming-indicator svelte-205pas"><div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <span class="svelte-205pas">Generating code...</span></div>')):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")):(s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-205pas"><p class="svelte-205pas">Code will appear here when execution starts.</p></div>')),s.push("\x3c!--]--\x3e</div>")}function $(e,t){e.component(e=>{const t=m.currentSession,l=m.isExecuting,d=m.streamingOutput;i(e,{children:e=>{e.push('<div class="execution-page svelte-2mqxtd"><header class="page-header svelte-2mqxtd"><h1 class="svelte-2mqxtd">Execution Agent</h1> <p class="text-muted svelte-2mqxtd">Execute code generation and implementation tasks</p></header> <div class="content-grid svelte-2mqxtd"><div class="left-column svelte-2mqxtd">'),a(e,{title:"New Execution Request",children:s=>{g(s,{})},$$slots:{default:!0}}),e.push("\x3c!----\x3e "),t?(e.push("\x3c!--[--\x3e"),a(e,{title:"Execution History",class:"mt-6",children:e=>{!function(e){e.component(e=>{const t=m.sessions;function i(s){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}function a(s,e){const t=(e||new Date).getTime()-s.getTime();return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${(t/6e4).toFixed(1)}m`}function l(e){switch(e){case s.COMPLETED:return"success";case s.RUNNING:return"warning";case s.FAILED:case s.CANCELLED:return"danger";default:return"neutral"}}function d(e){switch(e){case s.COMPLETED:return"‚úÖ";case s.RUNNING:return"‚è≥";case s.FAILED:return"‚ùå";case s.CANCELLED:return"üö´";default:return"‚è∏Ô∏è"}}if(e.push('<div class="execution-history svelte-100842h">'),t.length>0){e.push("\x3c!--[--\x3e"),e.push(`<div class="history-header svelte-100842h"><h3 class="svelte-100842h">Past Executions (${p(t.length)})</h3> `),c(e,{variant:"ghost",size:"sm",onclick:()=>m.clearAll(),children:s=>{s.push("\x3c!----\x3eClear All")},$$slots:{default:!0}}),e.push('\x3c!----\x3e</div> <div class="sessions-list svelte-100842h">\x3c!--[--\x3e');const s=x(t);for(let t=0,r=s.length;t<r;t++){let r=s[t];const o=m.currentSession?.id===r.id;e.push(`<div${u("session-card svelte-100842h",void 0,{active:o})} role="button" tabindex="0"><div class="session-header svelte-100842h"><div class="session-info svelte-100842h"><span class="session-icon svelte-100842h">${p(d(r.status))}</span> <div class="session-title-group svelte-100842h"><div class="session-title svelte-100842h">`),r.request.plan?.plan?.title?(e.push("\x3c!--[--\x3e"),e.push(`${p(r.request.plan.plan.title)}`)):(e.push("\x3c!--[!--\x3e"),e.push(`Execution #${p(r.id.split("_")[1])}`)),e.push(`\x3c!--]--\x3e</div> <div class="session-meta svelte-100842h"><span class="session-date">${p(i(r.createdAt))}</span> `),r.startedAt&&r.completedAt?(e.push("\x3c!--[--\x3e"),e.push(`<span class="session-duration">${p(a(r.startedAt,r.completedAt))}</span>`)):(e.push("\x3c!--[!--\x3e"),r.startedAt?(e.push("\x3c!--[--\x3e"),e.push(`<span class="session-duration">${p(a(r.startedAt))}</span>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e")),e.push("\x3c!--]--\x3e</div></div></div> "),n(e,{variant:l(r.status),children:s=>{s.push(`\x3c!----\x3e${p(r.status)}`)},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div> "),r.result?(e.push("\x3c!--[--\x3e"),e.push('<div class="session-stats svelte-100842h">'),r.result.filesModified?(e.push("\x3c!--[--\x3e"),e.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üìÅ</span> <span class="stat-value svelte-100842h">${p(r.result.filesModified.length)}</span> <span class="stat-label svelte-100842h">files</span></div>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),r.result.testResults?(e.push("\x3c!--[--\x3e"),e.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üß™</span> <span class="stat-value svelte-100842h">${p(r.result.testResults.passed)}</span> <span class="stat-label svelte-100842h">passed</span></div>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),r.result.metrics?(e.push("\x3c!--[--\x3e"),e.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üî¢</span> <span class="stat-value svelte-100842h">${p(r.result.metrics.tokensUsed<1e3?r.result.metrics.tokensUsed:`${(r.result.metrics.tokensUsed/1e3).toFixed(1)}K`)}</span> <span class="stat-label svelte-100842h">tokens</span></div>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),r.error?(e.push("\x3c!--[--\x3e"),e.push(`<div class="session-error svelte-100842h"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>${p(r.error)}</span></div>`)):e.push("\x3c!--[!--\x3e"),e.push('\x3c!--]--\x3e <div class="session-actions svelte-100842h">'),c(e,{variant:"ghost",size:"sm",onclick:s=>{var e;s.stopPropagation(),e=r.id,m.setCurrentSession(e)},children:s=>{s.push("\x3c!----\x3eView Details")},$$slots:{default:!0}}),e.push("\x3c!----\x3e "),c(e,{variant:"ghost",size:"sm",onclick:s=>{var e;s.stopPropagation(),e=r.id,confirm("Are you sure you want to delete this session?")&&m.deleteSession(e)},children:s=>{s.push("\x3c!----\x3eDelete")},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div></div>")}e.push("\x3c!--]--\x3e</div>")}else e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-100842h"><div class="empty-icon svelte-100842h">üìã</div> <p class="empty-title svelte-100842h">No execution history</p> <p class="empty-description svelte-100842h">Start an execution to see your history here.</p></div>');e.push("\x3c!--]--\x3e</div>")})}(e)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push('\x3c!--]--\x3e</div> <div class="right-column svelte-2mqxtd">'),t?(e.push("\x3c!--[--\x3e"),t.status===s.RUNNING?(e.push("\x3c!--[--\x3e"),a(e,{title:"Execution in Progress",children:s=>{d?(s.push("\x3c!--[--\x3e"),f(s,{code:d,isStreaming:l})):(s.push("\x3c!--[!--\x3e"),s.push('<div class="progress-message svelte-2mqxtd"><div class="spinner svelte-2mqxtd"></div> <p class="svelte-2mqxtd">Initializing execution...</p></div>')),s.push("\x3c!--]--\x3e")},$$slots:{default:!0}})):(e.push("\x3c!--[!--\x3e"),t.status===s.COMPLETED&&t.result?(e.push("\x3c!--[--\x3e"),a(e,{title:"Execution Complete",children:s=>{s.push('<div class="results-section svelte-2mqxtd">'),t.result.code?(s.push("\x3c!--[--\x3e"),s.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Generated Code</h3> '),f(s,{code:t.result.code,isStreaming:!1}),s.push("\x3c!----\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),t.result.testResults?(s.push("\x3c!--[--\x3e"),s.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Test Results</h3> '),function(s,e){s.component(s=>{let{results:t}=e;const i=t&&t.total>0?(t.passed/t.total*100).toFixed(1):"0";if(s.push('<div class="test-results svelte-czdiq9"><h4 class="svelte-czdiq9">Test Results</h4> '),t){if(s.push("\x3c!--[--\x3e"),s.push(`<div class="results-summary svelte-czdiq9"><div class="summary-card passed svelte-czdiq9"><span class="count svelte-czdiq9">${p(t.passed)}</span> <span class="label svelte-czdiq9">Passed</span></div> <div class="summary-card failed svelte-czdiq9"><span class="count svelte-czdiq9">${p(t.failed)}</span> <span class="label svelte-czdiq9">Failed</span></div> <div class="summary-card skipped svelte-czdiq9"><span class="count svelte-czdiq9">${p(t.skipped)}</span> <span class="label svelte-czdiq9">Skipped</span></div> <div class="summary-card total svelte-czdiq9"><span class="count svelte-czdiq9">${p(t.total)}</span> <span class="label svelte-czdiq9">Total</span></div></div> <div class="pass-rate svelte-czdiq9"><div class="pass-rate-bar svelte-czdiq9"><div class="pass-rate-fill svelte-czdiq9"${v(`width: ${o(i)}%`)}></div></div> <span class="pass-rate-text svelte-czdiq9">${p(i)}% Pass Rate</span></div> `),t.coverage?(s.push("\x3c!--[--\x3e"),s.push('<div class="coverage svelte-czdiq9"><h5 class="svelte-czdiq9">Coverage</h5> <div class="coverage-items svelte-czdiq9"><div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Lines:</span> '),n(s,{variant:t.coverage.lines>=80?"success":"warning",children:s=>{s.push(`\x3c!----\x3e${p(t.coverage.lines)}%`)},$$slots:{default:!0}}),s.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Functions:</span> '),n(s,{variant:t.coverage.functions>=80?"success":"warning",children:s=>{s.push(`\x3c!----\x3e${p(t.coverage.functions)}%`)},$$slots:{default:!0}}),s.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Branches:</span> '),n(s,{variant:t.coverage.branches>=80?"success":"warning",children:s=>{s.push(`\x3c!----\x3e${p(t.coverage.branches)}%`)},$$slots:{default:!0}}),s.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Statements:</span> '),n(s,{variant:t.coverage.statements>=80?"success":"warning",children:s=>{s.push(`\x3c!----\x3e${p(t.coverage.statements)}%`)},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div></div></div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),t.failures.length>0){s.push("\x3c!--[--\x3e"),s.push('<div class="failures svelte-czdiq9"><h5 class="svelte-czdiq9">Failed Tests</h5> \x3c!--[--\x3e');const e=x(t.failures);for(let t=0,i=e.length;t<i;t++){let i=e[t];s.push(`<div class="failure-card svelte-czdiq9"><div class="failure-header svelte-czdiq9"><span class="failure-name svelte-czdiq9">${p(i.testName)}</span> <span class="failure-path svelte-czdiq9">${p(i.filePath)}</span></div> <pre class="failure-error svelte-czdiq9">${p(i.error)}</pre> `),i.stack?(s.push("\x3c!--[--\x3e"),s.push(`<details class="failure-stack svelte-czdiq9"><summary class="svelte-czdiq9">Stack Trace</summary> <pre class="svelte-czdiq9">${p(i.stack)}</pre></details>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")}s.push("\x3c!--]--\x3e</div>")}else s.push("\x3c!--[!--\x3e");s.push("\x3c!--]--\x3e")}else s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-czdiq9"><p>Test results will appear here after execution.</p></div>');s.push("\x3c!--]--\x3e</div>")})}(s,{results:t.result.testResults}),s.push("\x3c!----\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),t.result.filesModified&&t.result.filesModified.length>0?(s.push("\x3c!--[--\x3e"),s.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">File Changes</h3> '),function(s,e){s.component(s=>{let{changes:t,isStreaming:i=!1}=e;const a=t.reduce((s,e)=>s+(e.additions||0),0),c=t.reduce((s,e)=>s+(e.deletions||0),0),l=()=>{const s={added:0,modified:0,deleted:0,renamed:0};return t.forEach(e=>{e.type in s&&s[e.type]++}),s};function d(s){switch(s){case"added":return"‚ûï";case"modified":return"‚úèÔ∏è";case"deleted":return"üóëÔ∏è";case"renamed":return"üìù";default:return"üìÑ"}}function r(s){switch(s){case"added":return"success";case"modified":return"warning";case"deleted":return"danger";default:return"neutral"}}if(s.push('<div class="file-changes svelte-c6rpoy">'),t.length>0){s.push("\x3c!--[--\x3e"),s.push(`<div class="changes-summary svelte-c6rpoy"><div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Files Changed:</span> <span class="summary-value svelte-c6rpoy">${p(t.length)}</span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Additions:</span> <span class="summary-value text-success svelte-c6rpoy">+${p(a)}</span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Deletions:</span> <span class="summary-value text-danger svelte-c6rpoy">-${p(c)}</span></div></div> <div class="change-types svelte-c6rpoy">`),l().added>0?(s.push("\x3c!--[--\x3e"),n(s,{variant:"success",children:s=>{s.push(`\x3c!----\x3e${p(l().added)} Added`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),l().modified>0?(s.push("\x3c!--[--\x3e"),n(s,{variant:"warning",children:s=>{s.push(`\x3c!----\x3e${p(l().modified)} Modified`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),l().deleted>0?(s.push("\x3c!--[--\x3e"),n(s,{variant:"danger",children:s=>{s.push(`\x3c!----\x3e${p(l().deleted)} Deleted`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),l().renamed>0?(s.push("\x3c!--[--\x3e"),n(s,{variant:"neutral",children:s=>{s.push(`\x3c!----\x3e${p(l().renamed)} Renamed`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push('\x3c!--]--\x3e</div> <div class="changes-list svelte-c6rpoy">\x3c!--[--\x3e');const e=x(t);for(let t=0,i=e.length;t<i;t++){let i=e[t];if(s.push(`<div class="change-item svelte-c6rpoy"><div class="change-header svelte-c6rpoy"><div class="change-info svelte-c6rpoy"><span class="change-icon svelte-c6rpoy">${p(d(i.type))}</span> <span class="change-path svelte-c6rpoy">${p(i.path)}</span> `),n(s,{variant:r(i.type),children:s=>{s.push(`\x3c!----\x3e${p(i.type)}`)},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div> "),void 0!==i.additions||void 0!==i.deletions?(s.push("\x3c!--[--\x3e"),s.push('<div class="change-stats svelte-c6rpoy">'),void 0!==i.additions&&i.additions>0?(s.push("\x3c!--[--\x3e"),s.push(`<span class="stat-addition svelte-c6rpoy">+${p(i.additions)}</span>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),void 0!==i.deletions&&i.deletions>0?(s.push("\x3c!--[--\x3e"),s.push(`<span class="stat-deletion svelte-c6rpoy">-${p(i.deletions)}</span>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div> "),"renamed"===i.type&&i.oldPath?(s.push("\x3c!--[--\x3e"),s.push(`<div class="change-detail svelte-c6rpoy"><span class="text-muted svelte-c6rpoy">Renamed from:</span> <code class="old-path svelte-c6rpoy">${p(i.oldPath)}</code></div>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),i.description?(s.push("\x3c!--[--\x3e"),s.push(`<div class="change-description svelte-c6rpoy">${p(i.description)}</div>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),void 0!==i.additions&&void 0!==i.deletions){s.push("\x3c!--[--\x3e");const e=i.additions+i.deletions,t=e>0?i.additions/e*100:0;s.push(`<div class="change-bar svelte-c6rpoy"><div class="change-bar-addition svelte-c6rpoy"${v(`width: ${o(t)}%`)}></div> <div class="change-bar-deletion svelte-c6rpoy"${v(`width: ${o(100-t)}%`)}></div></div>`)}else s.push("\x3c!--[!--\x3e");s.push("\x3c!--]--\x3e</div>")}s.push("\x3c!--]--\x3e</div> "),i?(s.push("\x3c!--[--\x3e"),s.push('<div class="streaming-indicator svelte-c6rpoy"><div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <span class="svelte-c6rpoy">Generating more changes...</span></div>')):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e")}else s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-c6rpoy"><p class="text-muted svelte-c6rpoy">No file changes yet. Start an execution to see changes.</p></div>');s.push("\x3c!--]--\x3e</div>")})}(s,{changes:t.result.filesModified}),s.push("\x3c!----\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),t.result.metrics?(s.push("\x3c!--[--\x3e"),s.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Execution Metrics</h3> '),function(s,e){s.component(s=>{let{metrics:t}=e;function i(s){return s<1e3?s.toString():s<1e6?`${(s/1e3).toFixed(1)}K`:`${(s/1e6).toFixed(1)}M`}var a,c;s.push('<div class="metrics-display svelte-1p8lewm">'),t?(s.push("\x3c!--[--\x3e"),s.push(`<div class="metrics-grid svelte-1p8lewm"><div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üî¢</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tokens Used</div> <div class="metric-value svelte-1p8lewm">${p(i(t.tokensUsed))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Input: ${p(i(t.inputTokens))}</span> <span class="text-muted svelte-1p8lewm">Output: ${p(i(t.outputTokens))}</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üí∞</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Estimated Cost</div> <div class="metric-value svelte-1p8lewm">${p((c=t.cost,`$${c.toFixed(4)}`))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Per 1M tokens</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">‚è±Ô∏è</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Execution Time</div> <div class="metric-value svelte-1p8lewm">${p((a=t.duration,a<1e3?`${a}ms`:a<6e4?`${(a/1e3).toFixed(1)}s`:`${(a/6e4).toFixed(1)}m`))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">${p(t.startTime?new Date(t.startTime).toLocaleTimeString():"")} -\n\t\t\t\t\t\t\t${p(t.endTime?new Date(t.endTime).toLocaleTimeString():"")}</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ü§ñ</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Model</div> <div class="metric-value svelte-1p8lewm">${p(t.modelUsed||"Unknown")}</div> <div class="metric-detail svelte-1p8lewm">`),t.provider?(s.push("\x3c!--[--\x3e"),n(s,{variant:"neutral",children:s=>{s.push(`\x3c!----\x3e${p(t.provider)}`)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div></div></div> "),void 0!==t.filesModified?(s.push("\x3c!--[--\x3e"),s.push(`<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üìÅ</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Files Modified</div> <div class="metric-value svelte-1p8lewm">${p(t.filesModified)}</div> <div class="metric-detail svelte-1p8lewm">`),void 0!==t.linesAdded&&void 0!==t.linesRemoved?(s.push("\x3c!--[--\x3e"),s.push(`<span class="text-success svelte-1p8lewm">+${p(t.linesAdded)}</span> <span class="text-danger svelte-1p8lewm">-${p(t.linesRemoved)}</span>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div></div></div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),void 0!==t.testsRun?(s.push("\x3c!--[--\x3e"),s.push(`<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üß™</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tests Executed</div> <div class="metric-value svelte-1p8lewm">${p(t.testsRun)}</div> <div class="metric-detail svelte-1p8lewm">`),void 0!==t.testsPassed&&void 0!==t.testsFailed?(s.push("\x3c!--[--\x3e"),s.push(`<span class="text-success svelte-1p8lewm">${p(t.testsPassed)} passed</span> <span class="text-danger svelte-1p8lewm">${p(t.testsFailed)} failed</span>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div></div></div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div> "),t.tokensUsed>1e5?(s.push("\x3c!--[--\x3e"),s.push('<div class="insights svelte-1p8lewm"><div class="insight-card warning svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>High token usage detected. Consider breaking down complex tasks.</span></div></div>')):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),t.duration>3e5?(s.push("\x3c!--[--\x3e"),s.push('<div class="insights svelte-1p8lewm"><div class="insight-card info svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z"></path></svg> <span>Long execution time. Consider optimizing prompts or breaking into smaller steps.</span></div></div>')):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e")):(s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-1p8lewm"><p class="text-muted svelte-1p8lewm">No metrics available yet. Start an execution to see metrics.</p></div>')),s.push("\x3c!--]--\x3e</div>")})}(s,{metrics:t.result.metrics}),s.push("\x3c!----\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")},$$slots:{default:!0}})):(e.push("\x3c!--[!--\x3e"),t.status===s.FAILED?(e.push("\x3c!--[--\x3e"),a(e,{title:"Execution Failed",children:s=>{s.push('<div class="error-state svelte-2mqxtd"><svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" class="svelte-2mqxtd"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <h3 class="svelte-2mqxtd">Execution Failed</h3> '),t.error?(s.push("\x3c!--[--\x3e"),s.push(`<p class="error-message svelte-2mqxtd">${p(t.error)}</p>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e")),e.push("\x3c!--]--\x3e")),e.push("\x3c!--]--\x3e")):(e.push("\x3c!--[!--\x3e"),a(e,{title:"Welcome",children:s=>{s.push('<div class="empty-state svelte-2mqxtd"><div class="empty-icon svelte-2mqxtd">‚ö°</div> <h2 class="svelte-2mqxtd">Start an Execution Session</h2> <p class="svelte-2mqxtd">Load a plan from the Planning Agent or create a new execution request to begin.</p></div>')},$$slots:{default:!0}})),e.push("\x3c!--]--\x3e</div></div></div>")},$$slots:{default:!0}})})}export{$ as default};
