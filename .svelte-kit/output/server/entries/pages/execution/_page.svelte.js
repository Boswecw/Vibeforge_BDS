import{S as e,P as s,s as t}from"../../../chunks/streaming.js";import{E as i}from"../../../chunks/ErrorBoundary.js";import{P as a}from"../../../chunks/Panel.js";import{B as c}from"../../../chunks/Button.js";import{A as l}from"../../../chunks/Alert.js";import{B as n}from"../../../chunks/Badge.js";import{a as d}from"../../../chunks/errors.js";import{f as r,c as p,d as u,k as o,m as v,e as x}from"../../../chunks/vendor-svelte.js";const h={sessions:[],currentSession:null,isExecuting:!1,streamingOutput:"",currentStage:null},m={get sessions(){return h.sessions},get currentSession(){return h.currentSession},get isExecuting(){return h.isExecuting},get streamingOutput(){return h.streamingOutput},get currentStage(){return h.currentStage},get activeSessions(){return h.sessions.filter(s=>s.status===e.RUNNING||s.status===e.PENDING)},get completedSessions(){return h.sessions.filter(s=>s.status===e.COMPLETED)},get failedSessions(){return h.sessions.filter(s=>s.status===e.FAILED)},createSession(s){const t={id:`execution_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"execution",status:e.PENDING,createdAt:new Date,request:s,stages:{}};return h.sessions=[...h.sessions,t],h.currentSession=t,t},startSession(t){const i=h.sessions.find(e=>e.id===t);i&&(i.status=e.RUNNING,i.startedAt=new Date,i.currentStage=s.PLAN,h.currentStage=s.PLAN,h.isExecuting=!0,h.streamingOutput="",h.sessions=[...h.sessions])},updateStageOutput(e,t,i){const a=h.sessions.find(s=>s.id===e);if(a){switch(t){case s.PLAN:a.stages.plan=i;break;case s.ACT:a.stages.act=i;break;case s.OBSERVE:a.stages.observe=i;break;case s.REFLECT:a.stages.reflect=i}h.sessions=[...h.sessions]}},appendStreamingOutput(e){h.streamingOutput+=e},clearStreamingOutput(){h.streamingOutput=""},advanceStage(e,s){const t=h.sessions.find(s=>s.id===e);t&&(s?(t.currentStage=s,h.currentStage=s,h.streamingOutput=""):(t.currentStage=void 0,h.currentStage=null,h.isExecuting=!1),h.sessions=[...h.sessions])},completeSession(s,t){const i=h.sessions.find(e=>e.id===s);i&&(i.status=e.COMPLETED,i.completedAt=new Date,i.result=t,i.currentStage=void 0,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="",h.sessions=[...h.sessions])},failSession(s,t){const i=h.sessions.find(e=>e.id===s);i&&(i.status=e.FAILED,i.completedAt=new Date,i.error=t,i.currentStage=void 0,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="",h.sessions=[...h.sessions])},cancelSession(s){const t=h.sessions.find(e=>e.id===s);t&&(t.status=e.CANCELLED,t.completedAt=new Date,t.currentStage=void 0,h.currentSession?.id===s&&(h.currentStage=null,h.isExecuting=!1,h.streamingOutput=""),h.sessions=[...h.sessions])},setCurrentSession(e){if(null===e)return void(h.currentSession=null);const s=h.sessions.find(s=>s.id===e);s&&(h.currentSession=s)},deleteSession(e){h.sessions=h.sessions.filter(s=>s.id!==e),h.currentSession?.id===e&&(h.currentSession=null,h.currentStage=null,h.isExecuting=!1,h.streamingOutput="")},clearAll(){h.sessions=[],h.currentSession=null,h.isExecuting=!1,h.streamingOutput="",h.currentStage=null}};const g="http://localhost:8787";function f(e,s){e.component(e=>{let{planDeliverable:i,planSessionId:a}=s,u=null,o=!1,v=!0,x=!1,h=!1;const f=m.isExecuting;e.push('<div class="execution-request svelte-bs7sxw">'),u?(e.push("\x3c!--[--\x3e"),l(e,{variant:"error",children:e=>{e.push(`\x3c!----\x3e${r(u.userMessage)}`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),i?(e.push("\x3c!--[--\x3e"),e.push(`<div class="plan-summary svelte-bs7sxw"><h3 class="svelte-bs7sxw">${r(i.plan.title)}</h3> <p class="plan-overview svelte-bs7sxw">${r(i.plan.overview)}</p> <div class="plan-meta svelte-bs7sxw">`),n(e,{variant:"info",children:e=>{e.push(`\x3c!----\x3e${r(i.plan.steps.length)} steps`)},$$slots:{default:!0}}),e.push("\x3c!----\x3e "),n(e,{variant:"info",children:e=>{e.push(`\x3c!----\x3e${r(i.plan.estimatedEffort)}`)},$$slots:{default:!0}}),e.push(`\x3c!----\x3e</div></div> <div class="execution-options svelte-bs7sxw"><h4 class="svelte-bs7sxw">Execution Options</h4> <label class="option svelte-bs7sxw"><input type="checkbox"${p("checked",v,!0)}${p("disabled",f,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Run tests after code generation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox"${p("checked",x,!0)}${p("disabled",f,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Generate documentation</span></label> <label class="option svelte-bs7sxw"><input type="checkbox"${p("checked",h,!0)}${p("disabled",f,!0)} class="svelte-bs7sxw"/> <span class="svelte-bs7sxw">Auto-commit changes (if tests pass)</span></label></div> <div class="actions svelte-bs7sxw">`),c(e,{variant:"primary",onclick:async function(){if(!i||!a)return;u=null,o=!0;const e={planSessionId:a,plan:i,options:{runTests:v,generateDocs:x,autoCommit:h}};try{const s=await async function(e){try{const s=await fetch(`${g}/api/v1/bds/execution/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e.plan||"",language:e.language||"typescript",framework:e.framework||""})});if(!s.ok){const e=await s.json();return{success:!1,error:d(new Error(e.detail||"Failed to start session"))}}const{sessionId:i}=await s.json(),a=m.createSession(e);a.id=i,m.startSession(a.id);const c=`${g}/api/v1/bds/execution/${i}/stream`;return t.subscribe(c,{onChunk:e=>{m.appendStreamingOutput(e)},onStageStart:e=>{const s=e;m.advanceStage(a.id,s)},onStageEnd:(e,s)=>{const t=e,i=s;m.updateStageOutput(a.id,t,i),m.clearStreamingOutput()},onComplete:e=>{const s=e;m.completeSession(a.id,s)},onError:e=>{m.failSession(a.id,e.message)}}),{success:!0,sessionId:a.id}}catch(u){return{success:!1,error:d(u)}}}(e);!s.success&&s.error&&(u=s.error)}catch(s){}finally{o=!1}},disabled:f||o,loading:o,children:e=>{e.push(`\x3c!----\x3e${r(o?"Starting Execution...":"Execute Plan")}`)},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div>")):(e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-bs7sxw"><p>Load a plan from the Planning Agent to begin execution.</p></div>')),e.push("\x3c!--]--\x3e</div>")})}function $(e,s){e.component(e=>{let{code:t,isStreaming:i,language:a="typescript"}=s;function l(){if("string"==typeof t)return t;const e=[];if(t.filesCreated?.length>0)for(const s of t.filesCreated)e.push(`// === ${s.path} (new file) ===\n${s.content}`);if(t.filesModified?.length>0)for(const s of t.filesModified)e.push(`// === ${s.path} (modified) ===\n${s.diff}`);return e.join("\n\n")}e.push('<div class="code-generation svelte-205pas"><div class="code-header svelte-205pas"><h4 class="svelte-205pas">Generated Code</h4> <div class="code-actions svelte-205pas">'),c(e,{variant:"secondary",size:"sm",onclick:async function(){try{await navigator.clipboard.writeText(l())}catch(e){}},disabled:!("string"==typeof t?t.length>0:(t.filesCreated?.length??0)>0||(t.filesModified?.length??0)>0),children:e=>{e.push("\x3c!----\x3eCopy")},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div></div> "),t||i?(e.push("\x3c!--[--\x3e"),e.push(`<div${u("code-container svelte-205pas",void 0,{streaming:i})}><pre${u(`code-block language-${o(a)}`,"svelte-205pas")}><code class="svelte-205pas">${r(l())}</code></pre> `),i?(e.push("\x3c!--[--\x3e"),e.push('<div class="streaming-indicator svelte-205pas"><div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <div class="dot svelte-205pas"></div> <span class="svelte-205pas">Generating code...</span></div>')):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")):(e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-205pas"><p class="svelte-205pas">Code will appear here when execution starts.</p></div>')),e.push("\x3c!--]--\x3e</div>")})}function w(s,t){s.component(s=>{const t=m.currentSession,l=m.isExecuting,d=m.streamingOutput;i(s,{children:s=>{s.push('<div class="execution-page svelte-2mqxtd"><header class="page-header svelte-2mqxtd"><h1 class="svelte-2mqxtd">Execution Agent</h1> <p class="text-muted svelte-2mqxtd">Execute code generation and implementation tasks</p></header> <div class="content-grid svelte-2mqxtd"><div class="left-column svelte-2mqxtd">'),a(s,{title:"New Execution Request",children:e=>{f(e,{})},$$slots:{default:!0}}),s.push("\x3c!----\x3e "),t?(s.push("\x3c!--[--\x3e"),a(s,{title:"Execution History",class:"mt-6",children:s=>{!function(s){s.component(s=>{const t=m.sessions;function i(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function a(e,s){const t=(s||new Date).getTime()-e.getTime();return t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${(t/6e4).toFixed(1)}m`}function l(s){switch(s){case e.COMPLETED:return"success";case e.RUNNING:return"warning";case e.FAILED:case e.CANCELLED:return"danger";default:return"neutral"}}function d(s){switch(s){case e.COMPLETED:return"‚úÖ";case e.RUNNING:return"‚è≥";case e.FAILED:return"‚ùå";case e.CANCELLED:return"üö´";default:return"‚è∏Ô∏è"}}if(s.push('<div class="execution-history svelte-100842h">'),t.length>0){s.push("\x3c!--[--\x3e"),s.push(`<div class="history-header svelte-100842h"><h3 class="svelte-100842h">Past Executions (${r(t.length)})</h3> `),c(s,{variant:"ghost",size:"sm",onclick:()=>m.clearAll(),children:e=>{e.push("\x3c!----\x3eClear All")},$$slots:{default:!0}}),s.push('\x3c!----\x3e</div> <div class="sessions-list svelte-100842h">\x3c!--[--\x3e');const e=x(t);for(let t=0,p=e.length;t<p;t++){let p=e[t];const o=m.currentSession?.id===p.id;s.push(`<div${u("session-card svelte-100842h",void 0,{active:o})} role="button" tabindex="0"><div class="session-header svelte-100842h"><div class="session-info svelte-100842h"><span class="session-icon svelte-100842h">${r(d(p.status))}</span> <div class="session-title-group svelte-100842h"><div class="session-title svelte-100842h">`),p.request.plan?.plan?.title?(s.push("\x3c!--[--\x3e"),s.push(`${r(p.request.plan.plan.title)}`)):(s.push("\x3c!--[!--\x3e"),s.push(`Execution #${r(p.id.split("_")[1])}`)),s.push(`\x3c!--]--\x3e</div> <div class="session-meta svelte-100842h"><span class="session-date">${r(i(p.createdAt))}</span> `),p.startedAt&&p.completedAt?(s.push("\x3c!--[--\x3e"),s.push(`<span class="session-duration">${r(a(p.startedAt,p.completedAt))}</span>`)):(s.push("\x3c!--[!--\x3e"),p.startedAt?(s.push("\x3c!--[--\x3e"),s.push(`<span class="session-duration">${r(a(p.startedAt))}</span>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e")),s.push("\x3c!--]--\x3e</div></div></div> "),n(s,{variant:l(p.status),children:e=>{e.push(`\x3c!----\x3e${r(p.status)}`)},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div> "),p.result?(s.push("\x3c!--[--\x3e"),s.push('<div class="session-stats svelte-100842h">'),p.result.filesModified?(s.push("\x3c!--[--\x3e"),s.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üìÅ</span> <span class="stat-value svelte-100842h">${r(p.result.filesModified.length)}</span> <span class="stat-label svelte-100842h">files</span></div>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),p.result.testResults?(s.push("\x3c!--[--\x3e"),s.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üß™</span> <span class="stat-value svelte-100842h">${r(p.result.testResults.passed)}</span> <span class="stat-label svelte-100842h">passed</span></div>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),p.result.metrics?(s.push("\x3c!--[--\x3e"),s.push(`<div class="stat svelte-100842h"><span class="stat-icon svelte-100842h">üî¢</span> <span class="stat-value svelte-100842h">${r(p.result.metrics.tokensUsed<1e3?p.result.metrics.tokensUsed:`${(p.result.metrics.tokensUsed/1e3).toFixed(1)}K`)}</span> <span class="stat-label svelte-100842h">tokens</span></div>`)):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e</div>")):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e "),p.error?(s.push("\x3c!--[--\x3e"),s.push(`<div class="session-error svelte-100842h"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>${r(p.error)}</span></div>`)):s.push("\x3c!--[!--\x3e"),s.push('\x3c!--]--\x3e <div class="session-actions svelte-100842h">'),c(s,{variant:"ghost",size:"sm",onclick:e=>{var s;e.stopPropagation(),s=p.id,m.setCurrentSession(s)},children:e=>{e.push("\x3c!----\x3eView Details")},$$slots:{default:!0}}),s.push("\x3c!----\x3e "),c(s,{variant:"ghost",size:"sm",onclick:e=>{var s;e.stopPropagation(),s=p.id,confirm("Are you sure you want to delete this session?")&&m.deleteSession(s)},children:e=>{e.push("\x3c!----\x3eDelete")},$$slots:{default:!0}}),s.push("\x3c!----\x3e</div></div>")}s.push("\x3c!--]--\x3e</div>")}else s.push("\x3c!--[!--\x3e"),s.push('<div class="empty-state svelte-100842h"><div class="empty-icon svelte-100842h">üìã</div> <p class="empty-title svelte-100842h">No execution history</p> <p class="empty-description svelte-100842h">Start an execution to see your history here.</p></div>');s.push("\x3c!--]--\x3e</div>")})}(s)},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push('\x3c!--]--\x3e</div> <div class="right-column svelte-2mqxtd">'),t?(s.push("\x3c!--[--\x3e"),t.status===e.RUNNING?(s.push("\x3c!--[--\x3e"),a(s,{title:"Execution in Progress",children:e=>{d?(e.push("\x3c!--[--\x3e"),$(e,{code:d,isStreaming:l})):(e.push("\x3c!--[!--\x3e"),e.push('<div class="progress-message svelte-2mqxtd"><div class="spinner svelte-2mqxtd"></div> <p class="svelte-2mqxtd">Initializing execution...</p></div>')),e.push("\x3c!--]--\x3e")},$$slots:{default:!0}})):(s.push("\x3c!--[!--\x3e"),t.status===e.COMPLETED&&t.result?(s.push("\x3c!--[--\x3e"),a(s,{title:"Execution Complete",children:e=>{e.push('<div class="results-section svelte-2mqxtd">'),t.result.code?(e.push("\x3c!--[--\x3e"),e.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Generated Code</h3> '),$(e,{code:t.result.code,isStreaming:!1}),e.push("\x3c!----\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),t.result.tests?(e.push("\x3c!--[--\x3e"),e.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Test Results</h3> '),function(e,s){e.component(e=>{let{results:t}=s;const i=t&&t.total>0?(t.passed/t.total*100).toFixed(1):"0";if(e.push('<div class="test-results svelte-czdiq9"><h4 class="svelte-czdiq9">Test Results</h4> '),t){if(e.push("\x3c!--[--\x3e"),e.push(`<div class="results-summary svelte-czdiq9"><div class="summary-card passed svelte-czdiq9"><span class="count svelte-czdiq9">${r(t.passed)}</span> <span class="label svelte-czdiq9">Passed</span></div> <div class="summary-card failed svelte-czdiq9"><span class="count svelte-czdiq9">${r(t.failed)}</span> <span class="label svelte-czdiq9">Failed</span></div> <div class="summary-card skipped svelte-czdiq9"><span class="count svelte-czdiq9">${r(t.skipped)}</span> <span class="label svelte-czdiq9">Skipped</span></div> <div class="summary-card total svelte-czdiq9"><span class="count svelte-czdiq9">${r(t.total)}</span> <span class="label svelte-czdiq9">Total</span></div></div> <div class="pass-rate svelte-czdiq9"><div class="pass-rate-bar svelte-czdiq9"><div class="pass-rate-fill svelte-czdiq9"${v(`width: ${o(i)}%`)}></div></div> <span class="pass-rate-text svelte-czdiq9">${r(i)}% Pass Rate</span></div> `),t.coverage?(e.push("\x3c!--[--\x3e"),e.push('<div class="coverage svelte-czdiq9"><h5 class="svelte-czdiq9">Coverage</h5> <div class="coverage-items svelte-czdiq9"><div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Lines:</span> '),n(e,{variant:t.coverage.lines>=80?"success":"warning",children:e=>{e.push(`\x3c!----\x3e${r(t.coverage.lines)}%`)},$$slots:{default:!0}}),e.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Functions:</span> '),n(e,{variant:t.coverage.functions>=80?"success":"warning",children:e=>{e.push(`\x3c!----\x3e${r(t.coverage.functions)}%`)},$$slots:{default:!0}}),e.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Branches:</span> '),n(e,{variant:t.coverage.branches>=80?"success":"warning",children:e=>{e.push(`\x3c!----\x3e${r(t.coverage.branches)}%`)},$$slots:{default:!0}}),e.push('\x3c!----\x3e</div> <div class="coverage-item svelte-czdiq9"><span class="coverage-label svelte-czdiq9">Statements:</span> '),n(e,{variant:t.coverage.statements>=80?"success":"warning",children:e=>{e.push(`\x3c!----\x3e${r(t.coverage.statements)}%`)},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div></div></div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),t.failures.length>0){e.push("\x3c!--[--\x3e"),e.push('<div class="failures svelte-czdiq9"><h5 class="svelte-czdiq9">Failed Tests</h5> \x3c!--[--\x3e');const s=x(t.failures);for(let t=0,i=s.length;t<i;t++){let i=s[t];e.push(`<div class="failure-card svelte-czdiq9"><div class="failure-header svelte-czdiq9"><span class="failure-name svelte-czdiq9">${r(i.testName)}</span> <span class="failure-path svelte-czdiq9">${r(i.filePath)}</span></div> <pre class="failure-error svelte-czdiq9">${r(i.error)}</pre> `),i.stack?(e.push("\x3c!--[--\x3e"),e.push(`<details class="failure-stack svelte-czdiq9"><summary class="svelte-czdiq9">Stack Trace</summary> <pre class="svelte-czdiq9">${r(i.stack)}</pre></details>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")}e.push("\x3c!--]--\x3e</div>")}else e.push("\x3c!--[!--\x3e");e.push("\x3c!--]--\x3e")}else e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-czdiq9"><p>Test results will appear here after execution.</p></div>');e.push("\x3c!--]--\x3e</div>")})}(e,{results:t.result.tests}),e.push("\x3c!----\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),t.result.code?.filesModified&&t.result.code.filesModified.length>0?(e.push("\x3c!--[--\x3e"),e.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">File Changes</h3> '),function(e,s){e.component(e=>{let{changes:t,isStreaming:i=!1}=s;const a=t.reduce((e,s)=>e+(s.additions||0),0),c=t.reduce((e,s)=>e+(s.deletions||0),0),l=()=>{const e={added:0,modified:0,deleted:0,renamed:0};return t.forEach(s=>{s.type in e&&e[s.type]++}),e};function d(e){switch(e){case"added":return"‚ûï";case"modified":return"‚úèÔ∏è";case"deleted":return"üóëÔ∏è";case"renamed":return"üìù";default:return"üìÑ"}}function p(e){switch(e){case"added":return"success";case"modified":return"warning";case"deleted":return"danger";default:return"neutral"}}if(e.push('<div class="file-changes svelte-c6rpoy">'),t.length>0){e.push("\x3c!--[--\x3e"),e.push(`<div class="changes-summary svelte-c6rpoy"><div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Files Changed:</span> <span class="summary-value svelte-c6rpoy">${r(t.length)}</span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Additions:</span> <span class="summary-value text-success svelte-c6rpoy">+${r(a)}</span></div> <div class="summary-item svelte-c6rpoy"><span class="summary-label svelte-c6rpoy">Deletions:</span> <span class="summary-value text-danger svelte-c6rpoy">-${r(c)}</span></div></div> <div class="change-types svelte-c6rpoy">`),l().added>0?(e.push("\x3c!--[--\x3e"),n(e,{variant:"success",children:e=>{e.push(`\x3c!----\x3e${r(l().added)} Added`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),l().modified>0?(e.push("\x3c!--[--\x3e"),n(e,{variant:"warning",children:e=>{e.push(`\x3c!----\x3e${r(l().modified)} Modified`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),l().deleted>0?(e.push("\x3c!--[--\x3e"),n(e,{variant:"danger",children:e=>{e.push(`\x3c!----\x3e${r(l().deleted)} Deleted`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),l().renamed>0?(e.push("\x3c!--[--\x3e"),n(e,{variant:"neutral",children:e=>{e.push(`\x3c!----\x3e${r(l().renamed)} Renamed`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push('\x3c!--]--\x3e</div> <div class="changes-list svelte-c6rpoy">\x3c!--[--\x3e');const s=x(t);for(let t=0,i=s.length;t<i;t++){let i=s[t];if(e.push(`<div class="change-item svelte-c6rpoy"><div class="change-header svelte-c6rpoy"><div class="change-info svelte-c6rpoy"><span class="change-icon svelte-c6rpoy">${r(d(i.type))}</span> <span class="change-path svelte-c6rpoy">${r(i.path)}</span> `),n(e,{variant:p(i.type),children:e=>{e.push(`\x3c!----\x3e${r(i.type)}`)},$$slots:{default:!0}}),e.push("\x3c!----\x3e</div> "),void 0!==i.additions||void 0!==i.deletions?(e.push("\x3c!--[--\x3e"),e.push('<div class="change-stats svelte-c6rpoy">'),void 0!==i.additions&&i.additions>0?(e.push("\x3c!--[--\x3e"),e.push(`<span class="stat-addition svelte-c6rpoy">+${r(i.additions)}</span>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),void 0!==i.deletions&&i.deletions>0?(e.push("\x3c!--[--\x3e"),e.push(`<span class="stat-deletion svelte-c6rpoy">-${r(i.deletions)}</span>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div> "),"renamed"===i.type&&i.oldPath?(e.push("\x3c!--[--\x3e"),e.push(`<div class="change-detail svelte-c6rpoy"><span class="text-muted svelte-c6rpoy">Renamed from:</span> <code class="old-path svelte-c6rpoy">${r(i.oldPath)}</code></div>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),i.description?(e.push("\x3c!--[--\x3e"),e.push(`<div class="change-description svelte-c6rpoy">${r(i.description)}</div>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),void 0!==i.additions&&void 0!==i.deletions){e.push("\x3c!--[--\x3e");const s=i.additions+i.deletions,t=s>0?i.additions/s*100:0;e.push(`<div class="change-bar svelte-c6rpoy"><div class="change-bar-addition svelte-c6rpoy"${v(`width: ${o(t)}%`)}></div> <div class="change-bar-deletion svelte-c6rpoy"${v(`width: ${o(100-t)}%`)}></div></div>`)}else e.push("\x3c!--[!--\x3e");e.push("\x3c!--]--\x3e</div>")}e.push("\x3c!--]--\x3e</div> "),i?(e.push("\x3c!--[--\x3e"),e.push('<div class="streaming-indicator svelte-c6rpoy"><div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <div class="dot svelte-c6rpoy"></div> <span class="svelte-c6rpoy">Generating more changes...</span></div>')):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e")}else e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-c6rpoy"><p class="text-muted svelte-c6rpoy">No file changes yet. Start an execution to see changes.</p></div>');e.push("\x3c!--]--\x3e</div>")})}(e,{changes:t.result.code.filesModified}),e.push("\x3c!----\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),t.result.metrics?(e.push("\x3c!--[--\x3e"),e.push('<div class="section-block svelte-2mqxtd"><h3 class="svelte-2mqxtd">Execution Metrics</h3> '),function(e,s){e.component(e=>{let{metrics:t}=s;function i(e){return e<1e3?e.toString():e<1e6?`${(e/1e3).toFixed(1)}K`:`${(e/1e6).toFixed(1)}M`}var a,c;e.push('<div class="metrics-display svelte-1p8lewm">'),t?(e.push("\x3c!--[--\x3e"),e.push(`<div class="metrics-grid svelte-1p8lewm"><div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üî¢</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tokens Used</div> <div class="metric-value svelte-1p8lewm">${r(i(t.tokensUsed))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Input: ${r(i(t.inputTokens))}</span> <span class="text-muted svelte-1p8lewm">Output: ${r(i(t.outputTokens))}</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üí∞</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Estimated Cost</div> <div class="metric-value svelte-1p8lewm">${r((c=t.cost,`$${c.toFixed(4)}`))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">Per 1M tokens</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">‚è±Ô∏è</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Execution Time</div> <div class="metric-value svelte-1p8lewm">${r((a=t.duration,a<1e3?`${a}ms`:a<6e4?`${(a/1e3).toFixed(1)}s`:`${(a/6e4).toFixed(1)}m`))}</div> <div class="metric-detail svelte-1p8lewm"><span class="text-muted svelte-1p8lewm">${r(t.startTime?new Date(t.startTime).toLocaleTimeString():"")} -\n\t\t\t\t\t\t\t${r(t.endTime?new Date(t.endTime).toLocaleTimeString():"")}</span></div></div></div> <div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">ü§ñ</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Model</div> <div class="metric-value svelte-1p8lewm">${r(t.modelUsed||"Unknown")}</div> <div class="metric-detail svelte-1p8lewm">`),t.provider?(e.push("\x3c!--[--\x3e"),n(e,{variant:"neutral",children:e=>{e.push(`\x3c!----\x3e${r(t.provider)}`)},$$slots:{default:!0}})):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div></div></div> "),void 0!==t.filesModified?(e.push("\x3c!--[--\x3e"),e.push(`<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üìÅ</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Files Modified</div> <div class="metric-value svelte-1p8lewm">${r(t.filesModified)}</div> <div class="metric-detail svelte-1p8lewm">`),void 0!==t.linesAdded&&void 0!==t.linesRemoved?(e.push("\x3c!--[--\x3e"),e.push(`<span class="text-success svelte-1p8lewm">+${r(t.linesAdded)}</span> <span class="text-danger svelte-1p8lewm">-${r(t.linesRemoved)}</span>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div></div></div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),void 0!==t.testsRun?(e.push("\x3c!--[--\x3e"),e.push(`<div class="metric-card svelte-1p8lewm"><div class="metric-icon svelte-1p8lewm">üß™</div> <div class="metric-content svelte-1p8lewm"><div class="metric-label svelte-1p8lewm">Tests Executed</div> <div class="metric-value svelte-1p8lewm">${r(t.testsRun)}</div> <div class="metric-detail svelte-1p8lewm">`),void 0!==t.testsPassed&&void 0!==t.testsFailed?(e.push("\x3c!--[--\x3e"),e.push(`<span class="text-success svelte-1p8lewm">${r(t.testsPassed)} passed</span> <span class="text-danger svelte-1p8lewm">${r(t.testsFailed)} failed</span>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div></div></div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div> "),t.tokensUsed>1e5?(e.push("\x3c!--[--\x3e"),e.push('<div class="insights svelte-1p8lewm"><div class="insight-card warning svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <span>High token usage detected. Consider breaking down complex tasks.</span></div></div>')):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e "),t.duration>3e5?(e.push("\x3c!--[--\x3e"),e.push('<div class="insights svelte-1p8lewm"><div class="insight-card info svelte-1p8lewm"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z"></path></svg> <span>Long execution time. Consider optimizing prompts or breaking into smaller steps.</span></div></div>')):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e")):(e.push("\x3c!--[!--\x3e"),e.push('<div class="empty-state svelte-1p8lewm"><p class="text-muted svelte-1p8lewm">No metrics available yet. Start an execution to see metrics.</p></div>')),e.push("\x3c!--]--\x3e</div>")})}(e,{metrics:t.result.metrics}),e.push("\x3c!----\x3e</div>")):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")},$$slots:{default:!0}})):(s.push("\x3c!--[!--\x3e"),t.status===e.FAILED?(s.push("\x3c!--[--\x3e"),a(s,{title:"Execution Failed",children:e=>{e.push('<div class="error-state svelte-2mqxtd"><svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" class="svelte-2mqxtd"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 4h2v5H7V4zm0 6h2v2H7v-2z"></path></svg> <h3 class="svelte-2mqxtd">Execution Failed</h3> '),t.error?(e.push("\x3c!--[--\x3e"),e.push(`<p class="error-message svelte-2mqxtd">${r(t.error)}</p>`)):e.push("\x3c!--[!--\x3e"),e.push("\x3c!--]--\x3e</div>")},$$slots:{default:!0}})):s.push("\x3c!--[!--\x3e"),s.push("\x3c!--]--\x3e")),s.push("\x3c!--]--\x3e")),s.push("\x3c!--]--\x3e")):(s.push("\x3c!--[!--\x3e"),a(s,{title:"Welcome",children:e=>{e.push('<div class="empty-state svelte-2mqxtd"><div class="empty-icon svelte-2mqxtd">‚ö°</div> <h2 class="svelte-2mqxtd">Start an Execution Session</h2> <p class="svelte-2mqxtd">Load a plan from the Planning Agent or create a new execution request to begin.</p></div>')},$$slots:{default:!0}})),s.push("\x3c!--]--\x3e</div></div></div>")},$$slots:{default:!0}})})}export{w as default};
