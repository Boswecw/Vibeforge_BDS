{"version":3,"file":"vendor-sveltekit.js","sources":["../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/promise.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/constants.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/paths/internal/server.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/constants.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/form-utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/http.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/error.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared-server.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/escape.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/array.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/pathname.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/telemetry/noop.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/telemetry/record_span.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/actions.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/streaming.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/data_serializer.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/url.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/load_data.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/hash.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/serialize_data.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/misc.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/crypto.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/csp.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/routing.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/server_routing.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/render.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/exports.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/page_nodes.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/respond_with_error.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/remote.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/data/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/cookie.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/env_module.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/fetch.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/respond.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/functions.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/endpoint.js","../../../generated/root.js","../../../generated/server/internal.js","../../../generated/root.svelte","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/env.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/shared.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/command.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/form.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/prerender.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/query.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/stores.js"],"sourcesContent":["/** @see https://github.com/microsoft/TypeScript/blob/904e7dd97dc8da1352c8e05d70829dff17c73214/src/lib/es2024.promise.d.ts */\n\n/**\n * @template T\n * @typedef {{\n *   promise: Promise<T>;\n *   resolve: (value: T | PromiseLike<T>) => void;\n *   reject: (reason?: any) => void;\n * }} PromiseWithResolvers<T>\n */\n\n/**\n * TODO: Whenever Node >21 is minimum supported version, we can use `Promise.withResolvers` to avoid this ceremony\n *\n * @template T\n * @returns {PromiseWithResolvers<T>}\n */\nexport function with_resolvers() {\n\tlet resolve;\n\tlet reject;\n\n\tconst promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error `resolve` and `reject` are assigned!\n\treturn { promise, resolve, reject };\n}\n","export const NULL_BODY_STATUS = [101, 103, 204, 205, 304];\n\n// eslint-disable-next-line n/prefer-global/process\nexport const IN_WEBCONTAINER = !!globalThis.process?.versions?.webcontainer;\n","export let base = __SVELTEKIT_PATHS_BASE__;\nexport let assets = __SVELTEKIT_PATHS_ASSETS__ || base;\nexport const app_dir = __SVELTEKIT_APP_DIR__;\nexport const relative = __SVELTEKIT_PATHS_RELATIVE__;\n\nconst initial = { base, assets };\n\n/**\n * `base` could be overridden during rendering to be relative;\n * this one's the original non-relative base path\n */\nexport const initial_base = initial.base;\n\n/**\n * @param {{ base: string, assets: string }} paths\n */\nexport function override(paths) {\n\tbase = paths.base;\n\tassets = paths.assets;\n}\n\nexport function reset() {\n\tbase = initial.base;\n\tassets = initial.assets;\n}\n\n/** @param {string} path */\nexport function set_assets(path) {\n\tassets = initial.assets = path;\n}\n","/**\n * A fake asset path used in `vite dev` and `vite preview`, so that we can\n * serve local assets while verifying that requests are correctly prefixed\n */\nexport const SVELTE_KIT_ASSETS = '/_svelte_kit_assets';\n\nexport const GENERATED_COMMENT = '// this file is generated — do not edit it\\n';\n\nexport const ENDPOINT_METHODS = ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS', 'HEAD'];\n\nexport const PAGE_METHODS = ['GET', 'POST', 'HEAD'];\n","import { BROWSER } from 'esm-env';\n\nexport const text_encoder = new TextEncoder();\nexport const text_decoder = new TextDecoder();\n\n/**\n * Like node's path.relative, but without using node\n * @param {string} from\n * @param {string} to\n */\nexport function get_relative_path(from, to) {\n\tconst from_parts = from.split(/[/\\\\]/);\n\tconst to_parts = to.split(/[/\\\\]/);\n\tfrom_parts.pop(); // get dirname\n\n\twhile (from_parts[0] === to_parts[0]) {\n\t\tfrom_parts.shift();\n\t\tto_parts.shift();\n\t}\n\n\tlet i = from_parts.length;\n\twhile (i--) from_parts[i] = '..';\n\n\treturn from_parts.concat(to_parts).join('/');\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {string}\n */\nexport function base64_encode(bytes) {\n\t// Using `Buffer` is faster than iterating\n\tif (!BROWSER && globalThis.Buffer) {\n\t\treturn globalThis.Buffer.from(bytes).toString('base64');\n\t}\n\n\tlet binary = '';\n\n\tfor (let i = 0; i < bytes.length; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\n\treturn btoa(binary);\n}\n\n/**\n * @param {string} encoded\n * @returns {Uint8Array}\n */\nexport function base64_decode(encoded) {\n\t// Using `Buffer` is faster than iterating\n\tif (!BROWSER && globalThis.Buffer) {\n\t\tconst buffer = globalThis.Buffer.from(encoded, 'base64');\n\t\treturn new Uint8Array(buffer);\n\t}\n\n\tconst binary = atob(encoded);\n\tconst bytes = new Uint8Array(binary.length);\n\n\tfor (let i = 0; i < binary.length; i++) {\n\t\tbytes[i] = binary.charCodeAt(i);\n\t}\n\n\treturn bytes;\n}\n","/** @import { RemoteForm } from '@sveltejs/kit' */\n/** @import { BinaryFormMeta, InternalRemoteFormIssue } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\n\nimport { DEV } from 'esm-env';\nimport * as devalue from 'devalue';\nimport { text_decoder, text_encoder } from './utils.js';\n\n/**\n * Sets a value in a nested object using a path string, mutating the original object\n * @param {Record<string, any>} object\n * @param {string} path_string\n * @param {any} value\n */\nexport function set_nested_value(object, path_string, value) {\n\tif (path_string.startsWith('n:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === '' ? undefined : parseFloat(value);\n\t} else if (path_string.startsWith('b:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === 'on';\n\t}\n\n\tdeep_set(object, split_path(path_string), value);\n}\n\n/**\n * Convert `FormData` into a POJO\n * @param {FormData} data\n */\nexport function convert_formdata(data) {\n\t/** @type {Record<string, any>} */\n\tconst result = {};\n\n\tfor (let key of data.keys()) {\n\t\tconst is_array = key.endsWith('[]');\n\t\t/** @type {any[]} */\n\t\tlet values = data.getAll(key);\n\n\t\tif (is_array) key = key.slice(0, -2);\n\n\t\tif (values.length > 1 && !is_array) {\n\t\t\tthrow new Error(`Form cannot contain duplicated keys — \"${key}\" has ${values.length} values`);\n\t\t}\n\n\t\t// an empty `<input type=\"file\">` will submit a non-existent file, bizarrely\n\t\tvalues = values.filter(\n\t\t\t(entry) => typeof entry === 'string' || entry.name !== '' || entry.size > 0\n\t\t);\n\n\t\tif (key.startsWith('n:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => (v === '' ? undefined : parseFloat(/** @type {string} */ (v))));\n\t\t} else if (key.startsWith('b:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => v === 'on');\n\t\t}\n\n\t\tset_nested_value(result, key, is_array ? values : values[0]);\n\t}\n\n\treturn result;\n}\n\nexport const BINARY_FORM_CONTENT_TYPE = 'application/x-sveltekit-formdata';\nconst BINARY_FORM_VERSION = 0;\n\n/**\n * The binary format is as follows:\n * - 1 byte: Format version\n * - 4 bytes: Length of the header (u32)\n * - 2 bytes: Length of the file offset table (u16)\n * - header: devalue.stringify([data, meta])\n * - file offset table: JSON.stringify([offset1, offset2, ...]) (empty if no files) (offsets start from the end of the table)\n * - file1, file2, ...\n * @param {Record<string, any>} data\n * @param {BinaryFormMeta} meta\n */\nexport function serialize_binary_form(data, meta) {\n\t/** @type {Array<BlobPart>} */\n\tconst blob_parts = [new Uint8Array([BINARY_FORM_VERSION])];\n\n\t/** @type {Array<[file: File, index: number]>} */\n\tconst files = [];\n\n\tif (!meta.remote_refreshes?.length) {\n\t\tdelete meta.remote_refreshes;\n\t}\n\n\tconst encoded_header = devalue.stringify([data, meta], {\n\t\tFile: (file) => {\n\t\t\tif (!(file instanceof File)) return;\n\n\t\t\tfiles.push([file, files.length]);\n\t\t\treturn [file.name, file.type, file.size, file.lastModified, files.length - 1];\n\t\t}\n\t});\n\n\tconst encoded_header_buffer = text_encoder.encode(encoded_header);\n\n\tlet encoded_file_offsets = '';\n\tif (files.length) {\n\t\t// Sort small files to the front\n\t\tfiles.sort(([a], [b]) => a.size - b.size);\n\n\t\t/** @type {Array<number>} */\n\t\tconst file_offsets = new Array(files.length);\n\t\tlet start = 0;\n\t\tfor (const [file, index] of files) {\n\t\t\tfile_offsets[index] = start;\n\t\t\tstart += file.size;\n\t\t}\n\t\tencoded_file_offsets = JSON.stringify(file_offsets);\n\t}\n\n\tconst length_buffer = new Uint8Array(4);\n\tconst length_view = new DataView(length_buffer.buffer);\n\n\tlength_view.setUint32(0, encoded_header_buffer.byteLength, true);\n\tblob_parts.push(length_buffer.slice());\n\n\tlength_view.setUint16(0, encoded_file_offsets.length, true);\n\tblob_parts.push(length_buffer.slice(0, 2));\n\n\tblob_parts.push(encoded_header_buffer);\n\tblob_parts.push(encoded_file_offsets);\n\n\tfor (const [file] of files) {\n\t\tblob_parts.push(file);\n\t}\n\n\treturn {\n\t\tblob: new Blob(blob_parts)\n\t};\n}\n\n/**\n * @param {Request} request\n * @returns {Promise<{ data: Record<string, any>; meta: BinaryFormMeta; form_data: FormData | null }>}\n */\nexport async function deserialize_binary_form(request) {\n\tif (request.headers.get('content-type') !== BINARY_FORM_CONTENT_TYPE) {\n\t\tconst form_data = await request.formData();\n\t\treturn { data: convert_formdata(form_data), meta: {}, form_data };\n\t}\n\tif (!request.body) {\n\t\tthrow new Error('Could not deserialize binary form: no body');\n\t}\n\n\tconst reader = request.body.getReader();\n\n\t/** @type {Array<Promise<Uint8Array<ArrayBuffer> | undefined>>} */\n\tconst chunks = [];\n\n\t/**\n\t * @param {number} index\n\t * @returns {Promise<Uint8Array<ArrayBuffer> | undefined>}\n\t */\n\tasync function get_chunk(index) {\n\t\tif (index in chunks) return chunks[index];\n\n\t\tlet i = chunks.length;\n\t\twhile (i <= index) {\n\t\t\tchunks[i] = reader.read().then((chunk) => chunk.value);\n\t\t\ti++;\n\t\t}\n\t\treturn chunks[index];\n\t}\n\n\t/**\n\t * @param {number} offset\n\t * @param {number} length\n\t * @returns {Promise<Uint8Array | null>}\n\t */\n\tasync function get_buffer(offset, length) {\n\t\t/** @type {Uint8Array} */\n\t\tlet start_chunk;\n\t\tlet chunk_start = 0;\n\t\t/** @type {number} */\n\t\tlet chunk_index;\n\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\tconst chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\n\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t// If this chunk contains the target offset\n\t\t\tif (offset >= chunk_start && offset < chunk_end) {\n\t\t\t\tstart_chunk = chunk;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tchunk_start = chunk_end;\n\t\t}\n\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\tif (offset + length <= chunk_start + start_chunk.byteLength) {\n\t\t\treturn start_chunk.subarray(offset - chunk_start, offset + length - chunk_start);\n\t\t}\n\t\t// Otherwise, copy the data into a new buffer\n\t\tconst buffer = new Uint8Array(length);\n\t\tbuffer.set(start_chunk.subarray(offset - chunk_start));\n\t\tlet cursor = start_chunk.byteLength - offset + chunk_start;\n\t\twhile (cursor < length) {\n\t\t\tchunk_index++;\n\t\t\tlet chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\t\t\tif (chunk.byteLength > length - cursor) {\n\t\t\t\tchunk = chunk.subarray(0, length - cursor);\n\t\t\t}\n\t\t\tbuffer.set(chunk, cursor);\n\t\t\tcursor += chunk.byteLength;\n\t\t}\n\n\t\treturn buffer;\n\t}\n\n\tconst header = await get_buffer(0, 1 + 4 + 2);\n\tif (!header) throw new Error('Could not deserialize binary form: too short');\n\n\tif (header[0] !== BINARY_FORM_VERSION) {\n\t\tthrow new Error(\n\t\t\t`Could not deserialize binary form: got version ${header[0]}, expected version ${BINARY_FORM_VERSION}`\n\t\t);\n\t}\n\tconst header_view = new DataView(header.buffer);\n\tconst data_length = header_view.getUint32(1, true);\n\tconst file_offsets_length = header_view.getUint16(5, true);\n\n\t// Read the form data\n\tconst data_buffer = await get_buffer(1 + 4 + 2, data_length);\n\tif (!data_buffer) throw new Error('Could not deserialize binary form: data too short');\n\n\t/** @type {Array<number>} */\n\tlet file_offsets;\n\t/** @type {number} */\n\tlet files_start_offset;\n\tif (file_offsets_length > 0) {\n\t\t// Read the file offset table\n\t\tconst file_offsets_buffer = await get_buffer(1 + 4 + 2 + data_length, file_offsets_length);\n\t\tif (!file_offsets_buffer)\n\t\t\tthrow new Error('Could not deserialize binary form: file offset table too short');\n\n\t\tfile_offsets = /** @type {Array<number>} */ (\n\t\t\tJSON.parse(text_decoder.decode(file_offsets_buffer))\n\t\t);\n\t\tfiles_start_offset = 1 + 4 + 2 + data_length + file_offsets_length;\n\t}\n\n\tconst [data, meta] = devalue.parse(text_decoder.decode(data_buffer), {\n\t\tFile: ([name, type, size, last_modified, index]) => {\n\t\t\treturn new Proxy(\n\t\t\t\tnew LazyFile(\n\t\t\t\t\tname,\n\t\t\t\t\ttype,\n\t\t\t\t\tsize,\n\t\t\t\t\tlast_modified,\n\t\t\t\t\tget_chunk,\n\t\t\t\t\tfiles_start_offset + file_offsets[index]\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tgetPrototypeOf() {\n\t\t\t\t\t\t// Trick validators into thinking this is a normal File\n\t\t\t\t\t\treturn File.prototype;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\t// Read the request body asyncronously so it doesn't stall\n\tvoid (async () => {\n\t\tlet has_more = true;\n\t\twhile (has_more) {\n\t\t\tconst chunk = await get_chunk(chunks.length);\n\t\t\thas_more = !!chunk;\n\t\t}\n\t})();\n\n\treturn { data, meta, form_data: null };\n}\n\n/** @implements {File} */\nclass LazyFile {\n\t/** @type {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} */\n\t#get_chunk;\n\t/** @type {number} */\n\t#offset;\n\t/**\n\t * @param {string} name\n\t * @param {string} type\n\t * @param {number} size\n\t * @param {number} last_modified\n\t * @param {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} get_chunk\n\t * @param {number} offset\n\t */\n\tconstructor(name, type, size, last_modified, get_chunk, offset) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.size = size;\n\t\tthis.lastModified = last_modified;\n\t\tthis.webkitRelativePath = '';\n\t\tthis.#get_chunk = get_chunk;\n\t\tthis.#offset = offset;\n\n\t\t// TODO - hacky, required for private members to be accessed on proxy\n\t\tthis.arrayBuffer = this.arrayBuffer.bind(this);\n\t\tthis.bytes = this.bytes.bind(this);\n\t\tthis.slice = this.slice.bind(this);\n\t\tthis.stream = this.stream.bind(this);\n\t\tthis.text = this.text.bind(this);\n\t}\n\t/** @type {ArrayBuffer | undefined} */\n\t#buffer;\n\tasync arrayBuffer() {\n\t\tthis.#buffer ??= await new Response(this.stream()).arrayBuffer();\n\t\treturn this.#buffer;\n\t}\n\tasync bytes() {\n\t\treturn new Uint8Array(await this.arrayBuffer());\n\t}\n\t/**\n\t * @param {number=} start\n\t * @param {number=} end\n\t * @param {string=} contentType\n\t */\n\tslice(start = 0, end = this.size, contentType = this.type) {\n\t\t// https://github.com/nodejs/node/blob/a5f3cd8cb5ba9e7911d93c5fd3ebc6d781220dd8/lib/internal/blob.js#L240\n\t\tif (start < 0) {\n\t\t\tstart = Math.max(this.size + start, 0);\n\t\t} else {\n\t\t\tstart = Math.min(start, this.size);\n\t\t}\n\n\t\tif (end < 0) {\n\t\t\tend = Math.max(this.size + end, 0);\n\t\t} else {\n\t\t\tend = Math.min(end, this.size);\n\t\t}\n\t\tconst size = Math.max(end - start, 0);\n\t\tconst file = new LazyFile(\n\t\t\tthis.name,\n\t\t\tcontentType,\n\t\t\tsize,\n\t\t\tthis.lastModified,\n\t\t\tthis.#get_chunk,\n\t\t\tthis.#offset + start\n\t\t);\n\n\t\treturn file;\n\t}\n\tstream() {\n\t\tlet cursor = 0;\n\t\tlet chunk_index = 0;\n\t\treturn new ReadableStream({\n\t\t\tstart: async (controller) => {\n\t\t\t\tlet chunk_start = 0;\n\t\t\t\tlet start_chunk = null;\n\t\t\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\t\t\tconst chunk = await this.#get_chunk(chunk_index);\n\t\t\t\t\tif (!chunk) return null;\n\n\t\t\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t\t\t// If this chunk contains the target offset\n\t\t\t\t\tif (this.#offset >= chunk_start && this.#offset < chunk_end) {\n\t\t\t\t\t\tstart_chunk = chunk;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tchunk_start = chunk_end;\n\t\t\t\t}\n\t\t\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\t\t\tif (this.#offset + this.size <= chunk_start + start_chunk.byteLength) {\n\t\t\t\t\tcontroller.enqueue(\n\t\t\t\t\t\tstart_chunk.subarray(this.#offset - chunk_start, this.#offset + this.size - chunk_start)\n\t\t\t\t\t);\n\t\t\t\t\tcontroller.close();\n\t\t\t\t} else {\n\t\t\t\t\tcontroller.enqueue(start_chunk.subarray(this.#offset - chunk_start));\n\t\t\t\t\tcursor = start_chunk.byteLength - this.#offset + chunk_start;\n\t\t\t\t}\n\t\t\t},\n\t\t\tpull: async (controller) => {\n\t\t\t\tchunk_index++;\n\t\t\t\tlet chunk = await this.#get_chunk(chunk_index);\n\t\t\t\tif (!chunk) {\n\t\t\t\t\tcontroller.error('Could not deserialize binary form: incomplete file data');\n\t\t\t\t\tcontroller.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (chunk.byteLength > this.size - cursor) {\n\t\t\t\t\tchunk = chunk.subarray(0, this.size - cursor);\n\t\t\t\t}\n\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t\tcursor += chunk.byteLength;\n\t\t\t\tif (cursor >= this.size) {\n\t\t\t\t\tcontroller.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tasync text() {\n\t\treturn text_decoder.decode(await this.arrayBuffer());\n\t}\n}\n\nconst path_regex = /^[a-zA-Z_$]\\w*(\\.[a-zA-Z_$]\\w*|\\[\\d+\\])*$/;\n\n/**\n * @param {string} path\n */\nexport function split_path(path) {\n\tif (!path_regex.test(path)) {\n\t\tthrow new Error(`Invalid path ${path}`);\n\t}\n\n\treturn path.split(/\\.|\\[|\\]/).filter(Boolean);\n}\n\n/**\n * Check if a property key is dangerous and could lead to prototype pollution\n * @param {string} key\n */\nfunction check_prototype_pollution(key) {\n\tif (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n\t\tthrow new Error(\n\t\t\t`Invalid key \"${key}\"` +\n\t\t\t\t(DEV ? ': This key is not allowed to prevent prototype pollution.' : '')\n\t\t);\n\t}\n}\n\n/**\n * Sets a value in a nested object using an array of keys, mutating the original object.\n * @param {Record<string, any>} object\n * @param {string[]} keys\n * @param {any} value\n */\nexport function deep_set(object, keys, value) {\n\tlet current = object;\n\n\tfor (let i = 0; i < keys.length - 1; i += 1) {\n\t\tconst key = keys[i];\n\n\t\tcheck_prototype_pollution(key);\n\n\t\tconst is_array = /^\\d+$/.test(keys[i + 1]);\n\t\tconst exists = key in current;\n\t\tconst inner = current[key];\n\n\t\tif (exists && is_array !== Array.isArray(inner)) {\n\t\t\tthrow new Error(`Invalid array key ${keys[i + 1]}`);\n\t\t}\n\n\t\tif (!exists) {\n\t\t\tcurrent[key] = is_array ? [] : {};\n\t\t}\n\n\t\tcurrent = current[key];\n\t}\n\n\tconst final_key = keys[keys.length - 1];\n\tcheck_prototype_pollution(final_key);\n\tcurrent[final_key] = value;\n}\n\n/**\n * @param {StandardSchemaV1.Issue} issue\n * @param {boolean} server Whether this issue came from server validation\n */\nexport function normalize_issue(issue, server = false) {\n\t/** @type {InternalRemoteFormIssue} */\n\tconst normalized = { name: '', path: [], message: issue.message, server };\n\n\tif (issue.path !== undefined) {\n\t\tlet name = '';\n\n\t\tfor (const segment of issue.path) {\n\t\t\tconst key = /** @type {string | number} */ (\n\t\t\t\ttypeof segment === 'object' ? segment.key : segment\n\t\t\t);\n\n\t\t\tnormalized.path.push(key);\n\n\t\t\tif (typeof key === 'number') {\n\t\t\t\tname += `[${key}]`;\n\t\t\t} else if (typeof key === 'string') {\n\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t}\n\t\t}\n\n\t\tnormalized.name = name;\n\t}\n\n\treturn normalized;\n}\n\n/**\n * @param {InternalRemoteFormIssue[]} issues\n */\nexport function flatten_issues(issues) {\n\t/** @type {Record<string, InternalRemoteFormIssue[]>} */\n\tconst result = {};\n\n\tfor (const issue of issues) {\n\t\t(result.$ ??= []).push(issue);\n\n\t\tlet name = '';\n\n\t\tif (issue.path !== undefined) {\n\t\t\tfor (const key of issue.path) {\n\t\t\t\tif (typeof key === 'number') {\n\t\t\t\t\tname += `[${key}]`;\n\t\t\t\t} else if (typeof key === 'string') {\n\t\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t\t}\n\n\t\t\t\t(result[name] ??= []).push(issue);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Gets a nested value from an object using a path array\n * @param {Record<string, any>} object\n * @param {(string | number)[]} path\n * @returns {any}\n */\n\nexport function deep_get(object, path) {\n\tlet current = object;\n\tfor (const key of path) {\n\t\tif (current == null || typeof current !== 'object') {\n\t\t\treturn current;\n\t\t}\n\t\tcurrent = current[key];\n\t}\n\treturn current;\n}\n\n/**\n * Creates a proxy-based field accessor for form data\n * @param {any} target - Function or empty POJO\n * @param {() => Record<string, any>} get_input - Function to get current input data\n * @param {(path: (string | number)[], value: any) => void} set_input - Function to set input data\n * @param {() => Record<string, InternalRemoteFormIssue[]>} get_issues - Function to get current issues\n * @param {(string | number)[]} path - Current access path\n * @returns {any} Proxy object with name(), value(), and issues() methods\n */\nexport function create_field_proxy(target, get_input, set_input, get_issues, path = []) {\n\tconst get_value = () => {\n\t\treturn deep_get(get_input(), path);\n\t};\n\n\treturn new Proxy(target, {\n\t\tget(target, prop) {\n\t\t\tif (typeof prop === 'symbol') return target[prop];\n\n\t\t\t// Handle array access like jobs[0]\n\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [\n\t\t\t\t\t...path,\n\t\t\t\t\tparseInt(prop, 10)\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tconst key = build_path_string(path);\n\n\t\t\tif (prop === 'set') {\n\t\t\t\tconst set_func = function (/** @type {any} */ newValue) {\n\t\t\t\t\tset_input(path, newValue);\n\t\t\t\t\treturn newValue;\n\t\t\t\t};\n\t\t\t\treturn create_field_proxy(set_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'value') {\n\t\t\t\treturn create_field_proxy(get_value, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'issues' || prop === 'allIssues') {\n\t\t\t\tconst issues_func = () => {\n\t\t\t\t\tconst all_issues = get_issues()[key === '' ? '$' : key];\n\n\t\t\t\t\tif (prop === 'allIssues') {\n\t\t\t\t\t\treturn all_issues?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn all_issues\n\t\t\t\t\t\t?.filter((issue) => issue.name === key)\n\t\t\t\t\t\t?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(issues_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'as') {\n\t\t\t\t/**\n\t\t\t\t * @param {string} type\n\t\t\t\t * @param {string} [input_value]\n\t\t\t\t */\n\t\t\t\tconst as_func = (type, input_value) => {\n\t\t\t\t\tconst is_array =\n\t\t\t\t\t\ttype === 'file multiple' ||\n\t\t\t\t\t\ttype === 'select multiple' ||\n\t\t\t\t\t\t(type === 'checkbox' && typeof input_value === 'string');\n\n\t\t\t\t\tconst prefix =\n\t\t\t\t\t\ttype === 'number' || type === 'range'\n\t\t\t\t\t\t\t? 'n:'\n\t\t\t\t\t\t\t: type === 'checkbox' && !is_array\n\t\t\t\t\t\t\t\t? 'b:'\n\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t// Base properties for all input types\n\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\tconst base_props = {\n\t\t\t\t\t\tname: prefix + key + (is_array ? '[]' : ''),\n\t\t\t\t\t\tget 'aria-invalid'() {\n\t\t\t\t\t\t\tconst issues = get_issues();\n\t\t\t\t\t\t\treturn key in issues ? 'true' : undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Add type attribute only for non-text inputs and non-select elements\n\t\t\t\t\tif (type !== 'text' && type !== 'select' && type !== 'select multiple') {\n\t\t\t\t\t\tbase_props.type = type === 'file multiple' ? 'file' : type;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle submit and hidden inputs\n\t\t\t\t\tif (type === 'submit' || type === 'hidden') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (!input_value) {\n\t\t\t\t\t\t\t\tthrow new Error(`\\`${type}\\` inputs must have a value`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value, enumerable: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle select inputs\n\t\t\t\t\tif (type === 'select' || type === 'select multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\treturn get_value();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle checkbox inputs\n\t\t\t\t\tif (type === 'checkbox' || type === 'radio') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (type === 'radio' && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Radio inputs must have a value');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (type === 'checkbox' && is_array && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Checkbox array inputs must have a value');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value ?? 'on', enumerable: true },\n\t\t\t\t\t\t\tchecked: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\tif (type === 'radio') {\n\t\t\t\t\t\t\t\t\t\treturn value === input_value;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (is_array) {\n\t\t\t\t\t\t\t\t\t\treturn (value ?? []).includes(input_value);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle file inputs\n\t\t\t\t\tif (type === 'file' || type === 'file multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tfiles: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\t// Convert File/File[] to FileList-like object\n\t\t\t\t\t\t\t\t\tif (value instanceof File) {\n\t\t\t\t\t\t\t\t\t\t// In browsers, we can create a proper FileList using DataTransfer\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tfileList.items.add(value);\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\treturn { 0: value, length: 1 };\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(value) && value.every((f) => f instanceof File)) {\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tvalue.forEach((file) => fileList.items.add(file));\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\t/** @type {any} */\n\t\t\t\t\t\t\t\t\t\tconst fileListLike = { length: value.length };\n\t\t\t\t\t\t\t\t\t\tvalue.forEach((file, index) => {\n\t\t\t\t\t\t\t\t\t\t\tfileListLike[index] = file;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn fileListLike;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle all other input types (text, number, etc.)\n\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\tconst value = get_value();\n\t\t\t\t\t\t\t\treturn value != null ? String(value) : '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(as_func, get_input, set_input, get_issues, [...path, 'as']);\n\t\t\t}\n\n\t\t\t// Handle property access (nested fields)\n\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [...path, prop]);\n\t\t}\n\t});\n}\n\n/**\n * Builds a path string from an array of path segments\n * @param {(string | number)[]} path\n * @returns {string}\n */\nexport function build_path_string(path) {\n\tlet result = '';\n\n\tfor (const segment of path) {\n\t\tif (typeof segment === 'number') {\n\t\t\tresult += `[${segment}]`;\n\t\t} else {\n\t\t\tresult += result === '' ? segment : '.' + segment;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * @param {RemoteForm<any, any>} instance\n * @deprecated remove in 3.0\n */\nexport function throw_on_old_property_access(instance) {\n\tObject.defineProperty(instance, 'field', {\n\t\tvalue: (/** @type {string} */ name) => {\n\t\t\tconst new_name = name.endsWith('[]') ? name.slice(0, -2) : name;\n\t\t\tthrow new Error(\n\t\t\t\t`\\`form.field\\` has been removed: Instead of \\`<input name={form.field('${name}')} />\\` do \\`<input {...form.fields.${new_name}.as(type)} />\\``\n\t\t\t);\n\t\t}\n\t});\n\n\tfor (const property of ['input', 'issues']) {\n\t\tObject.defineProperty(instance, property, {\n\t\t\tget() {\n\t\t\t\tconst new_name = property === 'issues' ? 'issues' : 'value';\n\t\t\t\treturn new Proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t{\n\t\t\t\t\t\tget(_, prop) {\n\t\t\t\t\t\t\tconst prop_string = typeof prop === 'string' ? prop : String(prop);\n\t\t\t\t\t\t\tconst old =\n\t\t\t\t\t\t\t\tprop_string.includes('[') || prop_string.includes('.')\n\t\t\t\t\t\t\t\t\t? `['${prop_string}']`\n\t\t\t\t\t\t\t\t\t: `.${prop_string}`;\n\t\t\t\t\t\t\tconst replacement = `.${prop_string}.${new_name}()`;\n\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t`\\`form.${property}\\` has been removed: Instead of \\`form.${property}${old}\\` write \\`form.fields${replacement}\\``\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { BINARY_FORM_CONTENT_TYPE } from '../runtime/form-utils.js';\n\n/**\n * Given an Accept header and a list of possible content types, pick\n * the most suitable one to respond with\n * @param {string} accept\n * @param {string[]} types\n */\nexport function negotiate(accept, types) {\n\t/** @type {Array<{ type: string, subtype: string, q: number, i: number }>} */\n\tconst parts = [];\n\n\taccept.split(',').forEach((str, i) => {\n\t\tconst match = /([^/ \\t]+)\\/([^; \\t]+)[ \\t]*(?:;[ \\t]*q=([0-9.]+))?/.exec(str);\n\n\t\t// no match equals invalid header — ignore\n\t\tif (match) {\n\t\t\tconst [, type, subtype, q = '1'] = match;\n\t\t\tparts.push({ type, subtype, q: +q, i });\n\t\t}\n\t});\n\n\tparts.sort((a, b) => {\n\t\tif (a.q !== b.q) {\n\t\t\treturn b.q - a.q;\n\t\t}\n\n\t\tif ((a.subtype === '*') !== (b.subtype === '*')) {\n\t\t\treturn a.subtype === '*' ? 1 : -1;\n\t\t}\n\n\t\tif ((a.type === '*') !== (b.type === '*')) {\n\t\t\treturn a.type === '*' ? 1 : -1;\n\t\t}\n\n\t\treturn a.i - b.i;\n\t});\n\n\tlet accepted;\n\tlet min_priority = Infinity;\n\n\tfor (const mimetype of types) {\n\t\tconst [type, subtype] = mimetype.split('/');\n\t\tconst priority = parts.findIndex(\n\t\t\t(part) =>\n\t\t\t\t(part.type === type || part.type === '*') &&\n\t\t\t\t(part.subtype === subtype || part.subtype === '*')\n\t\t);\n\n\t\tif (priority !== -1 && priority < min_priority) {\n\t\t\taccepted = mimetype;\n\t\t\tmin_priority = priority;\n\t\t}\n\t}\n\n\treturn accepted;\n}\n\n/**\n * Returns `true` if the request contains a `content-type` header with the given type\n * @param {Request} request\n * @param  {...string} types\n */\nfunction is_content_type(request, ...types) {\n\tconst type = request.headers.get('content-type')?.split(';', 1)[0].trim() ?? '';\n\treturn types.includes(type.toLowerCase());\n}\n\n/**\n * @param {Request} request\n */\nexport function is_form_content_type(request) {\n\t// These content types must be protected against CSRF\n\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/enctype\n\treturn is_content_type(\n\t\trequest,\n\t\t'application/x-www-form-urlencoded',\n\t\t'multipart/form-data',\n\t\t'text/plain',\n\t\tBINARY_FORM_CONTENT_TYPE\n\t);\n}\n","import { HttpError, SvelteKitError } from '@sveltejs/kit/internal';\n\n/**\n * @param {unknown} err\n * @return {Error}\n */\nexport function coalesce_to_error(err) {\n\treturn err instanceof Error ||\n\t\t(err && /** @type {any} */ (err).name && /** @type {any} */ (err).message)\n\t\t? /** @type {Error} */ (err)\n\t\t: new Error(JSON.stringify(err));\n}\n\n/**\n * This is an identity function that exists to make TypeScript less\n * paranoid about people throwing things that aren't errors, which\n * frankly is not something we should care about\n * @param {unknown} error\n */\nexport function normalize_error(error) {\n\treturn /** @type {import('../exports/internal/index.js').Redirect | HttpError | SvelteKitError | Error} */ (\n\t\terror\n\t);\n}\n\n/**\n * @param {unknown} error\n */\nexport function get_status(error) {\n\treturn error instanceof HttpError || error instanceof SvelteKitError ? error.status : 500;\n}\n\n/**\n * @param {unknown} error\n */\nexport function get_message(error) {\n\treturn error instanceof SvelteKitError ? error.text : 'Internal Error';\n}\n","/**\n * `$env/dynamic/private`\n * @type {Record<string, string>}\n */\nexport let private_env = {};\n\n/**\n * `$env/dynamic/public`\n * @type {Record<string, string>}\n */\nexport let public_env = {};\n\n/** @param {any} error */\nexport let fix_stack_trace = (error) => error?.stack;\n\n/** @type {(environment: Record<string, string>) => void} */\nexport function set_private_env(environment) {\n\tprivate_env = environment;\n}\n\n/** @type {(environment: Record<string, string>) => void} */\nexport function set_public_env(environment) {\n\tpublic_env = environment;\n}\n\n/** @param {(error: Error) => string} value */\nexport function set_fix_stack_trace(value) {\n\tfix_stack_trace = value;\n}\n","/**\n * When inside a double-quoted attribute value, only `&` and `\"` hold special meaning.\n * @see https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state\n * @type {Record<string, string>}\n */\nconst escape_html_attr_dict = {\n\t'&': '&amp;',\n\t'\"': '&quot;'\n\t// Svelte also escapes < because the escape function could be called inside a `noscript` there\n\t// https://github.com/sveltejs/svelte/security/advisories/GHSA-8266-84wp-wv5c\n\t// However, that doesn't apply in SvelteKit\n};\n\n/**\n * @type {Record<string, string>}\n */\nconst escape_html_dict = {\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst surrogates = // high surrogate without paired low surrogate\n\t'[\\\\ud800-\\\\udbff](?![\\\\udc00-\\\\udfff])|' +\n\t// a valid surrogate pair, the only match with 2 code units\n\t// we match it so that we can match unpaired low surrogates in the same pass\n\t// TODO: use lookbehind assertions once they are widely supported: (?<![\\ud800-udbff])[\\udc00-\\udfff]\n\t'[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]|' +\n\t// unpaired low surrogate (see previous match)\n\t'[\\\\udc00-\\\\udfff]';\n\nconst escape_html_attr_regex = new RegExp(\n\t`[${Object.keys(escape_html_attr_dict).join('')}]|` + surrogates,\n\t'g'\n);\n\nconst escape_html_regex = new RegExp(\n\t`[${Object.keys(escape_html_dict).join('')}]|` + surrogates,\n\t'g'\n);\n\n/**\n * Escapes unpaired surrogates (which are allowed in js strings but invalid in HTML) and\n * escapes characters that are special.\n *\n * @param {string} str\n * @param {boolean} [is_attr]\n * @returns {string} escaped string\n * @example const html = `<tag data-value=\"${escape_html('value', true)}\">...</tag>`;\n */\nexport function escape_html(str, is_attr) {\n\tconst dict = is_attr ? escape_html_attr_dict : escape_html_dict;\n\tconst escaped_str = str.replace(is_attr ? escape_html_attr_regex : escape_html_regex, (match) => {\n\t\tif (match.length === 2) {\n\t\t\t// valid surrogate pair\n\t\t\treturn match;\n\t\t}\n\n\t\treturn dict[match] ?? `&#${match.charCodeAt(0)};`;\n\t});\n\n\treturn escaped_str;\n}\n","import { DEV } from 'esm-env';\nimport { json, text } from '@sveltejs/kit';\nimport { HttpError } from '@sveltejs/kit/internal';\nimport { with_request_store } from '@sveltejs/kit/internal/server';\nimport { coalesce_to_error, get_message, get_status } from '../../utils/error.js';\nimport { negotiate } from '../../utils/http.js';\nimport { fix_stack_trace } from '../shared-server.js';\nimport { ENDPOINT_METHODS } from '../../constants.js';\nimport { escape_html } from '../../utils/escape.js';\n\n/** @param {any} body */\nexport function is_pojo(body) {\n\tif (typeof body !== 'object') return false;\n\n\tif (body) {\n\t\tif (body instanceof Uint8Array) return false;\n\t\tif (body instanceof ReadableStream) return false;\n\t}\n\n\treturn true;\n}\n\n/**\n * @param {Partial<Record<import('types').HttpMethod, any>>} mod\n * @param {import('types').HttpMethod} method\n */\nexport function method_not_allowed(mod, method) {\n\treturn text(`${method} method not allowed`, {\n\t\tstatus: 405,\n\t\theaders: {\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: allowed_methods(mod).join(', ')\n\t\t}\n\t});\n}\n\n/** @param {Partial<Record<import('types').HttpMethod, any>>} mod */\nexport function allowed_methods(mod) {\n\tconst allowed = ENDPOINT_METHODS.filter((method) => method in mod);\n\n\t// if there's no HEAD handler, but we have a GET handler, we respond to\n\t// HEAD requests using the GET handler and omit the response body.\n\tif ('GET' in mod && !('HEAD' in mod)) {\n\t\tallowed.push('HEAD');\n\t}\n\n\treturn allowed;\n}\n\n/**\n * @param {import('types').SSROptions} options\n */\nexport function get_global_name(options) {\n\treturn DEV ? '__sveltekit_dev' : `__sveltekit_${options.version_hash}`;\n}\n\n/**\n * Return as a response that renders the error.html\n *\n * @param {import('types').SSROptions} options\n * @param {number} status\n * @param {string} message\n */\nexport function static_error_page(options, status, message) {\n\tlet page = options.templates.error({ status, message: escape_html(message) });\n\n\tif (DEV) {\n\t\t// inject Vite HMR client, for easier debugging\n\t\tpage = page.replace('</head>', '<script type=\"module\" src=\"/@vite/client\"></script></head>');\n\t}\n\n\treturn text(page, {\n\t\theaders: { 'content-type': 'text/html; charset=utf-8' },\n\t\tstatus\n\t});\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} state\n * @param {import('types').SSROptions} options\n * @param {unknown} error\n */\nexport async function handle_fatal_error(event, state, options, error) {\n\terror = error instanceof HttpError ? error : coalesce_to_error(error);\n\tconst status = get_status(error);\n\tconst body = await handle_error_and_jsonify(event, state, options, error);\n\n\t// ideally we'd use sec-fetch-dest instead, but Safari — quelle surprise — doesn't support it\n\tconst type = negotiate(event.request.headers.get('accept') || 'text/html', [\n\t\t'application/json',\n\t\t'text/html'\n\t]);\n\n\tif (event.isDataRequest || type === 'application/json') {\n\t\treturn json(body, {\n\t\t\tstatus\n\t\t});\n\t}\n\n\treturn static_error_page(options, status, body.message);\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} state\n * @param {import('types').SSROptions} options\n * @param {any} error\n * @returns {Promise<App.Error>}\n */\nexport async function handle_error_and_jsonify(event, state, options, error) {\n\tif (error instanceof HttpError) {\n\t\t// @ts-expect-error custom user errors may not have a message field if App.Error is overwritten\n\t\treturn { message: 'Unknown Error', ...error.body };\n\t}\n\n\tif (DEV && typeof error == 'object') {\n\t\tfix_stack_trace(error);\n\t}\n\n\tconst status = get_status(error);\n\tconst message = get_message(error);\n\n\treturn (\n\t\t(await with_request_store({ event, state }, () =>\n\t\t\toptions.hooks.handleError({ error, event, status, message })\n\t\t)) ?? { message }\n\t);\n}\n\n/**\n * @param {number} status\n * @param {string} location\n */\nexport function redirect_response(status, location) {\n\tconst response = new Response(undefined, {\n\t\tstatus,\n\t\theaders: { location }\n\t});\n\treturn response;\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {Error & { path: string }} error\n */\nexport function clarify_devalue_error(event, error) {\n\tif (error.path) {\n\t\treturn (\n\t\t\t`Data returned from \\`load\\` while rendering ${event.route.id} is not serializable: ${error.message} (${error.path}). ` +\n\t\t\t`If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`\n\t\t);\n\t}\n\n\tif (error.path === '') {\n\t\treturn `Data returned from \\`load\\` while rendering ${event.route.id} is not a plain object`;\n\t}\n\n\t// belt and braces — this should never happen\n\treturn error.message;\n}\n\n/**\n * @param {import('types').ServerDataNode} node\n */\nexport function serialize_uses(node) {\n\tconst uses = {};\n\n\tif (node.uses && node.uses.dependencies.size > 0) {\n\t\tuses.dependencies = Array.from(node.uses.dependencies);\n\t}\n\n\tif (node.uses && node.uses.search_params.size > 0) {\n\t\tuses.search_params = Array.from(node.uses.search_params);\n\t}\n\n\tif (node.uses && node.uses.params.size > 0) {\n\t\tuses.params = Array.from(node.uses.params);\n\t}\n\n\tif (node.uses?.parent) uses.parent = 1;\n\tif (node.uses?.route) uses.route = 1;\n\tif (node.uses?.url) uses.url = 1;\n\n\treturn uses;\n}\n\n/**\n * Returns `true` if the given path was prerendered\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {string} pathname Should include the base and be decoded\n */\nexport function has_prerendered_path(manifest, pathname) {\n\treturn (\n\t\tmanifest._.prerendered_routes.has(pathname) ||\n\t\t(pathname.at(-1) === '/' && manifest._.prerendered_routes.has(pathname.slice(0, -1)))\n\t);\n}\n\n/**\n * Formats the error into a nice message with sanitized stack trace\n * @param {number} status\n * @param {Error} error\n * @param {import('@sveltejs/kit').RequestEvent} event\n */\nexport function format_server_error(status, error, event) {\n\tconst formatted_text = `\\n\\x1b[1;31m[${status}] ${event.request.method} ${event.url.pathname}\\x1b[0m`;\n\n\tif (status === 404) {\n\t\treturn formatted_text;\n\t}\n\n\treturn `${formatted_text}\\n${DEV ? clean_up_stack_trace(error) : error.stack}`;\n}\n\n/**\n * In dev, tidy up stack traces by making paths relative to the current project directory\n * @param {string} file\n */\nlet relative = (file) => file;\n\nif (DEV) {\n\ttry {\n\t\tconst path = await import('node:path');\n\t\tconst process = await import('node:process');\n\n\t\trelative = (file) => path.relative(process.cwd(), file);\n\t} catch {\n\t\t// do nothing\n\t}\n}\n\n/**\n * Provides a refined stack trace by excluding lines following the last occurrence of a line containing +page. +layout. or +server.\n * @param {Error} error\n */\nexport function clean_up_stack_trace(error) {\n\tconst stack_trace = (error.stack?.split('\\n') ?? []).map((line) => {\n\t\treturn line.replace(/\\((.+)(:\\d+:\\d+)\\)$/, (_, file, loc) => `(${relative(file)}${loc})`);\n\t});\n\n\t// progressive enhancement for people who haven't configured kit.files.src to something else\n\tconst last_line_from_src_code = stack_trace.findLastIndex((line) => /\\(src[\\\\/]/.test(line));\n\n\tif (last_line_from_src_code === -1) {\n\t\t// default to the whole stack trace\n\t\treturn error.stack;\n\t}\n\n\treturn stack_trace.slice(0, last_line_from_src_code + 1).join('\\n');\n}\n\n/**\n * Returns the filename without the extension. e.g., `+page.server`, `+page`, etc.\n * @param {string | undefined} node_id\n * @returns {string}\n */\nexport function get_node_type(node_id) {\n\tconst parts = node_id?.split('/');\n\tconst filename = parts?.at(-1);\n\tif (!filename) return 'unknown';\n\tconst dot_parts = filename.split('.');\n\treturn dot_parts.slice(0, -1).join('.');\n}\n","/**\n * Removes nullish values from an array.\n *\n * @template T\n * @param {Array<T>} arr\n */\nexport function compact(arr) {\n\treturn arr.filter(/** @returns {val is NonNullable<T>} */ (val) => val != null);\n}\n","const DATA_SUFFIX = '/__data.json';\nconst HTML_DATA_SUFFIX = '.html__data.json';\n\n/** @param {string} pathname */\nexport function has_data_suffix(pathname) {\n\treturn pathname.endsWith(DATA_SUFFIX) || pathname.endsWith(HTML_DATA_SUFFIX);\n}\n\n/** @param {string} pathname */\nexport function add_data_suffix(pathname) {\n\tif (pathname.endsWith('.html')) return pathname.replace(/\\.html$/, HTML_DATA_SUFFIX);\n\treturn pathname.replace(/\\/$/, '') + DATA_SUFFIX;\n}\n\n/** @param {string} pathname */\nexport function strip_data_suffix(pathname) {\n\tif (pathname.endsWith(HTML_DATA_SUFFIX)) {\n\t\treturn pathname.slice(0, -HTML_DATA_SUFFIX.length) + '.html';\n\t}\n\n\treturn pathname.slice(0, -DATA_SUFFIX.length);\n}\n\nconst ROUTE_SUFFIX = '/__route.js';\n\n/**\n * @param {string} pathname\n * @returns {boolean}\n */\nexport function has_resolution_suffix(pathname) {\n\treturn pathname.endsWith(ROUTE_SUFFIX);\n}\n\n/**\n * Convert a regular URL to a route to send to SvelteKit's server-side route resolution endpoint\n * @param {string} pathname\n * @returns {string}\n */\nexport function add_resolution_suffix(pathname) {\n\treturn pathname.replace(/\\/$/, '') + ROUTE_SUFFIX;\n}\n\n/**\n * @param {string} pathname\n * @returns {string}\n */\nexport function strip_resolution_suffix(pathname) {\n\treturn pathname.slice(0, -ROUTE_SUFFIX.length);\n}\n","/** @import { Tracer, Span, SpanContext } from '@opentelemetry/api' */\n\n/**\n * Tracer implementation that does nothing (null object).\n * @type {Tracer}\n */\nexport const noop_tracer = {\n\t/**\n\t * @returns {Span}\n\t */\n\tstartSpan() {\n\t\treturn noop_span;\n\t},\n\n\t/**\n\t * @param {unknown} _name\n\t * @param {unknown} arg_1\n\t * @param {unknown} [arg_2]\n\t * @param {Function} [arg_3]\n\t * @returns {unknown}\n\t */\n\tstartActiveSpan(_name, arg_1, arg_2, arg_3) {\n\t\tif (typeof arg_1 === 'function') {\n\t\t\treturn arg_1(noop_span);\n\t\t}\n\t\tif (typeof arg_2 === 'function') {\n\t\t\treturn arg_2(noop_span);\n\t\t}\n\t\tif (typeof arg_3 === 'function') {\n\t\t\treturn arg_3(noop_span);\n\t\t}\n\t}\n};\n\n/**\n * @type {Span}\n */\nexport const noop_span = {\n\tspanContext() {\n\t\treturn noop_span_context;\n\t},\n\tsetAttribute() {\n\t\treturn this;\n\t},\n\tsetAttributes() {\n\t\treturn this;\n\t},\n\taddEvent() {\n\t\treturn this;\n\t},\n\tsetStatus() {\n\t\treturn this;\n\t},\n\tupdateName() {\n\t\treturn this;\n\t},\n\tend() {\n\t\treturn this;\n\t},\n\tisRecording() {\n\t\treturn false;\n\t},\n\trecordException() {\n\t\treturn this;\n\t},\n\taddLink() {\n\t\treturn this;\n\t},\n\taddLinks() {\n\t\treturn this;\n\t}\n};\n\n/**\n * @type {SpanContext}\n */\nconst noop_span_context = {\n\ttraceId: '',\n\tspanId: '',\n\ttraceFlags: 0\n};\n","/** @import { RecordSpan } from 'types' */\nimport { HttpError, Redirect } from '@sveltejs/kit/internal';\nimport { noop_span } from './noop.js';\nimport { otel } from './otel.js';\n\n/** @type {RecordSpan} */\nexport async function record_span({ name, attributes, fn }) {\n\tif (otel === null) {\n\t\treturn fn(noop_span);\n\t}\n\n\tconst { SpanStatusCode, tracer } = await otel;\n\n\treturn tracer.startActiveSpan(name, { attributes }, async (span) => {\n\t\ttry {\n\t\t\treturn await fn(span);\n\t\t} catch (error) {\n\t\t\tif (error instanceof HttpError) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'known_error',\n\t\t\t\t\t[`${name}.result.status`]: error.status,\n\t\t\t\t\t[`${name}.result.message`]: error.body.message\n\t\t\t\t});\n\t\t\t\tif (error.status >= 500) {\n\t\t\t\t\tspan.recordException({\n\t\t\t\t\t\tname: 'HttpError',\n\t\t\t\t\t\tmessage: error.body.message\n\t\t\t\t\t});\n\t\t\t\t\tspan.setStatus({\n\t\t\t\t\t\tcode: SpanStatusCode.ERROR,\n\t\t\t\t\t\tmessage: error.body.message\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (error instanceof Redirect) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'redirect',\n\t\t\t\t\t[`${name}.result.status`]: error.status,\n\t\t\t\t\t[`${name}.result.location`]: error.location\n\t\t\t\t});\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'unknown_error'\n\t\t\t\t});\n\t\t\t\tspan.recordException({\n\t\t\t\t\tname: error.name,\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\tstack: error.stack\n\t\t\t\t});\n\t\t\t\tspan.setStatus({\n\t\t\t\t\tcode: SpanStatusCode.ERROR,\n\t\t\t\t\tmessage: error.message\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'unknown_error'\n\t\t\t\t});\n\t\t\t\tspan.setStatus({ code: SpanStatusCode.ERROR });\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t} finally {\n\t\t\tspan.end();\n\t\t}\n\t});\n}\n","/** @import { RequestEvent, ActionResult, Actions } from '@sveltejs/kit' */\n/** @import { SSROptions, SSRNode, ServerNode, ServerHooks } from 'types' */\nimport * as devalue from 'devalue';\nimport { DEV } from 'esm-env';\nimport { json } from '@sveltejs/kit';\nimport { HttpError, Redirect, ActionFailure, SvelteKitError } from '@sveltejs/kit/internal';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { get_status, normalize_error } from '../../../utils/error.js';\nimport { is_form_content_type, negotiate } from '../../../utils/http.js';\nimport { handle_error_and_jsonify } from '../utils.js';\nimport { record_span } from '../../telemetry/record_span.js';\n\n/** @param {RequestEvent} event */\nexport function is_action_json_request(event) {\n\tconst accept = negotiate(event.request.headers.get('accept') ?? '*/*', [\n\t\t'application/json',\n\t\t'text/html'\n\t]);\n\n\treturn accept === 'application/json' && event.request.method === 'POST';\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {SSROptions} options\n * @param {SSRNode['server'] | undefined} server\n */\nexport async function handle_action_json_request(event, event_state, options, server) {\n\tconst actions = server?.actions;\n\n\tif (!actions) {\n\t\tconst no_actions_error = new SvelteKitError(\n\t\t\t405,\n\t\t\t'Method Not Allowed',\n\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t);\n\n\t\treturn action_json(\n\t\t\t{\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, no_actions_error)\n\t\t\t},\n\t\t\t{\n\t\t\t\tstatus: no_actions_error.status,\n\t\t\t\theaders: {\n\t\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\t\t\tallow: 'GET'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcheck_named_default_separate(actions);\n\n\ttry {\n\t\tconst data = await call_action(event, event_state, actions);\n\n\t\tif (DEV) {\n\t\t\tvalidate_action_return(data);\n\t\t}\n\n\t\tif (data instanceof ActionFailure) {\n\t\t\treturn action_json({\n\t\t\t\ttype: 'failure',\n\t\t\t\tstatus: data.status,\n\t\t\t\t// @ts-expect-error we assign a string to what is supposed to be an object. That's ok\n\t\t\t\t// because we don't use the object outside, and this way we have better code navigation\n\t\t\t\t// through knowing where the related interface is used.\n\t\t\t\tdata: stringify_action_response(\n\t\t\t\t\tdata.data,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t)\n\t\t\t});\n\t\t} else {\n\t\t\treturn action_json({\n\t\t\t\ttype: 'success',\n\t\t\t\tstatus: data ? 200 : 204,\n\t\t\t\t// @ts-expect-error see comment above\n\t\t\t\tdata: stringify_action_response(\n\t\t\t\t\tdata,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t)\n\t\t\t});\n\t\t}\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn action_json_redirect(err);\n\t\t}\n\n\t\treturn action_json(\n\t\t\t{\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tcheck_incorrect_fail_use(err)\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\tstatus: get_status(err)\n\t\t\t}\n\t\t);\n\t}\n}\n\n/**\n * @param {HttpError | Error} error\n */\nexport function check_incorrect_fail_use(error) {\n\treturn error instanceof ActionFailure\n\t\t? new Error('Cannot \"throw fail()\". Use \"return fail()\"')\n\t\t: error;\n}\n\n/**\n * @param {Redirect} redirect\n */\nexport function action_json_redirect(redirect) {\n\treturn action_json({\n\t\ttype: 'redirect',\n\t\tstatus: redirect.status,\n\t\tlocation: redirect.location\n\t});\n}\n\n/**\n * @param {ActionResult} data\n * @param {ResponseInit} [init]\n */\nfunction action_json(data, init) {\n\treturn json(data, init);\n}\n\n/**\n * @param {RequestEvent} event\n */\nexport function is_action_request(event) {\n\treturn event.request.method === 'POST';\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {SSRNode['server'] | undefined} server\n * @returns {Promise<ActionResult>}\n */\nexport async function handle_action_request(event, event_state, server) {\n\tconst actions = server?.actions;\n\n\tif (!actions) {\n\t\t// TODO should this be a different error altogether?\n\t\tevent.setHeaders({\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: 'GET'\n\t\t});\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: new SvelteKitError(\n\t\t\t\t405,\n\t\t\t\t'Method Not Allowed',\n\t\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t\t)\n\t\t};\n\t}\n\n\tcheck_named_default_separate(actions);\n\n\ttry {\n\t\tconst data = await call_action(event, event_state, actions);\n\n\t\tif (DEV) {\n\t\t\tvalidate_action_return(data);\n\t\t}\n\n\t\tif (data instanceof ActionFailure) {\n\t\t\treturn {\n\t\t\t\ttype: 'failure',\n\t\t\t\tstatus: data.status,\n\t\t\t\tdata: data.data\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: 'success',\n\t\t\t\tstatus: 200,\n\t\t\t\t// @ts-expect-error this will be removed upon serialization, so `undefined` is the same as omission\n\t\t\t\tdata\n\t\t\t};\n\t\t}\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn {\n\t\t\t\ttype: 'redirect',\n\t\t\t\tstatus: err.status,\n\t\t\t\tlocation: err.location\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: check_incorrect_fail_use(err)\n\t\t};\n\t}\n}\n\n/**\n * @param {Actions} actions\n */\nfunction check_named_default_separate(actions) {\n\tif (actions.default && Object.keys(actions).length > 1) {\n\t\tthrow new Error(\n\t\t\t'When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions'\n\t\t);\n\t}\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {NonNullable<ServerNode['actions']>} actions\n * @throws {Redirect | HttpError | SvelteKitError | Error}\n */\nasync function call_action(event, event_state, actions) {\n\tconst url = new URL(event.request.url);\n\n\tlet name = 'default';\n\tfor (const param of url.searchParams) {\n\t\tif (param[0].startsWith('/')) {\n\t\t\tname = param[0].slice(1);\n\t\t\tif (name === 'default') {\n\t\t\t\tthrow new Error('Cannot use reserved action name \"default\"');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst action = actions[name];\n\tif (!action) {\n\t\tthrow new SvelteKitError(404, 'Not Found', `No action with name '${name}' found`);\n\t}\n\n\tif (!is_form_content_type(event.request)) {\n\t\tthrow new SvelteKitError(\n\t\t\t415,\n\t\t\t'Unsupported Media Type',\n\t\t\t`Form actions expect form-encoded data — received ${event.request.headers.get(\n\t\t\t\t'content-type'\n\t\t\t)}`\n\t\t);\n\t}\n\n\treturn record_span({\n\t\tname: 'sveltekit.form_action',\n\t\tattributes: {\n\t\t\t'sveltekit.form_action.name': name,\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\tconst result = await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\taction(traced_event)\n\t\t\t);\n\t\t\tif (result instanceof ActionFailure) {\n\t\t\t\tcurrent.setAttributes({\n\t\t\t\t\t'sveltekit.form_action.result.type': 'failure',\n\t\t\t\t\t'sveltekit.form_action.result.status': result.status\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t});\n}\n\n/** @param {any} data */\nfunction validate_action_return(data) {\n\tif (data instanceof Redirect) {\n\t\tthrow new Error('Cannot `return redirect(...)` — use `redirect(...)` instead');\n\t}\n\n\tif (data instanceof HttpError) {\n\t\tthrow new Error('Cannot `return error(...)` — use `error(...)` or `return fail(...)` instead');\n\t}\n}\n\n/**\n * Try to `devalue.uneval` the data object, and if it fails, return a proper Error with context\n * @param {any} data\n * @param {string} route_id\n * @param {ServerHooks['transport']} transport\n */\nexport function uneval_action_response(data, route_id, transport) {\n\tconst replacer = (/** @type {any} */ thing) => {\n\t\tfor (const key in transport) {\n\t\t\tconst encoded = transport[key].encode(thing);\n\t\t\tif (encoded) {\n\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn try_serialize(data, (value) => devalue.uneval(value, replacer), route_id);\n}\n\n/**\n * Try to `devalue.stringify` the data object, and if it fails, return a proper Error with context\n * @param {any} data\n * @param {string} route_id\n * @param {ServerHooks['transport']} transport\n */\nfunction stringify_action_response(data, route_id, transport) {\n\tconst encoders = Object.fromEntries(\n\t\tObject.entries(transport).map(([key, value]) => [key, value.encode])\n\t);\n\n\treturn try_serialize(data, (value) => devalue.stringify(value, encoders), route_id);\n}\n\n/**\n * @param {any} data\n * @param {(data: any) => string} fn\n * @param {string} route_id\n */\nfunction try_serialize(data, fn, route_id) {\n\ttry {\n\t\treturn fn(data);\n\t} catch (e) {\n\t\t// If we're here, the data could not be serialized with devalue\n\t\tconst error = /** @type {any} */ (e);\n\n\t\t// if someone tries to use `json()` in their action\n\t\tif (data instanceof Response) {\n\t\t\tthrow new Error(\n\t\t\t\t`Data returned from action inside ${route_id} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: \"invalid\" });`\n\t\t\t);\n\t\t}\n\n\t\t// if devalue could not serialize a property on the object, etc.\n\t\tif ('path' in error) {\n\t\t\tlet message = `Data returned from action inside ${route_id} is not serializable: ${error.message}`;\n\t\t\tif (error.path !== '') message += ` (data.${error.path})`;\n\t\t\tthrow new Error(message);\n\t\t}\n\n\t\tthrow error;\n\t}\n}\n","import { with_resolvers } from './promise.js';\n\n/**\n * Create an async iterator and a function to push values into it\n * @template T\n * @returns {{\n *   iterate: (transform?: (input: T) => T) => AsyncIterable<T>;\n *   add: (promise: Promise<T>) => void;\n * }}\n */\nexport function create_async_iterator() {\n\tlet resolved = -1;\n\tlet returned = -1;\n\n\t/** @type {import('./promise.js').PromiseWithResolvers<T>[]} */\n\tconst deferred = [];\n\n\treturn {\n\t\titerate: (transform = (x) => x) => {\n\t\t\treturn {\n\t\t\t\t[Symbol.asyncIterator]() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnext: async () => {\n\t\t\t\t\t\t\tconst next = deferred[++returned];\n\t\t\t\t\t\t\tif (!next) return { value: null, done: true };\n\n\t\t\t\t\t\t\tconst value = await next.promise;\n\t\t\t\t\t\t\treturn { value: transform(value), done: false };\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tadd: (promise) => {\n\t\t\tdeferred.push(with_resolvers());\n\t\t\tvoid promise.then((value) => {\n\t\t\t\tdeferred[++resolved].resolve(value);\n\t\t\t});\n\t\t}\n\t};\n}\n","import * as devalue from 'devalue';\nimport { compact } from '../../../utils/array.js';\nimport { create_async_iterator } from '../../../utils/streaming.js';\nimport {\n\tclarify_devalue_error,\n\tget_global_name,\n\thandle_error_and_jsonify,\n\tserialize_uses\n} from '../utils.js';\n\n/**\n * If the serialized data contains promises, `chunks` will be an\n * async iterable containing their resolutions\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSROptions} options\n * @returns {import('./types.js').ServerDataSerializer}\n */\nexport function server_data_serializer(event, event_state, options) {\n\tlet promise_id = 1;\n\tlet max_nodes = -1;\n\n\tconst iterator = create_async_iterator();\n\tconst global = get_global_name(options);\n\n\t/** @param {number} index */\n\tfunction get_replacer(index) {\n\t\t/** @param {any} thing */\n\t\treturn function replacer(thing) {\n\t\t\tif (typeof thing?.then === 'function') {\n\t\t\t\tconst id = promise_id++;\n\n\t\t\t\tconst promise = thing\n\t\t\t\t\t.then(/** @param {any} data */ (data) => ({ data }))\n\t\t\t\t\t.catch(\n\t\t\t\t\t\t/** @param {any} error */ async (error) => ({\n\t\t\t\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error)\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t\t.then(\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @param {{data: any; error: any}} result\n\t\t\t\t\t\t */\n\t\t\t\t\t\tasync ({ data, error }) => {\n\t\t\t\t\t\t\tlet str;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tstr = devalue.uneval(error ? [, error] : [data], replacer);\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\terror = await handle_error_and_jsonify(\n\t\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\t\tnew Error(`Failed to serialize promise while rendering ${event.route.id}`)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdata = undefined;\n\t\t\t\t\t\t\t\tstr = devalue.uneval([, error], replacer);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\tstr: `${global}.resolve(${id}, ${str.includes('app.decode') ? `(app) => ${str}` : `() => ${str}`})`\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\titerator.add(promise);\n\n\t\t\t\treturn `${global}.defer(${id})`;\n\t\t\t} else {\n\t\t\t\tfor (const key in options.hooks.transport) {\n\t\t\t\t\tconst encoded = options.hooks.transport[key].encode(thing);\n\t\t\t\t\tif (encoded) {\n\t\t\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tconst strings = /** @type {string[]} */ ([]);\n\n\treturn {\n\t\tset_max_nodes(i) {\n\t\t\tmax_nodes = i;\n\t\t},\n\n\t\tadd_node(i, node) {\n\t\t\ttry {\n\t\t\t\tif (!node) {\n\t\t\t\t\tstrings[i] = 'null';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t/** @type {any} */\n\t\t\t\tconst payload = { type: 'data', data: node.data, uses: serialize_uses(node) };\n\t\t\t\tif (node.slash) payload.slash = node.slash;\n\n\t\t\t\tstrings[i] = devalue.uneval(payload, get_replacer(i));\n\t\t\t} catch (e) {\n\t\t\t\t// @ts-expect-error\n\t\t\t\te.path = e.path.slice(1);\n\t\t\t\tthrow new Error(clarify_devalue_error(event, /** @type {any} */ (e)));\n\t\t\t}\n\t\t},\n\n\t\tget_data(csp) {\n\t\t\tconst open = `<script${csp.script_needs_nonce ? ` nonce=\"${csp.nonce}\"` : ''}>`;\n\t\t\tconst close = `</script>\\n`;\n\n\t\t\treturn {\n\t\t\t\tdata: `[${compact(max_nodes > -1 ? strings.slice(0, max_nodes) : strings).join(',')}]`,\n\t\t\t\tchunks:\n\t\t\t\t\tpromise_id > 1\n\t\t\t\t\t\t? iterator.iterate(({ index, str }) => {\n\t\t\t\t\t\t\t\tif (max_nodes > -1 && index >= max_nodes) {\n\t\t\t\t\t\t\t\t\treturn '';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn open + str + close;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t: null\n\t\t\t};\n\t\t}\n\t};\n}\n\n/**\n * If the serialized data contains promises, `chunks` will be an\n * async iterable containing their resolutions\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSROptions} options\n * @returns {import('./types.js').ServerDataSerializerJson}\n */\nexport function server_data_serializer_json(event, event_state, options) {\n\tlet promise_id = 1;\n\n\tconst iterator = create_async_iterator();\n\n\tconst reducers = {\n\t\t...Object.fromEntries(\n\t\t\tObject.entries(options.hooks.transport).map(([key, value]) => [key, value.encode])\n\t\t),\n\t\t/** @param {any} thing */\n\t\tPromise: (thing) => {\n\t\t\tif (typeof thing?.then !== 'function') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = promise_id++;\n\n\t\t\t/** @type {'data' | 'error'} */\n\t\t\tlet key = 'data';\n\n\t\t\tconst promise = thing\n\t\t\t\t.catch(\n\t\t\t\t\t/** @param {any} e */ async (e) => {\n\t\t\t\t\t\tkey = 'error';\n\t\t\t\t\t\treturn handle_error_and_jsonify(event, event_state, options, /** @type {any} */ (e));\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(\n\t\t\t\t\t/** @param {any} value */\n\t\t\t\t\tasync (value) => {\n\t\t\t\t\t\tlet str;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tstr = devalue.stringify(value, reducers);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tconst error = await handle_error_and_jsonify(\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tnew Error(`Failed to serialize promise while rendering ${event.route.id}`)\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tkey = 'error';\n\t\t\t\t\t\t\tstr = devalue.stringify(error, reducers);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn `{\"type\":\"chunk\",\"id\":${id},\"${key}\":${str}}\\n`;\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\titerator.add(promise);\n\n\t\t\treturn id;\n\t\t}\n\t};\n\n\tconst strings = /** @type {string[]} */ ([]);\n\n\treturn {\n\t\tadd_node(i, node) {\n\t\t\ttry {\n\t\t\t\tif (!node) {\n\t\t\t\t\tstrings[i] = 'null';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (node.type === 'error' || node.type === 'skip') {\n\t\t\t\t\tstrings[i] = JSON.stringify(node);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstrings[i] =\n\t\t\t\t\t`{\"type\":\"data\",\"data\":${devalue.stringify(node.data, reducers)},\"uses\":${JSON.stringify(\n\t\t\t\t\t\tserialize_uses(node)\n\t\t\t\t\t)}${node.slash ? `,\"slash\":${JSON.stringify(node.slash)}` : ''}}`;\n\t\t\t} catch (e) {\n\t\t\t\t// @ts-expect-error\n\t\t\t\te.path = 'data' + e.path;\n\t\t\t\tthrow new Error(clarify_devalue_error(event, /** @type {any} */ (e)));\n\t\t\t}\n\t\t},\n\n\t\tget_data() {\n\t\t\treturn {\n\t\t\t\tdata: `{\"type\":\"data\",\"nodes\":[${strings.join(',')}]}\\n`,\n\t\t\t\tchunks: promise_id > 1 ? iterator.iterate() : null\n\t\t\t};\n\t\t}\n\t};\n}\n","import { BROWSER, DEV } from 'esm-env';\n\n/**\n * Matches a URI scheme. See https://www.rfc-editor.org/rfc/rfc3986#section-3.1\n * @type {RegExp}\n */\nexport const SCHEME = /^[a-z][a-z\\d+\\-.]+:/i;\n\nconst internal = new URL('sveltekit-internal://');\n\n/**\n * @param {string} base\n * @param {string} path\n */\nexport function resolve(base, path) {\n\t// special case\n\tif (path[0] === '/' && path[1] === '/') return path;\n\n\tlet url = new URL(base, internal);\n\turl = new URL(path, url);\n\n\treturn url.protocol === internal.protocol ? url.pathname + url.search + url.hash : url.href;\n}\n\n/** @param {string} path */\nexport function is_root_relative(path) {\n\treturn path[0] === '/' && path[1] !== '/';\n}\n\n/**\n * @param {string} path\n * @param {import('types').TrailingSlash} trailing_slash\n */\nexport function normalize_path(path, trailing_slash) {\n\tif (path === '/' || trailing_slash === 'ignore') return path;\n\n\tif (trailing_slash === 'never') {\n\t\treturn path.endsWith('/') ? path.slice(0, -1) : path;\n\t} else if (trailing_slash === 'always' && !path.endsWith('/')) {\n\t\treturn path + '/';\n\t}\n\n\treturn path;\n}\n\n/**\n * Decode pathname excluding %25 to prevent further double decoding of params\n * @param {string} pathname\n */\nexport function decode_pathname(pathname) {\n\treturn pathname.split('%25').map(decodeURI).join('%25');\n}\n\n/** @param {Record<string, string>} params */\nexport function decode_params(params) {\n\tfor (const key in params) {\n\t\t// input has already been decoded by decodeURI\n\t\t// now handle the rest\n\t\tparams[key] = decodeURIComponent(params[key]);\n\t}\n\n\treturn params;\n}\n\n/**\n * The error when a URL is malformed is not very helpful, so we augment it with the URI\n * @param {string} uri\n */\nexport function decode_uri(uri) {\n\ttry {\n\t\treturn decodeURI(uri);\n\t} catch (e) {\n\t\tif (e instanceof Error) {\n\t\t\te.message = `Failed to decode URI: ${uri}\\n` + e.message;\n\t\t}\n\t\tthrow e;\n\t}\n}\n\n/**\n * Returns everything up to the first `#` in a URL\n * @param {{href: string}} url_like\n */\nexport function strip_hash({ href }) {\n\treturn href.split('#')[0];\n}\n\n/**\n * @param {URL} url\n * @param {() => void} callback\n * @param {(search_param: string) => void} search_params_callback\n * @param {boolean} [allow_hash]\n */\nexport function make_trackable(url, callback, search_params_callback, allow_hash = false) {\n\tconst tracked = new URL(url);\n\n\tObject.defineProperty(tracked, 'searchParams', {\n\t\tvalue: new Proxy(tracked.searchParams, {\n\t\t\tget(obj, key) {\n\t\t\t\tif (key === 'get' || key === 'getAll' || key === 'has') {\n\t\t\t\t\treturn (/**@type {string}*/ param) => {\n\t\t\t\t\t\tsearch_params_callback(param);\n\t\t\t\t\t\treturn obj[key](param);\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// if they try to access something different from what is in `tracked_search_params_properties`\n\t\t\t\t// we track the whole url (entries, values, keys etc)\n\t\t\t\tcallback();\n\n\t\t\t\tconst value = Reflect.get(obj, key);\n\t\t\t\treturn typeof value === 'function' ? value.bind(obj) : value;\n\t\t\t}\n\t\t}),\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n\n\t/**\n\t * URL properties that could change during the lifetime of the page,\n\t * which excludes things like `origin`\n\t */\n\tconst tracked_url_properties = ['href', 'pathname', 'search', 'toString', 'toJSON'];\n\tif (allow_hash) tracked_url_properties.push('hash');\n\n\tfor (const property of tracked_url_properties) {\n\t\tObject.defineProperty(tracked, property, {\n\t\t\tget() {\n\t\t\t\tcallback();\n\t\t\t\t// @ts-expect-error\n\t\t\t\treturn url[property];\n\t\t\t},\n\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\n\tif (!BROWSER) {\n\t\t// @ts-ignore\n\t\ttracked[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(url, opts);\n\t\t};\n\n\t\t// @ts-ignore\n\t\ttracked.searchParams[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(url.searchParams, opts);\n\t\t};\n\t}\n\n\tif ((DEV || !BROWSER) && !allow_hash) {\n\t\tdisable_hash(tracked);\n\t}\n\n\treturn tracked;\n}\n\n/**\n * Disallow access to `url.hash` on the server and in `load`\n * @param {URL} url\n */\nfunction disable_hash(url) {\n\tallow_nodejs_console_log(url);\n\n\tObject.defineProperty(url, 'hash', {\n\t\tget() {\n\t\t\tthrow new Error(\n\t\t\t\t'Cannot access event.url.hash. Consider using `page.url.hash` inside a component instead'\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * Disallow access to `url.search` and `url.searchParams` during prerendering\n * @param {URL} url\n */\nexport function disable_search(url) {\n\tallow_nodejs_console_log(url);\n\n\tfor (const property of ['search', 'searchParams']) {\n\t\tObject.defineProperty(url, property, {\n\t\t\tget() {\n\t\t\t\tthrow new Error(`Cannot access url.${property} on a page with prerendering enabled`);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Allow URL to be console logged, bypassing disabled properties.\n * @param {URL} url\n */\nfunction allow_nodejs_console_log(url) {\n\tif (!BROWSER) {\n\t\t// @ts-ignore\n\t\turl[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(new URL(url), opts);\n\t\t};\n\t}\n}\n","/** @import { Transport } from '@sveltejs/kit' */\nimport * as devalue from 'devalue';\nimport { base64_decode, base64_encode, text_decoder } from './utils.js';\n\n/**\n * @param {string} route_id\n * @param {string} dep\n */\nexport function validate_depends(route_id, dep) {\n\tconst match = /^(moz-icon|view-source|jar):/.exec(dep);\n\tif (match) {\n\t\tconsole.warn(\n\t\t\t`${route_id}: Calling \\`depends('${dep}')\\` will throw an error in Firefox because \\`${match[1]}\\` is a special URI scheme`\n\t\t);\n\t}\n}\n\nexport const INVALIDATED_PARAM = 'x-sveltekit-invalidated';\n\nexport const TRAILING_SLASH_PARAM = 'x-sveltekit-trailing-slash';\n\n/**\n * @param {any} data\n * @param {string} [location_description]\n */\nexport function validate_load_response(data, location_description) {\n\tif (data != null && Object.getPrototypeOf(data) !== Object.prototype) {\n\t\tthrow new Error(\n\t\t\t`a load function ${location_description} returned ${\n\t\t\t\ttypeof data !== 'object'\n\t\t\t\t\t? `a ${typeof data}`\n\t\t\t\t\t: data instanceof Response\n\t\t\t\t\t\t? 'a Response object'\n\t\t\t\t\t\t: Array.isArray(data)\n\t\t\t\t\t\t\t? 'an array'\n\t\t\t\t\t\t\t: 'a non-plain object'\n\t\t\t}, but must return a plain object at the top level (i.e. \\`return {...}\\`)`\n\t\t);\n\t}\n}\n\n/**\n * Try to `devalue.stringify` the data object using the provided transport encoders.\n * @param {any} data\n * @param {Transport} transport\n */\nexport function stringify(data, transport) {\n\tconst encoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.encode]));\n\n\treturn devalue.stringify(data, encoders);\n}\n\n/**\n * Stringifies the argument (if any) for a remote function in such a way that\n * it is both a valid URL and a valid file name (necessary for prerendering).\n * @param {any} value\n * @param {Transport} transport\n */\nexport function stringify_remote_arg(value, transport) {\n\tif (value === undefined) return '';\n\n\t// If people hit file/url size limits, we can look into using something like compress_and_encode_text from svelte.dev beyond a certain size\n\tconst json_string = stringify(value, transport);\n\n\tconst bytes = new TextEncoder().encode(json_string);\n\treturn base64_encode(bytes).replaceAll('=', '').replaceAll('+', '-').replaceAll('/', '_');\n}\n\n/**\n * Parses the argument (if any) for a remote function\n * @param {string} string\n * @param {Transport} transport\n */\nexport function parse_remote_arg(string, transport) {\n\tif (!string) return undefined;\n\n\tconst json_string = text_decoder.decode(\n\t\t// no need to add back `=` characters, atob can handle it\n\t\tbase64_decode(string.replaceAll('-', '+').replaceAll('_', '/'))\n\t);\n\n\tconst decoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.decode]));\n\n\treturn devalue.parse(json_string, decoders);\n}\n\n/**\n * @param {string} id\n * @param {string} payload\n */\nexport function create_remote_key(id, payload) {\n\treturn id + '/' + payload;\n}\n","import { DEV } from 'esm-env';\nimport { disable_search, make_trackable } from '../../../utils/url.js';\nimport { validate_depends, validate_load_response } from '../../shared.js';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { record_span } from '../../telemetry/record_span.js';\nimport { base64_encode, text_decoder } from '../../utils.js';\nimport { NULL_BODY_STATUS } from '../constants.js';\nimport { get_node_type } from '../utils.js';\n\n/**\n * Calls the user's server `load` function.\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   state: import('types').SSRState;\n *   node: import('types').SSRNode | undefined;\n *   parent: () => Promise<Record<string, any>>;\n * }} opts\n * @returns {Promise<import('types').ServerDataNode | null>}\n */\nexport async function load_server_data({ event, event_state, state, node, parent }) {\n\tif (!node?.server) return null;\n\n\tlet is_tracking = true;\n\n\tconst uses = {\n\t\tdependencies: new Set(),\n\t\tparams: new Set(),\n\t\tparent: false,\n\t\troute: false,\n\t\turl: false,\n\t\tsearch_params: new Set()\n\t};\n\n\tconst load = node.server.load;\n\t// TODO: shouldn't this be calculated using PageNodes? there could be a trailingSlash option on a layout\n\tconst slash = node.server.trailingSlash;\n\n\tif (!load) {\n\t\treturn { type: 'data', data: null, uses, slash };\n\t}\n\n\tconst url = make_trackable(\n\t\tevent.url,\n\t\t() => {\n\t\t\tif (DEV && done && !uses.url) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${node.server_id}: Accessing URL properties in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the URL changes`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (is_tracking) {\n\t\t\t\tuses.url = true;\n\t\t\t}\n\t\t},\n\t\t(param) => {\n\t\t\tif (DEV && done && !uses.search_params.has(param)) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${node.server_id}: Accessing URL properties in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the URL changes`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (is_tracking) {\n\t\t\t\tuses.search_params.add(param);\n\t\t\t}\n\t\t}\n\t);\n\n\tif (state.prerendering) {\n\t\tdisable_search(url);\n\t}\n\n\tlet done = false;\n\n\tconst result = await record_span({\n\t\tname: 'sveltekit.load',\n\t\tattributes: {\n\t\t\t'sveltekit.load.node_id': node.server_id || 'unknown',\n\t\t\t'sveltekit.load.node_type': get_node_type(node.server_id),\n\t\t\t'sveltekit.load.environment': 'server',\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\tconst result = await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\tload.call(null, {\n\t\t\t\t\t...traced_event,\n\t\t\t\t\tfetch: (info, init) => {\n\t\t\t\t\t\tconst url = new URL(info instanceof Request ? info.url : info, event.url);\n\n\t\t\t\t\t\tif (DEV && done && !uses.dependencies.has(url.href)) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`event.fetch(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the dependency is invalidated`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Note: server fetches are not added to uses.depends due to security concerns\n\t\t\t\t\t\treturn event.fetch(info, init);\n\t\t\t\t\t},\n\t\t\t\t\t/** @param {string[]} deps */\n\t\t\t\t\tdepends: (...deps) => {\n\t\t\t\t\t\tfor (const dep of deps) {\n\t\t\t\t\t\t\tconst { href } = new URL(dep, event.url);\n\n\t\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\t\tvalidate_depends(node.server_id || 'missing route ID', dep);\n\n\t\t\t\t\t\t\t\tif (done && !uses.dependencies.has(href)) {\n\t\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`depends(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the dependency is invalidated`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tuses.dependencies.add(href);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparams: new Proxy(event.params, {\n\t\t\t\t\t\tget: (target, key) => {\n\t\t\t\t\t\t\tif (DEV && done && typeof key === 'string' && !uses.params.has(key)) {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`${node.server_id}: Accessing \\`params.${String(\n\t\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t\t)}\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the param changes`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\t\tuses.params.add(key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn target[/** @type {string} */ (key)];\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\tif (DEV && done && !uses.parent) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`parent(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when parent data changes`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\tuses.parent = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parent();\n\t\t\t\t\t},\n\t\t\t\t\troute: new Proxy(event.route, {\n\t\t\t\t\t\tget: (target, key) => {\n\t\t\t\t\t\t\tif (DEV && done && typeof key === 'string' && !uses.route) {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`${node.server_id}: Accessing \\`route.${String(\n\t\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t\t)}\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the route changes`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\t\tuses.route = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn target[/** @type {'id'} */ (key)];\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\turl,\n\t\t\t\t\tuntrack(fn) {\n\t\t\t\t\t\tis_tracking = false;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn fn();\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tis_tracking = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn result;\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\tvalidate_load_response(result, `in ${node.server_id}`);\n\t}\n\n\tdone = true;\n\n\treturn {\n\t\ttype: 'data',\n\t\tdata: result ?? null,\n\t\tuses,\n\t\tslash\n\t};\n}\n\n/**\n * Calls the user's `load` function.\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   fetched: import('./types.js').Fetched[];\n *   node: import('types').SSRNode | undefined;\n *   parent: () => Promise<Record<string, any>>;\n *   resolve_opts: import('types').RequiredResolveOptions;\n *   server_data_promise: Promise<import('types').ServerDataNode | null>;\n *   state: import('types').SSRState;\n *   csr: boolean;\n * }} opts\n * @returns {Promise<Record<string, any | Promise<any>> | null>}\n */\nexport async function load_data({\n\tevent,\n\tevent_state,\n\tfetched,\n\tnode,\n\tparent,\n\tserver_data_promise,\n\tstate,\n\tresolve_opts,\n\tcsr\n}) {\n\tconst server_data_node = await server_data_promise;\n\n\tconst load = node?.universal?.load;\n\n\tif (!load) {\n\t\treturn server_data_node?.data ?? null;\n\t}\n\n\tconst result = await record_span({\n\t\tname: 'sveltekit.load',\n\t\tattributes: {\n\t\t\t'sveltekit.load.node_id': node.universal_id || 'unknown',\n\t\t\t'sveltekit.load.node_type': get_node_type(node.universal_id),\n\t\t\t'sveltekit.load.environment': 'server',\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\tload.call(null, {\n\t\t\t\t\turl: event.url,\n\t\t\t\t\tparams: event.params,\n\t\t\t\t\tdata: server_data_node?.data ?? null,\n\t\t\t\t\troute: event.route,\n\t\t\t\t\tfetch: create_universal_fetch(event, state, fetched, csr, resolve_opts),\n\t\t\t\t\tsetHeaders: event.setHeaders,\n\t\t\t\t\tdepends: () => {},\n\t\t\t\t\tparent,\n\t\t\t\t\tuntrack: (fn) => fn(),\n\t\t\t\t\ttracing: traced_event.tracing\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\tvalidate_load_response(result, `in ${node.universal_id}`);\n\t}\n\n\treturn result ?? null;\n}\n\n/**\n * @param {Pick<import('@sveltejs/kit').RequestEvent, 'fetch' | 'url' | 'request' | 'route'>} event\n * @param {import('types').SSRState} state\n * @param {import('./types.js').Fetched[]} fetched\n * @param {boolean} csr\n * @param {Pick<Required<import('@sveltejs/kit').ResolveOptions>, 'filterSerializedResponseHeaders'>} resolve_opts\n * @returns {typeof fetch}\n */\nexport function create_universal_fetch(event, state, fetched, csr, resolve_opts) {\n\t/**\n\t * @param {URL | RequestInfo} input\n\t * @param {RequestInit} [init]\n\t */\n\tconst universal_fetch = async (input, init) => {\n\t\tconst cloned_body = input instanceof Request && input.body ? input.clone().body : null;\n\n\t\tconst cloned_headers =\n\t\t\tinput instanceof Request && [...input.headers].length\n\t\t\t\t? new Headers(input.headers)\n\t\t\t\t: init?.headers;\n\n\t\tlet response = await event.fetch(input, init);\n\n\t\tconst url = new URL(input instanceof Request ? input.url : input, event.url);\n\t\tconst same_origin = url.origin === event.url.origin;\n\n\t\t/** @type {import('types').PrerenderDependency} */\n\t\tlet dependency;\n\n\t\tif (same_origin) {\n\t\t\tif (state.prerendering) {\n\t\t\t\tdependency = { response, body: null };\n\t\t\t\tstate.prerendering.dependencies.set(url.pathname, dependency);\n\t\t\t}\n\t\t} else if (url.protocol === 'https:' || url.protocol === 'http:') {\n\t\t\t// simulate CORS errors and \"no access to body in no-cors mode\" server-side for consistency with client-side behaviour\n\t\t\tconst mode = input instanceof Request ? input.mode : (init?.mode ?? 'cors');\n\t\t\tif (mode === 'no-cors') {\n\t\t\t\tresponse = new Response('', {\n\t\t\t\t\tstatus: response.status,\n\t\t\t\t\tstatusText: response.statusText,\n\t\t\t\t\theaders: response.headers\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst acao = response.headers.get('access-control-allow-origin');\n\t\t\t\tif (!acao || (acao !== event.url.origin && acao !== '*')) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`CORS error: ${\n\t\t\t\t\t\t\tacao ? 'Incorrect' : 'No'\n\t\t\t\t\t\t} 'Access-Control-Allow-Origin' header is present on the requested resource`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/** @type {ReadableStream<Uint8Array>} */\n\t\tlet teed_body;\n\n\t\tconst proxy = new Proxy(response, {\n\t\t\tget(response, key, receiver) {\n\t\t\t\t/**\n\t\t\t\t * @param {string | undefined} body\n\t\t\t\t * @param {boolean} is_b64\n\t\t\t\t */\n\t\t\t\tasync function push_fetched(body, is_b64) {\n\t\t\t\t\tconst status_number = Number(response.status);\n\t\t\t\t\tif (isNaN(status_number)) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`response.status is not a number. value: \"${\n\t\t\t\t\t\t\t\tresponse.status\n\t\t\t\t\t\t\t}\" type: ${typeof response.status}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfetched.push({\n\t\t\t\t\t\turl: same_origin ? url.href.slice(event.url.origin.length) : url.href,\n\t\t\t\t\t\tmethod: event.request.method,\n\t\t\t\t\t\trequest_body: /** @type {string | ArrayBufferView | undefined} */ (\n\t\t\t\t\t\t\tinput instanceof Request && cloned_body\n\t\t\t\t\t\t\t\t? await stream_to_string(cloned_body)\n\t\t\t\t\t\t\t\t: init?.body\n\t\t\t\t\t\t),\n\t\t\t\t\t\trequest_headers: cloned_headers,\n\t\t\t\t\t\tresponse_body: body,\n\t\t\t\t\t\tresponse,\n\t\t\t\t\t\tis_b64\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (key === 'body') {\n\t\t\t\t\tif (response.body === null) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (teed_body) {\n\t\t\t\t\t\treturn teed_body;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [a, b] = response.body.tee();\n\n\t\t\t\t\tvoid (async () => {\n\t\t\t\t\t\tlet result = new Uint8Array();\n\n\t\t\t\t\t\tfor await (const chunk of a) {\n\t\t\t\t\t\t\tconst combined = new Uint8Array(result.length + chunk.length);\n\n\t\t\t\t\t\t\tcombined.set(result, 0);\n\t\t\t\t\t\t\tcombined.set(chunk, result.length);\n\n\t\t\t\t\t\t\tresult = combined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\t\tdependency.body = new Uint8Array(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvoid push_fetched(base64_encode(result), true);\n\t\t\t\t\t})();\n\n\t\t\t\t\treturn (teed_body = b);\n\t\t\t\t}\n\n\t\t\t\tif (key === 'arrayBuffer') {\n\t\t\t\t\treturn async () => {\n\t\t\t\t\t\tconst buffer = await response.arrayBuffer();\n\n\t\t\t\t\t\tconst bytes = new Uint8Array(buffer);\n\n\t\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\t\tdependency.body = bytes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buffer instanceof ArrayBuffer) {\n\t\t\t\t\t\t\tawait push_fetched(base64_encode(bytes), true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn buffer;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tasync function text() {\n\t\t\t\t\tconst body = await response.text();\n\n\t\t\t\t\tif (body === '' && NULL_BODY_STATUS.includes(response.status)) {\n\t\t\t\t\t\tawait push_fetched(undefined, false);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!body || typeof body === 'string') {\n\t\t\t\t\t\tawait push_fetched(body, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\tdependency.body = body;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn body;\n\t\t\t\t}\n\n\t\t\t\tif (key === 'text') {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\n\t\t\t\tif (key === 'json') {\n\t\t\t\t\treturn async () => {\n\t\t\t\t\t\tconst body = await text();\n\t\t\t\t\t\treturn body ? JSON.parse(body) : undefined;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst value = Reflect.get(response, key, response);\n\n\t\t\t\tif (value instanceof Function) {\n\t\t\t\t\t// On Node v24+, the Response object has a private element #state – we\n\t\t\t\t\t// need to bind this function to the response in order to allow it to\n\t\t\t\t\t// access this private element. Defining the name and length ensure it\n\t\t\t\t\t// is identical to the original function when introspected.\n\t\t\t\t\treturn Object.defineProperties(\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @this {any}\n\t\t\t\t\t\t */\n\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\treturn Reflect.apply(value, this === receiver ? response : this, arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: { value: value.name },\n\t\t\t\t\t\t\tlength: { value: value.length }\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\n\t\tif (csr) {\n\t\t\t// ensure that excluded headers can't be read\n\t\t\tconst get = response.headers.get;\n\t\t\tresponse.headers.get = (key) => {\n\t\t\t\tconst lower = key.toLowerCase();\n\t\t\t\tconst value = get.call(response.headers, lower);\n\t\t\t\tif (value && !lower.startsWith('x-sveltekit-')) {\n\t\t\t\t\tconst included = resolve_opts.filterSerializedResponseHeaders(lower, value);\n\t\t\t\t\tif (!included) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Failed to get response header \"${lower}\" — it must be included by the \\`filterSerializedResponseHeaders\\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${event.route.id})`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t};\n\t\t}\n\n\t\treturn proxy;\n\t};\n\n\t// Don't make this function `async`! Otherwise, the user has to `catch` promises they use for streaming responses or else\n\t// it will be an unhandled rejection. Instead, we add a `.catch(() => {})` ourselves below to this from happening.\n\treturn (input, init) => {\n\t\t// See docs in fetch.js for why we need to do this\n\t\tconst response = universal_fetch(input, init);\n\t\tresponse.catch(() => {});\n\t\treturn response;\n\t};\n}\n\n/**\n * @param {ReadableStream<Uint8Array>} stream\n */\nasync function stream_to_string(stream) {\n\tlet result = '';\n\tconst reader = stream.getReader();\n\twhile (true) {\n\t\tconst { done, value } = await reader.read();\n\t\tif (done) {\n\t\t\tbreak;\n\t\t}\n\t\tresult += text_decoder.decode(value);\n\t}\n\treturn result;\n}\n","/**\n * Hash using djb2\n * @param {import('types').StrictBody[]} values\n */\nexport function hash(...values) {\n\tlet hash = 5381;\n\n\tfor (const value of values) {\n\t\tif (typeof value === 'string') {\n\t\t\tlet i = value.length;\n\t\t\twhile (i) hash = (hash * 33) ^ value.charCodeAt(--i);\n\t\t} else if (ArrayBuffer.isView(value)) {\n\t\t\tconst buffer = new Uint8Array(value.buffer, value.byteOffset, value.byteLength);\n\t\t\tlet i = buffer.length;\n\t\t\twhile (i) hash = (hash * 33) ^ buffer[--i];\n\t\t} else {\n\t\t\tthrow new TypeError('value must be a string or TypedArray');\n\t\t}\n\t}\n\n\treturn (hash >>> 0).toString(36);\n}\n","import { escape_html } from '../../../utils/escape.js';\nimport { hash } from '../../../utils/hash.js';\n\n/**\n * Inside a script element, only `</script` and `<!--` hold special meaning to the HTML parser.\n *\n * The first closes the script element, so everything after is treated as raw HTML.\n * The second disables further parsing until `-->`, so the script element might be unexpectedly\n * kept open until until an unrelated HTML comment in the page.\n *\n * U+2028 LINE SEPARATOR and U+2029 PARAGRAPH SEPARATOR are escaped for the sake of pre-2018\n * browsers.\n *\n * @see tests for unsafe parsing examples.\n * @see https://html.spec.whatwg.org/multipage/scripting.html#restrictions-for-contents-of-script-elements\n * @see https://html.spec.whatwg.org/multipage/syntax.html#cdata-rcdata-restrictions\n * @see https://html.spec.whatwg.org/multipage/parsing.html#script-data-state\n * @see https://html.spec.whatwg.org/multipage/parsing.html#script-data-double-escaped-state\n * @see https://github.com/tc39/proposal-json-superset\n * @type {Record<string, string>}\n */\nconst replacements = {\n\t'<': '\\\\u003C',\n\t'\\u2028': '\\\\u2028',\n\t'\\u2029': '\\\\u2029'\n};\n\nconst pattern = new RegExp(`[${Object.keys(replacements).join('')}]`, 'g');\n\n/**\n * Generates a raw HTML string containing a safe script element carrying data and associated attributes.\n *\n * It escapes all the special characters needed to guarantee the element is unbroken, but care must\n * be taken to ensure it is inserted in the document at an acceptable position for a script element,\n * and that the resulting string isn't further modified.\n *\n * @param {import('./types.js').Fetched} fetched\n * @param {(name: string, value: string) => boolean} filter\n * @param {boolean} [prerendering]\n * @returns {string} The raw HTML of a script element carrying the JSON payload.\n * @example const html = serialize_data('/data.json', null, { foo: 'bar' });\n */\nexport function serialize_data(fetched, filter, prerendering = false) {\n\t/** @type {Record<string, string>} */\n\tconst headers = {};\n\n\tlet cache_control = null;\n\tlet age = null;\n\tlet varyAny = false;\n\n\tfor (const [key, value] of fetched.response.headers) {\n\t\tif (filter(key, value)) {\n\t\t\theaders[key] = value;\n\t\t}\n\n\t\tif (key === 'cache-control') cache_control = value;\n\t\telse if (key === 'age') age = value;\n\t\telse if (key === 'vary' && value.trim() === '*') varyAny = true;\n\t}\n\n\tconst payload = {\n\t\tstatus: fetched.response.status,\n\t\tstatusText: fetched.response.statusText,\n\t\theaders,\n\t\tbody: fetched.response_body\n\t};\n\n\tconst safe_payload = JSON.stringify(payload).replace(pattern, (match) => replacements[match]);\n\n\tconst attrs = [\n\t\t'type=\"application/json\"',\n\t\t'data-sveltekit-fetched',\n\t\t`data-url=\"${escape_html(fetched.url, true)}\"`\n\t];\n\n\tif (fetched.is_b64) {\n\t\tattrs.push('data-b64');\n\t}\n\n\tif (fetched.request_headers || fetched.request_body) {\n\t\t/** @type {import('types').StrictBody[]} */\n\t\tconst values = [];\n\n\t\tif (fetched.request_headers) {\n\t\t\tvalues.push([...new Headers(fetched.request_headers)].join(','));\n\t\t}\n\n\t\tif (fetched.request_body) {\n\t\t\tvalues.push(fetched.request_body);\n\t\t}\n\n\t\tattrs.push(`data-hash=\"${hash(...values)}\"`);\n\t}\n\n\t// Compute the time the response should be cached, taking into account max-age and age.\n\t// Do not cache at all if a `Vary: *` header is present, as this indicates that the\n\t// cache is likely to get busted.\n\tif (!prerendering && fetched.method === 'GET' && cache_control && !varyAny) {\n\t\tconst match = /s-maxage=(\\d+)/g.exec(cache_control) ?? /max-age=(\\d+)/g.exec(cache_control);\n\t\tif (match) {\n\t\t\tconst ttl = +match[1] - +(age ?? '0');\n\t\t\tattrs.push(`data-ttl=\"${ttl}\"`);\n\t\t}\n\t}\n\n\treturn `<script ${attrs.join(' ')}>${safe_payload}</script>`;\n}\n","export const s = JSON.stringify;\n","import { text_encoder } from '../../utils.js';\n\n/**\n * SHA-256 hashing function adapted from https://bitwiseshiftleft.github.io/sjcl\n * modified and redistributed under BSD license\n * @param {string} data\n */\nexport function sha256(data) {\n\tif (!key[0]) precompute();\n\n\tconst out = init.slice(0);\n\tconst array = encode(data);\n\n\tfor (let i = 0; i < array.length; i += 16) {\n\t\tconst w = array.subarray(i, i + 16);\n\n\t\tlet tmp;\n\t\tlet a;\n\t\tlet b;\n\n\t\tlet out0 = out[0];\n\t\tlet out1 = out[1];\n\t\tlet out2 = out[2];\n\t\tlet out3 = out[3];\n\t\tlet out4 = out[4];\n\t\tlet out5 = out[5];\n\t\tlet out6 = out[6];\n\t\tlet out7 = out[7];\n\n\t\t/* Rationale for placement of |0 :\n\t\t * If a value can overflow is original 32 bits by a factor of more than a few\n\t\t * million (2^23 ish), there is a possibility that it might overflow the\n\t\t * 53-bit mantissa and lose precision.\n\t\t *\n\t\t * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\n\t\t * propagates around the loop, and on the hash state out[]. I don't believe\n\t\t * that the clamps on out4 and on out0 are strictly necessary, but it's close\n\t\t * (for out4 anyway), and better safe than sorry.\n\t\t *\n\t\t * The clamps on out[] are necessary for the output to be correct even in the\n\t\t * common case and for short inputs.\n\t\t */\n\n\t\tfor (let i = 0; i < 64; i++) {\n\t\t\t// load up the input word for this round\n\n\t\t\tif (i < 16) {\n\t\t\t\ttmp = w[i];\n\t\t\t} else {\n\t\t\t\ta = w[(i + 1) & 15];\n\n\t\t\t\tb = w[(i + 14) & 15];\n\n\t\t\t\ttmp = w[i & 15] =\n\t\t\t\t\t(((a >>> 7) ^ (a >>> 18) ^ (a >>> 3) ^ (a << 25) ^ (a << 14)) +\n\t\t\t\t\t\t((b >>> 17) ^ (b >>> 19) ^ (b >>> 10) ^ (b << 15) ^ (b << 13)) +\n\t\t\t\t\t\tw[i & 15] +\n\t\t\t\t\t\tw[(i + 9) & 15]) |\n\t\t\t\t\t0;\n\t\t\t}\n\n\t\t\ttmp =\n\t\t\t\ttmp +\n\t\t\t\tout7 +\n\t\t\t\t((out4 >>> 6) ^ (out4 >>> 11) ^ (out4 >>> 25) ^ (out4 << 26) ^ (out4 << 21) ^ (out4 << 7)) +\n\t\t\t\t(out6 ^ (out4 & (out5 ^ out6))) +\n\t\t\t\tkey[i]; // | 0;\n\n\t\t\t// shift register\n\t\t\tout7 = out6;\n\t\t\tout6 = out5;\n\t\t\tout5 = out4;\n\n\t\t\tout4 = (out3 + tmp) | 0;\n\n\t\t\tout3 = out2;\n\t\t\tout2 = out1;\n\t\t\tout1 = out0;\n\n\t\t\tout0 =\n\t\t\t\t(tmp +\n\t\t\t\t\t((out1 & out2) ^ (out3 & (out1 ^ out2))) +\n\t\t\t\t\t((out1 >>> 2) ^\n\t\t\t\t\t\t(out1 >>> 13) ^\n\t\t\t\t\t\t(out1 >>> 22) ^\n\t\t\t\t\t\t(out1 << 30) ^\n\t\t\t\t\t\t(out1 << 19) ^\n\t\t\t\t\t\t(out1 << 10))) |\n\t\t\t\t0;\n\t\t}\n\n\t\tout[0] = (out[0] + out0) | 0;\n\t\tout[1] = (out[1] + out1) | 0;\n\t\tout[2] = (out[2] + out2) | 0;\n\t\tout[3] = (out[3] + out3) | 0;\n\t\tout[4] = (out[4] + out4) | 0;\n\t\tout[5] = (out[5] + out5) | 0;\n\t\tout[6] = (out[6] + out6) | 0;\n\t\tout[7] = (out[7] + out7) | 0;\n\t}\n\n\tconst bytes = new Uint8Array(out.buffer);\n\treverse_endianness(bytes);\n\n\treturn btoa(String.fromCharCode(...bytes));\n}\n\n/** The SHA-256 initialization vector */\nconst init = new Uint32Array(8);\n\n/** The SHA-256 hash key */\nconst key = new Uint32Array(64);\n\n/** Function to precompute init and key. */\nfunction precompute() {\n\t/** @param {number} x */\n\tfunction frac(x) {\n\t\treturn (x - Math.floor(x)) * 0x100000000;\n\t}\n\n\tlet prime = 2;\n\n\tfor (let i = 0; i < 64; prime++) {\n\t\tlet is_prime = true;\n\n\t\tfor (let factor = 2; factor * factor <= prime; factor++) {\n\t\t\tif (prime % factor === 0) {\n\t\t\t\tis_prime = false;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (is_prime) {\n\t\t\tif (i < 8) {\n\t\t\t\tinit[i] = frac(prime ** (1 / 2));\n\t\t\t}\n\n\t\t\tkey[i] = frac(prime ** (1 / 3));\n\n\t\t\ti++;\n\t\t}\n\t}\n}\n\n/** @param {Uint8Array} bytes */\nfunction reverse_endianness(bytes) {\n\tfor (let i = 0; i < bytes.length; i += 4) {\n\t\tconst a = bytes[i + 0];\n\t\tconst b = bytes[i + 1];\n\t\tconst c = bytes[i + 2];\n\t\tconst d = bytes[i + 3];\n\n\t\tbytes[i + 0] = d;\n\t\tbytes[i + 1] = c;\n\t\tbytes[i + 2] = b;\n\t\tbytes[i + 3] = a;\n\t}\n}\n\n/** @param {string} str */\nfunction encode(str) {\n\tconst encoded = text_encoder.encode(str);\n\tconst length = encoded.length * 8;\n\n\t// result should be a multiple of 512 bits in length,\n\t// with room for a 1 (after the data) and two 32-bit\n\t// words containing the original input bit length\n\tconst size = 512 * Math.ceil((length + 65) / 512);\n\tconst bytes = new Uint8Array(size / 8);\n\tbytes.set(encoded);\n\n\t// append a 1\n\tbytes[encoded.length] = 0b10000000;\n\n\treverse_endianness(bytes);\n\n\t// add the input bit length\n\tconst words = new Uint32Array(bytes.buffer);\n\twords[words.length - 2] = Math.floor(length / 0x100000000); // this will always be zero for us\n\twords[words.length - 1] = length;\n\n\treturn words;\n}\n","import { DEV } from 'esm-env';\nimport { escape_html } from '../../../utils/escape.js';\nimport { sha256 } from './crypto.js';\n\nconst array = new Uint8Array(16);\n\nfunction generate_nonce() {\n\tcrypto.getRandomValues(array);\n\treturn btoa(String.fromCharCode(...array));\n}\n\nconst quoted = new Set([\n\t'self',\n\t'unsafe-eval',\n\t'unsafe-hashes',\n\t'unsafe-inline',\n\t'none',\n\t'strict-dynamic',\n\t'report-sample',\n\t'wasm-unsafe-eval',\n\t'script'\n]);\n\nconst crypto_pattern = /^(nonce|sha\\d\\d\\d)-/;\n\n// CSP and CSP Report Only are extremely similar with a few caveats\n// the easiest/DRYest way to express this is with some private encapsulation\nclass BaseProvider {\n\t/** @type {boolean} */\n\t#use_hashes;\n\n\t/** @type {boolean} */\n\t#script_needs_csp;\n\n\t/** @type {boolean} */\n\t#script_src_needs_csp;\n\n\t/** @type {boolean} */\n\t#script_src_elem_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_attr_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_elem_needs_csp;\n\n\t/** @type {import('types').CspDirectives} */\n\t#directives;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#script_src;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#script_src_elem;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src_attr;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src_elem;\n\n\t/** @type {string} */\n\t#nonce;\n\n\t/**\n\t * @param {boolean} use_hashes\n\t * @param {import('types').CspDirectives} directives\n\t * @param {string} nonce\n\t */\n\tconstructor(use_hashes, directives, nonce) {\n\t\tthis.#use_hashes = use_hashes;\n\t\tthis.#directives = DEV ? { ...directives } : directives; // clone in dev so we can safely mutate\n\n\t\tconst d = this.#directives;\n\n\t\tthis.#script_src = [];\n\t\tthis.#script_src_elem = [];\n\t\tthis.#style_src = [];\n\t\tthis.#style_src_attr = [];\n\t\tthis.#style_src_elem = [];\n\n\t\tconst effective_script_src = d['script-src'] || d['default-src'];\n\t\tconst script_src_elem = d['script-src-elem'];\n\t\tconst effective_style_src = d['style-src'] || d['default-src'];\n\t\tconst style_src_attr = d['style-src-attr'];\n\t\tconst style_src_elem = d['style-src-elem'];\n\n\t\tif (DEV) {\n\t\t\t// remove strict-dynamic in dev...\n\t\t\t// TODO reinstate this if we can figure out how to make strict-dynamic work\n\t\t\t// if (d['default-src']) {\n\t\t\t// \td['default-src'] = d['default-src'].filter((name) => name !== 'strict-dynamic');\n\t\t\t// \tif (d['default-src'].length === 0) delete d['default-src'];\n\t\t\t// }\n\n\t\t\t// if (d['script-src']) {\n\t\t\t// \td['script-src'] = d['script-src'].filter((name) => name !== 'strict-dynamic');\n\t\t\t// \tif (d['script-src'].length === 0) delete d['script-src'];\n\t\t\t// }\n\n\t\t\t// ...and add unsafe-inline so we can inject <style> elements\n\t\t\t// Note that 'unsafe-inline' is ignored if either a hash or nonce value is present in the source list, so we remove those during dev when injecting unsafe-inline\n\t\t\tif (effective_style_src && !effective_style_src.includes('unsafe-inline')) {\n\t\t\t\td['style-src'] = [\n\t\t\t\t\t...effective_style_src.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (style_src_attr && !style_src_attr.includes('unsafe-inline')) {\n\t\t\t\td['style-src-attr'] = [\n\t\t\t\t\t...style_src_attr.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (style_src_elem && !style_src_elem.includes('unsafe-inline')) {\n\t\t\t\td['style-src-elem'] = [\n\t\t\t\t\t...style_src_elem.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\t/** @param {(import('types').Csp.Source | import('types').Csp.ActionSource)[] | undefined} directive */\n\t\tconst needs_csp = (directive) =>\n\t\t\t!!directive && !directive.some((value) => value === 'unsafe-inline');\n\n\t\tthis.#script_src_needs_csp = needs_csp(effective_script_src);\n\t\tthis.#script_src_elem_needs_csp = needs_csp(script_src_elem);\n\t\tthis.#style_src_needs_csp = needs_csp(effective_style_src);\n\t\tthis.#style_src_attr_needs_csp = needs_csp(style_src_attr);\n\t\tthis.#style_src_elem_needs_csp = needs_csp(style_src_elem);\n\n\t\tthis.#script_needs_csp = this.#script_src_needs_csp || this.#script_src_elem_needs_csp;\n\t\tthis.#style_needs_csp =\n\t\t\t!DEV &&\n\t\t\t(this.#style_src_needs_csp ||\n\t\t\t\tthis.#style_src_attr_needs_csp ||\n\t\t\t\tthis.#style_src_elem_needs_csp);\n\n\t\tthis.script_needs_nonce = this.#script_needs_csp && !this.#use_hashes;\n\t\tthis.style_needs_nonce = this.#style_needs_csp && !this.#use_hashes;\n\n\t\tthis.#nonce = nonce;\n\t}\n\n\t/** @param {string} content */\n\tadd_script(content) {\n\t\tif (!this.#script_needs_csp) return;\n\n\t\t/** @type {`nonce-${string}` | `sha256-${string}`} */\n\t\tconst source = this.#use_hashes ? `sha256-${sha256(content)}` : `nonce-${this.#nonce}`;\n\n\t\tif (this.#script_src_needs_csp) {\n\t\t\tthis.#script_src.push(source);\n\t\t}\n\n\t\tif (this.#script_src_elem_needs_csp) {\n\t\t\tthis.#script_src_elem.push(source);\n\t\t}\n\t}\n\n\t/** @param {string} content */\n\tadd_style(content) {\n\t\tif (!this.#style_needs_csp) return;\n\n\t\t/** @type {`nonce-${string}` | `sha256-${string}`} */\n\t\tconst source = this.#use_hashes ? `sha256-${sha256(content)}` : `nonce-${this.#nonce}`;\n\n\t\tif (this.#style_src_needs_csp) {\n\t\t\tthis.#style_src.push(source);\n\t\t}\n\n\t\tif (this.#style_src_attr_needs_csp) {\n\t\t\tthis.#style_src_attr.push(source);\n\t\t}\n\n\t\tif (this.#style_src_elem_needs_csp) {\n\t\t\t// this is the sha256 hash for the string \"/* empty */\"\n\t\t\t// adding it so that svelte does not break csp\n\t\t\t// see https://github.com/sveltejs/svelte/pull/7800\n\t\t\tconst sha256_empty_comment_hash = 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=';\n\t\t\tconst d = this.#directives;\n\n\t\t\tif (\n\t\t\t\td['style-src-elem'] &&\n\t\t\t\t!d['style-src-elem'].includes(sha256_empty_comment_hash) &&\n\t\t\t\t!this.#style_src_elem.includes(sha256_empty_comment_hash)\n\t\t\t) {\n\t\t\t\tthis.#style_src_elem.push(sha256_empty_comment_hash);\n\t\t\t}\n\n\t\t\tif (source !== sha256_empty_comment_hash) {\n\t\t\t\tthis.#style_src_elem.push(source);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {boolean} [is_meta]\n\t */\n\tget_header(is_meta = false) {\n\t\tconst header = [];\n\n\t\t// due to browser inconsistencies, we can't append sources to default-src\n\t\t// (specifically, Firefox appears to not ignore nonce-{nonce} directives\n\t\t// on default-src), so we ensure that script-src and style-src exist\n\n\t\tconst directives = { ...this.#directives };\n\n\t\tif (this.#style_src.length > 0) {\n\t\t\tdirectives['style-src'] = [\n\t\t\t\t...(directives['style-src'] || directives['default-src'] || []),\n\t\t\t\t...this.#style_src\n\t\t\t];\n\t\t}\n\n\t\tif (this.#style_src_attr.length > 0) {\n\t\t\tdirectives['style-src-attr'] = [\n\t\t\t\t...(directives['style-src-attr'] || []),\n\t\t\t\t...this.#style_src_attr\n\t\t\t];\n\t\t}\n\n\t\tif (this.#style_src_elem.length > 0) {\n\t\t\tdirectives['style-src-elem'] = [\n\t\t\t\t...(directives['style-src-elem'] || []),\n\t\t\t\t...this.#style_src_elem\n\t\t\t];\n\t\t}\n\n\t\tif (this.#script_src.length > 0) {\n\t\t\tdirectives['script-src'] = [\n\t\t\t\t...(directives['script-src'] || directives['default-src'] || []),\n\t\t\t\t...this.#script_src\n\t\t\t];\n\t\t}\n\n\t\tif (this.#script_src_elem.length > 0) {\n\t\t\tdirectives['script-src-elem'] = [\n\t\t\t\t...(directives['script-src-elem'] || []),\n\t\t\t\t...this.#script_src_elem\n\t\t\t];\n\t\t}\n\n\t\tfor (const key in directives) {\n\t\t\tif (is_meta && (key === 'frame-ancestors' || key === 'report-uri' || key === 'sandbox')) {\n\t\t\t\t// these values cannot be used with a <meta> tag\n\t\t\t\t// TODO warn?\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// @ts-expect-error gimme a break typescript, `key` is obviously a member of internal_directives\n\t\t\tconst value = /** @type {string[] | true} */ (directives[key]);\n\n\t\t\tif (!value) continue;\n\n\t\t\tconst directive = [key];\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tvalue.forEach((value) => {\n\t\t\t\t\tif (quoted.has(value) || crypto_pattern.test(value)) {\n\t\t\t\t\t\tdirective.push(`'${value}'`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdirective.push(value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\theader.push(directive.join(' '));\n\t\t}\n\n\t\treturn header.join('; ');\n\t}\n}\n\nclass CspProvider extends BaseProvider {\n\tget_meta() {\n\t\tconst content = this.get_header(true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn `<meta http-equiv=\"content-security-policy\" content=\"${escape_html(content, true)}\">`;\n\t}\n}\n\nclass CspReportOnlyProvider extends BaseProvider {\n\t/**\n\t * @param {boolean} use_hashes\n\t * @param {import('types').CspDirectives} directives\n\t * @param {string} nonce\n\t */\n\tconstructor(use_hashes, directives, nonce) {\n\t\tsuper(use_hashes, directives, nonce);\n\n\t\tif (Object.values(directives).filter((v) => !!v).length > 0) {\n\t\t\t// If we're generating content-security-policy-report-only,\n\t\t\t// if there are any directives, we need a report-uri or report-to (or both)\n\t\t\t// else it's just an expensive noop.\n\t\t\tconst has_report_to = directives['report-to']?.length ?? 0 > 0;\n\t\t\tconst has_report_uri = directives['report-uri']?.length ?? 0 > 0;\n\t\t\tif (!has_report_to && !has_report_uri) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class Csp {\n\t/** @readonly */\n\tnonce = generate_nonce();\n\n\t/** @type {CspProvider} */\n\tcsp_provider;\n\n\t/** @type {CspReportOnlyProvider} */\n\treport_only_provider;\n\n\t/**\n\t * @param {import('./types.js').CspConfig} config\n\t * @param {import('./types.js').CspOpts} opts\n\t */\n\tconstructor({ mode, directives, reportOnly }, { prerender }) {\n\t\tconst use_hashes = mode === 'hash' || (mode === 'auto' && prerender);\n\t\tthis.csp_provider = new CspProvider(use_hashes, directives, this.nonce);\n\t\tthis.report_only_provider = new CspReportOnlyProvider(use_hashes, reportOnly, this.nonce);\n\t}\n\n\tget script_needs_nonce() {\n\t\treturn this.csp_provider.script_needs_nonce || this.report_only_provider.script_needs_nonce;\n\t}\n\n\tget style_needs_nonce() {\n\t\treturn this.csp_provider.style_needs_nonce || this.report_only_provider.style_needs_nonce;\n\t}\n\n\t/** @param {string} content */\n\tadd_script(content) {\n\t\tthis.csp_provider.add_script(content);\n\t\tthis.report_only_provider.add_script(content);\n\t}\n\n\t/** @param {string} content */\n\tadd_style(content) {\n\t\tthis.csp_provider.add_style(content);\n\t\tthis.report_only_provider.add_style(content);\n\t}\n}\n","import { BROWSER } from 'esm-env';\n\nconst param_pattern = /^(\\[)?(\\.\\.\\.)?(\\w+)(?:=(\\w+))?(\\])?$/;\n\n/**\n * Creates the regex pattern, extracts parameter names, and generates types for a route\n * @param {string} id\n */\nexport function parse_route_id(id) {\n\t/** @type {import('types').RouteParam[]} */\n\tconst params = [];\n\n\tconst pattern =\n\t\tid === '/'\n\t\t\t? /^\\/$/\n\t\t\t: new RegExp(\n\t\t\t\t\t`^${get_route_segments(id)\n\t\t\t\t\t\t.map((segment) => {\n\t\t\t\t\t\t\t// special case — /[...rest]/ could contain zero segments\n\t\t\t\t\t\t\tconst rest_match = /^\\[\\.\\.\\.(\\w+)(?:=(\\w+))?\\]$/.exec(segment);\n\t\t\t\t\t\t\tif (rest_match) {\n\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\tname: rest_match[1],\n\t\t\t\t\t\t\t\t\tmatcher: rest_match[2],\n\t\t\t\t\t\t\t\t\toptional: false,\n\t\t\t\t\t\t\t\t\trest: true,\n\t\t\t\t\t\t\t\t\tchained: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn '(?:/([^]*))?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// special case — /[[optional]]/ could contain zero segments\n\t\t\t\t\t\t\tconst optional_match = /^\\[\\[(\\w+)(?:=(\\w+))?\\]\\]$/.exec(segment);\n\t\t\t\t\t\t\tif (optional_match) {\n\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\tname: optional_match[1],\n\t\t\t\t\t\t\t\t\tmatcher: optional_match[2],\n\t\t\t\t\t\t\t\t\toptional: true,\n\t\t\t\t\t\t\t\t\trest: false,\n\t\t\t\t\t\t\t\t\tchained: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn '(?:/([^/]+))?';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!segment) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst parts = segment.split(/\\[(.+?)\\](?!\\])/);\n\t\t\t\t\t\t\tconst result = parts\n\t\t\t\t\t\t\t\t.map((content, i) => {\n\t\t\t\t\t\t\t\t\tif (i % 2) {\n\t\t\t\t\t\t\t\t\t\tif (content.startsWith('x+')) {\n\t\t\t\t\t\t\t\t\t\t\treturn escape(String.fromCharCode(parseInt(content.slice(2), 16)));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (content.startsWith('u+')) {\n\t\t\t\t\t\t\t\t\t\t\treturn escape(\n\t\t\t\t\t\t\t\t\t\t\t\tString.fromCharCode(\n\t\t\t\t\t\t\t\t\t\t\t\t\t...content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((code) => parseInt(code, 16))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// We know the match cannot be null in the browser because manifest generation\n\t\t\t\t\t\t\t\t\t\t// would have invoked this during build and failed if we hit an invalid\n\t\t\t\t\t\t\t\t\t\t// param/matcher name with non-alphanumeric character.\n\t\t\t\t\t\t\t\t\t\tconst match = /** @type {RegExpExecArray} */ (param_pattern.exec(content));\n\t\t\t\t\t\t\t\t\t\tif (!BROWSER && !match) {\n\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\t\t`Invalid param: ${content}. Params and matcher names can only have underscores and alphanumeric characters.`\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst [, is_optional, is_rest, name, matcher] = match;\n\t\t\t\t\t\t\t\t\t\t// It's assumed that the following invalid route id cases are already checked\n\t\t\t\t\t\t\t\t\t\t// - unbalanced brackets\n\t\t\t\t\t\t\t\t\t\t// - optional param following rest param\n\n\t\t\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\tmatcher,\n\t\t\t\t\t\t\t\t\t\t\toptional: !!is_optional,\n\t\t\t\t\t\t\t\t\t\t\trest: !!is_rest,\n\t\t\t\t\t\t\t\t\t\t\tchained: is_rest ? i === 1 && parts[0] === '' : false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn is_rest ? '([^]*?)' : is_optional ? '([^/]*)?' : '([^/]+?)';\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn escape(content);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.join('');\n\n\t\t\t\t\t\t\treturn '/' + result;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('')}/?$`\n\t\t\t\t);\n\n\treturn { pattern, params };\n}\n\nconst optional_param_regex = /\\/\\[\\[\\w+?(?:=\\w+)?\\]\\]/;\n\n/**\n * Removes optional params from a route ID.\n * @param {string} id\n * @returns The route id with optional params removed\n */\nexport function remove_optional_params(id) {\n\treturn id.replace(optional_param_regex, '');\n}\n\n/**\n * Returns `false` for `(group)` segments\n * @param {string} segment\n */\nfunction affects_path(segment) {\n\treturn segment !== '' && !/^\\([^)]+\\)$/.test(segment);\n}\n\n/**\n * Splits a route id into its segments, removing segments that\n * don't affect the path (i.e. groups). The root route is represented by `/`\n * and will be returned as `['']`.\n * @param {string} route\n * @returns string[]\n */\nexport function get_route_segments(route) {\n\treturn route.slice(1).split('/').filter(affects_path);\n}\n\n/**\n * @param {RegExpMatchArray} match\n * @param {import('types').RouteParam[]} params\n * @param {Record<string, import('@sveltejs/kit').ParamMatcher>} matchers\n */\nexport function exec(match, params, matchers) {\n\t/** @type {Record<string, string>} */\n\tconst result = {};\n\n\tconst values = match.slice(1);\n\tconst values_needing_match = values.filter((value) => value !== undefined);\n\n\tlet buffered = 0;\n\n\tfor (let i = 0; i < params.length; i += 1) {\n\t\tconst param = params[i];\n\t\tlet value = values[i - buffered];\n\n\t\t// in the `[[a=b]]/.../[...rest]` case, if one or more optional parameters\n\t\t// weren't matched, roll the skipped values into the rest\n\t\tif (param.chained && param.rest && buffered) {\n\t\t\tvalue = values\n\t\t\t\t.slice(i - buffered, i + 1)\n\t\t\t\t.filter((s) => s)\n\t\t\t\t.join('/');\n\n\t\t\tbuffered = 0;\n\t\t}\n\n\t\t// if `value` is undefined, it means this is an optional or rest parameter\n\t\tif (value === undefined) {\n\t\t\tif (param.rest) result[param.name] = '';\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!param.matcher || matchers[param.matcher](value)) {\n\t\t\tresult[param.name] = value;\n\n\t\t\t// Now that the params match, reset the buffer if the next param isn't the [...rest]\n\t\t\t// and the next value is defined, otherwise the buffer will cause us to skip values\n\t\t\tconst next_param = params[i + 1];\n\t\t\tconst next_value = values[i + 1];\n\t\t\tif (next_param && !next_param.rest && next_param.optional && next_value && param.chained) {\n\t\t\t\tbuffered = 0;\n\t\t\t}\n\n\t\t\t// There are no more params and no more values, but all non-empty values have been matched\n\t\t\tif (\n\t\t\t\t!next_param &&\n\t\t\t\t!next_value &&\n\t\t\t\tObject.keys(result).length === values_needing_match.length\n\t\t\t) {\n\t\t\t\tbuffered = 0;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\t// in the `/[[a=b]]/...` case, if the value didn't satisfy the matcher,\n\t\t// keep track of the number of skipped optional parameters and continue\n\t\tif (param.optional && param.chained) {\n\t\t\tbuffered++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// otherwise, if the matcher returns `false`, the route did not match\n\t\treturn;\n\t}\n\n\tif (buffered) return;\n\treturn result;\n}\n\n/** @param {string} str */\nfunction escape(str) {\n\treturn (\n\t\tstr\n\t\t\t.normalize()\n\t\t\t// escape [ and ] before escaping other characters, since they are used in the replacements\n\t\t\t.replace(/[[\\]]/g, '\\\\$&')\n\t\t\t// replace %, /, ? and # with their encoded versions because decode_pathname leaves them untouched\n\t\t\t.replace(/%/g, '%25')\n\t\t\t.replace(/\\//g, '%2[Ff]')\n\t\t\t.replace(/\\?/g, '%3[Ff]')\n\t\t\t.replace(/#/g, '%23')\n\t\t\t// escape characters that have special meaning in regex\n\t\t\t.replace(/[.*+?^${}()|\\\\]/g, '\\\\$&')\n\t);\n}\n\nconst basic_param_pattern = /\\[(\\[)?(\\.\\.\\.)?(\\w+?)(?:=(\\w+))?\\]\\]?/g;\n\n/**\n * Populate a route ID with params to resolve a pathname.\n * @example\n * ```js\n * resolveRoute(\n *   `/blog/[slug]/[...somethingElse]`,\n *   {\n *     slug: 'hello-world',\n *     somethingElse: 'something/else'\n *   }\n * ); // `/blog/hello-world/something/else`\n * ```\n * @param {string} id\n * @param {Record<string, string | undefined>} params\n * @returns {string}\n */\nexport function resolve_route(id, params) {\n\tconst segments = get_route_segments(id);\n\tconst has_id_trailing_slash = id != '/' && id.endsWith('/');\n\n\treturn (\n\t\t'/' +\n\t\tsegments\n\t\t\t.map((segment) =>\n\t\t\t\tsegment.replace(basic_param_pattern, (_, optional, rest, name) => {\n\t\t\t\t\tconst param_value = params[name];\n\n\t\t\t\t\t// This is nested so TS correctly narrows the type\n\t\t\t\t\tif (!param_value) {\n\t\t\t\t\t\tif (optional) return '';\n\t\t\t\t\t\tif (rest && param_value !== undefined) return '';\n\t\t\t\t\t\tthrow new Error(`Missing parameter '${name}' in route ${id}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (param_value.startsWith('/') || param_value.endsWith('/'))\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Parameter '${name}' in route ${id} cannot start or end with a slash -- this would cause an invalid route like foo//bar`\n\t\t\t\t\t\t);\n\t\t\t\t\treturn param_value;\n\t\t\t\t})\n\t\t\t)\n\t\t\t.filter(Boolean)\n\t\t\t.join('/') +\n\t\t(has_id_trailing_slash ? '/' : '')\n\t);\n}\n\n/**\n * @param {import('types').SSRNode} node\n * @returns {boolean}\n */\nexport function has_server_load(node) {\n\treturn node.server?.load !== undefined || node.server?.trailingSlash !== undefined;\n}\n","import { base, assets, relative } from '$app/paths/internal/server';\nimport { text } from '@sveltejs/kit';\nimport { s } from '../../../utils/misc.js';\nimport { exec } from '../../../utils/routing.js';\nimport { decode_params } from '../../../utils/url.js';\nimport { get_relative_path } from '../../utils.js';\n\n/**\n * @param {import('types').SSRClientRoute} route\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {string}\n */\nexport function generate_route_object(route, url, manifest) {\n\tconst { errors, layouts, leaf } = route;\n\n\tconst nodes = [...errors, ...layouts.map((l) => l?.[1]), leaf[1]]\n\t\t.filter((n) => typeof n === 'number')\n\t\t.map((n) => `'${n}': () => ${create_client_import(manifest._.client.nodes?.[n], url)}`)\n\t\t.join(',\\n\\t\\t');\n\n\t// stringified version of\n\t/** @type {import('types').CSRRouteServer} */\n\treturn [\n\t\t`{\\n\\tid: ${s(route.id)}`,\n\t\t`errors: ${s(route.errors)}`,\n\t\t`layouts: ${s(route.layouts)}`,\n\t\t`leaf: ${s(route.leaf)}`,\n\t\t`nodes: {\\n\\t\\t${nodes}\\n\\t}\\n}`\n\t].join(',\\n\\t');\n}\n\n/**\n * @param {string | undefined} import_path\n * @param {URL} url\n */\nfunction create_client_import(import_path, url) {\n\tif (!import_path) return 'Promise.resolve({})';\n\n\t// During DEV, Vite will make the paths absolute (e.g. /@fs/...)\n\tif (import_path[0] === '/') {\n\t\treturn `import('${import_path}')`;\n\t}\n\n\t// During PROD, they're root-relative\n\tif (assets !== '') {\n\t\treturn `import('${assets}/${import_path}')`;\n\t}\n\n\tif (!relative) {\n\t\treturn `import('${base}/${import_path}')`;\n\t}\n\n\t// Else we make them relative to the server-side route resolution request\n\t// to support IPFS, the internet archive, etc.\n\tlet path = get_relative_path(url.pathname, `${base}/${import_path}`);\n\tif (path[0] !== '.') path = `./${path}`;\n\treturn `import('${path}')`;\n}\n\n/**\n * @param {string} resolved_path\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {Promise<Response>}\n */\nexport async function resolve_route(resolved_path, url, manifest) {\n\tif (!manifest._.client.routes) {\n\t\treturn text('Server-side route resolution disabled', { status: 400 });\n\t}\n\n\t/** @type {import('types').SSRClientRoute | null} */\n\tlet route = null;\n\t/** @type {Record<string, string>} */\n\tlet params = {};\n\n\tconst matchers = await manifest._.matchers();\n\n\tfor (const candidate of manifest._.client.routes) {\n\t\tconst match = candidate.pattern.exec(resolved_path);\n\t\tif (!match) continue;\n\n\t\tconst matched = exec(match, candidate.params, matchers);\n\t\tif (matched) {\n\t\t\troute = candidate;\n\t\t\tparams = decode_params(matched);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn create_server_routing_response(route, params, url, manifest).response;\n}\n\n/**\n * @param {import('types').SSRClientRoute | null} route\n * @param {Partial<Record<string, string>>} params\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {{response: Response, body: string}}\n */\nexport function create_server_routing_response(route, params, url, manifest) {\n\tconst headers = new Headers({\n\t\t'content-type': 'application/javascript; charset=utf-8'\n\t});\n\n\tif (route) {\n\t\tconst csr_route = generate_route_object(route, url, manifest);\n\t\tconst body = `${create_css_import(route, url, manifest)}\\nexport const route = ${csr_route}; export const params = ${JSON.stringify(params)};`;\n\n\t\treturn { response: text(body, { headers }), body };\n\t} else {\n\t\treturn { response: text('', { headers }), body: '' };\n\t}\n}\n\n/**\n * This function generates the client-side import for the CSS files that are\n * associated with the current route. Vite takes care of that when using\n * client-side route resolution, but for server-side resolution it does\n * not know about the CSS files automatically.\n *\n * @param {import('types').SSRClientRoute} route\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {string}\n */\nfunction create_css_import(route, url, manifest) {\n\tconst { errors, layouts, leaf } = route;\n\n\tlet css = '';\n\n\tfor (const node of [...errors, ...layouts.map((l) => l?.[1]), leaf[1]]) {\n\t\tif (typeof node !== 'number') continue;\n\t\tconst node_css = manifest._.client.css?.[node];\n\t\tfor (const css_path of node_css ?? []) {\n\t\t\tcss += `'${assets || base}/${css_path}',`;\n\t\t}\n\t}\n\n\tif (!css) return '';\n\n\treturn `${create_client_import(/** @type {string} */ (manifest._.client.start), url)}.then(x => x.load_css([${css}]));`;\n}\n","import * as devalue from 'devalue';\nimport { readable, writable } from 'svelte/store';\nimport { DEV } from 'esm-env';\nimport { text } from '@sveltejs/kit';\nimport * as paths from '$app/paths/internal/server';\nimport { hash } from '../../../utils/hash.js';\nimport { serialize_data } from './serialize_data.js';\nimport { s } from '../../../utils/misc.js';\nimport { Csp } from './csp.js';\nimport { uneval_action_response } from './actions.js';\nimport { public_env } from '../../shared-server.js';\nimport { SVELTE_KIT_ASSETS } from '../../../constants.js';\nimport { SCHEME } from '../../../utils/url.js';\nimport { create_server_routing_response, generate_route_object } from './server_routing.js';\nimport { add_resolution_suffix } from '../../pathname.js';\nimport { try_get_request_store, with_request_store } from '@sveltejs/kit/internal/server';\nimport { text_encoder } from '../../utils.js';\nimport { get_global_name } from '../utils.js';\nimport { create_remote_key } from '../../shared.js';\n\n// TODO rename this function/module\n\nconst updated = {\n\t...readable(false),\n\tcheck: () => false\n};\n\n/**\n * Creates the HTML response.\n * @param {{\n *   branch: Array<import('./types.js').Loaded>;\n *   fetched: Array<import('./types.js').Fetched>;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   page_config: { ssr: boolean; csr: boolean };\n *   status: number;\n *   error: App.Error | null;\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   resolve_opts: import('types').RequiredResolveOptions;\n *   action_result?: import('@sveltejs/kit').ActionResult;\n *   data_serializer: import('./types.js').ServerDataSerializer\n * }} opts\n */\nexport async function render_response({\n\tbranch,\n\tfetched,\n\toptions,\n\tmanifest,\n\tstate,\n\tpage_config,\n\tstatus,\n\terror = null,\n\tevent,\n\tevent_state,\n\tresolve_opts,\n\taction_result,\n\tdata_serializer\n}) {\n\tif (state.prerendering) {\n\t\tif (options.csp.mode === 'nonce') {\n\t\t\tthrow new Error('Cannot use prerendering if config.kit.csp.mode === \"nonce\"');\n\t\t}\n\n\t\tif (options.app_template_contains_nonce) {\n\t\t\tthrow new Error('Cannot use prerendering if page template contains %sveltekit.nonce%');\n\t\t}\n\t}\n\n\tconst { client } = manifest._;\n\n\tconst modulepreloads = new Set(client.imports);\n\tconst stylesheets = new Set(client.stylesheets);\n\tconst fonts = new Set(client.fonts);\n\n\t/**\n\t * The value of the Link header that is added to the response when not prerendering\n\t * @type {Set<string>}\n\t */\n\tconst link_headers = new Set();\n\n\t/**\n\t * `<link>` tags that are added to prerendered responses\n\t * (note that stylesheets are always added, prerendered or not)\n\t * @type {Set<string>}\n\t */\n\tconst link_tags = new Set();\n\n\t/** @type {Map<string, string>} */\n\t// TODO if we add a client entry point one day, we will need to include inline_styles with the entry, otherwise stylesheets will be linked even if they are below inlineStyleThreshold\n\tconst inline_styles = new Map();\n\n\tlet rendered;\n\n\tconst form_value =\n\t\taction_result?.type === 'success' || action_result?.type === 'failure'\n\t\t\t? (action_result.data ?? null)\n\t\t\t: null;\n\n\t/** @type {string} */\n\tlet base = paths.base;\n\n\t/** @type {string} */\n\tlet assets = paths.assets;\n\n\t/**\n\t * An expression that will evaluate in the client to determine the resolved base path.\n\t * We use a relative path when possible to support IPFS, the internet archive, etc.\n\t */\n\tlet base_expression = s(paths.base);\n\n\t// if appropriate, use relative paths for greater portability\n\tif (paths.relative) {\n\t\tif (!state.prerendering?.fallback) {\n\t\t\tconst segments = event.url.pathname.slice(paths.base.length).split('/').slice(2);\n\n\t\t\tbase = segments.map(() => '..').join('/') || '.';\n\n\t\t\t// resolve e.g. '../..' against current location, then remove trailing slash\n\t\t\tbase_expression = `new URL(${s(base)}, location).pathname.slice(0, -1)`;\n\n\t\t\tif (!paths.assets || (paths.assets[0] === '/' && paths.assets !== SVELTE_KIT_ASSETS)) {\n\t\t\t\tassets = base;\n\t\t\t}\n\t\t} else if (options.hash_routing) {\n\t\t\t// we have to assume that we're in the right place\n\t\t\tbase_expression = \"new URL('.', location).pathname.slice(0, -1)\";\n\t\t}\n\t}\n\n\tif (page_config.ssr) {\n\t\t/** @type {Record<string, any>} */\n\t\tconst props = {\n\t\t\tstores: {\n\t\t\t\tpage: writable(null),\n\t\t\t\tnavigating: writable(null),\n\t\t\t\tupdated\n\t\t\t},\n\t\t\tconstructors: await Promise.all(\n\t\t\t\tbranch.map(({ node }) => {\n\t\t\t\t\tif (!node.component) {\n\t\t\t\t\t\t// Can only be the leaf, layouts have a fallback component generated\n\t\t\t\t\t\tthrow new Error(`Missing +page.svelte component for route ${event.route.id}`);\n\t\t\t\t\t}\n\t\t\t\t\treturn node.component();\n\t\t\t\t})\n\t\t\t),\n\t\t\tform: form_value\n\t\t};\n\n\t\tlet data = {};\n\n\t\t// props_n (instead of props[n]) makes it easy to avoid\n\t\t// unnecessary updates for layout components\n\t\tfor (let i = 0; i < branch.length; i += 1) {\n\t\t\tdata = { ...data, ...branch[i].data };\n\t\t\tprops[`data_${i}`] = data;\n\t\t}\n\n\t\tprops.page = {\n\t\t\terror,\n\t\t\tparams: /** @type {Record<string, any>} */ (event.params),\n\t\t\troute: event.route,\n\t\t\tstatus,\n\t\t\turl: event.url,\n\t\t\tdata,\n\t\t\tform: form_value,\n\t\t\tstate: {}\n\t\t};\n\n\t\tconst render_opts = {\n\t\t\tcontext: new Map([\n\t\t\t\t[\n\t\t\t\t\t'__request__',\n\t\t\t\t\t{\n\t\t\t\t\t\tpage: props.page\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t])\n\t\t};\n\n\t\tconst fetch = globalThis.fetch;\n\n\t\ttry {\n\t\t\tif (DEV) {\n\t\t\t\tlet warned = false;\n\t\t\t\tglobalThis.fetch = (info, init) => {\n\t\t\t\t\tif (typeof info === 'string' && !SCHEME.test(info)) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Cannot call \\`fetch\\` eagerly during server-side rendering with relative URL (${info}) — put your \\`fetch\\` calls inside \\`onMount\\` or a \\`load\\` function instead`\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (!warned && !try_get_request_store()?.state.is_in_remote_function) {\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t'Avoid calling `fetch` eagerly during server-side rendering — put your `fetch` calls inside `onMount` or a `load` function instead'\n\t\t\t\t\t\t);\n\t\t\t\t\t\twarned = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn fetch(info, init);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\trendered = await with_request_store({ event, state: event_state }, async () => {\n\t\t\t\t// use relative paths during rendering, so that the resulting HTML is as\n\t\t\t\t// portable as possible, but reset afterwards\n\t\t\t\tif (paths.relative) paths.override({ base, assets });\n\n\t\t\t\tconst maybe_promise = options.root.render(props, render_opts);\n\t\t\t\t// We have to invoke .then eagerly here in order to kick off rendering: it's only starting on access,\n\t\t\t\t// and `await maybe_promise` would eagerly access the .then property but call its function only after a tick, which is too late\n\t\t\t\t// for the paths.reset() below and for any eager getRequestEvent() calls during rendering without AsyncLocalStorage available.\n\t\t\t\tconst rendered =\n\t\t\t\t\toptions.async && 'then' in maybe_promise\n\t\t\t\t\t\t? /** @type {ReturnType<typeof options.root.render> & Promise<any>} */ (\n\t\t\t\t\t\t\t\tmaybe_promise\n\t\t\t\t\t\t\t).then((r) => r)\n\t\t\t\t\t\t: maybe_promise;\n\n\t\t\t\t// TODO 3.0 remove options.async\n\t\t\t\tif (options.async) {\n\t\t\t\t\t// we reset this synchronously, rather than after async rendering is complete,\n\t\t\t\t\t// to avoid cross-talk between requests. This is a breaking change for\n\t\t\t\t\t// anyone who opts into async SSR, since `base` and `assets` will no\n\t\t\t\t\t// longer be relative to the current pathname.\n\t\t\t\t\t// TODO 3.0 remove `base` and `assets` in favour of `resolve(...)` and `asset(...)`\n\t\t\t\t\tpaths.reset();\n\t\t\t\t}\n\n\t\t\t\tconst { head, html, css } = options.async ? await rendered : rendered;\n\n\t\t\t\treturn { head, html, css };\n\t\t\t});\n\t\t} finally {\n\t\t\tif (DEV) {\n\t\t\t\tglobalThis.fetch = fetch;\n\t\t\t}\n\n\t\t\tpaths.reset(); // just in case `options.root.render(...)` failed\n\t\t}\n\n\t\tfor (const { node } of branch) {\n\t\t\tfor (const url of node.imports) modulepreloads.add(url);\n\t\t\tfor (const url of node.stylesheets) stylesheets.add(url);\n\t\t\tfor (const url of node.fonts) fonts.add(url);\n\n\t\t\tif (node.inline_styles && !client.inline) {\n\t\t\t\tObject.entries(await node.inline_styles()).forEach(([k, v]) => inline_styles.set(k, v));\n\t\t\t}\n\t\t}\n\t} else {\n\t\trendered = { head: '', html: '', css: { code: '', map: null } };\n\t}\n\n\tlet head = '';\n\tlet body = rendered.html;\n\n\tconst csp = new Csp(options.csp, {\n\t\tprerender: !!state.prerendering\n\t});\n\n\t/** @param {string} path */\n\tconst prefixed = (path) => {\n\t\tif (path.startsWith('/')) {\n\t\t\t// Vite makes the start script available through the base path and without it.\n\t\t\t// We load it via the base path in order to support remote IDE environments which proxy\n\t\t\t// all URLs under the base path during development.\n\t\t\treturn paths.base + path;\n\t\t}\n\t\treturn `${assets}/${path}`;\n\t};\n\n\t// inline styles can come from `bundleStrategy: 'inline'` or `inlineStyleThreshold`\n\tconst style = client.inline\n\t\t? client.inline?.style\n\t\t: Array.from(inline_styles.values()).join('\\n');\n\n\tif (style) {\n\t\tconst attributes = DEV ? [' data-sveltekit'] : [];\n\t\tif (csp.style_needs_nonce) attributes.push(` nonce=\"${csp.nonce}\"`);\n\n\t\tcsp.add_style(style);\n\n\t\thead += `\\n\\t<style${attributes.join('')}>${style}</style>`;\n\t}\n\n\tfor (const dep of stylesheets) {\n\t\tconst path = prefixed(dep);\n\n\t\tconst attributes = ['rel=\"stylesheet\"'];\n\n\t\tif (inline_styles.has(dep)) {\n\t\t\t// don't load stylesheets that are already inlined\n\t\t\t// include them in disabled state so that Vite can detect them and doesn't try to add them\n\t\t\tattributes.push('disabled', 'media=\"(max-width: 0)\"');\n\t\t} else {\n\t\t\tif (resolve_opts.preload({ type: 'css', path })) {\n\t\t\t\tlink_headers.add(`<${encodeURI(path)}>; rel=\"preload\"; as=\"style\"; nopush`);\n\t\t\t}\n\t\t}\n\n\t\thead += `\\n\\t\\t<link href=\"${path}\" ${attributes.join(' ')}>`;\n\t}\n\n\tfor (const dep of fonts) {\n\t\tconst path = prefixed(dep);\n\n\t\tif (resolve_opts.preload({ type: 'font', path })) {\n\t\t\tconst ext = dep.slice(dep.lastIndexOf('.') + 1);\n\n\t\t\tlink_tags.add(`<link rel=\"preload\" as=\"font\" type=\"font/${ext}\" href=\"${path}\" crossorigin>`);\n\n\t\t\tlink_headers.add(\n\t\t\t\t`<${encodeURI(path)}>; rel=\"preload\"; as=\"font\"; type=\"font/${ext}\"; crossorigin; nopush`\n\t\t\t);\n\t\t}\n\t}\n\n\tconst global = get_global_name(options);\n\tconst { data, chunks } = data_serializer.get_data(csp);\n\n\tif (page_config.ssr && page_config.csr) {\n\t\tbody += `\\n\\t\\t\\t${fetched\n\t\t\t.map((item) =>\n\t\t\t\tserialize_data(item, resolve_opts.filterSerializedResponseHeaders, !!state.prerendering)\n\t\t\t)\n\t\t\t.join('\\n\\t\\t\\t')}`;\n\t}\n\n\tif (page_config.csr) {\n\t\tconst route = manifest._.client.routes?.find((r) => r.id === event.route.id) ?? null;\n\n\t\tif (client.uses_env_dynamic_public && state.prerendering) {\n\t\t\tmodulepreloads.add(`${paths.app_dir}/env.js`);\n\t\t}\n\n\t\tif (!client.inline) {\n\t\t\tconst included_modulepreloads = Array.from(modulepreloads, (dep) => prefixed(dep)).filter(\n\t\t\t\t(path) => resolve_opts.preload({ type: 'js', path })\n\t\t\t);\n\n\t\t\tfor (const path of included_modulepreloads) {\n\t\t\t\t// see the kit.output.preloadStrategy option for details on why we have multiple options here\n\t\t\t\tlink_headers.add(`<${encodeURI(path)}>; rel=\"modulepreload\"; nopush`);\n\n\t\t\t\tif (options.preload_strategy !== 'modulepreload') {\n\t\t\t\t\thead += `\\n\\t\\t<link rel=\"preload\" as=\"script\" crossorigin=\"anonymous\" href=\"${path}\">`;\n\t\t\t\t} else {\n\t\t\t\t\tlink_tags.add(`<link rel=\"modulepreload\" href=\"${path}\">`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (state.prerendering && link_tags.size > 0) {\n\t\t\thead += Array.from(link_tags)\n\t\t\t\t.map((tag) => `\\n\\t\\t${tag}`)\n\t\t\t\t.join('');\n\t\t}\n\n\t\t// prerender a `/path/to/page/__route.js` module\n\t\tif (manifest._.client.routes && state.prerendering && !state.prerendering.fallback) {\n\t\t\tconst pathname = add_resolution_suffix(event.url.pathname);\n\n\t\t\tstate.prerendering.dependencies.set(\n\t\t\t\tpathname,\n\t\t\t\tcreate_server_routing_response(route, event.params, new URL(pathname, event.url), manifest)\n\t\t\t);\n\t\t}\n\n\t\tconst blocks = [];\n\n\t\t// when serving a prerendered page in an app that uses $env/dynamic/public, we must\n\t\t// import the env.js module so that it evaluates before any user code can evaluate.\n\t\t// TODO revert to using top-level await once https://bugs.webkit.org/show_bug.cgi?id=242740 is fixed\n\t\t// https://github.com/sveltejs/kit/pull/11601\n\t\tconst load_env_eagerly = client.uses_env_dynamic_public && state.prerendering;\n\n\t\tconst properties = [`base: ${base_expression}`];\n\n\t\tif (paths.assets) {\n\t\t\tproperties.push(`assets: ${s(paths.assets)}`);\n\t\t}\n\n\t\tif (client.uses_env_dynamic_public) {\n\t\t\tproperties.push(`env: ${load_env_eagerly ? 'null' : s(public_env)}`);\n\t\t}\n\n\t\tif (chunks) {\n\t\t\tblocks.push('const deferred = new Map();');\n\n\t\t\tproperties.push(`defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})`);\n\n\t\t\tlet app_declaration = '';\n\n\t\t\tif (Object.keys(options.hooks.transport).length > 0) {\n\t\t\t\tif (client.inline) {\n\t\t\t\t\tapp_declaration = `const app = __sveltekit_${options.version_hash}.app.app;`;\n\t\t\t\t} else if (client.app) {\n\t\t\t\t\tapp_declaration = `const app = await import(${s(prefixed(client.app))});`;\n\t\t\t\t} else {\n\t\t\t\t\tapp_declaration = `const { app } = await import(${s(prefixed(client.start))});`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst prelude = app_declaration\n\t\t\t\t? `${app_declaration}\n\t\t\t\t\t\t\tconst [data, error] = fn(app);`\n\t\t\t\t: `const [data, error] = fn();`;\n\n\t\t\t// When resolving, the id might not yet be available due to the data\n\t\t\t// be evaluated upon init of kit, so we use a timeout to retry\n\t\t\tproperties.push(`resolve: async (id, fn) => {\n\t\t\t\t\t\t\t${prelude}\n\n\t\t\t\t\t\t\tconst try_to_resolve = () => {\n\t\t\t\t\t\t\t\tif (!deferred.has(id)) {\n\t\t\t\t\t\t\t\t\tsetTimeout(try_to_resolve, 0);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\t\tdeferred.delete(id);\n\t\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry_to_resolve();\n\t\t\t\t\t\t}`);\n\t\t}\n\n\t\t// create this before declaring `data`, which may contain references to `${global}`\n\t\tblocks.push(`${global} = {\n\t\t\t\t\t\t${properties.join(',\\n\\t\\t\\t\\t\\t\\t')}\n\t\t\t\t\t};`);\n\n\t\tconst args = ['element'];\n\n\t\tblocks.push('const element = document.currentScript.parentElement;');\n\n\t\tif (page_config.ssr) {\n\t\t\tconst serialized = { form: 'null', error: 'null' };\n\n\t\t\tif (form_value) {\n\t\t\t\tserialized.form = uneval_action_response(\n\t\t\t\t\tform_value,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (error) {\n\t\t\t\tserialized.error = devalue.uneval(error);\n\t\t\t}\n\n\t\t\tconst hydrate = [\n\t\t\t\t`node_ids: [${branch.map(({ node }) => node.index).join(', ')}]`,\n\t\t\t\t`data: ${data}`,\n\t\t\t\t`form: ${serialized.form}`,\n\t\t\t\t`error: ${serialized.error}`\n\t\t\t];\n\n\t\t\tif (status !== 200) {\n\t\t\t\thydrate.push(`status: ${status}`);\n\t\t\t}\n\n\t\t\tif (manifest._.client.routes) {\n\t\t\t\tif (route) {\n\t\t\t\t\tconst stringified = generate_route_object(route, event.url, manifest).replaceAll(\n\t\t\t\t\t\t'\\n',\n\t\t\t\t\t\t'\\n\\t\\t\\t\\t\\t\\t\\t'\n\t\t\t\t\t); // make output after it's put together with the rest more readable\n\t\t\t\t\thydrate.push(`params: ${devalue.uneval(event.params)}`, `server_route: ${stringified}`);\n\t\t\t\t}\n\t\t\t} else if (options.embedded) {\n\t\t\t\thydrate.push(`params: ${devalue.uneval(event.params)}`, `route: ${s(event.route)}`);\n\t\t\t}\n\n\t\t\tconst indent = '\\t'.repeat(load_env_eagerly ? 7 : 6);\n\t\t\targs.push(`{\\n${indent}\\t${hydrate.join(`,\\n${indent}\\t`)}\\n${indent}}`);\n\t\t}\n\n\t\tconst { remote_data: remote_cache } = event_state;\n\n\t\tlet serialized_remote_data = '';\n\n\t\tif (remote_cache) {\n\t\t\t/** @type {Record<string, any>} */\n\t\t\tconst remote = {};\n\n\t\t\tfor (const [info, cache] of remote_cache) {\n\t\t\t\t// remote functions without an `id` aren't exported, and thus\n\t\t\t\t// cannot be called from the client\n\t\t\t\tif (!info.id) continue;\n\n\t\t\t\tfor (const key in cache) {\n\t\t\t\t\tremote[create_remote_key(info.id, key)] = await cache[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO this is repeated in a few places — dedupe it\n\t\t\tconst replacer = (/** @type {any} */ thing) => {\n\t\t\t\tfor (const key in options.hooks.transport) {\n\t\t\t\t\tconst encoded = options.hooks.transport[key].encode(thing);\n\t\t\t\t\tif (encoded) {\n\t\t\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tserialized_remote_data = `${global}.data = ${devalue.uneval(remote, replacer)};\\n\\n\\t\\t\\t\\t\\t\\t`;\n\t\t}\n\n\t\t// `client.app` is a proxy for `bundleStrategy === 'split'`\n\t\tconst boot = client.inline\n\t\t\t? `${client.inline.script}\n\n\t\t\t\t\t${serialized_remote_data}${global}.app.start(${args.join(', ')});`\n\t\t\t: client.app\n\t\t\t\t? `Promise.all([\n\t\t\t\t\t\timport(${s(prefixed(client.start))}),\n\t\t\t\t\t\timport(${s(prefixed(client.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\t${serialized_remote_data}kit.start(app, ${args.join(', ')});\n\t\t\t\t\t});`\n\t\t\t\t: `import(${s(prefixed(client.start))}).then((app) => {\n\t\t\t\t\t\t${serialized_remote_data}app.start(${args.join(', ')})\n\t\t\t\t\t});`;\n\n\t\tif (load_env_eagerly) {\n\t\t\tblocks.push(`import(${s(`${base}/${paths.app_dir}/env.js`)}).then(({ env }) => {\n\t\t\t\t\t\t${global}.env = env;\n\n\t\t\t\t\t\t${boot.replace(/\\n/g, '\\n\\t')}\n\t\t\t\t\t});`);\n\t\t} else {\n\t\t\tblocks.push(boot);\n\t\t}\n\n\t\tif (options.service_worker) {\n\t\t\tlet opts = DEV ? \", { type: 'module' }\" : '';\n\t\t\tif (options.service_worker_options != null) {\n\t\t\t\tconst service_worker_options = { ...options.service_worker_options };\n\t\t\t\tif (DEV) {\n\t\t\t\t\tservice_worker_options.type = 'module';\n\t\t\t\t}\n\t\t\t\topts = `, ${s(service_worker_options)}`;\n\t\t\t}\n\n\t\t\t// we use an anonymous function instead of an arrow function to support\n\t\t\t// older browsers (https://github.com/sveltejs/kit/pull/5417)\n\t\t\tblocks.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${prefixed('service-worker.js')}'${opts});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`);\n\t\t}\n\n\t\tconst init_app = `\n\t\t\t\t{\n\t\t\t\t\t${blocks.join('\\n\\n\\t\\t\\t\\t\\t')}\n\t\t\t\t}\n\t\t\t`;\n\t\tcsp.add_script(init_app);\n\n\t\tbody += `\\n\\t\\t\\t<script${\n\t\t\tcsp.script_needs_nonce ? ` nonce=\"${csp.nonce}\"` : ''\n\t\t}>${init_app}</script>\\n\\t\\t`;\n\t}\n\n\tconst headers = new Headers({\n\t\t'x-sveltekit-page': 'true',\n\t\t'content-type': 'text/html'\n\t});\n\n\tif (state.prerendering) {\n\t\t// TODO read headers set with setHeaders and convert into http-equiv where possible\n\t\tconst http_equiv = [];\n\n\t\tconst csp_headers = csp.csp_provider.get_meta();\n\t\tif (csp_headers) {\n\t\t\thttp_equiv.push(csp_headers);\n\t\t}\n\n\t\tif (state.prerendering.cache) {\n\t\t\thttp_equiv.push(`<meta http-equiv=\"cache-control\" content=\"${state.prerendering.cache}\">`);\n\t\t}\n\n\t\tif (http_equiv.length > 0) {\n\t\t\thead = http_equiv.join('\\n') + head;\n\t\t}\n\t} else {\n\t\tconst csp_header = csp.csp_provider.get_header();\n\t\tif (csp_header) {\n\t\t\theaders.set('content-security-policy', csp_header);\n\t\t}\n\t\tconst report_only_header = csp.report_only_provider.get_header();\n\t\tif (report_only_header) {\n\t\t\theaders.set('content-security-policy-report-only', report_only_header);\n\t\t}\n\n\t\tif (link_headers.size) {\n\t\t\theaders.set('link', Array.from(link_headers).join(', '));\n\t\t}\n\t}\n\n\t// add the content after the script/css links so the link elements are parsed first\n\thead += rendered.head;\n\n\tconst html = options.templates.app({\n\t\thead,\n\t\tbody,\n\t\tassets,\n\t\tnonce: /** @type {string} */ (csp.nonce),\n\t\tenv: public_env\n\t});\n\n\t// TODO flush chunks as early as we can\n\tconst transformed =\n\t\t(await resolve_opts.transformPageChunk({\n\t\t\thtml,\n\t\t\tdone: true\n\t\t})) || '';\n\n\tif (!chunks) {\n\t\theaders.set('etag', `\"${hash(transformed)}\"`);\n\t}\n\n\tif (DEV) {\n\t\tif (page_config.csr) {\n\t\t\tif (transformed.split('<!--').length < html.split('<!--').length) {\n\t\t\t\t// the \\u001B stuff is ANSI codes, so that we don't need to add a library to the runtime\n\t\t\t\t// https://svelte.dev/playground/1b3f49696f0c44c881c34587f2537aa2?version=4.2.19\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"\\u001B[1m\\u001B[31mRemoving comments in transformPageChunk can break Svelte's hydration\\u001B[39m\\u001B[22m\"\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif (chunks) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'\\u001B[1m\\u001B[31mReturning promises from server `load` functions will only work if `csr === true`\\u001B[39m\\u001B[22m'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn !chunks\n\t\t? text(transformed, {\n\t\t\t\tstatus,\n\t\t\t\theaders\n\t\t\t})\n\t\t: new Response(\n\t\t\t\tnew ReadableStream({\n\t\t\t\t\tasync start(controller) {\n\t\t\t\t\t\tcontroller.enqueue(text_encoder.encode(transformed + '\\n'));\n\t\t\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\t\t\tif (chunk.length) controller.enqueue(text_encoder.encode(chunk));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t},\n\n\t\t\t\t\ttype: 'bytes'\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\theaders\n\t\t\t\t}\n\t\t\t);\n}\n","/**\n * @param {Set<string>} expected\n */\nfunction validator(expected) {\n\t/**\n\t * @param {any} module\n\t * @param {string} [file]\n\t */\n\tfunction validate(module, file) {\n\t\tif (!module) return;\n\n\t\tfor (const key in module) {\n\t\t\tif (key[0] === '_' || expected.has(key)) continue; // key is valid in this module\n\n\t\t\tconst values = [...expected.values()];\n\n\t\t\tconst hint =\n\t\t\t\thint_for_supported_files(key, file?.slice(file.lastIndexOf('.'))) ??\n\t\t\t\t`valid exports are ${values.join(', ')}, or anything with a '_' prefix`;\n\n\t\t\tthrow new Error(`Invalid export '${key}'${file ? ` in ${file}` : ''} (${hint})`);\n\t\t}\n\t}\n\n\treturn validate;\n}\n\n/**\n * @param {string} key\n * @param {string} ext\n * @returns {string | void}\n */\nfunction hint_for_supported_files(key, ext = '.js') {\n\tconst supported_files = [];\n\n\tif (valid_layout_exports.has(key)) {\n\t\tsupported_files.push(`+layout${ext}`);\n\t}\n\n\tif (valid_page_exports.has(key)) {\n\t\tsupported_files.push(`+page${ext}`);\n\t}\n\n\tif (valid_layout_server_exports.has(key)) {\n\t\tsupported_files.push(`+layout.server${ext}`);\n\t}\n\n\tif (valid_page_server_exports.has(key)) {\n\t\tsupported_files.push(`+page.server${ext}`);\n\t}\n\n\tif (valid_server_exports.has(key)) {\n\t\tsupported_files.push(`+server${ext}`);\n\t}\n\n\tif (supported_files.length > 0) {\n\t\treturn `'${key}' is a valid export in ${supported_files.slice(0, -1).join(', ')}${\n\t\t\tsupported_files.length > 1 ? ' or ' : ''\n\t\t}${supported_files.at(-1)}`;\n\t}\n}\n\nconst valid_layout_exports = new Set([\n\t'load',\n\t'prerender',\n\t'csr',\n\t'ssr',\n\t'trailingSlash',\n\t'config'\n]);\nconst valid_page_exports = new Set([...valid_layout_exports, 'entries']);\nconst valid_layout_server_exports = new Set([...valid_layout_exports]);\nconst valid_page_server_exports = new Set([...valid_layout_server_exports, 'actions', 'entries']);\nconst valid_server_exports = new Set([\n\t'GET',\n\t'POST',\n\t'PATCH',\n\t'PUT',\n\t'DELETE',\n\t'OPTIONS',\n\t'HEAD',\n\t'fallback',\n\t'prerender',\n\t'trailingSlash',\n\t'config',\n\t'entries'\n]);\n\nexport const validate_layout_exports = validator(valid_layout_exports);\nexport const validate_page_exports = validator(valid_page_exports);\nexport const validate_layout_server_exports = validator(valid_layout_server_exports);\nexport const validate_page_server_exports = validator(valid_page_server_exports);\nexport const validate_server_exports = validator(valid_server_exports);\n","import {\n\tvalidate_layout_exports,\n\tvalidate_layout_server_exports,\n\tvalidate_page_exports,\n\tvalidate_page_server_exports\n} from './exports.js';\n\nexport class PageNodes {\n\tdata;\n\n\t/**\n\t * @param {Array<import('types').SSRNode | undefined>} nodes\n\t */\n\tconstructor(nodes) {\n\t\tthis.data = nodes;\n\t}\n\n\tlayouts() {\n\t\treturn this.data.slice(0, -1);\n\t}\n\n\tpage() {\n\t\treturn this.data.at(-1);\n\t}\n\n\tvalidate() {\n\t\tfor (const layout of this.layouts()) {\n\t\t\tif (layout) {\n\t\t\t\tvalidate_layout_server_exports(layout.server, /** @type {string} */ (layout.server_id));\n\t\t\t\tvalidate_layout_exports(layout.universal, /** @type {string} */ (layout.universal_id));\n\t\t\t}\n\t\t}\n\n\t\tconst page = this.page();\n\t\tif (page) {\n\t\t\tvalidate_page_server_exports(page.server, /** @type {string} */ (page.server_id));\n\t\t\tvalidate_page_exports(page.universal, /** @type {string} */ (page.universal_id));\n\t\t}\n\t}\n\n\t/**\n\t * @template {'prerender' | 'ssr' | 'csr' | 'trailingSlash'} Option\n\t * @param {Option} option\n\t * @returns {Value | undefined}\n\t */\n\t#get_option(option) {\n\t\t/** @typedef {(import('types').UniversalNode | import('types').ServerNode)[Option]} Value */\n\n\t\treturn this.data.reduce((value, node) => {\n\t\t\treturn node?.universal?.[option] ?? node?.server?.[option] ?? value;\n\t\t}, /** @type {Value | undefined} */ (undefined));\n\t}\n\n\tcsr() {\n\t\treturn this.#get_option('csr') ?? true;\n\t}\n\n\tssr() {\n\t\treturn this.#get_option('ssr') ?? true;\n\t}\n\n\tprerender() {\n\t\treturn this.#get_option('prerender') ?? false;\n\t}\n\n\ttrailing_slash() {\n\t\treturn this.#get_option('trailingSlash') ?? 'never';\n\t}\n\n\tget_config() {\n\t\t/** @type {any} */\n\t\tlet current = {};\n\n\t\tfor (const node of this.data) {\n\t\t\tif (!node?.universal?.config && !node?.server?.config) continue;\n\n\t\t\tcurrent = {\n\t\t\t\t...current,\n\t\t\t\t// TODO: should we override the server config value with the universal value similar to other page options?\n\t\t\t\t...node?.universal?.config,\n\t\t\t\t...node?.server?.config\n\t\t\t};\n\t\t}\n\n\t\t// TODO 3.0 always return `current`? then we can get rid of `?? {}` in other places\n\t\treturn Object.keys(current).length ? current : undefined;\n\t}\n\n\tshould_prerender_data() {\n\t\treturn this.data.some(\n\t\t\t// prerender in case of trailingSlash because the client retrieves that value from the server\n\t\t\t(node) => node?.server?.load || node?.server?.trailingSlash !== undefined\n\t\t);\n\t}\n}\n","import { Redirect } from '@sveltejs/kit/internal';\nimport { render_response } from './render.js';\nimport { load_data, load_server_data } from './load_data.js';\nimport { handle_error_and_jsonify, static_error_page, redirect_response } from '../utils.js';\nimport { get_status } from '../../../utils/error.js';\nimport { PageNodes } from '../../../utils/page_nodes.js';\nimport { server_data_serializer } from './data_serializer.js';\n\n/**\n * @typedef {import('./types.js').Loaded} Loaded\n */\n\n/**\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   status: number;\n *   error: unknown;\n *   resolve_opts: import('types').RequiredResolveOptions;\n * }} opts\n */\nexport async function respond_with_error({\n\tevent,\n\tevent_state,\n\toptions,\n\tmanifest,\n\tstate,\n\tstatus,\n\terror,\n\tresolve_opts\n}) {\n\t// reroute to the fallback page to prevent an infinite chain of requests.\n\tif (event.request.headers.get('x-sveltekit-error')) {\n\t\treturn static_error_page(options, status, /** @type {Error} */ (error).message);\n\t}\n\n\t/** @type {import('./types.js').Fetched[]} */\n\tconst fetched = [];\n\n\ttry {\n\t\tconst branch = [];\n\t\tconst default_layout = await manifest._.nodes[0](); // 0 is always the root layout\n\t\tconst nodes = new PageNodes([default_layout]);\n\t\tconst ssr = nodes.ssr();\n\t\tconst csr = nodes.csr();\n\t\tconst data_serializer = server_data_serializer(event, event_state, options);\n\n\t\tif (ssr) {\n\t\t\tstate.error = true;\n\n\t\t\tconst server_data_promise = load_server_data({\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\tstate,\n\t\t\t\tnode: default_layout,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/require-await\n\t\t\t\tparent: async () => ({})\n\t\t\t});\n\n\t\t\tconst server_data = await server_data_promise;\n\t\t\tdata_serializer.add_node(0, server_data);\n\n\t\t\tconst data = await load_data({\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\tfetched,\n\t\t\t\tnode: default_layout,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/require-await\n\t\t\t\tparent: async () => ({}),\n\t\t\t\tresolve_opts,\n\t\t\t\tserver_data_promise,\n\t\t\t\tstate,\n\t\t\t\tcsr\n\t\t\t});\n\n\t\t\tbranch.push(\n\t\t\t\t{\n\t\t\t\t\tnode: default_layout,\n\t\t\t\t\tserver_data,\n\t\t\t\t\tdata\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tnode: await manifest._.nodes[1](), // 1 is always the root error\n\t\t\t\t\tdata: null,\n\t\t\t\t\tserver_data: null\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn await render_response({\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tpage_config: {\n\t\t\t\tssr,\n\t\t\t\tcsr\n\t\t\t},\n\t\t\tstatus,\n\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error),\n\t\t\tbranch,\n\t\t\tfetched,\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\tresolve_opts,\n\t\t\tdata_serializer\n\t\t});\n\t} catch (e) {\n\t\t// Edge case: If route is a 404 and the user redirects to somewhere from the root layout,\n\t\t// we end up here.\n\t\tif (e instanceof Redirect) {\n\t\t\treturn redirect_response(e.status, e.location);\n\t\t}\n\n\t\treturn static_error_page(\n\t\t\toptions,\n\t\t\tget_status(e),\n\t\t\t(await handle_error_and_jsonify(event, event_state, options, e)).message\n\t\t);\n\t}\n}\n","/** @import { ActionResult, RemoteForm, RequestEvent, SSRManifest } from '@sveltejs/kit' */\n/** @import { RemoteFunctionResponse, RemoteInfo, RequestState, SSROptions } from 'types' */\n\nimport { json, error } from '@sveltejs/kit';\nimport { HttpError, Redirect, SvelteKitError } from '@sveltejs/kit/internal';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { app_dir, base } from '$app/paths/internal/server';\nimport { is_form_content_type } from '../../utils/http.js';\nimport { parse_remote_arg, stringify } from '../shared.js';\nimport { handle_error_and_jsonify } from './utils.js';\nimport { normalize_error } from '../../utils/error.js';\nimport { check_incorrect_fail_use } from './page/actions.js';\nimport { DEV } from 'esm-env';\nimport { record_span } from '../telemetry/record_span.js';\nimport { deserialize_binary_form } from '../form-utils.js';\n\n/** @type {typeof handle_remote_call_internal} */\nexport async function handle_remote_call(event, state, options, manifest, id) {\n\treturn record_span({\n\t\tname: 'sveltekit.remote.call',\n\t\tattributes: {\n\t\t\t'sveltekit.remote.call.id': id\n\t\t},\n\t\tfn: (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn with_request_store({ event: traced_event, state }, () =>\n\t\t\t\thandle_remote_call_internal(traced_event, state, options, manifest, id)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {SSROptions} options\n * @param {SSRManifest} manifest\n * @param {string} id\n */\nasync function handle_remote_call_internal(event, state, options, manifest, id) {\n\tconst [hash, name, additional_args] = id.split('/');\n\tconst remotes = manifest._.remotes;\n\n\tif (!remotes[hash]) error(404);\n\n\tconst module = await remotes[hash]();\n\tconst fn = module.default[name];\n\n\tif (!fn) error(404);\n\n\t/** @type {RemoteInfo} */\n\tconst info = fn.__;\n\tconst transport = options.hooks.transport;\n\n\tevent.tracing.current.setAttributes({\n\t\t'sveltekit.remote.call.type': info.type,\n\t\t'sveltekit.remote.call.name': info.name\n\t});\n\n\t/** @type {string[] | undefined} */\n\tlet form_client_refreshes;\n\n\ttry {\n\t\tif (info.type === 'query_batch') {\n\t\t\tif (event.request.method !== 'POST') {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t405,\n\t\t\t\t\t'Method Not Allowed',\n\t\t\t\t\t`\\`query.batch\\` functions must be invoked via POST request, not ${event.request.method}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/** @type {{ payloads: string[] }} */\n\t\t\tconst { payloads } = await event.request.json();\n\n\t\t\tconst args = payloads.map((payload) => parse_remote_arg(payload, transport));\n\t\t\tconst get_result = await with_request_store({ event, state }, () => info.run(args));\n\t\t\tconst results = await Promise.all(\n\t\t\t\targs.map(async (arg, i) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn { type: 'result', data: get_result(arg, i) };\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\terror: await handle_error_and_jsonify(event, state, options, error),\n\t\t\t\t\t\t\tstatus:\n\t\t\t\t\t\t\t\terror instanceof HttpError || error instanceof SvelteKitError ? error.status : 500\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(results, transport)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (info.type === 'form') {\n\t\t\tif (event.request.method !== 'POST') {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t405,\n\t\t\t\t\t'Method Not Allowed',\n\t\t\t\t\t`\\`form\\` functions must be invoked via POST request, not ${event.request.method}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (!is_form_content_type(event.request)) {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t415,\n\t\t\t\t\t'Unsupported Media Type',\n\t\t\t\t\t`\\`form\\` functions expect form-encoded data — received ${event.request.headers.get(\n\t\t\t\t\t\t'content-type'\n\t\t\t\t\t)}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst { data, meta, form_data } = await deserialize_binary_form(event.request);\n\n\t\t\t// If this is a keyed form instance (created via form.for(key)), add the key to the form data (unless already set)\n\t\t\t// Note that additional_args will only be set if the form is not enhanced, as enhanced forms transfer the key inside `data`.\n\t\t\tif (additional_args && !('id' in data)) {\n\t\t\t\tdata.id = JSON.parse(decodeURIComponent(additional_args));\n\t\t\t}\n\n\t\t\tconst fn = info.fn;\n\t\t\tconst result = await with_request_store({ event, state }, () => fn(data, meta, form_data));\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(result, transport),\n\t\t\t\t\trefreshes: result.issues ? undefined : await serialize_refreshes(meta.remote_refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (info.type === 'command') {\n\t\t\t/** @type {{ payload: string, refreshes: string[] }} */\n\t\t\tconst { payload, refreshes } = await event.request.json();\n\t\t\tconst arg = parse_remote_arg(payload, transport);\n\t\t\tconst data = await with_request_store({ event, state }, () => fn(arg));\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(data, transport),\n\t\t\t\t\trefreshes: await serialize_refreshes(refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tconst payload =\n\t\t\tinfo.type === 'prerender'\n\t\t\t\t? additional_args\n\t\t\t\t: /** @type {string} */ (\n\t\t\t\t\t\t// new URL(...) necessary because we're hiding the URL from the user in the event object\n\t\t\t\t\t\tnew URL(event.request.url).searchParams.get('payload')\n\t\t\t\t\t);\n\n\t\tconst data = await with_request_store({ event, state }, () =>\n\t\t\tfn(parse_remote_arg(payload, transport))\n\t\t);\n\n\t\treturn json(\n\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\ttype: 'result',\n\t\t\t\tresult: stringify(data, transport)\n\t\t\t})\n\t\t);\n\t} catch (error) {\n\t\tif (error instanceof Redirect) {\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'redirect',\n\t\t\t\t\tlocation: error.location,\n\t\t\t\t\trefreshes: await serialize_refreshes(form_client_refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tconst status =\n\t\t\terror instanceof HttpError || error instanceof SvelteKitError ? error.status : 500;\n\n\t\treturn json(\n\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(event, state, options, error),\n\t\t\t\tstatus\n\t\t\t}),\n\t\t\t{\n\t\t\t\t// By setting a non-200 during prerendering we fail the prerender process (unless handleHttpError handles it).\n\t\t\t\t// Errors at runtime will be passed to the client and are handled there\n\t\t\t\tstatus: state.prerendering ? status : undefined,\n\t\t\t\theaders: {\n\t\t\t\t\t'cache-control': 'private, no-store'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * @param {string[]=} client_refreshes\n\t */\n\tasync function serialize_refreshes(client_refreshes) {\n\t\tconst refreshes = state.refreshes ?? {};\n\n\t\tif (client_refreshes) {\n\t\t\tfor (const key of client_refreshes) {\n\t\t\t\tif (refreshes[key] !== undefined) continue;\n\n\t\t\t\tconst [hash, name, payload] = key.split('/');\n\n\t\t\t\tconst loader = manifest._.remotes[hash];\n\t\t\t\tconst fn = (await loader?.())?.default?.[name];\n\n\t\t\t\tif (!fn) error(400, 'Bad Request');\n\n\t\t\t\trefreshes[key] = with_request_store({ event, state }, () =>\n\t\t\t\t\tfn(parse_remote_arg(payload, transport))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(refreshes).length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn stringify(\n\t\t\tObject.fromEntries(\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tObject.entries(refreshes).map(async ([key, promise]) => [key, await promise])\n\t\t\t\t)\n\t\t\t),\n\t\t\ttransport\n\t\t);\n\t}\n}\n\n/** @type {typeof handle_remote_form_post_internal} */\nexport async function handle_remote_form_post(event, state, manifest, id) {\n\treturn record_span({\n\t\tname: 'sveltekit.remote.form.post',\n\t\tattributes: {\n\t\t\t'sveltekit.remote.form.post.id': id\n\t\t},\n\t\tfn: (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn with_request_store({ event: traced_event, state }, () =>\n\t\t\t\thandle_remote_form_post_internal(traced_event, state, manifest, id)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {SSRManifest} manifest\n * @param {string} id\n * @returns {Promise<ActionResult>}\n */\nasync function handle_remote_form_post_internal(event, state, manifest, id) {\n\tconst [hash, name, action_id] = id.split('/');\n\tconst remotes = manifest._.remotes;\n\tconst module = await remotes[hash]?.();\n\n\tlet form = /** @type {RemoteForm<any, any>} */ (module?.default[name]);\n\n\tif (!form) {\n\t\tevent.setHeaders({\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: 'GET'\n\t\t});\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: new SvelteKitError(\n\t\t\t\t405,\n\t\t\t\t'Method Not Allowed',\n\t\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t\t)\n\t\t};\n\t}\n\n\tif (action_id) {\n\t\t// @ts-expect-error\n\t\tform = with_request_store({ event, state }, () => form.for(JSON.parse(action_id)));\n\t}\n\n\ttry {\n\t\tconst fn = /** @type {RemoteInfo & { type: 'form' }} */ (/** @type {any} */ (form).__).fn;\n\n\t\tconst { data, meta, form_data } = await deserialize_binary_form(event.request);\n\t\tif (action_id && !('id' in data)) {\n\t\t\tdata.id = JSON.parse(decodeURIComponent(action_id));\n\t\t}\n\n\t\tawait with_request_store({ event, state }, () => fn(data, meta, form_data));\n\n\t\t// We don't want the data to appear on `let { form } = $props()`, which is why we're not returning it.\n\t\t// It is instead available on `myForm.result`, setting of which happens within the remote `form` function.\n\t\treturn {\n\t\t\ttype: 'success',\n\t\t\tstatus: 200\n\t\t};\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn {\n\t\t\t\ttype: 'redirect',\n\t\t\t\tstatus: err.status,\n\t\t\t\tlocation: err.location\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: check_incorrect_fail_use(err)\n\t\t};\n\t}\n}\n\n/**\n * @param {URL} url\n */\nexport function get_remote_id(url) {\n\treturn (\n\t\turl.pathname.startsWith(`${base}/${app_dir}/remote/`) &&\n\t\turl.pathname.replace(`${base}/${app_dir}/remote/`, '')\n\t);\n}\n\n/**\n * @param {URL} url\n */\nexport function get_remote_action(url) {\n\treturn url.searchParams.get('/remote');\n}\n","import { text } from '@sveltejs/kit';\nimport { Redirect } from '@sveltejs/kit/internal';\nimport { compact } from '../../../utils/array.js';\nimport { get_status, normalize_error } from '../../../utils/error.js';\nimport { add_data_suffix } from '../../pathname.js';\nimport { redirect_response, static_error_page, handle_error_and_jsonify } from '../utils.js';\nimport {\n\thandle_action_json_request,\n\thandle_action_request,\n\tis_action_json_request,\n\tis_action_request\n} from './actions.js';\nimport { server_data_serializer, server_data_serializer_json } from './data_serializer.js';\nimport { load_data, load_server_data } from './load_data.js';\nimport { render_response } from './render.js';\nimport { respond_with_error } from './respond_with_error.js';\nimport { DEV } from 'esm-env';\nimport { get_remote_action, handle_remote_form_post } from '../remote.js';\nimport { PageNodes } from '../../../utils/page_nodes.js';\n\n/**\n * The maximum request depth permitted before assuming we're stuck in an infinite loop\n */\nconst MAX_DEPTH = 10;\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').PageNodeIndexes} page\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @param {import('../../../utils/page_nodes.js').PageNodes} nodes\n * @param {import('types').RequiredResolveOptions} resolve_opts\n * @returns {Promise<Response>}\n */\nexport async function render_page(\n\tevent,\n\tevent_state,\n\tpage,\n\toptions,\n\tmanifest,\n\tstate,\n\tnodes,\n\tresolve_opts\n) {\n\tif (state.depth > MAX_DEPTH) {\n\t\t// infinite request cycle detected\n\t\treturn text(`Not found: ${event.url.pathname}`, {\n\t\t\tstatus: 404 // TODO in some cases this should be 500. not sure how to differentiate\n\t\t});\n\t}\n\n\tif (is_action_json_request(event)) {\n\t\tconst node = await manifest._.nodes[page.leaf]();\n\t\treturn handle_action_json_request(event, event_state, options, node?.server);\n\t}\n\n\ttry {\n\t\tconst leaf_node = /** @type {import('types').SSRNode} */ (nodes.page());\n\n\t\tlet status = 200;\n\n\t\t/** @type {import('@sveltejs/kit').ActionResult | undefined} */\n\t\tlet action_result = undefined;\n\n\t\tif (is_action_request(event)) {\n\t\t\tconst remote_id = get_remote_action(event.url);\n\t\t\tif (remote_id) {\n\t\t\t\taction_result = await handle_remote_form_post(event, event_state, manifest, remote_id);\n\t\t\t} else {\n\t\t\t\t// for action requests, first call handler in +page.server.js\n\t\t\t\t// (this also determines status code)\n\t\t\t\taction_result = await handle_action_request(event, event_state, leaf_node.server);\n\t\t\t}\n\n\t\t\tif (action_result?.type === 'redirect') {\n\t\t\t\treturn redirect_response(action_result.status, action_result.location);\n\t\t\t}\n\t\t\tif (action_result?.type === 'error') {\n\t\t\t\tstatus = get_status(action_result.error);\n\t\t\t}\n\t\t\tif (action_result?.type === 'failure') {\n\t\t\t\tstatus = action_result.status;\n\t\t\t}\n\t\t}\n\n\t\t// it's crucial that we do this before returning the non-SSR response, otherwise\n\t\t// SvelteKit will erroneously believe that the path has been prerendered,\n\t\t// causing functions to be omitted from the manifest generated later\n\t\tconst should_prerender = nodes.prerender();\n\t\tif (should_prerender) {\n\t\t\tconst mod = leaf_node.server;\n\t\t\tif (mod?.actions) {\n\t\t\t\tthrow new Error('Cannot prerender pages with actions');\n\t\t\t}\n\t\t} else if (state.prerendering) {\n\t\t\t// if the page isn't marked as prerenderable, then bail out at this point\n\t\t\treturn new Response(undefined, {\n\t\t\t\tstatus: 204\n\t\t\t});\n\t\t}\n\n\t\t// if we fetch any endpoints while loading data for this page, they should\n\t\t// inherit the prerender option of the page\n\t\tstate.prerender_default = should_prerender;\n\n\t\tconst should_prerender_data = nodes.should_prerender_data();\n\t\tconst data_pathname = add_data_suffix(event.url.pathname);\n\n\t\t/** @type {import('./types.js').Fetched[]} */\n\t\tconst fetched = [];\n\n\t\tconst ssr = nodes.ssr();\n\t\tconst csr = nodes.csr();\n\n\t\t// renders an empty 'shell' page if SSR is turned off and if there is\n\t\t// no server data to prerender. As a result, the load functions and rendering\n\t\t// only occur client-side.\n\t\tif (ssr === false && !(state.prerendering && should_prerender_data)) {\n\t\t\t// if the user makes a request through a non-enhanced form, the returned value is lost\n\t\t\t// because there is no SSR or client-side handling of the response\n\t\t\tif (DEV && action_result && !event.request.headers.has('x-sveltekit-action')) {\n\t\t\t\tif (action_result.type === 'error') {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"The form action returned an error, but +error.svelte wasn't rendered because SSR is off. To get the error page with CSR, enhance your form with `use:enhance`. See https://svelte.dev/docs/kit/form-actions#progressive-enhancement-use-enhance\"\n\t\t\t\t\t);\n\t\t\t\t} else if (action_result.data) {\n\t\t\t\t\t/// case: lost data\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"The form action returned a value, but it isn't available in `page.form`, because SSR is off. To handle the returned value in CSR, enhance your form with `use:enhance`. See https://svelte.dev/docs/kit/form-actions#progressive-enhancement-use-enhance\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn await render_response({\n\t\t\t\tbranch: [],\n\t\t\t\tfetched,\n\t\t\t\tpage_config: {\n\t\t\t\t\tssr: false,\n\t\t\t\t\tcsr\n\t\t\t\t},\n\t\t\t\tstatus,\n\t\t\t\terror: null,\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\toptions,\n\t\t\t\tmanifest,\n\t\t\t\tstate,\n\t\t\t\tresolve_opts,\n\t\t\t\tdata_serializer: server_data_serializer(event, event_state, options)\n\t\t\t});\n\t\t}\n\n\t\t/** @type {Array<import('./types.js').Loaded | null>} */\n\t\tconst branch = [];\n\n\t\t/** @type {Error | null} */\n\t\tlet load_error = null;\n\n\t\tconst data_serializer = server_data_serializer(event, event_state, options);\n\t\tconst data_serializer_json =\n\t\t\tstate.prerendering && should_prerender_data\n\t\t\t\t? server_data_serializer_json(event, event_state, options)\n\t\t\t\t: null;\n\n\t\t/** @type {Array<Promise<import('types').ServerDataNode | null>>} */\n\t\tconst server_promises = nodes.data.map((node, i) => {\n\t\t\tif (load_error) {\n\t\t\t\t// if an error happens immediately, don't bother with the rest of the nodes\n\t\t\t\tthrow load_error;\n\t\t\t}\n\n\t\t\treturn Promise.resolve().then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tif (node === leaf_node && action_result?.type === 'error') {\n\t\t\t\t\t\t// we wait until here to throw the error so that we can use\n\t\t\t\t\t\t// any nested +error.svelte components that were defined\n\t\t\t\t\t\tthrow action_result.error;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst server_data = await load_server_data({\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tconst parent = await server_promises[j];\n\t\t\t\t\t\t\t\tif (parent) Object.assign(data, parent.data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tdata_serializer.add_node(i, server_data);\n\t\t\t\t\t}\n\n\t\t\t\t\tdata_serializer_json?.add_node(i, server_data);\n\n\t\t\t\t\treturn server_data;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tload_error = /** @type {Error} */ (e);\n\t\t\t\t\tthrow load_error;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t/** @type {Array<Promise<Record<string, any> | null>>} */\n\t\tconst load_promises = nodes.data.map((node, i) => {\n\t\t\tif (load_error) throw load_error;\n\t\t\treturn Promise.resolve().then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await load_data({\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tfetched,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tObject.assign(data, await load_promises[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresolve_opts,\n\t\t\t\t\t\tserver_data_promise: server_promises[i],\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tcsr\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tload_error = /** @type {Error} */ (e);\n\t\t\t\t\tthrow load_error;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// if we don't do this, rejections will be unhandled\n\t\tfor (const p of server_promises) p.catch(() => {});\n\t\tfor (const p of load_promises) p.catch(() => {});\n\n\t\tfor (let i = 0; i < nodes.data.length; i += 1) {\n\t\t\tconst node = nodes.data[i];\n\n\t\t\tif (node) {\n\t\t\t\ttry {\n\t\t\t\t\tconst server_data = await server_promises[i];\n\t\t\t\t\tconst data = await load_promises[i];\n\n\t\t\t\t\tbranch.push({ node, server_data, data });\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconst err = normalize_error(e);\n\n\t\t\t\t\tif (err instanceof Redirect) {\n\t\t\t\t\t\tif (state.prerendering && should_prerender_data) {\n\t\t\t\t\t\t\tconst body = JSON.stringify({\n\t\t\t\t\t\t\t\ttype: 'redirect',\n\t\t\t\t\t\t\t\tlocation: err.location\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstate.prerendering.dependencies.set(data_pathname, {\n\t\t\t\t\t\t\t\tresponse: text(body),\n\t\t\t\t\t\t\t\tbody\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn redirect_response(err.status, err.location);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst status = get_status(err);\n\t\t\t\t\tconst error = await handle_error_and_jsonify(event, event_state, options, err);\n\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tif (page.errors[i]) {\n\t\t\t\t\t\t\tconst index = /** @type {number} */ (page.errors[i]);\n\t\t\t\t\t\t\tconst node = await manifest._.nodes[index]();\n\n\t\t\t\t\t\t\tlet j = i;\n\t\t\t\t\t\t\twhile (!branch[j]) j -= 1;\n\n\t\t\t\t\t\t\tdata_serializer.set_max_nodes(j + 1);\n\n\t\t\t\t\t\t\tconst layouts = compact(branch.slice(0, j + 1));\n\t\t\t\t\t\t\tconst nodes = new PageNodes(layouts.map((layout) => layout.node));\n\n\t\t\t\t\t\t\treturn await render_response({\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\tresolve_opts,\n\t\t\t\t\t\t\t\tpage_config: {\n\t\t\t\t\t\t\t\t\tssr: nodes.ssr(),\n\t\t\t\t\t\t\t\t\tcsr: nodes.csr()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\tbranch: layouts.concat({\n\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\t\t\t\tserver_data: null\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tfetched,\n\t\t\t\t\t\t\t\tdata_serializer\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// if we're still here, it means the error happened in the root layout,\n\t\t\t\t\t// which means we have to fall back to error.html\n\t\t\t\t\treturn static_error_page(options, status, error.message);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// push an empty slot so we can rewind past gaps to the\n\t\t\t\t// layout that corresponds with an +error.svelte page\n\t\t\t\tbranch.push(null);\n\t\t\t}\n\t\t}\n\n\t\tif (state.prerendering && data_serializer_json) {\n\t\t\t// ndjson format\n\t\t\tlet { data, chunks } = data_serializer_json.get_data();\n\n\t\t\tif (chunks) {\n\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\tdata += chunk;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstate.prerendering.dependencies.set(data_pathname, {\n\t\t\t\tresponse: text(data),\n\t\t\t\tbody: data\n\t\t\t});\n\t\t}\n\n\t\treturn await render_response({\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tresolve_opts,\n\t\t\tpage_config: {\n\t\t\t\tcsr,\n\t\t\t\tssr\n\t\t\t},\n\t\t\tstatus,\n\t\t\terror: null,\n\t\t\tbranch: ssr === false ? [] : compact(branch),\n\t\t\taction_result,\n\t\t\tfetched,\n\t\t\tdata_serializer:\n\t\t\t\tssr === false ? server_data_serializer(event, event_state, options) : data_serializer\n\t\t});\n\t} catch (e) {\n\t\t// if we end up here, it means the data loaded successfully\n\t\t// but the page failed to render, or that a prerendering error occurred\n\t\treturn await respond_with_error({\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tstatus: 500,\n\t\t\terror: e,\n\t\t\tresolve_opts\n\t\t});\n\t}\n}\n","import { text } from '@sveltejs/kit';\nimport { HttpError, SvelteKitError, Redirect } from '@sveltejs/kit/internal';\nimport { normalize_error } from '../../../utils/error.js';\nimport { once } from '../../../utils/functions.js';\nimport { server_data_serializer_json } from '../page/data_serializer.js';\nimport { load_server_data } from '../page/load_data.js';\nimport { handle_error_and_jsonify } from '../utils.js';\nimport { normalize_path } from '../../../utils/url.js';\nimport { text_encoder } from '../../utils.js';\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSRRoute} route\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @param {boolean[] | undefined} invalidated_data_nodes\n * @param {import('types').TrailingSlash} trailing_slash\n * @returns {Promise<Response>}\n */\nexport async function render_data(\n\tevent,\n\tevent_state,\n\troute,\n\toptions,\n\tmanifest,\n\tstate,\n\tinvalidated_data_nodes,\n\ttrailing_slash\n) {\n\tif (!route.page) {\n\t\t// requesting /__data.json should fail for a +server.js\n\t\treturn new Response(undefined, {\n\t\t\tstatus: 404\n\t\t});\n\t}\n\n\ttry {\n\t\tconst node_ids = [...route.page.layouts, route.page.leaf];\n\t\tconst invalidated = invalidated_data_nodes ?? node_ids.map(() => true);\n\n\t\tlet aborted = false;\n\n\t\tconst url = new URL(event.url);\n\t\turl.pathname = normalize_path(url.pathname, trailing_slash);\n\n\t\tconst new_event = { ...event, url };\n\n\t\tconst functions = node_ids.map((n, i) => {\n\t\t\treturn once(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tif (aborted) {\n\t\t\t\t\t\treturn /** @type {import('types').ServerDataSkippedNode} */ ({\n\t\t\t\t\t\t\ttype: 'skip'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// == because it could be undefined (in dev) or null (in build, because of JSON.stringify)\n\t\t\t\t\tconst node = n == undefined ? n : await manifest._.nodes[n]();\n\t\t\t\t\t// load this. for the child, return as is. for the final result, stream things\n\t\t\t\t\treturn load_server_data({\n\t\t\t\t\t\tevent: new_event,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tconst parent = /** @type {import('types').ServerDataNode | null} */ (\n\t\t\t\t\t\t\t\t\tawait functions[j]()\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\t\t\tObject.assign(data, parent.data);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\taborted = true;\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst promises = functions.map(async (fn, i) => {\n\t\t\tif (!invalidated[i]) {\n\t\t\t\treturn /** @type {import('types').ServerDataSkippedNode} */ ({\n\t\t\t\t\ttype: 'skip'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn fn();\n\t\t});\n\n\t\tlet length = promises.length;\n\t\tconst nodes = await Promise.all(\n\t\t\tpromises.map((p, i) =>\n\t\t\t\tp.catch(async (error) => {\n\t\t\t\t\tif (error instanceof Redirect) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Math.min because array isn't guaranteed to resolve in order\n\t\t\t\t\tlength = Math.min(length, i + 1);\n\n\t\t\t\t\treturn /** @type {import('types').ServerErrorNode} */ ({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error),\n\t\t\t\t\t\tstatus:\n\t\t\t\t\t\t\terror instanceof HttpError || error instanceof SvelteKitError\n\t\t\t\t\t\t\t\t? error.status\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\n\t\tconst data_serializer = server_data_serializer_json(event, event_state, options);\n\t\tfor (let i = 0; i < nodes.length; i++) data_serializer.add_node(i, nodes[i]);\n\t\tconst { data, chunks } = data_serializer.get_data();\n\n\t\tif (!chunks) {\n\t\t\t// use a normal JSON response where possible, so we get `content-length`\n\t\t\t// and can use browser JSON devtools for easier inspecting\n\t\t\treturn json_response(data);\n\t\t}\n\n\t\treturn new Response(\n\t\t\tnew ReadableStream({\n\t\t\t\tasync start(controller) {\n\t\t\t\t\tcontroller.enqueue(text_encoder.encode(data));\n\t\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\t\tcontroller.enqueue(text_encoder.encode(chunk));\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.close();\n\t\t\t\t},\n\n\t\t\t\ttype: 'bytes'\n\t\t\t}),\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t// we use a proprietary content type to prevent buffering.\n\t\t\t\t\t// the `text` prefix makes it inspectable\n\t\t\t\t\t'content-type': 'text/sveltekit-data',\n\t\t\t\t\t'cache-control': 'private, no-store'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t} catch (e) {\n\t\tconst error = normalize_error(e);\n\n\t\tif (error instanceof Redirect) {\n\t\t\treturn redirect_json_response(error);\n\t\t} else {\n\t\t\treturn json_response(await handle_error_and_jsonify(event, event_state, options, error), 500);\n\t\t}\n\t}\n}\n\n/**\n * @param {Record<string, any> | string} json\n * @param {number} [status]\n */\nfunction json_response(json, status = 200) {\n\treturn text(typeof json === 'string' ? json : JSON.stringify(json), {\n\t\tstatus,\n\t\theaders: {\n\t\t\t'content-type': 'application/json',\n\t\t\t'cache-control': 'private, no-store'\n\t\t}\n\t});\n}\n\n/**\n * @param {Redirect} redirect\n */\nexport function redirect_json_response(redirect) {\n\treturn json_response(\n\t\t/** @type {import('types').ServerRedirectNode} */ ({\n\t\t\ttype: 'redirect',\n\t\t\tlocation: redirect.location\n\t\t})\n\t);\n}\n","import { parse, serialize } from 'cookie';\nimport { DEV } from 'esm-env';\nimport { normalize_path, resolve } from '../../utils/url.js';\nimport { add_data_suffix } from '../pathname.js';\nimport { text_encoder } from '../utils.js';\n\n// eslint-disable-next-line no-control-regex -- control characters are invalid in cookie names\nconst INVALID_COOKIE_CHARACTER_REGEX = /[\\x00-\\x1F\\x7F()<>@,;:\"/[\\]?={} \\t]/;\n\n/**\n * Tracks all cookies set during dev mode so we can emit warnings\n * when we detect that there's likely cookie misusage due to wrong paths\n *\n * @type {Record<string, Set<string>>} */\nconst cookie_paths = {};\n\n/**\n * Cookies that are larger than this size (including the name and other\n * attributes) are discarded by browsers\n */\nconst MAX_COOKIE_SIZE = 4129;\n\n// TODO 3.0 remove this check\n/** @param {import('./page/types.js').Cookie['options']} options */\nfunction validate_options(options) {\n\tif (options?.path === undefined) {\n\t\tthrow new Error('You must specify a `path` when setting, deleting or serializing cookies');\n\t}\n}\n\n/**\n * Generates a unique key for a cookie based on its domain, path, and name in\n * the format: `<domain>/<path>?<name>`.\n * If domain is undefined, it will be omitted.\n * For example: `/?name`, `example.com/foo?name`.\n *\n * @param {string | undefined} domain\n * @param {string} path\n * @param {string} name\n * @returns {string}\n */\nfunction generate_cookie_key(domain, path, name) {\n\treturn `${domain || ''}${path}?${encodeURIComponent(name)}`;\n}\n\n/**\n * @param {Request} request\n * @param {URL} url\n */\nexport function get_cookies(request, url) {\n\tconst header = request.headers.get('cookie') ?? '';\n\tconst initial_cookies = parse(header, { decode: (value) => value });\n\n\t/** @type {string | undefined} */\n\tlet normalized_url;\n\n\t/** @type {Map<string, import('./page/types.js').Cookie>} */\n\tconst new_cookies = new Map();\n\n\t/** @type {import('cookie').CookieSerializeOptions} */\n\tconst defaults = {\n\t\thttpOnly: true,\n\t\tsameSite: 'lax',\n\t\tsecure: url.hostname === 'localhost' && url.protocol === 'http:' ? false : true\n\t};\n\n\t/** @type {import('@sveltejs/kit').Cookies} */\n\tconst cookies = {\n\t\t// The JSDoc param annotations appearing below for get, set and delete\n\t\t// are necessary to expose the `cookie` library types to\n\t\t// typescript users. `@type {import('@sveltejs/kit').Cookies}` above is not\n\t\t// sufficient to do so.\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {import('cookie').CookieParseOptions} [opts]\n\t\t */\n\t\tget(name, opts) {\n\t\t\t// Look for the most specific matching cookie from new_cookies\n\t\t\tconst best_match = Array.from(new_cookies.values())\n\t\t\t\t.filter((c) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tc.name === name &&\n\t\t\t\t\t\tdomain_matches(url.hostname, c.options.domain) &&\n\t\t\t\t\t\tpath_matches(url.pathname, c.options.path)\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => b.options.path.length - a.options.path.length)[0];\n\n\t\t\tif (best_match) {\n\t\t\t\treturn best_match.options.maxAge === 0 ? undefined : best_match.value;\n\t\t\t}\n\n\t\t\tconst req_cookies = parse(header, { decode: opts?.decode });\n\t\t\tconst cookie = req_cookies[name]; // the decoded string or undefined\n\n\t\t\t// in development, if the cookie was set during this session with `cookies.set`,\n\t\t\t// but at a different path, warn the user. (ignore cookies from request headers,\n\t\t\t// since we don't know which path they were set at)\n\t\t\tif (DEV && !cookie) {\n\t\t\t\tconst paths = Array.from(cookie_paths[name] ?? []).filter((path) => {\n\t\t\t\t\t// we only care about paths that are _more_ specific than the current path\n\t\t\t\t\treturn path_matches(path, url.pathname) && path !== url.pathname;\n\t\t\t\t});\n\n\t\t\t\tif (paths.length > 0) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\t`'${name}' cookie does not exist for ${url.pathname}, but was previously set at ${conjoin([...paths])}. Did you mean to set its 'path' to '/' instead?`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn cookie;\n\t\t},\n\n\t\t/**\n\t\t * @param {import('cookie').CookieParseOptions} [opts]\n\t\t */\n\t\tgetAll(opts) {\n\t\t\tconst cookies = parse(header, { decode: opts?.decode });\n\n\t\t\t// Group cookies by name and find the most specific one for each name\n\t\t\tconst lookup = new Map();\n\n\t\t\tfor (const c of new_cookies.values()) {\n\t\t\t\tif (\n\t\t\t\t\tdomain_matches(url.hostname, c.options.domain) &&\n\t\t\t\t\tpath_matches(url.pathname, c.options.path)\n\t\t\t\t) {\n\t\t\t\t\tconst existing = lookup.get(c.name);\n\n\t\t\t\t\t// If no existing cookie or this one has a more specific (longer) path, use this one\n\t\t\t\t\tif (!existing || c.options.path.length > existing.options.path.length) {\n\t\t\t\t\t\tlookup.set(c.name, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the most specific cookies to the result\n\t\t\tfor (const c of lookup.values()) {\n\t\t\t\tcookies[c.name] = c.value;\n\t\t\t}\n\n\t\t\treturn Object.entries(cookies).map(([name, value]) => ({ name, value }));\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {string} value\n\t\t * @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tset(name, value, options) {\n\t\t\t// TODO: remove this check in 3.0\n\t\t\tconst illegal_characters = name.match(INVALID_COOKIE_CHARACTER_REGEX);\n\t\t\tif (illegal_characters) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`The cookie name \"${name}\" will be invalid in SvelteKit 3.0 as it contains ${illegal_characters.join(\n\t\t\t\t\t\t' and '\n\t\t\t\t\t)}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvalidate_options(options);\n\t\t\tset_internal(name, value, { ...defaults, ...options });\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t *  @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tdelete(name, options) {\n\t\t\tvalidate_options(options);\n\t\t\tcookies.set(name, '', { ...options, maxAge: 0 });\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {string} value\n\t\t *  @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tserialize(name, value, options) {\n\t\t\tvalidate_options(options);\n\n\t\t\tlet path = options.path;\n\n\t\t\tif (!options.domain || options.domain === url.hostname) {\n\t\t\t\tif (!normalized_url) {\n\t\t\t\t\tthrow new Error('Cannot serialize cookies until after the route is determined');\n\t\t\t\t}\n\t\t\t\tpath = resolve(normalized_url, path);\n\t\t\t}\n\n\t\t\treturn serialize(name, value, { ...defaults, ...options, path });\n\t\t}\n\t};\n\n\t/**\n\t * @param {URL} destination\n\t * @param {string | null} header\n\t */\n\tfunction get_cookie_header(destination, header) {\n\t\t/** @type {Record<string, string>} */\n\t\tconst combined_cookies = {\n\t\t\t// cookies sent by the user agent have lowest precedence\n\t\t\t...initial_cookies\n\t\t};\n\n\t\t// cookies previous set during this event with cookies.set have higher precedence\n\t\tfor (const cookie of new_cookies.values()) {\n\t\t\tif (!domain_matches(destination.hostname, cookie.options.domain)) continue;\n\t\t\tif (!path_matches(destination.pathname, cookie.options.path)) continue;\n\n\t\t\tconst encoder = cookie.options.encode || encodeURIComponent;\n\t\t\tcombined_cookies[cookie.name] = encoder(cookie.value);\n\t\t}\n\n\t\t// explicit header has highest precedence\n\t\tif (header) {\n\t\t\tconst parsed = parse(header, { decode: (value) => value });\n\t\t\tfor (const name in parsed) {\n\t\t\t\tcombined_cookies[name] = parsed[name];\n\t\t\t}\n\t\t}\n\n\t\treturn Object.entries(combined_cookies)\n\t\t\t.map(([name, value]) => `${name}=${value}`)\n\t\t\t.join('; ');\n\t}\n\n\t/** @type {Array<() => void>} */\n\tconst internal_queue = [];\n\n\t/**\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {import('./page/types.js').Cookie['options']} options\n\t */\n\tfunction set_internal(name, value, options) {\n\t\tif (!normalized_url) {\n\t\t\tinternal_queue.push(() => set_internal(name, value, options));\n\t\t\treturn;\n\t\t}\n\n\t\tlet path = options.path;\n\n\t\tif (!options.domain || options.domain === url.hostname) {\n\t\t\tpath = resolve(normalized_url, path);\n\t\t}\n\n\t\t// Generate unique key for cookie storage\n\t\tconst cookie_key = generate_cookie_key(options.domain, path, name);\n\t\tconst cookie = { name, value, options: { ...options, path } };\n\t\tnew_cookies.set(cookie_key, cookie);\n\n\t\tif (DEV) {\n\t\t\tconst serialized = serialize(name, value, cookie.options);\n\t\t\tif (text_encoder.encode(serialized).byteLength > MAX_COOKIE_SIZE) {\n\t\t\t\tthrow new Error(`Cookie \"${name}\" is too large, and will be discarded by the browser`);\n\t\t\t}\n\n\t\t\tcookie_paths[name] ??= new Set();\n\n\t\t\tif (!value) {\n\t\t\t\tcookie_paths[name].delete(path);\n\t\t\t} else {\n\t\t\t\tcookie_paths[name].add(path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('types').TrailingSlash} trailing_slash\n\t */\n\tfunction set_trailing_slash(trailing_slash) {\n\t\tnormalized_url = normalize_path(url.pathname, trailing_slash);\n\t\tinternal_queue.forEach((fn) => fn());\n\t}\n\n\treturn { cookies, new_cookies, get_cookie_header, set_internal, set_trailing_slash };\n}\n\n/**\n * @param {string} hostname\n * @param {string} [constraint]\n */\nexport function domain_matches(hostname, constraint) {\n\tif (!constraint) return true;\n\n\tconst normalized = constraint[0] === '.' ? constraint.slice(1) : constraint;\n\n\tif (hostname === normalized) return true;\n\treturn hostname.endsWith('.' + normalized);\n}\n\n/**\n * @param {string} path\n * @param {string} [constraint]\n */\nexport function path_matches(path, constraint) {\n\tif (!constraint) return true;\n\n\tconst normalized = constraint.endsWith('/') ? constraint.slice(0, -1) : constraint;\n\n\tif (path === normalized) return true;\n\treturn path.startsWith(normalized + '/');\n}\n\n/**\n * @param {Headers} headers\n * @param {MapIterator<import('./page/types.js').Cookie>} cookies\n */\nexport function add_cookies_to_headers(headers, cookies) {\n\tfor (const new_cookie of cookies) {\n\t\tconst { name, value, options } = new_cookie;\n\t\theaders.append('set-cookie', serialize(name, value, options));\n\n\t\t// special case — for routes ending with .html, the route data lives in a sibling\n\t\t// `.html__data.json` file rather than a child `/__data.json` file, which means\n\t\t// we need to duplicate the cookie\n\t\tif (options.path.endsWith('.html')) {\n\t\t\tconst path = add_data_suffix(options.path);\n\t\t\theaders.append('set-cookie', serialize(name, value, { ...options, path }));\n\t\t}\n\t}\n}\n\n/**\n * @param {string[]} array\n */\nfunction conjoin(array) {\n\tif (array.length <= 2) return array.join(' and ');\n\treturn `${array.slice(0, -1).join(', ')} and ${array.at(-1)}`;\n}\n","import { public_env } from '../shared-server.js';\n\n/** @type {string} */\nlet body;\n\n/** @type {string} */\nlet etag;\n\n/** @type {Headers} */\nlet headers;\n\n/**\n * @param {Request} request\n * @returns {Response}\n */\nexport function get_public_env(request) {\n\tbody ??= `export const env=${JSON.stringify(public_env)}`;\n\tetag ??= `W/${Date.now()}`;\n\theaders ??= new Headers({\n\t\t'content-type': 'application/javascript; charset=utf-8',\n\t\tetag\n\t});\n\n\tif (request.headers.get('if-none-match') === etag) {\n\t\treturn new Response(undefined, { status: 304, headers });\n\t}\n\n\treturn new Response(body, { headers });\n}\n","import * as set_cookie_parser from 'set-cookie-parser';\nimport { respond } from './respond.js';\nimport * as paths from '$app/paths/internal/server';\nimport { read_implementation } from '__sveltekit/server';\nimport { has_prerendered_path } from './utils.js';\n\n/**\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   get_cookie_header: (url: URL, header: string | null) => string;\n *   set_internal: (name: string, value: string, opts: import('./page/types.js').Cookie['options']) => void;\n * }} opts\n * @returns {typeof fetch}\n */\nexport function create_fetch({ event, options, manifest, state, get_cookie_header, set_internal }) {\n\t/**\n\t * @type {typeof fetch}\n\t */\n\tconst server_fetch = async (info, init) => {\n\t\tconst original_request = normalize_fetch_input(info, init, event.url);\n\n\t\t// some runtimes (e.g. Cloudflare) error if you access `request.mode`,\n\t\t// annoyingly, so we need to read the value from the `init` object instead\n\t\tlet mode = (info instanceof Request ? info.mode : init?.mode) ?? 'cors';\n\t\tlet credentials =\n\t\t\t(info instanceof Request ? info.credentials : init?.credentials) ?? 'same-origin';\n\n\t\treturn options.hooks.handleFetch({\n\t\t\tevent,\n\t\t\trequest: original_request,\n\t\t\tfetch: async (info, init) => {\n\t\t\t\tconst request = normalize_fetch_input(info, init, event.url);\n\n\t\t\t\tconst url = new URL(request.url);\n\n\t\t\t\tif (!request.headers.has('origin')) {\n\t\t\t\t\trequest.headers.set('origin', event.url.origin);\n\t\t\t\t}\n\n\t\t\t\tif (info !== original_request) {\n\t\t\t\t\tmode = (info instanceof Request ? info.mode : init?.mode) ?? 'cors';\n\t\t\t\t\tcredentials =\n\t\t\t\t\t\t(info instanceof Request ? info.credentials : init?.credentials) ?? 'same-origin';\n\t\t\t\t}\n\n\t\t\t\t// Remove Origin, according to https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin#description\n\t\t\t\tif (\n\t\t\t\t\t(request.method === 'GET' || request.method === 'HEAD') &&\n\t\t\t\t\t((mode === 'no-cors' && url.origin !== event.url.origin) ||\n\t\t\t\t\t\turl.origin === event.url.origin)\n\t\t\t\t) {\n\t\t\t\t\trequest.headers.delete('origin');\n\t\t\t\t}\n\n\t\t\t\tif (url.origin !== event.url.origin) {\n\t\t\t\t\t// Allow cookie passthrough for \"credentials: same-origin\" and \"credentials: include\"\n\t\t\t\t\t// if SvelteKit is serving my.domain.com:\n\t\t\t\t\t// -        domain.com WILL NOT receive cookies\n\t\t\t\t\t// -     my.domain.com WILL receive cookies\n\t\t\t\t\t// -    api.domain.dom WILL NOT receive cookies\n\t\t\t\t\t// - sub.my.domain.com WILL receive cookies\n\t\t\t\t\t// ports do not affect the resolution\n\t\t\t\t\t// leading dot prevents mydomain.com matching domain.com\n\t\t\t\t\t// Do not forward other cookies for \"credentials: include\" because we don't know\n\t\t\t\t\t// which cookie belongs to which domain (browser does not pass this info)\n\t\t\t\t\tif (`.${url.hostname}`.endsWith(`.${event.url.hostname}`) && credentials !== 'omit') {\n\t\t\t\t\t\tconst cookie = get_cookie_header(url, request.headers.get('cookie'));\n\t\t\t\t\t\tif (cookie) request.headers.set('cookie', cookie);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn fetch(request);\n\t\t\t\t}\n\n\t\t\t\t// handle fetch requests for static assets. e.g. prebaked data, etc.\n\t\t\t\t// we need to support everything the browser's fetch supports\n\t\t\t\tconst prefix = paths.assets || paths.base;\n\t\t\t\tconst decoded = decodeURIComponent(url.pathname);\n\t\t\t\tconst filename = (\n\t\t\t\t\tdecoded.startsWith(prefix) ? decoded.slice(prefix.length) : decoded\n\t\t\t\t).slice(1);\n\t\t\t\tconst filename_html = `${filename}/index.html`; // path may also match path/index.html\n\n\t\t\t\tconst is_asset = manifest.assets.has(filename) || filename in manifest._.server_assets;\n\t\t\t\tconst is_asset_html =\n\t\t\t\t\tmanifest.assets.has(filename_html) || filename_html in manifest._.server_assets;\n\n\t\t\t\tif (is_asset || is_asset_html) {\n\t\t\t\t\tconst file = is_asset ? filename : filename_html;\n\n\t\t\t\t\tif (state.read) {\n\t\t\t\t\t\tconst type = is_asset\n\t\t\t\t\t\t\t? manifest.mimeTypes[filename.slice(filename.lastIndexOf('.'))]\n\t\t\t\t\t\t\t: 'text/html';\n\n\t\t\t\t\t\treturn new Response(state.read(file), {\n\t\t\t\t\t\t\theaders: type ? { 'content-type': type } : {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (read_implementation && file in manifest._.server_assets) {\n\t\t\t\t\t\tconst length = manifest._.server_assets[file];\n\t\t\t\t\t\tconst type = manifest.mimeTypes[file.slice(file.lastIndexOf('.'))];\n\n\t\t\t\t\t\treturn new Response(read_implementation(file), {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Length': '' + length,\n\t\t\t\t\t\t\t\t'Content-Type': type\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn await fetch(request);\n\t\t\t\t}\n\n\t\t\t\tif (has_prerendered_path(manifest, paths.base + decoded)) {\n\t\t\t\t\t// The path of something prerendered could match a different route\n\t\t\t\t\t// that is still in the manifest, leading to the wrong route being loaded.\n\t\t\t\t\t// We therefore bail early here. The prerendered logic is different for\n\t\t\t\t\t// each adapter, (except maybe for prerendered redirects)\n\t\t\t\t\t// so we need to make an actual HTTP request.\n\t\t\t\t\treturn await fetch(request);\n\t\t\t\t}\n\n\t\t\t\tif (credentials !== 'omit') {\n\t\t\t\t\tconst cookie = get_cookie_header(url, request.headers.get('cookie'));\n\t\t\t\t\tif (cookie) {\n\t\t\t\t\t\trequest.headers.set('cookie', cookie);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst authorization = event.request.headers.get('authorization');\n\t\t\t\t\tif (authorization && !request.headers.has('authorization')) {\n\t\t\t\t\t\trequest.headers.set('authorization', authorization);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!request.headers.has('accept')) {\n\t\t\t\t\trequest.headers.set('accept', '*/*');\n\t\t\t\t}\n\n\t\t\t\tif (!request.headers.has('accept-language')) {\n\t\t\t\t\trequest.headers.set(\n\t\t\t\t\t\t'accept-language',\n\t\t\t\t\t\t/** @type {string} */ (event.request.headers.get('accept-language'))\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst response = await internal_fetch(request, options, manifest, state);\n\n\t\t\t\tconst set_cookie = response.headers.get('set-cookie');\n\t\t\t\tif (set_cookie) {\n\t\t\t\t\tfor (const str of set_cookie_parser.splitCookiesString(set_cookie)) {\n\t\t\t\t\t\tconst { name, value, ...options } = set_cookie_parser.parseString(str, {\n\t\t\t\t\t\t\tdecodeValues: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst path = options.path ?? (url.pathname.split('/').slice(0, -1).join('/') || '/');\n\n\t\t\t\t\t\t// options.sameSite is string, something more specific is required - type cast is safe\n\t\t\t\t\t\tset_internal(name, value, {\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tencode: (value) => value,\n\t\t\t\t\t\t\t.../** @type {import('cookie').CookieSerializeOptions} */ (options)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t}\n\t\t});\n\t};\n\n\t// Don't make this function `async`! Otherwise, the user has to `catch` promises they use for streaming responses or else\n\t// it will be an unhandled rejection. Instead, we add a `.catch(() => {})` ourselves below to prevent this from happening.\n\treturn (input, init) => {\n\t\t// See docs in fetch.js for why we need to do this\n\t\tconst response = server_fetch(input, init);\n\t\tresponse.catch(() => {});\n\t\treturn response;\n\t};\n}\n\n/**\n * @param {RequestInfo | URL} info\n * @param {RequestInit | undefined} init\n * @param {URL} url\n */\nfunction normalize_fetch_input(info, init, url) {\n\tif (info instanceof Request) {\n\t\treturn info;\n\t}\n\n\treturn new Request(typeof info === 'string' ? new URL(info, url) : info, init);\n}\n\n/**\n * @param {Request} request\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nasync function internal_fetch(request, options, manifest, state) {\n\tif (request.signal) {\n\t\tif (request.signal.aborted) {\n\t\t\tthrow new DOMException('The operation was aborted.', 'AbortError');\n\t\t}\n\n\t\tlet remove_abort_listener = () => {};\n\t\t/** @type {Promise<never>} */\n\t\tconst abort_promise = new Promise((_, reject) => {\n\t\t\tconst on_abort = () => {\n\t\t\t\treject(new DOMException('The operation was aborted.', 'AbortError'));\n\t\t\t};\n\t\t\trequest.signal.addEventListener('abort', on_abort, { once: true });\n\t\t\tremove_abort_listener = () => request.signal.removeEventListener('abort', on_abort);\n\t\t});\n\n\t\tconst result = await Promise.race([\n\t\t\trespond(request, options, manifest, {\n\t\t\t\t...state,\n\t\t\t\tdepth: state.depth + 1\n\t\t\t}),\n\t\t\tabort_promise\n\t\t]);\n\t\tremove_abort_listener();\n\t\treturn result;\n\t} else {\n\t\treturn await respond(request, options, manifest, {\n\t\t\t...state,\n\t\t\tdepth: state.depth + 1\n\t\t});\n\t}\n}\n","/** @import { RequestState } from 'types' */\nimport { DEV } from 'esm-env';\nimport { json, text } from '@sveltejs/kit';\nimport { Redirect, SvelteKitError } from '@sveltejs/kit/internal';\nimport { merge_tracing, with_request_store } from '@sveltejs/kit/internal/server';\nimport { base, app_dir } from '$app/paths/internal/server';\nimport { is_endpoint_request, render_endpoint } from './endpoint.js';\nimport { render_page } from './page/index.js';\nimport { render_response } from './page/render.js';\nimport { respond_with_error } from './page/respond_with_error.js';\nimport { is_form_content_type } from '../../utils/http.js';\nimport {\n\thandle_fatal_error,\n\thas_prerendered_path,\n\tmethod_not_allowed,\n\tredirect_response\n} from './utils.js';\nimport { decode_pathname, decode_params, disable_search, normalize_path } from '../../utils/url.js';\nimport { exec } from '../../utils/routing.js';\nimport { redirect_json_response, render_data } from './data/index.js';\nimport { add_cookies_to_headers, get_cookies } from './cookie.js';\nimport { create_fetch } from './fetch.js';\nimport { PageNodes } from '../../utils/page_nodes.js';\nimport { validate_server_exports } from '../../utils/exports.js';\nimport { action_json_redirect, is_action_json_request } from './page/actions.js';\nimport { INVALIDATED_PARAM, TRAILING_SLASH_PARAM } from '../shared.js';\nimport { get_public_env } from './env_module.js';\nimport { resolve_route } from './page/server_routing.js';\nimport { validateHeaders } from './validate-headers.js';\nimport {\n\tadd_data_suffix,\n\tadd_resolution_suffix,\n\thas_data_suffix,\n\thas_resolution_suffix,\n\tstrip_data_suffix,\n\tstrip_resolution_suffix\n} from '../pathname.js';\nimport { server_data_serializer } from './page/data_serializer.js';\nimport { get_remote_id, handle_remote_call } from './remote.js';\nimport { record_span } from '../telemetry/record_span.js';\nimport { otel } from '../telemetry/otel.js';\n\n/* global __SVELTEKIT_ADAPTER_NAME__ */\n\n/** @type {import('types').RequiredResolveOptions['transformPageChunk']} */\nconst default_transform = ({ html }) => html;\n\n/** @type {import('types').RequiredResolveOptions['filterSerializedResponseHeaders']} */\nconst default_filter = () => false;\n\n/** @type {import('types').RequiredResolveOptions['preload']} */\nconst default_preload = ({ type }) => type === 'js' || type === 'css';\n\nconst page_methods = new Set(['GET', 'HEAD', 'POST']);\n\nconst allowed_page_methods = new Set(['GET', 'HEAD', 'OPTIONS']);\n\nlet warned_on_devtools_json_request = false;\n\nexport const respond = propagate_context(internal_respond);\n\n/**\n * @param {Request} request\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nexport async function internal_respond(request, options, manifest, state) {\n\t/** URL but stripped from the potential `/__data.json` suffix and its search param  */\n\tconst url = new URL(request.url);\n\n\tconst is_route_resolution_request = has_resolution_suffix(url.pathname);\n\tconst is_data_request = has_data_suffix(url.pathname);\n\tconst remote_id = get_remote_id(url);\n\n\tif (!DEV) {\n\t\tconst request_origin = request.headers.get('origin');\n\n\t\tif (remote_id) {\n\t\t\tif (request.method !== 'GET' && request_origin !== url.origin) {\n\t\t\t\tconst message = 'Cross-site remote requests are forbidden';\n\t\t\t\treturn json({ message }, { status: 403 });\n\t\t\t}\n\t\t} else if (options.csrf_check_origin) {\n\t\t\tconst forbidden =\n\t\t\t\tis_form_content_type(request) &&\n\t\t\t\t(request.method === 'POST' ||\n\t\t\t\t\trequest.method === 'PUT' ||\n\t\t\t\t\trequest.method === 'PATCH' ||\n\t\t\t\t\trequest.method === 'DELETE') &&\n\t\t\t\trequest_origin !== url.origin &&\n\t\t\t\t(!request_origin || !options.csrf_trusted_origins.includes(request_origin));\n\n\t\t\tif (forbidden) {\n\t\t\t\tconst message = `Cross-site ${request.method} form submissions are forbidden`;\n\t\t\t\tconst opts = { status: 403 };\n\n\t\t\t\tif (request.headers.get('accept') === 'application/json') {\n\t\t\t\t\treturn json({ message }, opts);\n\t\t\t\t}\n\n\t\t\t\treturn text(message, opts);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (options.hash_routing && url.pathname !== base + '/' && url.pathname !== '/[fallback]') {\n\t\treturn text('Not found', { status: 404 });\n\t}\n\n\t/** @type {boolean[] | undefined} */\n\tlet invalidated_data_nodes;\n\n\tif (is_route_resolution_request) {\n\t\t/**\n\t\t * If the request is for a route resolution, first modify the URL, then continue as normal\n\t\t * for path resolution, then return the route object as a JS file.\n\t\t */\n\t\turl.pathname = strip_resolution_suffix(url.pathname);\n\t} else if (is_data_request) {\n\t\turl.pathname =\n\t\t\tstrip_data_suffix(url.pathname) +\n\t\t\t\t(url.searchParams.get(TRAILING_SLASH_PARAM) === '1' ? '/' : '') || '/';\n\t\turl.searchParams.delete(TRAILING_SLASH_PARAM);\n\t\tinvalidated_data_nodes = url.searchParams\n\t\t\t.get(INVALIDATED_PARAM)\n\t\t\t?.split('')\n\t\t\t.map((node) => node === '1');\n\t\turl.searchParams.delete(INVALIDATED_PARAM);\n\t} else if (remote_id) {\n\t\turl.pathname = request.headers.get('x-sveltekit-pathname') ?? base;\n\t\turl.search = request.headers.get('x-sveltekit-search') ?? '';\n\t}\n\n\t/** @type {Record<string, string>} */\n\tconst headers = {};\n\n\tconst { cookies, new_cookies, get_cookie_header, set_internal, set_trailing_slash } = get_cookies(\n\t\trequest,\n\t\turl\n\t);\n\n\t/** @type {RequestState} */\n\tconst event_state = {\n\t\tprerendering: state.prerendering,\n\t\ttransport: options.hooks.transport,\n\t\thandleValidationError: options.hooks.handleValidationError,\n\t\ttracing: {\n\t\t\trecord_span\n\t\t},\n\t\tis_in_remote_function: false\n\t};\n\n\t/** @type {import('@sveltejs/kit').RequestEvent} */\n\tconst event = {\n\t\tcookies,\n\t\t// @ts-expect-error `fetch` needs to be created after the `event` itself\n\t\tfetch: null,\n\t\tgetClientAddress:\n\t\t\tstate.getClientAddress ||\n\t\t\t(() => {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`${__SVELTEKIT_ADAPTER_NAME__} does not specify getClientAddress. Please raise an issue`\n\t\t\t\t);\n\t\t\t}),\n\t\tlocals: {},\n\t\tparams: {},\n\t\tplatform: state.platform,\n\t\trequest,\n\t\troute: { id: null },\n\t\tsetHeaders: (new_headers) => {\n\t\t\tif (DEV) {\n\t\t\t\tvalidateHeaders(new_headers);\n\t\t\t}\n\n\t\t\tfor (const key in new_headers) {\n\t\t\t\tconst lower = key.toLowerCase();\n\t\t\t\tconst value = new_headers[key];\n\n\t\t\t\tif (lower === 'set-cookie') {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies'\n\t\t\t\t\t);\n\t\t\t\t} else if (lower in headers) {\n\t\t\t\t\t// appendHeaders-style for Server-Timing https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Server-Timing\n\t\t\t\t\tif (lower === 'server-timing') {\n\t\t\t\t\t\theaders[lower] += ', ' + value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`\"${key}\" header is already set`);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\theaders[lower] = value;\n\n\t\t\t\t\tif (state.prerendering && lower === 'cache-control') {\n\t\t\t\t\t\tstate.prerendering.cache = /** @type {string} */ (value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\turl,\n\t\tisDataRequest: is_data_request,\n\t\tisSubRequest: state.depth > 0,\n\t\tisRemoteRequest: !!remote_id\n\t};\n\n\tevent.fetch = create_fetch({\n\t\tevent,\n\t\toptions,\n\t\tmanifest,\n\t\tstate,\n\t\tget_cookie_header,\n\t\tset_internal\n\t});\n\n\tif (state.emulator?.platform) {\n\t\tevent.platform = await state.emulator.platform({\n\t\t\tconfig: {},\n\t\t\tprerender: !!state.prerendering?.fallback\n\t\t});\n\t}\n\n\tlet resolved_path = url.pathname;\n\n\tif (!remote_id) {\n\t\tconst prerendering_reroute_state = state.prerendering?.inside_reroute;\n\t\ttry {\n\t\t\t// For the duration or a reroute, disable the prerendering state as reroute could call API endpoints\n\t\t\t// which would end up in the wrong logic path if not disabled.\n\t\t\tif (state.prerendering) state.prerendering.inside_reroute = true;\n\n\t\t\t// reroute could alter the given URL, so we pass a copy\n\t\t\tresolved_path =\n\t\t\t\t(await options.hooks.reroute({ url: new URL(url), fetch: event.fetch })) ?? url.pathname;\n\t\t} catch {\n\t\t\treturn text('Internal Server Error', {\n\t\t\t\tstatus: 500\n\t\t\t});\n\t\t} finally {\n\t\t\tif (state.prerendering) state.prerendering.inside_reroute = prerendering_reroute_state;\n\t\t}\n\t}\n\n\ttry {\n\t\tresolved_path = decode_pathname(resolved_path);\n\t} catch {\n\t\treturn text('Malformed URI', { status: 400 });\n\t}\n\n\tif (\n\t\tresolved_path !== url.pathname &&\n\t\t!state.prerendering?.fallback &&\n\t\thas_prerendered_path(manifest, resolved_path)\n\t) {\n\t\tconst url = new URL(request.url);\n\t\turl.pathname = is_data_request\n\t\t\t? add_data_suffix(resolved_path)\n\t\t\t: is_route_resolution_request\n\t\t\t\t? add_resolution_suffix(resolved_path)\n\t\t\t\t: resolved_path;\n\n\t\t// `fetch` automatically decodes the body, so we need to delete the related headers to not break the response\n\t\t// Also see https://github.com/sveltejs/kit/issues/12197 for more info (we should fix this more generally at some point)\n\t\tconst response = await fetch(url, request);\n\t\tconst headers = new Headers(response.headers);\n\t\tif (headers.has('content-encoding')) {\n\t\t\theaders.delete('content-encoding');\n\t\t\theaders.delete('content-length');\n\t\t}\n\n\t\treturn new Response(response.body, {\n\t\t\theaders,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText\n\t\t});\n\t}\n\n\t/** @type {import('types').SSRRoute | null} */\n\tlet route = null;\n\n\tif (base && !state.prerendering?.fallback) {\n\t\tif (!resolved_path.startsWith(base)) {\n\t\t\treturn text('Not found', { status: 404 });\n\t\t}\n\t\tresolved_path = resolved_path.slice(base.length) || '/';\n\t}\n\n\tif (is_route_resolution_request) {\n\t\treturn resolve_route(resolved_path, new URL(request.url), manifest);\n\t}\n\n\tif (resolved_path === `/${app_dir}/env.js`) {\n\t\treturn get_public_env(request);\n\t}\n\n\tif (!remote_id && resolved_path.startsWith(`/${app_dir}`)) {\n\t\t// Ensure that 404'd static assets are not cached - some adapters might apply caching by default\n\t\tconst headers = new Headers();\n\t\theaders.set('cache-control', 'public, max-age=0, must-revalidate');\n\t\treturn text('Not found', { status: 404, headers });\n\t}\n\n\tif (!state.prerendering?.fallback) {\n\t\t// TODO this could theoretically break — should probably be inside a try-catch\n\t\tconst matchers = await manifest._.matchers();\n\n\t\tfor (const candidate of manifest._.routes) {\n\t\t\tconst match = candidate.pattern.exec(resolved_path);\n\t\t\tif (!match) continue;\n\n\t\t\tconst matched = exec(match, candidate.params, matchers);\n\t\t\tif (matched) {\n\t\t\t\troute = candidate;\n\t\t\t\tevent.route = { id: route.id };\n\t\t\t\tevent.params = decode_params(matched);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {import('types').RequiredResolveOptions} */\n\tlet resolve_opts = {\n\t\ttransformPageChunk: default_transform,\n\t\tfilterSerializedResponseHeaders: default_filter,\n\t\tpreload: default_preload\n\t};\n\n\t/** @type {import('types').TrailingSlash} */\n\tlet trailing_slash = 'never';\n\n\ttry {\n\t\t/** @type {PageNodes | undefined} */\n\t\tconst page_nodes = route?.page\n\t\t\t? new PageNodes(await load_page_nodes(route.page, manifest))\n\t\t\t: undefined;\n\n\t\t// determine whether we need to redirect to add/remove a trailing slash\n\t\tif (route && !remote_id) {\n\t\t\t// if `paths.base === '/a/b/c`, then the root route is `/a/b/c/`,\n\t\t\t// regardless of the `trailingSlash` route option\n\t\t\tif (url.pathname === base || url.pathname === base + '/') {\n\t\t\t\ttrailing_slash = 'always';\n\t\t\t} else if (page_nodes) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tpage_nodes.validate();\n\t\t\t\t}\n\t\t\t\ttrailing_slash = page_nodes.trailing_slash();\n\t\t\t} else if (route.endpoint) {\n\t\t\t\tconst node = await route.endpoint();\n\t\t\t\ttrailing_slash = node.trailingSlash ?? 'never';\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvalidate_server_exports(node, /** @type {string} */ (route.endpoint_id));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!is_data_request) {\n\t\t\t\tconst normalized = normalize_path(url.pathname, trailing_slash);\n\n\t\t\t\tif (normalized !== url.pathname && !state.prerendering?.fallback) {\n\t\t\t\t\treturn new Response(undefined, {\n\t\t\t\t\t\tstatus: 308,\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'x-sveltekit-normalize': '1',\n\t\t\t\t\t\t\tlocation:\n\t\t\t\t\t\t\t\t// ensure paths starting with '//' are not treated as protocol-relative\n\t\t\t\t\t\t\t\t(normalized.startsWith('//') ? url.origin + normalized : normalized) +\n\t\t\t\t\t\t\t\t(url.search === '?' ? '' : url.search)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.before_handle || state.emulator?.platform) {\n\t\t\t\tlet config = {};\n\n\t\t\t\t/** @type {import('types').PrerenderOption} */\n\t\t\t\tlet prerender = false;\n\n\t\t\t\tif (route.endpoint) {\n\t\t\t\t\tconst node = await route.endpoint();\n\t\t\t\t\tconfig = node.config ?? config;\n\t\t\t\t\tprerender = node.prerender ?? prerender;\n\t\t\t\t} else if (page_nodes) {\n\t\t\t\t\tconfig = page_nodes.get_config() ?? config;\n\t\t\t\t\tprerender = page_nodes.prerender();\n\t\t\t\t}\n\n\t\t\t\tif (state.before_handle) {\n\t\t\t\t\tstate.before_handle(event, config, prerender);\n\t\t\t\t}\n\n\t\t\t\tif (state.emulator?.platform) {\n\t\t\t\t\tevent.platform = await state.emulator.platform({ config, prerender });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tset_trailing_slash(trailing_slash);\n\n\t\tif (state.prerendering && !state.prerendering.fallback && !state.prerendering.inside_reroute) {\n\t\t\tdisable_search(url);\n\t\t}\n\n\t\tconst response = await record_span({\n\t\t\tname: 'sveltekit.handle.root',\n\t\t\tattributes: {\n\t\t\t\t'http.route': event.route.id || 'unknown',\n\t\t\t\t'http.method': event.request.method,\n\t\t\t\t'http.url': event.url.href,\n\t\t\t\t'sveltekit.is_data_request': is_data_request,\n\t\t\t\t'sveltekit.is_sub_request': event.isSubRequest\n\t\t\t},\n\t\t\tfn: async (root_span) => {\n\t\t\t\tconst traced_event = {\n\t\t\t\t\t...event,\n\t\t\t\t\ttracing: {\n\t\t\t\t\t\tenabled: __SVELTEKIT_SERVER_TRACING_ENABLED__,\n\t\t\t\t\t\troot: root_span,\n\t\t\t\t\t\tcurrent: root_span\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\t\toptions.hooks.handle({\n\t\t\t\t\t\tevent: traced_event,\n\t\t\t\t\t\tresolve: (event, opts) => {\n\t\t\t\t\t\t\treturn record_span({\n\t\t\t\t\t\t\t\tname: 'sveltekit.resolve',\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t'http.route': event.route.id || 'unknown'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfn: (resolve_span) => {\n\t\t\t\t\t\t\t\t\t// counter-intuitively, we need to clear the event, so that it's not\n\t\t\t\t\t\t\t\t\t// e.g. accessible when loading modules needed to handle the request\n\t\t\t\t\t\t\t\t\treturn with_request_store(null, () =>\n\t\t\t\t\t\t\t\t\t\tresolve(merge_tracing(event, resolve_span), page_nodes, opts).then(\n\t\t\t\t\t\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\t\t\t\t\t\t// add headers/cookies here, rather than inside `resolve`, so that we\n\t\t\t\t\t\t\t\t\t\t\t\t// can do it once for all responses instead of once per `return`\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const key in headers) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst value = headers[key];\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.set(key, /** @type {string} */ (value));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tadd_cookies_to_headers(response.headers, new_cookies.values());\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (state.prerendering && event.route.id !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.set('x-sveltekit-routeid', encodeURI(event.route.id));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tresolve_span.setAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t'http.response.status_code': response.status,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'http.response.body.size':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.get('content-length') || 'unknown'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// respond with 304 if etag matches\n\t\tif (response.status === 200 && response.headers.has('etag')) {\n\t\t\tlet if_none_match_value = request.headers.get('if-none-match');\n\n\t\t\t// ignore W/ prefix https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match#directives\n\t\t\tif (if_none_match_value?.startsWith('W/\"')) {\n\t\t\t\tif_none_match_value = if_none_match_value.substring(2);\n\t\t\t}\n\n\t\t\tconst etag = /** @type {string} */ (response.headers.get('etag'));\n\n\t\t\tif (if_none_match_value === etag) {\n\t\t\t\tconst headers = new Headers({ etag });\n\n\t\t\t\t// https://datatracker.ietf.org/doc/html/rfc7232#section-4.1 + set-cookie\n\t\t\t\tfor (const key of [\n\t\t\t\t\t'cache-control',\n\t\t\t\t\t'content-location',\n\t\t\t\t\t'date',\n\t\t\t\t\t'expires',\n\t\t\t\t\t'vary',\n\t\t\t\t\t'set-cookie'\n\t\t\t\t]) {\n\t\t\t\t\tconst value = response.headers.get(key);\n\t\t\t\t\tif (value) headers.set(key, value);\n\t\t\t\t}\n\n\t\t\t\treturn new Response(undefined, {\n\t\t\t\t\tstatus: 304,\n\t\t\t\t\theaders\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Edge case: If user does `return Response(30x)` in handle hook while processing a data request,\n\t\t// we need to transform the redirect response to a corresponding JSON response.\n\t\tif (is_data_request && response.status >= 300 && response.status <= 308) {\n\t\t\tconst location = response.headers.get('location');\n\t\t\tif (location) {\n\t\t\t\treturn redirect_json_response(new Redirect(/** @type {any} */ (response.status), location));\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t} catch (e) {\n\t\tif (e instanceof Redirect) {\n\t\t\tconst response =\n\t\t\t\tis_data_request || remote_id\n\t\t\t\t\t? redirect_json_response(e)\n\t\t\t\t\t: route?.page && is_action_json_request(event)\n\t\t\t\t\t\t? action_json_redirect(e)\n\t\t\t\t\t\t: redirect_response(e.status, e.location);\n\t\t\tadd_cookies_to_headers(response.headers, new_cookies.values());\n\t\t\treturn response;\n\t\t}\n\t\treturn await handle_fatal_error(event, event_state, options, e);\n\t}\n\n\t/**\n\t * @param {import('@sveltejs/kit').RequestEvent} event\n\t * @param {PageNodes | undefined} page_nodes\n\t * @param {import('@sveltejs/kit').ResolveOptions} [opts]\n\t */\n\tasync function resolve(event, page_nodes, opts) {\n\t\ttry {\n\t\t\tif (opts) {\n\t\t\t\tresolve_opts = {\n\t\t\t\t\ttransformPageChunk: opts.transformPageChunk || default_transform,\n\t\t\t\t\tfilterSerializedResponseHeaders: opts.filterSerializedResponseHeaders || default_filter,\n\t\t\t\t\tpreload: opts.preload || default_preload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (options.hash_routing || state.prerendering?.fallback) {\n\t\t\t\treturn await render_response({\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tmanifest,\n\t\t\t\t\tstate,\n\t\t\t\t\tpage_config: { ssr: false, csr: true },\n\t\t\t\t\tstatus: 200,\n\t\t\t\t\terror: null,\n\t\t\t\t\tbranch: [],\n\t\t\t\t\tfetched: [],\n\t\t\t\t\tresolve_opts,\n\t\t\t\t\tdata_serializer: server_data_serializer(event, event_state, options)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (remote_id) {\n\t\t\t\treturn await handle_remote_call(event, event_state, options, manifest, remote_id);\n\t\t\t}\n\n\t\t\tif (route) {\n\t\t\t\tconst method = /** @type {import('types').HttpMethod} */ (event.request.method);\n\n\t\t\t\t/** @type {Response} */\n\t\t\t\tlet response;\n\n\t\t\t\tif (is_data_request) {\n\t\t\t\t\tresponse = await render_data(\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\troute,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tinvalidated_data_nodes,\n\t\t\t\t\t\ttrailing_slash\n\t\t\t\t\t);\n\t\t\t\t} else if (route.endpoint && (!route.page || is_endpoint_request(event))) {\n\t\t\t\t\tresponse = await render_endpoint(event, event_state, await route.endpoint(), state);\n\t\t\t\t} else if (route.page) {\n\t\t\t\t\tif (!page_nodes) {\n\t\t\t\t\t\tthrow new Error('page_nodes not found. This should never happen');\n\t\t\t\t\t} else if (page_methods.has(method)) {\n\t\t\t\t\t\tresponse = await render_page(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\troute.page,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tpage_nodes,\n\t\t\t\t\t\t\tresolve_opts\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst allowed_methods = new Set(allowed_page_methods);\n\t\t\t\t\t\tconst node = await manifest._.nodes[route.page.leaf]();\n\t\t\t\t\t\tif (node?.server?.actions) {\n\t\t\t\t\t\t\tallowed_methods.add('POST');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (method === 'OPTIONS') {\n\t\t\t\t\t\t\t// This will deny CORS preflight requests implicitly because we don't\n\t\t\t\t\t\t\t// add the required CORS headers to the response.\n\t\t\t\t\t\t\tresponse = new Response(null, {\n\t\t\t\t\t\t\t\tstatus: 204,\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\tallow: Array.from(allowed_methods.values()).join(', ')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst mod = [...allowed_methods].reduce((acc, curr) => {\n\t\t\t\t\t\t\t\tacc[curr] = true;\n\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t}, /** @type {Record<string, any>} */ ({}));\n\t\t\t\t\t\t\tresponse = method_not_allowed(mod, method);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// a route will always have a page or an endpoint, but TypeScript doesn't know that\n\t\t\t\t\tthrow new Error('Route is neither page nor endpoint. This should never happen');\n\t\t\t\t}\n\n\t\t\t\t// If the route contains a page and an endpoint, we need to add a\n\t\t\t\t// `Vary: Accept` header to the response because of browser caching\n\t\t\t\tif (request.method === 'GET' && route.page && route.endpoint) {\n\t\t\t\t\tconst vary = response.headers\n\t\t\t\t\t\t.get('vary')\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.map((v) => v.trim().toLowerCase());\n\t\t\t\t\tif (!(vary?.includes('accept') || vary?.includes('*'))) {\n\t\t\t\t\t\t// the returned response might have immutable headers,\n\t\t\t\t\t\t// so we have to clone them before trying to mutate them\n\t\t\t\t\t\tresponse = new Response(response.body, {\n\t\t\t\t\t\t\tstatus: response.status,\n\t\t\t\t\t\t\tstatusText: response.statusText,\n\t\t\t\t\t\t\theaders: new Headers(response.headers)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse.headers.append('Vary', 'Accept');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tif (state.error && event.isSubRequest) {\n\t\t\t\t// avoid overwriting the headers. This could be a same origin fetch request\n\t\t\t\t// to an external service from the root layout while rendering an error page\n\t\t\t\tconst headers = new Headers(request.headers);\n\t\t\t\theaders.set('x-sveltekit-error', 'true');\n\t\t\t\treturn await fetch(request, { headers });\n\t\t\t}\n\n\t\t\tif (state.error) {\n\t\t\t\treturn text('Internal Server Error', {\n\t\t\t\t\tstatus: 500\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if this request came direct from the user, rather than\n\t\t\t// via our own `fetch`, render a 404 page\n\t\t\tif (state.depth === 0) {\n\t\t\t\t// In local development, Chrome requests this file for its 'automatic workspace folders' feature,\n\t\t\t\t// causing console spam. If users want to serve this file they can install\n\t\t\t\t// https://svelte.dev/docs/cli/devtools-json\n\t\t\t\tif (DEV && event.url.pathname === '/.well-known/appspecific/com.chrome.devtools.json') {\n\t\t\t\t\tif (!warned_on_devtools_json_request) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t`\\nGoogle Chrome is requesting ${event.url.pathname} to automatically configure devtools project settings. To learn why, and how to prevent this message, see https://svelte.dev/docs/cli/devtools-json\\n`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\twarned_on_devtools_json_request = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn new Response(undefined, { status: 404 });\n\t\t\t\t}\n\n\t\t\t\treturn await respond_with_error({\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tmanifest,\n\t\t\t\t\tstate,\n\t\t\t\t\tstatus: 404,\n\t\t\t\t\terror: new SvelteKitError(404, 'Not Found', `Not found: ${event.url.pathname}`),\n\t\t\t\t\tresolve_opts\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.prerendering) {\n\t\t\t\treturn text('not found', { status: 404 });\n\t\t\t}\n\n\t\t\t// we can't load the endpoint from our own manifest,\n\t\t\t// so we need to make an actual HTTP request\n\t\t\tconst response = await fetch(request);\n\n\t\t\t// clone the response so that headers are mutable (https://github.com/sveltejs/kit/issues/13857)\n\t\t\treturn new Response(response.body, response);\n\t\t} catch (e) {\n\t\t\t// TODO if `e` is instead named `error`, some fucked up Vite transformation happens\n\t\t\t// and I don't even know how to describe it. need to investigate at some point\n\n\t\t\t// HttpError from endpoint can end up here - TODO should it be handled there instead?\n\t\t\treturn await handle_fatal_error(event, event_state, options, e);\n\t\t} finally {\n\t\t\tevent.cookies.set = () => {\n\t\t\t\tthrow new Error('Cannot use `cookies.set(...)` after the response has been generated');\n\t\t\t};\n\n\t\t\tevent.setHeaders = () => {\n\t\t\t\tthrow new Error('Cannot use `setHeaders(...)` after the response has been generated');\n\t\t\t};\n\t\t}\n\t}\n}\n\n/**\n * @param {import('types').PageNodeIndexes} page\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n */\nexport function load_page_nodes(page, manifest) {\n\treturn Promise.all([\n\t\t// we use == here rather than === because [undefined] serializes as \"[null]\"\n\t\t...page.layouts.map((n) => (n == undefined ? n : manifest._.nodes[n]())),\n\t\tmanifest._.nodes[page.leaf]()\n\t]);\n}\n\n/**\n * It's likely that, in a distributed system, there are spans starting outside the SvelteKit server -- eg.\n * started on the frontend client, or in a service that calls the SvelteKit server. There are standardized\n * ways to represent this context in HTTP headers, so we can extract that context and run our tracing inside of it\n * so that when our traces are exported, they are associated with the correct parent context.\n * @param {typeof internal_respond} fn\n * @returns {typeof internal_respond}\n */\nfunction propagate_context(fn) {\n\treturn async (req, ...rest) => {\n\t\tif (otel === null) {\n\t\t\treturn fn(req, ...rest);\n\t\t}\n\n\t\tconst { propagation, context } = await otel;\n\t\tconst c = propagation.extract(context.active(), Object.fromEntries(req.headers));\n\t\treturn context.with(c, async () => {\n\t\t\treturn await fn(req, ...rest);\n\t\t});\n\t};\n}\n","/**\n * @template T\n * @param {() => T} fn\n */\nexport function once(fn) {\n\tlet done = false;\n\n\t/** @type T */\n\tlet result;\n\n\treturn () => {\n\t\tif (done) return result;\n\t\tdone = true;\n\t\treturn (result = fn());\n\t};\n}\n","import { Redirect } from '@sveltejs/kit/internal';\nimport { with_request_store } from '@sveltejs/kit/internal/server';\nimport { ENDPOINT_METHODS, PAGE_METHODS } from '../../constants.js';\nimport { negotiate } from '../../utils/http.js';\nimport { method_not_allowed } from './utils.js';\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSREndpoint} mod\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nexport async function render_endpoint(event, event_state, mod, state) {\n\tconst method = /** @type {import('types').HttpMethod} */ (event.request.method);\n\n\tlet handler = mod[method] || mod.fallback;\n\n\tif (method === 'HEAD' && !mod.HEAD && mod.GET) {\n\t\thandler = mod.GET;\n\t}\n\n\tif (!handler) {\n\t\treturn method_not_allowed(mod, method);\n\t}\n\n\tconst prerender = mod.prerender ?? state.prerender_default;\n\n\tif (prerender && (mod.POST || mod.PATCH || mod.PUT || mod.DELETE)) {\n\t\tthrow new Error('Cannot prerender endpoints that have mutative methods');\n\t}\n\n\tif (state.prerendering && !state.prerendering.inside_reroute && !prerender) {\n\t\tif (state.depth > 0) {\n\t\t\t// if request came from a prerendered page, bail\n\t\t\tthrow new Error(`${event.route.id} is not prerenderable`);\n\t\t} else {\n\t\t\t// if request came direct from the crawler, signal that\n\t\t\t// this route cannot be prerendered, but don't bail\n\t\t\treturn new Response(undefined, { status: 204 });\n\t\t}\n\t}\n\n\tevent_state.is_endpoint_request = true;\n\n\ttry {\n\t\tconst response = await with_request_store({ event, state: event_state }, () =>\n\t\t\thandler(/** @type {import('@sveltejs/kit').RequestEvent<Record<string, any>>} */ (event))\n\t\t);\n\n\t\tif (!(response instanceof Response)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid response from route ${event.url.pathname}: handler should return a Response object`\n\t\t\t);\n\t\t}\n\n\t\tif (state.prerendering && (!state.prerendering.inside_reroute || prerender)) {\n\t\t\t// The returned Response might have immutable Headers\n\t\t\t// so we should clone them before trying to mutate them.\n\t\t\t// We also need to clone the response body since it may be read twice during prerendering\n\t\t\tconst cloned = new Response(response.clone().body, {\n\t\t\t\tstatus: response.status,\n\t\t\t\tstatusText: response.statusText,\n\t\t\t\theaders: new Headers(response.headers)\n\t\t\t});\n\t\t\tcloned.headers.set('x-sveltekit-prerender', String(prerender));\n\n\t\t\tif (state.prerendering.inside_reroute && prerender) {\n\t\t\t\t// Without this, the route wouldn't be recorded as prerendered,\n\t\t\t\t// because there's nothing after reroute that would do that.\n\t\t\t\tcloned.headers.set(\n\t\t\t\t\t'x-sveltekit-routeid',\n\t\t\t\t\tencodeURI(/** @type {string} */ (event.route.id))\n\t\t\t\t);\n\t\t\t\tstate.prerendering.dependencies.set(event.url.pathname, { response: cloned, body: null });\n\t\t\t} else {\n\t\t\t\treturn cloned;\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t} catch (e) {\n\t\tif (e instanceof Redirect) {\n\t\t\treturn new Response(undefined, {\n\t\t\t\tstatus: e.status,\n\t\t\t\theaders: { location: e.location }\n\t\t\t});\n\t\t}\n\n\t\tthrow e;\n\t}\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n */\nexport function is_endpoint_request(event) {\n\tconst { method, headers } = event.request;\n\n\t// These methods exist exclusively for endpoints\n\tif (ENDPOINT_METHODS.includes(method) && !PAGE_METHODS.includes(method)) {\n\t\treturn true;\n\t}\n\n\t// use:enhance uses a custom header to disambiguate\n\tif (method === 'POST' && headers.get('x-sveltekit-action') === 'true') return false;\n\n\t// GET/POST requests may be for endpoints or pages. We prefer endpoints if this isn't a text/html request\n\tconst accept = event.request.headers.get('accept') ?? '*/*';\n\treturn negotiate(accept, ['*', 'text/html']) !== 'text/html';\n}\n","import { asClassComponent } from 'svelte/legacy';\nimport Root from './root.svelte';\nexport default asClassComponent(Root);","\nimport root from '../root.js';\nimport { set_building, set_prerendering } from '__sveltekit/environment';\nimport { set_assets } from '$app/paths/internal/server';\nimport { set_manifest, set_read_implementation } from '__sveltekit/server';\nimport { set_private_env, set_public_env } from '../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared-server.js';\n\nexport const options = {\n\tapp_template_contains_nonce: false,\n\tasync: false,\n\tcsp: {\"mode\":\"auto\",\"directives\":{\"upgrade-insecure-requests\":false,\"block-all-mixed-content\":false},\"reportOnly\":{\"upgrade-insecure-requests\":false,\"block-all-mixed-content\":false}},\n\tcsrf_check_origin: true,\n\tcsrf_trusted_origins: [],\n\tembedded: false,\n\tenv_public_prefix: 'PUBLIC_',\n\tenv_private_prefix: '',\n\thash_routing: false,\n\thooks: null, // added lazily, via `get_hooks`\n\tpreload_strategy: \"modulepreload\",\n\troot,\n\tservice_worker: false,\n\tservice_worker_options: undefined,\n\ttemplates: {\n\t\tapp: ({ head, body, assets, nonce, env }) => \"<!doctype html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<link rel=\\\"icon\\\" href=\\\"\" + assets + \"/favicon.png\\\" />\\n\\t\\t<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n\\t\\t\" + head + \"\\n\\t</head>\\n\\t<body data-sveltekit-preload-data=\\\"hover\\\">\\n\\t\\t<div style=\\\"display: contents\\\">\" + body + \"</div>\\n\\t</body>\\n</html>\\n\",\n\t\terror: ({ status, message }) => \"<!doctype html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<title>\" + message + \"</title>\\n\\n\\t\\t<style>\\n\\t\\t\\tbody {\\n\\t\\t\\t\\t--bg: white;\\n\\t\\t\\t\\t--fg: #222;\\n\\t\\t\\t\\t--divider: #ccc;\\n\\t\\t\\t\\tbackground: var(--bg);\\n\\t\\t\\t\\tcolor: var(--fg);\\n\\t\\t\\t\\tfont-family:\\n\\t\\t\\t\\t\\tsystem-ui,\\n\\t\\t\\t\\t\\t-apple-system,\\n\\t\\t\\t\\t\\tBlinkMacSystemFont,\\n\\t\\t\\t\\t\\t'Segoe UI',\\n\\t\\t\\t\\t\\tRoboto,\\n\\t\\t\\t\\t\\tOxygen,\\n\\t\\t\\t\\t\\tUbuntu,\\n\\t\\t\\t\\t\\tCantarell,\\n\\t\\t\\t\\t\\t'Open Sans',\\n\\t\\t\\t\\t\\t'Helvetica Neue',\\n\\t\\t\\t\\t\\tsans-serif;\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\theight: 100vh;\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.error {\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\tmax-width: 32rem;\\n\\t\\t\\t\\tmargin: 0 1rem;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.status {\\n\\t\\t\\t\\tfont-weight: 200;\\n\\t\\t\\t\\tfont-size: 3rem;\\n\\t\\t\\t\\tline-height: 1;\\n\\t\\t\\t\\tposition: relative;\\n\\t\\t\\t\\ttop: -0.05rem;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.message {\\n\\t\\t\\t\\tborder-left: 1px solid var(--divider);\\n\\t\\t\\t\\tpadding: 0 0 0 1rem;\\n\\t\\t\\t\\tmargin: 0 0 0 1rem;\\n\\t\\t\\t\\tmin-height: 2.5rem;\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.message h1 {\\n\\t\\t\\t\\tfont-weight: 400;\\n\\t\\t\\t\\tfont-size: 1em;\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t@media (prefers-color-scheme: dark) {\\n\\t\\t\\t\\tbody {\\n\\t\\t\\t\\t\\t--bg: #222;\\n\\t\\t\\t\\t\\t--fg: #ddd;\\n\\t\\t\\t\\t\\t--divider: #666;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t</style>\\n\\t</head>\\n\\t<body>\\n\\t\\t<div class=\\\"error\\\">\\n\\t\\t\\t<span class=\\\"status\\\">\" + status + \"</span>\\n\\t\\t\\t<div class=\\\"message\\\">\\n\\t\\t\\t\\t<h1>\" + message + \"</h1>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</body>\\n</html>\\n\"\n\t},\n\tversion_hash: \"e5hwy\"\n};\n\nexport async function get_hooks() {\n\tlet handle;\n\tlet handleFetch;\n\tlet handleError;\n\tlet handleValidationError;\n\tlet init;\n\t\n\n\tlet reroute;\n\tlet transport;\n\t\n\n\treturn {\n\t\thandle,\n\t\thandleFetch,\n\t\thandleError,\n\t\thandleValidationError,\n\t\tinit,\n\t\treroute,\n\t\ttransport\n\t};\n}\n\nexport { set_assets, set_building, set_manifest, set_prerendering, set_private_env, set_public_env, set_read_implementation };\n","<!-- This file is generated by @sveltejs/kit — do not edit it! -->\n<svelte:options runes={true} />\n<script>\n\timport { setContext, onMount, tick } from 'svelte';\n\timport { browser } from '$app/environment';\n\n\t// stores\n\tlet { stores, page, constructors, components = [], form, data_0 = null, data_1 = null, data_2 = null } = $props();\n\n\tif (!browser) {\n\t\t// svelte-ignore state_referenced_locally\n\t\tsetContext('__svelte__', stores);\n\t}\n\n\tif (browser) {\n\t\t$effect.pre(() => stores.page.set(page));\n\t} else {\n\t\t// svelte-ignore state_referenced_locally\n\t\tstores.page.set(page);\n\t}\n\t$effect(() => {\n\t\tstores;page;constructors;components;form;data_0;data_1;data_2;\n\t\tstores.page.notify();\n\t});\n\n\tlet mounted = $state(false);\n\tlet navigated = $state(false);\n\tlet title = $state(null);\n\n\tonMount(() => {\n\t\tconst unsubscribe = stores.page.subscribe(() => {\n\t\t\tif (mounted) {\n\t\t\t\tnavigated = true;\n\t\t\t\ttick().then(() => {\n\t\t\t\t\ttitle = document.title || 'untitled page';\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tmounted = true;\n\t\treturn unsubscribe;\n\t});\n\n\tconst Pyramid_2=$derived(constructors[2])\n</script>\n\n{#if constructors[1]}\n\t{@const Pyramid_0 = constructors[0]}\n\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t<Pyramid_0 bind:this={components[0]} data={data_0} {form} params={page.params}>\n\t\t\t\t\t\t\t\t{#if constructors[2]}\n\t\t\t\t\t\t\t\t\t{@const Pyramid_1 = constructors[1]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Pyramid_1 bind:this={components[1]} data={data_1} {form} params={page.params}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Pyramid_2 bind:this={components[2]} data={data_2} {form} params={page.params} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Pyramid_1>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{@const Pyramid_1 = constructors[1]}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t<Pyramid_1 bind:this={components[1]} data={data_1} {form} params={page.params} />\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</Pyramid_0>\n\n{:else}\n\t{@const Pyramid_0 = constructors[0]}\n\t<!-- svelte-ignore binding_property_non_reactive -->\n\t<Pyramid_0 bind:this={components[0]} data={data_0} {form} params={page.params} />\n\n{/if}\n\n{#if mounted}\n\t<div id=\"svelte-announcer\" aria-live=\"assertive\" aria-atomic=\"true\" style=\"position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px\">\n\t\t{#if navigated}\n\t\t\t{title}\n\t\t{/if}\n\t</div>\n{/if}","/**\n * @param {Record<string, string>} env\n * @param {string} allowed\n * @param {string} disallowed\n * @returns {Record<string, string>}\n */\nexport function filter_env(env, allowed, disallowed) {\n\treturn Object.fromEntries(\n\t\tObject.entries(env).filter(\n\t\t\t([k]) => k.startsWith(allowed) && (disallowed === '' || !k.startsWith(disallowed))\n\t\t)\n\t);\n}\n","/** @import { PromiseWithResolvers } from '../../utils/promise.js' */\nimport { with_resolvers } from '../../utils/promise.js';\nimport { IN_WEBCONTAINER } from './constants.js';\nimport { respond } from './respond.js';\nimport { set_private_env, set_public_env } from '../shared-server.js';\nimport { options, get_hooks } from '__SERVER__/internal.js';\nimport { DEV } from 'esm-env';\nimport { filter_env } from '../../utils/env.js';\nimport { format_server_error } from './utils.js';\nimport { set_read_implementation, set_manifest } from '__sveltekit/server';\nimport { set_app } from './app.js';\n\n/** @type {Promise<any>} */\nlet init_promise;\n\n/** @type {Promise<void> | null} */\nlet current = null;\n\nexport class Server {\n\t/** @type {import('types').SSROptions} */\n\t#options;\n\n\t/** @type {import('@sveltejs/kit').SSRManifest} */\n\t#manifest;\n\n\t/** @param {import('@sveltejs/kit').SSRManifest} manifest */\n\tconstructor(manifest) {\n\t\t/** @type {import('types').SSROptions} */\n\t\tthis.#options = options;\n\t\tthis.#manifest = manifest;\n\n\t\t// Since AsyncLocalStorage is not working in webcontainers, we don't reset `sync_store`\n\t\t// in `src/exports/internal/event.js` and handle only one request at a time.\n\t\tif (IN_WEBCONTAINER) {\n\t\t\tconst respond = this.respond.bind(this);\n\n\t\t\t/** @type {typeof respond} */\n\t\t\tthis.respond = async (...args) => {\n\t\t\t\tconst { promise, resolve } = /** @type {PromiseWithResolvers<void>} */ (with_resolvers());\n\n\t\t\t\tconst previous = current;\n\t\t\t\tcurrent = promise;\n\n\t\t\t\tawait previous;\n\t\t\t\treturn respond(...args).finally(resolve);\n\t\t\t};\n\t\t}\n\n\t\tset_manifest(manifest);\n\t}\n\n\t/**\n\t * @param {import('@sveltejs/kit').ServerInitOptions} opts\n\t */\n\tasync init({ env, read }) {\n\t\t// Take care: Some adapters may have to call `Server.init` per-request to set env vars,\n\t\t// so anything that shouldn't be rerun should be wrapped in an `if` block to make sure it hasn't\n\t\t// been done already.\n\n\t\t// set env, in case it's used in initialisation\n\t\tconst { env_public_prefix, env_private_prefix } = this.#options;\n\n\t\tset_private_env(filter_env(env, env_private_prefix, env_public_prefix));\n\t\tset_public_env(filter_env(env, env_public_prefix, env_private_prefix));\n\n\t\tif (read) {\n\t\t\t// Wrap the read function to handle MaybePromise<ReadableStream>\n\t\t\t// and ensure the public API stays synchronous\n\t\t\t/** @param {string} file */\n\t\t\tconst wrapped_read = (file) => {\n\t\t\t\tconst result = read(file);\n\t\t\t\tif (result instanceof ReadableStream) {\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn new ReadableStream({\n\t\t\t\t\t\tasync start(controller) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst stream = await Promise.resolve(result);\n\t\t\t\t\t\t\t\tif (!stream) {\n\t\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst reader = stream.getReader();\n\n\t\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\t\t\t\t\tif (done) break;\n\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tcontroller.error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tset_read_implementation(wrapped_read);\n\t\t}\n\n\t\t// During DEV and for some adapters this function might be called in quick succession,\n\t\t// so we need to make sure we're not invoking this logic (most notably the init hook) multiple times\n\t\tawait (init_promise ??= (async () => {\n\t\t\ttry {\n\t\t\t\tconst module = await get_hooks();\n\n\t\t\t\tthis.#options.hooks = {\n\t\t\t\t\thandle: module.handle || (({ event, resolve }) => resolve(event)),\n\t\t\t\t\thandleError:\n\t\t\t\t\t\tmodule.handleError ||\n\t\t\t\t\t\t(({ status, error, event }) => {\n\t\t\t\t\t\t\tconst error_message = format_server_error(\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\t/** @type {Error} */ (error),\n\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconsole.error(error_message);\n\t\t\t\t\t\t}),\n\t\t\t\t\thandleFetch: module.handleFetch || (({ request, fetch }) => fetch(request)),\n\t\t\t\t\thandleValidationError:\n\t\t\t\t\t\tmodule.handleValidationError ||\n\t\t\t\t\t\t(({ issues }) => {\n\t\t\t\t\t\t\tconsole.error('Remote function schema validation failed:', issues);\n\t\t\t\t\t\t\treturn { message: 'Bad Request' };\n\t\t\t\t\t\t}),\n\t\t\t\t\treroute: module.reroute || (() => {}),\n\t\t\t\t\ttransport: module.transport || {}\n\t\t\t\t};\n\n\t\t\t\tset_app({\n\t\t\t\t\tdecoders: module.transport\n\t\t\t\t\t\t? Object.fromEntries(Object.entries(module.transport).map(([k, v]) => [k, v.decode]))\n\t\t\t\t\t\t: {}\n\t\t\t\t});\n\n\t\t\t\tif (module.init) {\n\t\t\t\t\tawait module.init();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tthis.#options.hooks = {\n\t\t\t\t\t\thandle: () => {\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t},\n\t\t\t\t\t\thandleError: ({ error }) => console.error(error),\n\t\t\t\t\t\thandleFetch: ({ request, fetch }) => fetch(request),\n\t\t\t\t\t\thandleValidationError: () => {\n\t\t\t\t\t\t\treturn { message: 'Bad Request' };\n\t\t\t\t\t\t},\n\t\t\t\t\t\treroute: () => {},\n\t\t\t\t\t\ttransport: {}\n\t\t\t\t\t};\n\n\t\t\t\t\tset_app({\n\t\t\t\t\t\tdecoders: {}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t})());\n\t}\n\n\t/**\n\t * @param {Request} request\n\t * @param {import('types').RequestOptions} options\n\t */\n\tasync respond(request, options) {\n\t\treturn respond(request, this.#options, this.#manifest, {\n\t\t\t...options,\n\t\t\terror: false,\n\t\t\tdepth: 0\n\t\t});\n\t}\n}\n","/** @import { RequestEvent } from '@sveltejs/kit' */\n/** @import { ServerHooks, MaybePromise, RequestState, RemoteInfo, RequestStore } from 'types' */\nimport { parse } from 'devalue';\nimport { error } from '@sveltejs/kit';\nimport { with_request_store, get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify_remote_arg } from '../../../shared.js';\n\n/**\n * @param {any} validate_or_fn\n * @param {(arg?: any) => any} [maybe_fn]\n * @returns {(arg?: any) => MaybePromise<any>}\n */\nexport function create_validator(validate_or_fn, maybe_fn) {\n\t// prevent functions without validators being called with arguments\n\tif (!maybe_fn) {\n\t\treturn (arg) => {\n\t\t\tif (arg !== undefined) {\n\t\t\t\terror(400, 'Bad Request');\n\t\t\t}\n\t\t};\n\t}\n\n\t// if 'unchecked', pass input through without validating\n\tif (validate_or_fn === 'unchecked') {\n\t\treturn (arg) => arg;\n\t}\n\n\t// use https://standardschema.dev validator if provided\n\tif ('~standard' in validate_or_fn) {\n\t\treturn async (arg) => {\n\t\t\t// Get event before async validation to ensure it's available in server environments without AsyncLocalStorage, too\n\t\t\tconst { event, state } = get_request_store();\n\t\t\t// access property and call method in one go to preserve potential this context\n\t\t\tconst result = await validate_or_fn['~standard'].validate(arg);\n\n\t\t\t// if the `issues` field exists, the validation failed\n\t\t\tif (result.issues) {\n\t\t\t\terror(\n\t\t\t\t\t400,\n\t\t\t\t\tawait state.handleValidationError({\n\t\t\t\t\t\tissues: result.issues,\n\t\t\t\t\t\tevent\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result.value;\n\t\t};\n\t}\n\n\tthrow new Error(\n\t\t'Invalid validator passed to remote function. Expected \"unchecked\" or a Standard Schema (https://standardschema.dev)'\n\t);\n}\n\n/**\n * In case of a single remote function call, just returns the result.\n *\n * In case of a full page reload, returns the response for a remote function call,\n * either from the cache or by invoking the function.\n * Also saves an uneval'ed version of the result for later HTML inlining for hydration.\n *\n * @template {MaybePromise<any>} T\n * @param {RemoteInfo} info\n * @param {any} arg\n * @param {RequestState} state\n * @param {() => Promise<T>} get_result\n * @returns {Promise<T>}\n */\nexport async function get_response(info, arg, state, get_result) {\n\t// wait a beat, in case `myQuery().set(...)` or `myQuery().refresh()` is immediately called\n\t// eslint-disable-next-line @typescript-eslint/await-thenable\n\tawait 0;\n\n\tconst cache = get_cache(info, state);\n\n\treturn (cache[stringify_remote_arg(arg, state.transport)] ??= get_result());\n}\n\n/**\n * @param {any} data\n * @param {ServerHooks['transport']} transport\n */\nexport function parse_remote_response(data, transport) {\n\t/** @type {Record<string, any>} */\n\tconst revivers = {};\n\tfor (const key in transport) {\n\t\trevivers[key] = transport[key].decode;\n\t}\n\n\treturn parse(data, revivers);\n}\n\n/**\n * Like `with_event` but removes things from `event` you cannot see/call in remote functions, such as `setHeaders`.\n * @template T\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {boolean} allow_cookies\n * @param {any} arg\n * @param {(arg: any) => any} validate\n * @param {(arg?: any) => T} fn\n */\nexport async function run_remote_function(event, state, allow_cookies, arg, validate, fn) {\n\t/** @type {RequestStore} */\n\tconst store = {\n\t\tevent: {\n\t\t\t...event,\n\t\t\tsetHeaders: () => {\n\t\t\t\tthrow new Error('setHeaders is not allowed in remote functions');\n\t\t\t},\n\t\t\tcookies: {\n\t\t\t\t...event.cookies,\n\t\t\t\tset: (name, value, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot set cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies set in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.set(name, value, opts);\n\t\t\t\t},\n\t\t\t\tdelete: (name, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot delete cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies deleted in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.delete(name, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstate: {\n\t\t\t...state,\n\t\t\tis_in_remote_function: true\n\t\t}\n\t};\n\n\t// In two parts, each with_event, so that runtimes without async local storage can still get the event at the start of the function\n\tconst validated = await with_request_store(store, () => validate(arg));\n\treturn with_request_store(store, () => fn(validated));\n}\n\n/**\n * @param {RemoteInfo} info\n * @param {RequestState} state\n */\nexport function get_cache(info, state = get_request_store().state) {\n\tlet cache = state.remote_data?.get(info);\n\n\tif (cache === undefined) {\n\t\tcache = {};\n\t\t(state.remote_data ??= new Map()).set(info, cache);\n\t}\n\n\treturn cache;\n}\n","/** @import { RemoteCommand } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_validator, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => Output} fn\n * @returns {RemoteCommand<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => Output} fn\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => Output} fn\n * @returns {RemoteCommand<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(arg?: Input) => Output} [maybe_fn]\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function command(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'command', id: '', name: '' };\n\n\t/** @type {RemoteCommand<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tconst { event, state } = get_request_store();\n\n\t\tif (state.is_endpoint_request) {\n\t\t\tif (!['POST', 'PUT', 'PATCH', 'DELETE'].includes(event.request.method)) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) from a ${event.request.method} handler`\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (!event.isRemoteRequest) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) during server-side rendering`\n\t\t\t);\n\t\t}\n\n\t\tstate.refreshes ??= {};\n\n\t\tconst promise = Promise.resolve(run_remote_function(event, state, true, arg, validate, fn));\n\n\t\t// @ts-expect-error\n\t\tpromise.updates = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}(...).updates(...)' on the server`);\n\t\t};\n\n\t\treturn /** @type {ReturnType<RemoteCommand<Input, Output>>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\t// On the server, pending is always 0\n\tObject.defineProperty(wrapper, 'pending', {\n\t\tget: () => 0\n\t});\n\n\treturn wrapper;\n}\n","/** @import { RemoteFormInput, RemoteForm, InvalidField } from '@sveltejs/kit' */\n/** @import { InternalRemoteFormIssue, MaybePromise, RemoteInfo } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { DEV } from 'esm-env';\nimport {\n\tcreate_field_proxy,\n\tset_nested_value,\n\tthrow_on_old_property_access,\n\tdeep_set,\n\tnormalize_issue,\n\tflatten_issues\n} from '../../../form-utils.js';\nimport { get_cache, run_remote_function } from './shared.js';\nimport { ValidationError } from '@sveltejs/kit/internal';\n\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @returns {RemoteForm<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {RemoteFormInput} Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(data: Input, issue: InvalidField<Input>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {StandardSchemaV1<RemoteFormInput, Record<string, any>>} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(data: StandardSchemaV1.InferOutput<Schema>, issue: InvalidField<StandardSchemaV1.InferInput<Schema>>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template {RemoteFormInput} Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(data_or_issue: any, issue?: any) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\n// @ts-ignore we don't want to prefix `fn` with an underscore, as that will be user-visible\nexport function form(validate_or_fn, maybe_fn) {\n\t/** @type {any} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {StandardSchemaV1 | null} */\n\tconst schema =\n\t\t!maybe_fn || validate_or_fn === 'unchecked' ? null : /** @type {any} */ (validate_or_fn);\n\n\t/**\n\t * @param {string | number | boolean} [key]\n\t */\n\tfunction create_instance(key) {\n\t\t/** @type {RemoteForm<Input, Output>} */\n\t\tconst instance = {};\n\n\t\tinstance.method = 'POST';\n\n\t\tObject.defineProperty(instance, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { action: instance.action, method: instance.method };\n\t\t\t}\n\t\t});\n\n\t\tconst button_props = {\n\t\t\ttype: 'submit',\n\t\t\tonclick: () => {}\n\t\t};\n\n\t\tObject.defineProperty(button_props, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { type: 'submit', formaction: instance.buttonProps.formaction, onclick: () => {} };\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(instance, 'buttonProps', {\n\t\t\tvalue: button_props\n\t\t});\n\n\t\t/** @type {RemoteInfo} */\n\t\tconst __ = {\n\t\t\ttype: 'form',\n\t\t\tname: '',\n\t\t\tid: '',\n\t\t\tfn: async (data, meta, form_data) => {\n\t\t\t\t// TODO 3.0 remove this warning\n\t\t\t\tif (DEV && !data) {\n\t\t\t\t\tconst error = () => {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Remote form functions no longer get passed a FormData object. ' +\n\t\t\t\t\t\t\t\t\"`form` now has the same signature as `query` or `command`, i.e. it expects to be invoked like `form(schema, callback)` or `form('unchecked', callback)`. \" +\n\t\t\t\t\t\t\t\t'The payload of the callback function is now a POJO instead of a FormData object. See https://kit.svelte.dev/docs/remote-functions#form for details.'\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t\tdata = {};\n\t\t\t\t\tfor (const key of [\n\t\t\t\t\t\t'append',\n\t\t\t\t\t\t'delete',\n\t\t\t\t\t\t'entries',\n\t\t\t\t\t\t'forEach',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t'getAll',\n\t\t\t\t\t\t'has',\n\t\t\t\t\t\t'keys',\n\t\t\t\t\t\t'set',\n\t\t\t\t\t\t'values'\n\t\t\t\t\t]) {\n\t\t\t\t\t\tObject.defineProperty(data, key, { get: error });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/** @type {{ submission: true, input?: Record<string, any>, issues?: InternalRemoteFormIssue[], result: Output }} */\n\t\t\t\tconst output = {};\n\n\t\t\t\t// make it possible to differentiate between user submission and programmatic `field.set(...)` updates\n\t\t\t\toutput.submission = true;\n\n\t\t\t\tconst { event, state } = get_request_store();\n\t\t\t\tconst validated = await schema?.['~standard'].validate(data);\n\n\t\t\t\tif (meta.validate_only) {\n\t\t\t\t\treturn validated?.issues?.map((issue) => normalize_issue(issue, true)) ?? [];\n\t\t\t\t}\n\n\t\t\t\tif (validated?.issues !== undefined) {\n\t\t\t\t\thandle_issues(output, validated.issues, form_data);\n\t\t\t\t} else {\n\t\t\t\t\tif (validated !== undefined) {\n\t\t\t\t\t\tdata = validated.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.refreshes ??= {};\n\n\t\t\t\t\tconst issue = create_issues();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\toutput.result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t(d) => d,\n\t\t\t\t\t\t\t(data) => (!maybe_fn ? fn() : fn(data, issue))\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e instanceof ValidationError) {\n\t\t\t\t\t\t\thandle_issues(output, e.issues, form_data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We don't need to care about args or deduplicating calls, because uneval results are only relevant in full page reloads\n\t\t\t\t// where only one form submission is active at the same time\n\t\t\t\tif (!event.isRemoteRequest) {\n\t\t\t\t\tget_cache(__, state)[''] ??= output;\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\t\t};\n\n\t\tObject.defineProperty(instance, '__', { value: __ });\n\n\t\tObject.defineProperty(instance, 'action', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(button_props, 'formaction', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(instance, 'fields', {\n\t\t\tget() {\n\t\t\t\tconst data = get_cache(__)?.[''];\n\t\t\t\tconst issues = flatten_issues(data?.issues ?? []);\n\n\t\t\t\treturn create_field_proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t() => data?.input ?? {},\n\t\t\t\t\t(path, value) => {\n\t\t\t\t\t\tif (data?.submission) {\n\t\t\t\t\t\t\t// don't override a submission\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst input =\n\t\t\t\t\t\t\tpath.length === 0 ? value : deep_set(data?.input ?? {}, path.map(String), value);\n\n\t\t\t\t\t\t(get_cache(__)[''] ??= {}).input = input;\n\t\t\t\t\t},\n\t\t\t\t\t() => issues\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// TODO 3.0 remove\n\t\tif (DEV) {\n\t\t\tthrow_on_old_property_access(instance);\n\t\t}\n\n\t\tObject.defineProperty(instance, 'result', {\n\t\t\tget() {\n\t\t\t\ttry {\n\t\t\t\t\treturn get_cache(__)?.['']?.result;\n\t\t\t\t} catch {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// On the server, pending is always 0\n\t\tObject.defineProperty(instance, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\t// On the server, buttonProps.pending is always 0\n\t\tObject.defineProperty(button_props, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\tObject.defineProperty(instance, 'preflight', {\n\t\t\t// preflight is a noop on the server\n\t\t\tvalue: () => instance\n\t\t});\n\n\t\tObject.defineProperty(instance, 'validate', {\n\t\t\tvalue: () => {\n\t\t\t\tthrow new Error('Cannot call validate() on the server');\n\t\t\t}\n\t\t});\n\n\t\tif (key == undefined) {\n\t\t\tObject.defineProperty(instance, 'for', {\n\t\t\t\t/** @type {RemoteForm<any, any>['for']} */\n\t\t\t\tvalue: (key) => {\n\t\t\t\t\tconst { state } = get_request_store();\n\t\t\t\t\tconst cache_key = __.id + '|' + JSON.stringify(key);\n\t\t\t\t\tlet instance = (state.form_instances ??= new Map()).get(cache_key);\n\n\t\t\t\t\tif (!instance) {\n\t\t\t\t\t\tinstance = create_instance(key);\n\t\t\t\t\t\tinstance.__.id = `${__.id}/${encodeURIComponent(JSON.stringify(key))}`;\n\t\t\t\t\t\tinstance.__.name = __.name;\n\n\t\t\t\t\t\tstate.form_instances.set(cache_key, instance);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn instance;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\treturn create_instance();\n}\n\n/**\n * @param {{ issues?: InternalRemoteFormIssue[], input?: Record<string, any>, result: any }} output\n * @param {readonly StandardSchemaV1.Issue[]} issues\n * @param {FormData | null} form_data - null if the form is progressively enhanced\n */\nfunction handle_issues(output, issues, form_data) {\n\toutput.issues = issues.map((issue) => normalize_issue(issue, true));\n\n\t// if it was a progressively-enhanced submission, we don't need\n\t// to return the input — it's already there\n\tif (form_data) {\n\t\toutput.input = {};\n\n\t\tfor (let key of form_data.keys()) {\n\t\t\t// redact sensitive fields\n\t\t\tif (/^[.\\]]?_/.test(key)) continue;\n\n\t\t\tconst is_array = key.endsWith('[]');\n\t\t\tconst values = form_data.getAll(key).filter((value) => typeof value === 'string');\n\n\t\t\tif (is_array) key = key.slice(0, -2);\n\n\t\t\tset_nested_value(\n\t\t\t\t/** @type {Record<string, any>} */ (output.input),\n\t\t\t\tkey,\n\t\t\t\tis_array ? values : values[0]\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Creates an invalid function that can be used to imperatively mark form fields as invalid\n * @returns {InvalidField<any>}\n */\nfunction create_issues() {\n\treturn /** @type {InvalidField<any>} */ (\n\t\tnew Proxy(\n\t\t\t/** @param {string} message */\n\t\t\t(message) => {\n\t\t\t\t// TODO 3.0 remove\n\t\t\t\tif (typeof message !== 'string') {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'`invalid` should now be imported from `@sveltejs/kit` to throw validation issues. ' +\n\t\t\t\t\t\t\t\"The second parameter provided to the form function (renamed to `issue`) is still used to construct issues, e.g. `invalid(issue.field('message'))`. \" +\n\t\t\t\t\t\t\t'For more info see https://github.com/sveltejs/kit/pulls/14768'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn create_issue(message);\n\t\t\t},\n\t\t\t{\n\t\t\t\tget(target, prop) {\n\t\t\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t\t\treturn create_issue_proxy(prop, []);\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t);\n\n\t/**\n\t * @param {string} message\n\t * @param {(string | number)[]} path\n\t * @returns {StandardSchemaV1.Issue}\n\t */\n\tfunction create_issue(message, path = []) {\n\t\treturn {\n\t\t\tmessage,\n\t\t\tpath\n\t\t};\n\t}\n\n\t/**\n\t * Creates a proxy that builds up a path and returns a function to create an issue\n\t * @param {string | number} key\n\t * @param {(string | number)[]} path\n\t */\n\tfunction create_issue_proxy(key, path) {\n\t\tconst new_path = [...path, key];\n\n\t\t/**\n\t\t * @param {string} message\n\t\t * @returns {StandardSchemaV1.Issue}\n\t\t */\n\t\tconst issue_func = (message) => create_issue(message, new_path);\n\n\t\treturn new Proxy(issue_func, {\n\t\t\tget(target, prop) {\n\t\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t\t// Handle array access like invalid.items[0]\n\t\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\t\treturn create_issue_proxy(parseInt(prop, 10), new_path);\n\t\t\t\t}\n\n\t\t\t\t// Handle property access like invalid.field.nested\n\t\t\t\treturn create_issue_proxy(prop, new_path);\n\t\t\t}\n\t\t});\n\t}\n}\n","/** @import { RemoteResource, RemotePrerenderFunction } from '@sveltejs/kit' */\n/** @import { RemotePrerenderInputsGenerator, RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { error, json } from '@sveltejs/kit';\nimport { DEV } from 'esm-env';\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify, stringify_remote_arg } from '../../../shared.js';\nimport { app_dir, base } from '$app/paths/internal/server';\nimport {\n\tcreate_validator,\n\tget_cache,\n\tget_response,\n\tparse_remote_response,\n\trun_remote_function\n} from './shared.js';\n\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<void>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<StandardSchemaV1.InferInput<Schema>>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {any} [fn_or_options]\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [maybe_options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function prerender(validate_or_fn, fn_or_options, maybe_options) {\n\tconst maybe_fn = typeof fn_or_options === 'function' ? fn_or_options : undefined;\n\n\t/** @type {typeof maybe_options} */\n\tconst options = maybe_options ?? (maybe_fn ? undefined : fn_or_options);\n\n\t/** @type {(arg?: Input) => MaybePromise<Output>} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = {\n\t\ttype: 'prerender',\n\t\tid: '',\n\t\tname: '',\n\t\thas_arg: !!maybe_fn,\n\t\tinputs: options?.inputs,\n\t\tdynamic: options?.dynamic\n\t};\n\n\t/** @type {RemotePrerenderFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\t/** @type {Promise<Output> & Partial<RemoteResource<Output>>} */\n\t\tconst promise = (async () => {\n\t\t\tconst { event, state } = get_request_store();\n\t\t\tconst payload = stringify_remote_arg(arg, state.transport);\n\t\t\tconst id = __.id;\n\t\t\tconst url = `${base}/${app_dir}/remote/${id}${payload ? `/${payload}` : ''}`;\n\n\t\t\tif (!state.prerendering && !DEV && !event.isRemoteRequest) {\n\t\t\t\ttry {\n\t\t\t\t\treturn await get_response(__, arg, state, async () => {\n\t\t\t\t\t\tconst key = stringify_remote_arg(arg, state.transport);\n\t\t\t\t\t\tconst cache = get_cache(__, state);\n\n\t\t\t\t\t\t// TODO adapters can provide prerendered data more efficiently than\n\t\t\t\t\t\t// fetching from the public internet\n\t\t\t\t\t\tconst promise = (cache[key] ??= fetch(new URL(url, event.url.origin).href).then(\n\t\t\t\t\t\t\tasync (response) => {\n\t\t\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\t\t\tthrow new Error('Prerendered response not found');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst prerendered = await response.json();\n\n\t\t\t\t\t\t\t\tif (prerendered.type === 'error') {\n\t\t\t\t\t\t\t\t\terror(prerendered.status, prerendered.error);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn prerendered.result;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t));\n\n\t\t\t\t\t\treturn parse_remote_response(await promise, state.transport);\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\t// not available prerendered, fallback to normal function\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.prerendering?.remote_responses.has(url)) {\n\t\t\t\treturn /** @type {Promise<any>} */ (state.prerendering.remote_responses.get(url));\n\t\t\t}\n\n\t\t\tconst promise = get_response(__, arg, state, () =>\n\t\t\t\trun_remote_function(event, state, false, arg, validate, fn)\n\t\t\t);\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tstate.prerendering.remote_responses.set(url, promise);\n\t\t\t}\n\n\t\t\tconst result = await promise;\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tconst body = { type: 'result', result: stringify(result, state.transport) };\n\t\t\t\tstate.prerendering.dependencies.set(url, {\n\t\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\t\tresponse: json(body)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// TODO this is missing error/loading/current/status\n\t\t\treturn result;\n\t\t})();\n\n\t\tpromise.catch(() => {});\n\n\t\treturn /** @type {RemoteResource<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n","/** @import { RemoteQuery, RemoteQueryFunction } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_remote_key, stringify_remote_arg } from '../../../shared.js';\nimport { prerendering } from '__sveltekit/environment';\nimport { create_validator, get_cache, get_response, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function query(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'query', id: '', name: '' };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\tconst get_remote_function_result = () =>\n\t\t\trun_remote_function(event, state, false, arg, validate, fn);\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, get_remote_function_result);\n\n\t\tpromise.catch(() => {});\n\n\t\tpromise.set = (value) => update_refresh_value(get_refresh_context(__, 'set', arg), value);\n\n\t\tpromise.refresh = () => {\n\t\t\tconst refresh_context = get_refresh_context(__, 'refresh', arg);\n\t\t\tconst is_immediate_refresh = !refresh_context.cache[refresh_context.cache_key];\n\t\t\tconst value = is_immediate_refresh ? promise : get_remote_function_result();\n\t\t\treturn update_refresh_value(refresh_context, value, is_immediate_refresh);\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(args: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(args: StandardSchemaV1.InferOutput<Schema>[]) => MaybePromise<(arg: StandardSchemaV1.InferOutput<Schema>, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.35\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/*@__NO_SIDE_EFFECTS__*/\nfunction batch(validate_or_fn, maybe_fn) {\n\t/** @type {(args?: Input[]) => (arg: Input, idx: number) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo & { type: 'query_batch' }} */\n\tconst __ = {\n\t\ttype: 'query_batch',\n\t\tid: '',\n\t\tname: '',\n\t\trun: (args) => {\n\t\t\tconst { event, state } = get_request_store();\n\n\t\t\treturn run_remote_function(\n\t\t\t\tevent,\n\t\t\t\tstate,\n\t\t\t\tfalse,\n\t\t\t\targs,\n\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\tfn\n\t\t\t);\n\t\t}\n\t};\n\n\t/** @type {{ args: any[], resolvers: Array<{resolve: (value: any) => void, reject: (error: any) => void}> }} */\n\tlet batching = { args: [], resolvers: [] };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query.batch '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\tconst get_remote_function_result = () => {\n\t\t\t// Collect all the calls to the same query in the same macrotask,\n\t\t\t// then execute them as one backend request.\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// We don't need to deduplicate args here, because get_response already caches/reuses identical calls\n\t\t\t\tbatching.args.push(arg);\n\t\t\t\tbatching.resolvers.push({ resolve, reject });\n\n\t\t\t\tif (batching.args.length > 1) return;\n\n\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\tconst batched = batching;\n\t\t\t\t\tbatching = { args: [], resolvers: [] };\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst get_result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tbatched.args,\n\t\t\t\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\t\t\t\tfn\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let i = 0; i < batched.resolvers.length; i++) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].resolve(get_result(batched.args[i], i));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].reject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tfor (const resolver of batched.resolvers) {\n\t\t\t\t\t\t\tresolver.reject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t};\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, get_remote_function_result);\n\n\t\tpromise.catch(() => {});\n\n\t\tpromise.set = (value) => update_refresh_value(get_refresh_context(__, 'set', arg), value);\n\n\t\tpromise.refresh = () => {\n\t\t\tconst refresh_context = get_refresh_context(__, 'refresh', arg);\n\t\t\tconst is_immediate_refresh = !refresh_context.cache[refresh_context.cache_key];\n\t\t\tconst value = is_immediate_refresh ? promise : get_remote_function_result();\n\t\t\treturn update_refresh_value(refresh_context, value, is_immediate_refresh);\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n// Add batch as a property to the query function\nObject.defineProperty(query, 'batch', { value: batch, enumerable: true });\n\n/**\n * @param {RemoteInfo} __\n * @param {'set' | 'refresh'} action\n * @param {any} [arg]\n * @returns {{ __: RemoteInfo; state: any; refreshes: Record<string, Promise<any>>; cache: Record<string, Promise<any>>; refreshes_key: string; cache_key: string }}\n */\nfunction get_refresh_context(__, action, arg) {\n\tconst { state } = get_request_store();\n\tconst { refreshes } = state;\n\n\tif (!refreshes) {\n\t\tconst name = __.type === 'query_batch' ? `query.batch '${__.name}'` : `query '${__.name}'`;\n\t\tthrow new Error(\n\t\t\t`Cannot call ${action} on ${name} because it is not executed in the context of a command/form remote function`\n\t\t);\n\t}\n\n\tconst cache = get_cache(__, state);\n\tconst cache_key = stringify_remote_arg(arg, state.transport);\n\tconst refreshes_key = create_remote_key(__.id, cache_key);\n\n\treturn { __, state, refreshes, refreshes_key, cache, cache_key };\n}\n\n/**\n * @param {{ __: RemoteInfo; refreshes: Record<string, Promise<any>>; cache: Record<string, Promise<any>>; refreshes_key: string; cache_key: string }} context\n * @param {any} value\n * @param {boolean} [is_immediate_refresh=false]\n * @returns {Promise<void>}\n */\nfunction update_refresh_value(\n\t{ __, refreshes, refreshes_key, cache, cache_key },\n\tvalue,\n\tis_immediate_refresh = false\n) {\n\tconst promise = Promise.resolve(value);\n\n\tif (!is_immediate_refresh) {\n\t\tcache[cache_key] = promise;\n\t}\n\n\tif (__.id) {\n\t\trefreshes[refreshes_key] = promise;\n\t}\n\n\treturn promise.then(() => {});\n}\n","import { getContext } from 'svelte';\nimport { BROWSER, DEV } from 'esm-env';\nimport { stores as browser_stores } from '../client/client.js';\n\n/**\n * A function that returns all of the contextual stores. On the server, this must be called during component initialization.\n * Only use this if you need to defer store subscription until after the component has mounted, for some reason.\n *\n * @deprecated Use `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n */\nexport const getStores = () => {\n\tconst stores = BROWSER ? browser_stores : getContext('__svelte__');\n\n\treturn {\n\t\t/** @type {typeof page} */\n\t\tpage: {\n\t\t\tsubscribe: stores.page.subscribe\n\t\t},\n\t\t/** @type {typeof navigating} */\n\t\tnavigating: {\n\t\t\tsubscribe: stores.navigating.subscribe\n\t\t},\n\t\t/** @type {typeof updated} */\n\t\tupdated: stores.updated\n\t};\n};\n\n/**\n * A readable store whose value contains page data.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `page` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Page>}\n */\nexport const page = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('page') : getStores().page;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store.\n * When navigating starts, its value is a `Navigation` object with `from`, `to`, `type` and (if `type === 'popstate'`) `delta` properties.\n * When navigating finishes, its value reverts to `null`.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `navigating` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Navigation | null>}\n */\nexport const navigating = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('navigating') : getStores().navigating;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store whose initial value is `false`. If [`version.pollInterval`](https://svelte.dev/docs/kit/configuration#version) is a non-zero value, SvelteKit will poll for new versions of the app and update the store value to `true` when it detects one. `updated.check()` will force an immediate check, regardless of polling.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `updated` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<boolean> & { check(): Promise<boolean> }}\n */\nexport const updated = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('updated') : getStores().updated;\n\n\t\tif (BROWSER) {\n\t\t\tupdated.check = store.check;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tcheck: () => {\n\t\tthrow new Error(\n\t\t\tBROWSER\n\t\t\t\t? 'Cannot check updated store before subscribing'\n\t\t\t\t: 'Can only check updated store in browser'\n\t\t);\n\t}\n};\n\n/**\n * @template {keyof ReturnType<typeof getStores>} Name\n * @param {Name} name\n * @returns {ReturnType<typeof getStores>[Name]}\n */\nfunction get_store(name) {\n\ttry {\n\t\treturn getStores()[name];\n\t} catch {\n\t\tthrow new Error(\n\t\t\t`Cannot subscribe to '${name}' store on the server outside of a Svelte component, as it is bound to the current request via component context. This prevents state from leaking between users.` +\n\t\t\t\t'For more information, see https://svelte.dev/docs/kit/state-management#avoid-shared-state-on-the-server'\n\t\t);\n\t}\n}\n"],"names":["with_resolvers","resolve","reject","promise","Promise","res","rej","NULL_BODY_STATUS","IN_WEBCONTAINER","globalThis","process","versions","webcontainer","base","assets","app_dir","initial","reset","set_assets","path","ENDPOINT_METHODS","PAGE_METHODS","text_encoder","TextEncoder","text_decoder","TextDecoder","base64_encode","bytes","Buffer","from","toString","binary","i","length","String","fromCharCode","btoa","set_nested_value","object","path_string","value","startsWith","slice","parseFloat","deep_set","path_regex","test","Error","split","filter","Boolean","split_path","convert_formdata","data","result","key","keys","is_array","endsWith","values","getAll","entry","name","size","map","v","BINARY_FORM_CONTENT_TYPE","async","deserialize_binary_form","request","headers","get","form_data","formData","meta","body","reader","getReader","chunks","get_chunk","index","read","then","chunk","get_buffer","offset","start_chunk","chunk_index","chunk_start","chunk_end","byteLength","subarray","buffer","Uint8Array","set","cursor","header","header_view","DataView","data_length","getUint32","file_offsets_length","getUint16","data_buffer","file_offsets","files_start_offset","file_offsets_buffer","JSON","parse","decode","devalue.parse","File","type","last_modified","Proxy","LazyFile","getPrototypeOf","prototype","has_more","constructor","this","lastModified","webkitRelativePath","arrayBuffer","bind","stream","text","Response","start","end","contentType","Math","max","min","ReadableStream","controller","enqueue","close","pull","error","check_prototype_pollution","current","exists","inner","Array","isArray","final_key","normalize_issue","issue","server","normalized","message","segment","push","create_field_proxy","target","get_input","set_input","get_issues","get_value","deep_get","prop","parseInt","build_path_string","newValue","all_issues","input_value","base_props","issues","Object","defineProperties","enumerable","multiple","checked","includes","files","DataTransfer","fileList","items","add","every","f","forEach","file","fileListLike","negotiate","accept","types","parts","accepted","str","match","exec","subtype","q","sort","a","b","min_priority","Infinity","mimetype","priority","findIndex","part","is_form_content_type","trim","toLowerCase","is_content_type","normalize_error","get_status","HttpError","SvelteKitError","status","public_env","set_private_env","environment","set_public_env","escape_html_attr_dict","escape_html_dict","surrogates","escape_html_attr_regex","RegExp","join","escape_html_regex","escape_html","is_attr","dict","replace","charCodeAt","method_not_allowed","mod","method","allow","allowed_methods","allowed","get_global_name","options","version_hash","static_error_page","page","templates","handle_fatal_error","event","state","err","stringify","handle_error_and_jsonify","isDataRequest","json","get_message","with_request_store","hooks","handleError","redirect_response","location","clarify_devalue_error","route","id","serialize_uses","node","uses","dependencies","search_params","params","parent","url","has_prerendered_path","manifest","pathname","_","prerendered_routes","has","at","get_node_type","node_id","filename","compact","arr","val","DATA_SUFFIX","HTML_DATA_SUFFIX","add_data_suffix","ROUTE_SUFFIX","add_resolution_suffix","noop_span","spanContext","noop_span_context","setAttribute","setAttributes","addEvent","setStatus","updateName","isRecording","recordException","addLink","addLinks","traceId","spanId","traceFlags","record_span","attributes","fn","is_action_json_request","check_incorrect_fail_use","ActionFailure","action_json_redirect","redirect","action_json","init","check_named_default_separate","actions","default","call_action","event_state","URL","param","searchParams","action","traced_event","merge_tracing","stringify_action_response","route_id","transport","encoders","fromEntries","entries","encode","try_serialize","devalue.stringify","e","create_async_iterator","resolved","returned","deferred","iterate","transform","x","Symbol","asyncIterator","next","done","server_data_serializer","promise_id","max_nodes","iterator","global","strings","set_max_nodes","add_node","payload","slash","devalue.uneval","replacer","thing","catch","encoded","get_data","csp","open","script_needs_nonce","nonce","server_data_serializer_json","reducers","internal","protocol","search","hash","href","normalize_path","trailing_slash","decode_params","decodeURIComponent","make_trackable","callback","search_params_callback","allow_hash","tracked","defineProperty","obj","Reflect","configurable","tracked_url_properties","property","for","depth","opts","inspect","allow_nodejs_console_log","disable_hash","disable_search","INVALIDATED_PARAM","TRAILING_SLASH_PARAM","k","stringify_remote_arg","json_string","replaceAll","parse_remote_arg","string","atob","base64_decode","decoders","create_remote_key","load_server_data","is_tracking","Set","load","trailingSlash","prerendering","server_id","call","fetch","info","Request","depends","deps","dep","untrack","load_data","fetched","server_data_promise","resolve_opts","csr","server_data_node","universal","universal_id","create_universal_fetch","setHeaders","tracing","universal_fetch","input","cloned_body","clone","cloned_headers","Headers","response","same_origin","origin","dependency","teed_body","mode","statusText","acao","proxy","receiver","push_fetched","is_b64","status_number","Number","isNaN","request_body","stream_to_string","request_headers","response_body","tee","combined","ArrayBuffer","Function","apply","arguments","lower","filterSerializedResponseHeaders","isView","TypeError","byteOffset","replacements","pattern","s","sha256","frac","floor","prime","is_prime","factor","precompute","out","array","ceil","reverse_endianness","words","Uint32Array","w","tmp","out0","out1","out2","out3","out4","out5","out6","out7","c","d","quoted","crypto_pattern","BaseProvider","use_hashes","script_needs_csp","script_src_needs_csp","script_src_elem_needs_csp","style_needs_csp","style_src_needs_csp","style_src_attr_needs_csp","style_src_elem_needs_csp","directives","script_src","script_src_elem","style_src","style_src_attr","style_src_elem","effective_script_src","effective_style_src","needs_csp","directive","some","style_needs_nonce","add_script","content","source","add_style","sha256_empty_comment_hash","get_header","is_meta","CspProvider","get_meta","CspReportOnlyProvider","super","has_report_to","has_report_uri","Csp","crypto","getRandomValues","generate_nonce","csp_provider","report_only_provider","reportOnly","prerender","matchers","values_needing_match","buffered","chained","rest","matcher","next_param","next_value","optional","generate_route_object","errors","layouts","leaf","nodes","l","n","create_client_import","client","import_path","to","from_parts","to_parts","pop","shift","concat","get_relative_path","create_server_routing_response","csr_route","css","node_css","css_path","create_css_import","updated","readable","check","render_response","branch","page_config","action_result","data_serializer","app_template_contains_nonce","modulepreloads","imports","stylesheets","fonts","link_headers","link_tags","inline_styles","Map","rendered","form_value","paths.base","paths.assets","base_expression","fallback","hash_routing","segments","ssr","props","stores","writable","navigating","constructors","all","component","form","render_opts","context","paths","maybe_promise","root","render","r","paths.reset","head","html","inline","code","prefixed","style","preload","encodeURI","ext","lastIndexOf","item","cache_control","age","varyAny","safe_payload","attrs","ttl","serialize_data","routes","find","uses_env_dynamic_public","paths.app_dir","included_modulepreloads","preload_strategy","tag","blocks","load_env_eagerly","properties","app_declaration","app","prelude","args","serialized","uneval_action_response","hydrate","stringified","embedded","indent","repeat","remote_data","remote_cache","serialized_remote_data","remote","cache","boot","script","service_worker","service_worker_options","init_app","http_equiv","csp_headers","csp_header","report_only_header","env","transformed","transformPageChunk","validator","expected","module","hint","hint_for_supported_files","supported_files","valid_layout_exports","valid_page_exports","valid_layout_server_exports","valid_page_server_exports","valid_server_exports","validate_layout_exports","validate_page_exports","validate_layout_server_exports","validate_page_server_exports","PageNodes","validate","layout","get_option","option","reduce","get_config","config","should_prerender_data","respond_with_error","default_layout","server_data","Redirect","handle_remote_call","additional_args","remotes","__","form_client_refreshes","payloads","get_result","run","results","arg","refreshes","serialize_refreshes","remote_refreshes","client_refreshes","loader","handle_remote_call_internal","handle_remote_form_post","action_id","handle_remote_form_post_internal","render_page","no_actions_error","handle_action_json_request","leaf_node","is_action_request","remote_id","handle_action_request","should_prerender","prerender_default","data_pathname","DEV","load_error","data_serializer_json","server_promises","j","assign","load_promises","p","json_response","redirect_json_response","INVALID_COOKIE_CHARACTER_REGEX","validate_options","get_cookies","initial_cookies","normalized_url","new_cookies","defaults","httpOnly","sameSite","secure","hostname","cookies","best_match","domain_matches","domain","path_matches","maxAge","lookup","existing","set_internal","serialize","internal_queue","cookie_key","encodeURIComponent","generate_cookie_key","cookie","get_cookie_header","destination","combined_cookies","encoder","parsed","set_trailing_slash","constraint","add_cookies_to_headers","new_cookie","append","etag","create_fetch","server_fetch","original_request","normalize_fetch_input","credentials","handleFetch","delete","prefix","decoded","filename_html","is_asset","server_assets","is_asset_html","mimeTypes","read_implementation","authorization","signal","aborted","DOMException","remove_abort_listener","abort_promise","on_abort","addEventListener","once","removeEventListener","race","respond","internal_fetch","set_cookie","set_cookie_parser.splitCookiesString","set_cookie_parser.parseString","decodeValues","default_transform","default_filter","default_preload","page_methods","allowed_page_methods","is_route_resolution_request","is_data_request","has_data_suffix","get_remote_id","request_origin","csrf_check_origin","csrf_trusted_origins","invalidated_data_nodes","strip_resolution_suffix","strip_data_suffix","handleValidationError","is_in_remote_function","getClientAddress","locals","platform","new_headers","isSubRequest","isRemoteRequest","emulator","resolved_path","prerendering_reroute_state","inside_reroute","reroute","decodeURI","decode_pathname","candidate","matched","resolve_route","Date","now","get_public_env","page_nodes","load_page_nodes","endpoint","before_handle","root_span","enabled","handle","resolve_span","node_ids","invalidated","new_event","functions","promises","render_data","is_endpoint_request","acc","curr","handler","HEAD","GET","POST","PATCH","PUT","DELETE","cloned","render_endpoint","vary","if_none_match_value","substring","req","env_public_prefix","env_private_prefix","asClassComponent","data_0","data_1","data_2","setContext","Pyramid_2","Pyramid_0","Pyramid_1","$$renderer","get_hooks","filter_env","disallowed","init_promise","Server","previous","finally","set_read_implementation","formatted_text","stack","format_server_error","create_validator","validate_or_fn","maybe_fn","get_request_store","get_response","get_cache","run_remote_function","allow_cookies","store","validated","command","wrapper","updates","schema","create_instance","instance","button_props","onclick","formaction","buttonProps","output","validate_only","handle_issues","create_issue","create_issue_proxy","new_path","create_issues","ValidationError","$","flatten_issues","submission","cache_key","form_instances","fn_or_options","maybe_options","has_arg","inputs","dynamic","ok","prerendered","revivers","parse_remote_response","remote_responses","query","get_remote_function_result","update_refresh_value","get_refresh_context","refresh","refresh_context","is_immediate_refresh","withOverride","refreshes_key","batching","resolvers","setTimeout","batched","resolver","subscribe","getContext","getStores"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,44,45,46,47,48,49,50,51]}