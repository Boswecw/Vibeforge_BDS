{"version":3,"file":"vendor.js","sources":["../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/promise.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/constants.js","../../../../node_modules/.pnpm/esm-env@1.2.2/node_modules/esm-env/false.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/paths/internal/server.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/constants.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/utils.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/uneval.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/base64.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/parse.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/constants.js","../../../../node_modules/.pnpm/devalue@5.5.0/node_modules/devalue/src/stringify.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/form-utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/http.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/error.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared-server.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/escape.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/utils.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/array.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/pathname.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/telemetry/noop.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/telemetry/record_span.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/actions.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/streaming.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/data_serializer.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/url.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/load_data.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/shared/utils.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/reactivity/equality.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/constants.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/constants.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/hydration.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/flags/index.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/context.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/task.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/error-handling.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/reactivity/batch.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/errors.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/reactivity/create-subscriber.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/reactivity/effects.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/blocks/boundary.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/reactivity/deriveds.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/reactivity/sources.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/runtime.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/proxy.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/operations.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/utils.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/elements/events.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/render.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/client/dom/template.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/escaping.js","../../../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/shared/attributes.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/legacy/legacy-client.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/store/shared/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/hash.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/serialize_data.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/misc.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/crypto.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/csp.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/routing.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/server_routing.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/render.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/exports.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/page_nodes.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/respond_with_error.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/remote.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/page/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/data/index.js","../../../../node_modules/.pnpm/cookie@0.6.0/node_modules/cookie/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/cookie.js","../../../../node_modules/.pnpm/set-cookie-parser@2.7.2/node_modules/set-cookie-parser/lib/set-cookie.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/env_module.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/fetch.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/respond.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/functions.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/endpoint.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/hydration.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/abort-signal.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/context.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/shared/errors.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/warnings.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/render-context.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/errors.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/renderer.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/internal/server/index.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/store/utils.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/index-server.js","../../../generated/root.js","../../../generated/server/internal.js","../../../../node_modules/.pnpm/svelte@5.45.6/node_modules/svelte/src/legacy/legacy-server.js","../../../generated/root.svelte","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/utils/env.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/server/index.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/shared.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/command.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/form.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/prerender.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/server/remote/query.js","../../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/app/stores.js"],"sourcesContent":["/** @see https://github.com/microsoft/TypeScript/blob/904e7dd97dc8da1352c8e05d70829dff17c73214/src/lib/es2024.promise.d.ts */\n\n/**\n * @template T\n * @typedef {{\n *   promise: Promise<T>;\n *   resolve: (value: T | PromiseLike<T>) => void;\n *   reject: (reason?: any) => void;\n * }} PromiseWithResolvers<T>\n */\n\n/**\n * TODO: Whenever Node >21 is minimum supported version, we can use `Promise.withResolvers` to avoid this ceremony\n *\n * @template T\n * @returns {PromiseWithResolvers<T>}\n */\nexport function with_resolvers() {\n\tlet resolve;\n\tlet reject;\n\n\tconst promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error `resolve` and `reject` are assigned!\n\treturn { promise, resolve, reject };\n}\n","export const NULL_BODY_STATUS = [101, 103, 204, 205, 304];\n\n// eslint-disable-next-line n/prefer-global/process\nexport const IN_WEBCONTAINER = !!globalThis.process?.versions?.webcontainer;\n","export default false;\n","export let base = __SVELTEKIT_PATHS_BASE__;\nexport let assets = __SVELTEKIT_PATHS_ASSETS__ || base;\nexport const app_dir = __SVELTEKIT_APP_DIR__;\nexport const relative = __SVELTEKIT_PATHS_RELATIVE__;\n\nconst initial = { base, assets };\n\n/**\n * `base` could be overridden during rendering to be relative;\n * this one's the original non-relative base path\n */\nexport const initial_base = initial.base;\n\n/**\n * @param {{ base: string, assets: string }} paths\n */\nexport function override(paths) {\n\tbase = paths.base;\n\tassets = paths.assets;\n}\n\nexport function reset() {\n\tbase = initial.base;\n\tassets = initial.assets;\n}\n\n/** @param {string} path */\nexport function set_assets(path) {\n\tassets = initial.assets = path;\n}\n","/**\n * A fake asset path used in `vite dev` and `vite preview`, so that we can\n * serve local assets while verifying that requests are correctly prefixed\n */\nexport const SVELTE_KIT_ASSETS = '/_svelte_kit_assets';\n\nexport const GENERATED_COMMENT = '// this file is generated — do not edit it\\n';\n\nexport const ENDPOINT_METHODS = ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS', 'HEAD'];\n\nexport const PAGE_METHODS = ['GET', 'POST', 'HEAD'];\n","/** @type {Record<string, string>} */\nexport const escaped = {\n\t'<': '\\\\u003C',\n\t'\\\\': '\\\\\\\\',\n\t'\\b': '\\\\b',\n\t'\\f': '\\\\f',\n\t'\\n': '\\\\n',\n\t'\\r': '\\\\r',\n\t'\\t': '\\\\t',\n\t'\\u2028': '\\\\u2028',\n\t'\\u2029': '\\\\u2029'\n};\n\nexport class DevalueError extends Error {\n\t/**\n\t * @param {string} message\n\t * @param {string[]} keys\n\t */\n\tconstructor(message, keys) {\n\t\tsuper(message);\n\t\tthis.name = 'DevalueError';\n\t\tthis.path = keys.join('');\n\t}\n}\n\n/** @param {any} thing */\nexport function is_primitive(thing) {\n\treturn Object(thing) !== thing;\n}\n\nconst object_proto_names = /* @__PURE__ */ Object.getOwnPropertyNames(\n\tObject.prototype\n)\n\t.sort()\n\t.join('\\0');\n\n/** @param {any} thing */\nexport function is_plain_object(thing) {\n\tconst proto = Object.getPrototypeOf(thing);\n\n\treturn (\n\t\tproto === Object.prototype ||\n\t\tproto === null ||\n\t\tObject.getPrototypeOf(proto) === null ||\n\t\tObject.getOwnPropertyNames(proto).sort().join('\\0') === object_proto_names\n\t);\n}\n\n/** @param {any} thing */\nexport function get_type(thing) {\n\treturn Object.prototype.toString.call(thing).slice(8, -1);\n}\n\n/** @param {string} char */\nfunction get_escaped_char(char) {\n\tswitch (char) {\n\t\tcase '\"':\n\t\t\treturn '\\\\\"';\n\t\tcase '<':\n\t\t\treturn '\\\\u003C';\n\t\tcase '\\\\':\n\t\t\treturn '\\\\\\\\';\n\t\tcase '\\n':\n\t\t\treturn '\\\\n';\n\t\tcase '\\r':\n\t\t\treturn '\\\\r';\n\t\tcase '\\t':\n\t\t\treturn '\\\\t';\n\t\tcase '\\b':\n\t\t\treturn '\\\\b';\n\t\tcase '\\f':\n\t\t\treturn '\\\\f';\n\t\tcase '\\u2028':\n\t\t\treturn '\\\\u2028';\n\t\tcase '\\u2029':\n\t\t\treturn '\\\\u2029';\n\t\tdefault:\n\t\t\treturn char < ' '\n\t\t\t\t? `\\\\u${char.charCodeAt(0).toString(16).padStart(4, '0')}`\n\t\t\t\t: '';\n\t}\n}\n\n/** @param {string} str */\nexport function stringify_string(str) {\n\tlet result = '';\n\tlet last_pos = 0;\n\tconst len = str.length;\n\n\tfor (let i = 0; i < len; i += 1) {\n\t\tconst char = str[i];\n\t\tconst replacement = get_escaped_char(char);\n\t\tif (replacement) {\n\t\t\tresult += str.slice(last_pos, i) + replacement;\n\t\t\tlast_pos = i + 1;\n\t\t}\n\t}\n\n\treturn `\"${last_pos === 0 ? str : result + str.slice(last_pos)}\"`;\n}\n\n/** @param {Record<string | symbol, any>} object */\nexport function enumerable_symbols(object) {\n\treturn Object.getOwnPropertySymbols(object).filter(\n\t\t(symbol) => Object.getOwnPropertyDescriptor(object, symbol).enumerable\n\t);\n}\n\nconst is_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/** @param {string} key */\nexport function stringify_key(key) {\n\treturn is_identifier.test(key) ? '.' + key : '[' + JSON.stringify(key) + ']';\n}\n","import {\n\tDevalueError,\n\tenumerable_symbols,\n\tescaped,\n\tget_type,\n\tis_plain_object,\n\tis_primitive,\n\tstringify_key,\n\tstringify_string\n} from './utils.js';\n\nconst chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$';\nconst unsafe_chars = /[<\\b\\f\\n\\r\\t\\0\\u2028\\u2029]/g;\nconst reserved =\n\t/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;\n\n/**\n * Turn a value into the JavaScript that creates an equivalent value\n * @param {any} value\n * @param {(value: any, uneval: (value: any) => string) => string | void} [replacer]\n */\nexport function uneval(value, replacer) {\n\tconst counts = new Map();\n\n\t/** @type {string[]} */\n\tconst keys = [];\n\n\tconst custom = new Map();\n\n\t/** @param {any} thing */\n\tfunction walk(thing) {\n\t\tif (!is_primitive(thing)) {\n\t\t\tif (counts.has(thing)) {\n\t\t\t\tcounts.set(thing, counts.get(thing) + 1);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcounts.set(thing, 1);\n\n\t\t\tif (replacer) {\n\t\t\t\tconst str = replacer(thing, (value) => uneval(value, replacer));\n\n\t\t\t\tif (typeof str === 'string') {\n\t\t\t\t\tcustom.set(thing, str);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof thing === 'function') {\n\t\t\t\tthrow new DevalueError(`Cannot stringify a function`, keys);\n\t\t\t}\n\n\t\t\tconst type = get_type(thing);\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'BigInt':\n\t\t\t\tcase 'String':\n\t\t\t\tcase 'Boolean':\n\t\t\t\tcase 'Date':\n\t\t\t\tcase 'RegExp':\n\t\t\t\tcase 'URL':\n\t\t\t\tcase 'URLSearchParams':\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\t/** @type {any[]} */ (thing).forEach((value, i) => {\n\t\t\t\t\t\tkeys.push(`[${i}]`);\n\t\t\t\t\t\twalk(value);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Set':\n\t\t\t\t\tArray.from(thing).forEach(walk);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Map':\n\t\t\t\t\tfor (const [key, value] of thing) {\n\t\t\t\t\t\tkeys.push(\n\t\t\t\t\t\t\t`.get(${is_primitive(key) ? stringify_primitive(key) : '...'})`\n\t\t\t\t\t\t);\n\t\t\t\t\t\twalk(value);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Int8Array':\n\t\t\t\tcase 'Uint8Array':\n\t\t\t\tcase 'Uint8ClampedArray':\n\t\t\t\tcase 'Int16Array':\n\t\t\t\tcase 'Uint16Array':\n\t\t\t\tcase 'Int32Array':\n\t\t\t\tcase 'Uint32Array':\n\t\t\t\tcase 'Float32Array':\n\t\t\t\tcase 'Float64Array':\n\t\t\t\tcase 'BigInt64Array':\n\t\t\t\tcase 'BigUint64Array':\n\t\t\t\t\twalk(thing.buffer);\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'ArrayBuffer':\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'Temporal.Duration':\n\t\t\t\tcase 'Temporal.Instant':\n\t\t\t\tcase 'Temporal.PlainDate':\n\t\t\t\tcase 'Temporal.PlainTime':\n\t\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\t\tcase 'Temporal.ZonedDateTime':\n\t\t\t\t\treturn;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!is_plain_object(thing)) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify arbitrary non-POJOs`,\n\t\t\t\t\t\t\tkeys\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (enumerable_symbols(thing).length > 0) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify POJOs with symbolic keys`,\n\t\t\t\t\t\t\tkeys\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const key in thing) {\n\t\t\t\t\t\tkeys.push(stringify_key(key));\n\t\t\t\t\t\twalk(thing[key]);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\twalk(value);\n\n\tconst names = new Map();\n\n\tArray.from(counts)\n\t\t.filter((entry) => entry[1] > 1)\n\t\t.sort((a, b) => b[1] - a[1])\n\t\t.forEach((entry, i) => {\n\t\t\tnames.set(entry[0], get_name(i));\n\t\t});\n\n\t/**\n\t * @param {any} thing\n\t * @returns {string}\n\t */\n\tfunction stringify(thing) {\n\t\tif (names.has(thing)) {\n\t\t\treturn names.get(thing);\n\t\t}\n\n\t\tif (is_primitive(thing)) {\n\t\t\treturn stringify_primitive(thing);\n\t\t}\n\n\t\tif (custom.has(thing)) {\n\t\t\treturn custom.get(thing);\n\t\t}\n\n\t\tconst type = get_type(thing);\n\n\t\tswitch (type) {\n\t\t\tcase 'Number':\n\t\t\tcase 'String':\n\t\t\tcase 'Boolean':\n\t\t\t\treturn `Object(${stringify(thing.valueOf())})`;\n\n\t\t\tcase 'RegExp':\n\t\t\t\treturn `new RegExp(${stringify_string(thing.source)}, \"${\n\t\t\t\t\tthing.flags\n\t\t\t\t}\")`;\n\n\t\t\tcase 'Date':\n\t\t\t\treturn `new Date(${thing.getTime()})`;\n\n\t\t\tcase 'URL':\n\t\t\t\treturn `new URL(${stringify_string(thing.toString())})`;\n\n\t\t\tcase 'URLSearchParams':\n\t\t\t\treturn `new URLSearchParams(${stringify_string(thing.toString())})`;\n\n\t\t\tcase 'Array':\n\t\t\t\tconst members = /** @type {any[]} */ (thing).map((v, i) =>\n\t\t\t\t\ti in thing ? stringify(v) : ''\n\t\t\t\t);\n\t\t\t\tconst tail = thing.length === 0 || thing.length - 1 in thing ? '' : ',';\n\t\t\t\treturn `[${members.join(',')}${tail}]`;\n\n\t\t\tcase 'Set':\n\t\t\tcase 'Map':\n\t\t\t\treturn `new ${type}([${Array.from(thing).map(stringify).join(',')}])`;\n\n\t\t\tcase 'Int8Array':\n\t\t\tcase 'Uint8Array':\n\t\t\tcase 'Uint8ClampedArray':\n\t\t\tcase 'Int16Array':\n\t\t\tcase 'Uint16Array':\n\t\t\tcase 'Int32Array':\n\t\t\tcase 'Uint32Array':\n\t\t\tcase 'Float32Array':\n\t\t\tcase 'Float64Array':\n\t\t\tcase 'BigInt64Array':\n\t\t\tcase 'BigUint64Array': {\n\t\t\t\tlet str = `new ${type}`;\n\n\t\t\t\tif (counts.get(thing.buffer) === 1) {\n\t\t\t\t\tconst array = new thing.constructor(thing.buffer);\n\t\t\t\t\tstr += `([${array}])`;\n\t\t\t\t} else {\n\t\t\t\t\tstr += `([${stringify(thing.buffer)}])`;\n\t\t\t\t}\n\n\t\t\t\tconst a = thing.byteOffset;\n\t\t\t\tconst b = a + thing.byteLength;\n\n\t\t\t\t// handle subarrays\n\t\t\t\tif (a > 0 || b !== thing.buffer.byteLength) {\n\t\t\t\t\tconst m = +/(\\d+)/.exec(type)[1] / 8;\n\t\t\t\t\tstr += `.subarray(${a / m},${b / m})`;\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tcase 'ArrayBuffer': {\n\t\t\t\tconst ui8 = new Uint8Array(thing);\n\t\t\t\treturn `new Uint8Array([${ui8.toString()}]).buffer`;\n\t\t\t}\n\n\t\t\tcase 'Temporal.Duration':\n\t\t\tcase 'Temporal.Instant':\n\t\t\tcase 'Temporal.PlainDate':\n\t\t\tcase 'Temporal.PlainTime':\n\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\tcase 'Temporal.ZonedDateTime':\n\t\t\t\treturn `${type}.from(${stringify_string(thing.toString())})`;\n\n\t\t\tdefault:\n\t\t\t\tconst keys = Object.keys(thing);\n\t\t\t\tconst obj = keys\n\t\t\t\t\t.map((key) => `${safe_key(key)}:${stringify(thing[key])}`)\n\t\t\t\t\t.join(',');\n\t\t\t\tconst proto = Object.getPrototypeOf(thing);\n\t\t\t\tif (proto === null) {\n\t\t\t\t\treturn keys.length > 0\n\t\t\t\t\t\t? `{${obj},__proto__:null}`\n\t\t\t\t\t\t: `{__proto__:null}`;\n\t\t\t\t}\n\n\t\t\t\treturn `{${obj}}`;\n\t\t}\n\t}\n\n\tconst str = stringify(value);\n\n\tif (names.size) {\n\t\t/** @type {string[]} */\n\t\tconst params = [];\n\n\t\t/** @type {string[]} */\n\t\tconst statements = [];\n\n\t\t/** @type {string[]} */\n\t\tconst values = [];\n\n\t\tnames.forEach((name, thing) => {\n\t\t\tparams.push(name);\n\n\t\t\tif (custom.has(thing)) {\n\t\t\t\tvalues.push(/** @type {string} */ (custom.get(thing)));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (is_primitive(thing)) {\n\t\t\t\tvalues.push(stringify_primitive(thing));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst type = get_type(thing);\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'String':\n\t\t\t\tcase 'Boolean':\n\t\t\t\t\tvalues.push(`Object(${stringify(thing.valueOf())})`);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RegExp':\n\t\t\t\t\tvalues.push(thing.toString());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Date':\n\t\t\t\t\tvalues.push(`new Date(${thing.getTime()})`);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tvalues.push(`Array(${thing.length})`);\n\t\t\t\t\t/** @type {any[]} */ (thing).forEach((v, i) => {\n\t\t\t\t\t\tstatements.push(`${name}[${i}]=${stringify(v)}`);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Set':\n\t\t\t\t\tvalues.push(`new Set`);\n\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t`${name}.${Array.from(thing)\n\t\t\t\t\t\t\t.map((v) => `add(${stringify(v)})`)\n\t\t\t\t\t\t\t.join('.')}`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Map':\n\t\t\t\t\tvalues.push(`new Map`);\n\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t`${name}.${Array.from(thing)\n\t\t\t\t\t\t\t.map(([k, v]) => `set(${stringify(k)}, ${stringify(v)})`)\n\t\t\t\t\t\t\t.join('.')}`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ArrayBuffer':\n\t\t\t\t\tvalues.push(\n\t\t\t\t\t\t`new Uint8Array([${new Uint8Array(thing).join(',')}]).buffer`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tvalues.push(\n\t\t\t\t\t\tObject.getPrototypeOf(thing) === null ? 'Object.create(null)' : '{}'\n\t\t\t\t\t);\n\t\t\t\t\tObject.keys(thing).forEach((key) => {\n\t\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t\t`${name}${safe_prop(key)}=${stringify(thing[key])}`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tstatements.push(`return ${str}`);\n\n\t\treturn `(function(${params.join(',')}){${statements.join(\n\t\t\t';'\n\t\t)}}(${values.join(',')}))`;\n\t} else {\n\t\treturn str;\n\t}\n}\n\n/** @param {number} num */\nfunction get_name(num) {\n\tlet name = '';\n\n\tdo {\n\t\tname = chars[num % chars.length] + name;\n\t\tnum = ~~(num / chars.length) - 1;\n\t} while (num >= 0);\n\n\treturn reserved.test(name) ? `${name}0` : name;\n}\n\n/** @param {string} c */\nfunction escape_unsafe_char(c) {\n\treturn escaped[c] || c;\n}\n\n/** @param {string} str */\nfunction escape_unsafe_chars(str) {\n\treturn str.replace(unsafe_chars, escape_unsafe_char);\n}\n\n/** @param {string} key */\nfunction safe_key(key) {\n\treturn /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key)\n\t\t? key\n\t\t: escape_unsafe_chars(JSON.stringify(key));\n}\n\n/** @param {string} key */\nfunction safe_prop(key) {\n\treturn /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key)\n\t\t? `.${key}`\n\t\t: `[${escape_unsafe_chars(JSON.stringify(key))}]`;\n}\n\n/** @param {any} thing */\nfunction stringify_primitive(thing) {\n\tif (typeof thing === 'string') return stringify_string(thing);\n\tif (thing === void 0) return 'void 0';\n\tif (thing === 0 && 1 / thing < 0) return '-0';\n\tconst str = String(thing);\n\tif (typeof thing === 'number') return str.replace(/^(-)?0\\./, '$1.');\n\tif (typeof thing === 'bigint') return thing + 'n';\n\treturn str;\n}\n","/**\n * Base64 Encodes an arraybuffer\n * @param {ArrayBuffer} arraybuffer\n * @returns {string}\n */\nexport function encode64(arraybuffer) {\n  const dv = new DataView(arraybuffer);\n  let binaryString = \"\";\n\n  for (let i = 0; i < arraybuffer.byteLength; i++) {\n    binaryString += String.fromCharCode(dv.getUint8(i));\n  }\n\n  return binaryToAscii(binaryString);\n}\n\n/**\n * Decodes a base64 string into an arraybuffer\n * @param {string} string\n * @returns {ArrayBuffer}\n */\nexport function decode64(string) {\n  const binaryString = asciiToBinary(string);\n  const arraybuffer = new ArrayBuffer(binaryString.length);\n  const dv = new DataView(arraybuffer);\n\n  for (let i = 0; i < arraybuffer.byteLength; i++) {\n    dv.setUint8(i, binaryString.charCodeAt(i));\n  }\n\n  return arraybuffer;\n}\n\nconst KEY_STRING =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n/**\n * Substitute for atob since it's deprecated in node.\n * Does not do any input validation.\n *\n * @see https://github.com/jsdom/abab/blob/master/lib/atob.js\n *\n * @param {string} data\n * @returns {string}\n */\nfunction asciiToBinary(data) {\n  if (data.length % 4 === 0) {\n    data = data.replace(/==?$/, \"\");\n  }\n\n  let output = \"\";\n  let buffer = 0;\n  let accumulatedBits = 0;\n\n  for (let i = 0; i < data.length; i++) {\n    buffer <<= 6;\n    buffer |= KEY_STRING.indexOf(data[i]);\n    accumulatedBits += 6;\n    if (accumulatedBits === 24) {\n      output += String.fromCharCode((buffer & 0xff0000) >> 16);\n      output += String.fromCharCode((buffer & 0xff00) >> 8);\n      output += String.fromCharCode(buffer & 0xff);\n      buffer = accumulatedBits = 0;\n    }\n  }\n  if (accumulatedBits === 12) {\n    buffer >>= 4;\n    output += String.fromCharCode(buffer);\n  } else if (accumulatedBits === 18) {\n    buffer >>= 2;\n    output += String.fromCharCode((buffer & 0xff00) >> 8);\n    output += String.fromCharCode(buffer & 0xff);\n  }\n  return output;\n}\n\n/**\n * Substitute for btoa since it's deprecated in node.\n * Does not do any input validation.\n *\n * @see https://github.com/jsdom/abab/blob/master/lib/btoa.js\n *\n * @param {string} str\n * @returns {string}\n */\nfunction binaryToAscii(str) {\n  let out = \"\";\n  for (let i = 0; i < str.length; i += 3) {\n    /** @type {[number, number, number, number]} */\n    const groupsOfSix = [undefined, undefined, undefined, undefined];\n    groupsOfSix[0] = str.charCodeAt(i) >> 2;\n    groupsOfSix[1] = (str.charCodeAt(i) & 0x03) << 4;\n    if (str.length > i + 1) {\n      groupsOfSix[1] |= str.charCodeAt(i + 1) >> 4;\n      groupsOfSix[2] = (str.charCodeAt(i + 1) & 0x0f) << 2;\n    }\n    if (str.length > i + 2) {\n      groupsOfSix[2] |= str.charCodeAt(i + 2) >> 6;\n      groupsOfSix[3] = str.charCodeAt(i + 2) & 0x3f;\n    }\n    for (let j = 0; j < groupsOfSix.length; j++) {\n      if (typeof groupsOfSix[j] === \"undefined\") {\n        out += \"=\";\n      } else {\n        out += KEY_STRING[groupsOfSix[j]];\n      }\n    }\n  }\n  return out;\n}\n","import { decode64 } from './base64.js';\nimport {\n\tHOLE,\n\tNAN,\n\tNEGATIVE_INFINITY,\n\tNEGATIVE_ZERO,\n\tPOSITIVE_INFINITY,\n\tUNDEFINED\n} from './constants.js';\n\n/**\n * Revive a value serialized with `devalue.stringify`\n * @param {string} serialized\n * @param {Record<string, (value: any) => any>} [revivers]\n */\nexport function parse(serialized, revivers) {\n\treturn unflatten(JSON.parse(serialized), revivers);\n}\n\n/**\n * Revive a value flattened with `devalue.stringify`\n * @param {number | any[]} parsed\n * @param {Record<string, (value: any) => any>} [revivers]\n */\nexport function unflatten(parsed, revivers) {\n\tif (typeof parsed === 'number') return hydrate(parsed, true);\n\n\tif (!Array.isArray(parsed) || parsed.length === 0) {\n\t\tthrow new Error('Invalid input');\n\t}\n\n\tconst values = /** @type {any[]} */ (parsed);\n\n\tconst hydrated = Array(values.length);\n\n\t/**\n\t * @param {number} index\n\t * @returns {any}\n\t */\n\tfunction hydrate(index, standalone = false) {\n\t\tif (index === UNDEFINED) return undefined;\n\t\tif (index === NAN) return NaN;\n\t\tif (index === POSITIVE_INFINITY) return Infinity;\n\t\tif (index === NEGATIVE_INFINITY) return -Infinity;\n\t\tif (index === NEGATIVE_ZERO) return -0;\n\n\t\tif (standalone || typeof index !== 'number') {\n\t\t\tthrow new Error(`Invalid input`);\n\t\t}\n\n\t\tif (index in hydrated) return hydrated[index];\n\n\t\tconst value = values[index];\n\n\t\tif (!value || typeof value !== 'object') {\n\t\t\thydrated[index] = value;\n\t\t} else if (Array.isArray(value)) {\n\t\t\tif (typeof value[0] === 'string') {\n\t\t\t\tconst type = value[0];\n\n\t\t\t\tconst reviver = revivers?.[type];\n\t\t\t\tif (reviver) {\n\t\t\t\t\tlet i = value[1];\n\t\t\t\t\tif (typeof i !== 'number') {\n\t\t\t\t\t\t// if it's not a number, it was serialized by a builtin reviver\n\t\t\t\t\t\t// so we need to munge it into the format expected by a custom reviver\n\t\t\t\t\t\ti = values.push(value[1]) - 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn (hydrated[index] = reviver(hydrate(i)));\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'Date':\n\t\t\t\t\t\thydrated[index] = new Date(value[1]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Set':\n\t\t\t\t\t\tconst set = new Set();\n\t\t\t\t\t\thydrated[index] = set;\n\t\t\t\t\t\tfor (let i = 1; i < value.length; i += 1) {\n\t\t\t\t\t\t\tset.add(hydrate(value[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Map':\n\t\t\t\t\t\tconst map = new Map();\n\t\t\t\t\t\thydrated[index] = map;\n\t\t\t\t\t\tfor (let i = 1; i < value.length; i += 2) {\n\t\t\t\t\t\t\tmap.set(hydrate(value[i]), hydrate(value[i + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RegExp':\n\t\t\t\t\t\thydrated[index] = new RegExp(value[1], value[2]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\thydrated[index] = Object(value[1]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BigInt':\n\t\t\t\t\t\thydrated[index] = BigInt(value[1]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'null':\n\t\t\t\t\t\tconst obj = Object.create(null);\n\t\t\t\t\t\thydrated[index] = obj;\n\t\t\t\t\t\tfor (let i = 1; i < value.length; i += 2) {\n\t\t\t\t\t\t\tobj[value[i]] = hydrate(value[i + 1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Int8Array':\n\t\t\t\t\tcase 'Uint8Array':\n\t\t\t\t\tcase 'Uint8ClampedArray':\n\t\t\t\t\tcase 'Int16Array':\n\t\t\t\t\tcase 'Uint16Array':\n\t\t\t\t\tcase 'Int32Array':\n\t\t\t\t\tcase 'Uint32Array':\n\t\t\t\t\tcase 'Float32Array':\n\t\t\t\t\tcase 'Float64Array':\n\t\t\t\t\tcase 'BigInt64Array':\n\t\t\t\t\tcase 'BigUint64Array': {\n\t\t\t\t\t\tconst TypedArrayConstructor = globalThis[type];\n\t\t\t\t\t\tconst typedArray = new TypedArrayConstructor(hydrate(value[1]));\n\n\t\t\t\t\t\thydrated[index] =\n\t\t\t\t\t\t\tvalue[2] !== undefined\n\t\t\t\t\t\t\t\t? typedArray.subarray(value[2], value[3])\n\t\t\t\t\t\t\t\t: typedArray;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'ArrayBuffer': {\n\t\t\t\t\t\tconst base64 = value[1];\n\t\t\t\t\t\tconst arraybuffer = decode64(base64);\n\t\t\t\t\t\thydrated[index] = arraybuffer;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'Temporal.Duration':\n\t\t\t\t\tcase 'Temporal.Instant':\n\t\t\t\t\tcase 'Temporal.PlainDate':\n\t\t\t\t\tcase 'Temporal.PlainTime':\n\t\t\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\t\t\tcase 'Temporal.ZonedDateTime': {\n\t\t\t\t\t\tconst temporalName = type.slice(9);\n\t\t\t\t\t\t// @ts-expect-error TS doesn't know about Temporal yet\n\t\t\t\t\t\thydrated[index] = Temporal[temporalName].from(value[1]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'URL': {\n\t\t\t\t\t\tconst url = new URL(value[1]);\n\t\t\t\t\t\thydrated[index] = url;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'URLSearchParams': {\n\t\t\t\t\t\tconst url = new URLSearchParams(value[1]);\n\t\t\t\t\t\thydrated[index] = url;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(`Unknown type ${type}`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst array = new Array(value.length);\n\t\t\t\thydrated[index] = array;\n\n\t\t\t\tfor (let i = 0; i < value.length; i += 1) {\n\t\t\t\t\tconst n = value[i];\n\t\t\t\t\tif (n === HOLE) continue;\n\n\t\t\t\t\tarray[i] = hydrate(n);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t/** @type {Record<string, any>} */\n\t\t\tconst object = {};\n\t\t\thydrated[index] = object;\n\n\t\t\tfor (const key in value) {\n\t\t\t\tif (key === '__proto__') {\n\t\t\t\t\tthrow new Error('Cannot parse an object with a `__proto__` property');\n\t\t\t\t}\n\n\t\t\t\tconst n = value[key];\n\t\t\t\tobject[key] = hydrate(n);\n\t\t\t}\n\t\t}\n\n\t\treturn hydrated[index];\n\t}\n\n\treturn hydrate(0);\n}\n","export const UNDEFINED = -1;\nexport const HOLE = -2;\nexport const NAN = -3;\nexport const POSITIVE_INFINITY = -4;\nexport const NEGATIVE_INFINITY = -5;\nexport const NEGATIVE_ZERO = -6;\n","import {\n\tDevalueError,\n\tenumerable_symbols,\n\tget_type,\n\tis_plain_object,\n\tis_primitive,\n\tstringify_key,\n\tstringify_string\n} from './utils.js';\nimport {\n\tHOLE,\n\tNAN,\n\tNEGATIVE_INFINITY,\n\tNEGATIVE_ZERO,\n\tPOSITIVE_INFINITY,\n\tUNDEFINED\n} from './constants.js';\nimport { encode64 } from './base64.js';\n\n/**\n * Turn a value into a JSON string that can be parsed with `devalue.parse`\n * @param {any} value\n * @param {Record<string, (value: any) => any>} [reducers]\n */\nexport function stringify(value, reducers) {\n\t/** @type {any[]} */\n\tconst stringified = [];\n\n\t/** @type {Map<any, number>} */\n\tconst indexes = new Map();\n\n\t/** @type {Array<{ key: string, fn: (value: any) => any }>} */\n\tconst custom = [];\n\tif (reducers) {\n\t\tfor (const key of Object.getOwnPropertyNames(reducers)) {\n\t\t\tcustom.push({ key, fn: reducers[key] });\n\t\t}\n\t}\n\n\t/** @type {string[]} */\n\tconst keys = [];\n\n\tlet p = 0;\n\n\t/** @param {any} thing */\n\tfunction flatten(thing) {\n\t\tif (thing === undefined) return UNDEFINED;\n\t\tif (Number.isNaN(thing)) return NAN;\n\t\tif (thing === Infinity) return POSITIVE_INFINITY;\n\t\tif (thing === -Infinity) return NEGATIVE_INFINITY;\n\t\tif (thing === 0 && 1 / thing < 0) return NEGATIVE_ZERO;\n\n\t\tif (indexes.has(thing)) return indexes.get(thing);\n\n\t\tconst index = p++;\n\t\tindexes.set(thing, index);\n\n\t\tfor (const { key, fn } of custom) {\n\t\t\tconst value = fn(thing);\n\t\t\tif (value) {\n\t\t\t\tstringified[index] = `[\"${key}\",${flatten(value)}]`;\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof thing === 'function') {\n\t\t\tthrow new DevalueError(`Cannot stringify a function`, keys);\n\t\t}\n\n\t\tlet str = '';\n\n\t\tif (is_primitive(thing)) {\n\t\t\tstr = stringify_primitive(thing);\n\t\t} else {\n\t\t\tconst type = get_type(thing);\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'String':\n\t\t\t\tcase 'Boolean':\n\t\t\t\t\tstr = `[\"Object\",${stringify_primitive(thing)}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'BigInt':\n\t\t\t\t\tstr = `[\"BigInt\",${thing}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Date':\n\t\t\t\t\tconst valid = !isNaN(thing.getDate());\n\t\t\t\t\tstr = `[\"Date\",\"${valid ? thing.toISOString() : ''}\"]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'URL':\n\t\t\t\t\tstr = `[\"URL\",${stringify_string(thing.toString())}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'URLSearchParams':\n\t\t\t\t\tstr = `[\"URLSearchParams\",${stringify_string(thing.toString())}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RegExp':\n\t\t\t\t\tconst { source, flags } = thing;\n\t\t\t\t\tstr = flags\n\t\t\t\t\t\t? `[\"RegExp\",${stringify_string(source)},\"${flags}\"]`\n\t\t\t\t\t\t: `[\"RegExp\",${stringify_string(source)}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tstr = '[';\n\n\t\t\t\t\tfor (let i = 0; i < thing.length; i += 1) {\n\t\t\t\t\t\tif (i > 0) str += ',';\n\n\t\t\t\t\t\tif (i in thing) {\n\t\t\t\t\t\t\tkeys.push(`[${i}]`);\n\t\t\t\t\t\t\tstr += flatten(thing[i]);\n\t\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstr += HOLE;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tstr += ']';\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Set':\n\t\t\t\t\tstr = '[\"Set\"';\n\n\t\t\t\t\tfor (const value of thing) {\n\t\t\t\t\t\tstr += `,${flatten(value)}`;\n\t\t\t\t\t}\n\n\t\t\t\t\tstr += ']';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Map':\n\t\t\t\t\tstr = '[\"Map\"';\n\n\t\t\t\t\tfor (const [key, value] of thing) {\n\t\t\t\t\t\tkeys.push(\n\t\t\t\t\t\t\t`.get(${is_primitive(key) ? stringify_primitive(key) : '...'})`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tstr += `,${flatten(key)},${flatten(value)}`;\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tstr += ']';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Int8Array':\n\t\t\t\tcase 'Uint8Array':\n\t\t\t\tcase 'Uint8ClampedArray':\n\t\t\t\tcase 'Int16Array':\n\t\t\t\tcase 'Uint16Array':\n\t\t\t\tcase 'Int32Array':\n\t\t\t\tcase 'Uint32Array':\n\t\t\t\tcase 'Float32Array':\n\t\t\t\tcase 'Float64Array':\n\t\t\t\tcase 'BigInt64Array':\n\t\t\t\tcase 'BigUint64Array': {\n\t\t\t\t\t/** @type {import(\"./types.js\").TypedArray} */\n\t\t\t\t\tconst typedArray = thing;\n\t\t\t\t\tstr = '[\"' + type + '\",' + flatten(typedArray.buffer);\n\n\t\t\t\t\tconst a = thing.byteOffset;\n\t\t\t\t\tconst b = a + thing.byteLength;\n\n\t\t\t\t\t// handle subarrays\n\t\t\t\t\tif (a > 0 || b !== typedArray.buffer.byteLength) {\n\t\t\t\t\t\tconst m = +/(\\d+)/.exec(type)[1] / 8;\n\t\t\t\t\t\tstr += `,${a / m},${b / m}`;\n\t\t\t\t\t}\n\n\t\t\t\t\tstr += ']';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'ArrayBuffer': {\n\t\t\t\t\t/** @type {ArrayBuffer} */\n\t\t\t\t\tconst arraybuffer = thing;\n\t\t\t\t\tconst base64 = encode64(arraybuffer);\n\n\t\t\t\t\tstr = `[\"ArrayBuffer\",\"${base64}\"]`;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'Temporal.Duration':\n\t\t\t\tcase 'Temporal.Instant':\n\t\t\t\tcase 'Temporal.PlainDate':\n\t\t\t\tcase 'Temporal.PlainTime':\n\t\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\t\tcase 'Temporal.ZonedDateTime':\n\t\t\t\t\tstr = `[\"${type}\",${stringify_string(thing.toString())}]`;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!is_plain_object(thing)) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify arbitrary non-POJOs`,\n\t\t\t\t\t\t\tkeys\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (enumerable_symbols(thing).length > 0) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify POJOs with symbolic keys`,\n\t\t\t\t\t\t\tkeys\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Object.getPrototypeOf(thing) === null) {\n\t\t\t\t\t\tstr = '[\"null\"';\n\t\t\t\t\t\tfor (const key in thing) {\n\t\t\t\t\t\t\tkeys.push(stringify_key(key));\n\t\t\t\t\t\t\tstr += `,${stringify_string(key)},${flatten(thing[key])}`;\n\t\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstr += ']';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstr = '{';\n\t\t\t\t\t\tlet started = false;\n\t\t\t\t\t\tfor (const key in thing) {\n\t\t\t\t\t\t\tif (started) str += ',';\n\t\t\t\t\t\t\tstarted = true;\n\t\t\t\t\t\t\tkeys.push(stringify_key(key));\n\t\t\t\t\t\t\tstr += `${stringify_string(key)}:${flatten(thing[key])}`;\n\t\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstr += '}';\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstringified[index] = str;\n\t\treturn index;\n\t}\n\n\tconst index = flatten(value);\n\n\t// special case — value is represented as a negative index\n\tif (index < 0) return `${index}`;\n\n\treturn `[${stringified.join(',')}]`;\n}\n\n/**\n * @param {any} thing\n * @returns {string}\n */\nfunction stringify_primitive(thing) {\n\tconst type = typeof thing;\n\tif (type === 'string') return stringify_string(thing);\n\tif (thing instanceof String) return stringify_string(thing.toString());\n\tif (thing === void 0) return UNDEFINED.toString();\n\tif (thing === 0 && 1 / thing < 0) return NEGATIVE_ZERO.toString();\n\tif (type === 'bigint') return `[\"BigInt\",\"${thing}\"]`;\n\treturn String(thing);\n}\n","import { BROWSER } from 'esm-env';\n\nexport const text_encoder = new TextEncoder();\nexport const text_decoder = new TextDecoder();\n\n/**\n * Like node's path.relative, but without using node\n * @param {string} from\n * @param {string} to\n */\nexport function get_relative_path(from, to) {\n\tconst from_parts = from.split(/[/\\\\]/);\n\tconst to_parts = to.split(/[/\\\\]/);\n\tfrom_parts.pop(); // get dirname\n\n\twhile (from_parts[0] === to_parts[0]) {\n\t\tfrom_parts.shift();\n\t\tto_parts.shift();\n\t}\n\n\tlet i = from_parts.length;\n\twhile (i--) from_parts[i] = '..';\n\n\treturn from_parts.concat(to_parts).join('/');\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {string}\n */\nexport function base64_encode(bytes) {\n\t// Using `Buffer` is faster than iterating\n\tif (!BROWSER && globalThis.Buffer) {\n\t\treturn globalThis.Buffer.from(bytes).toString('base64');\n\t}\n\n\tlet binary = '';\n\n\tfor (let i = 0; i < bytes.length; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\n\treturn btoa(binary);\n}\n\n/**\n * @param {string} encoded\n * @returns {Uint8Array}\n */\nexport function base64_decode(encoded) {\n\t// Using `Buffer` is faster than iterating\n\tif (!BROWSER && globalThis.Buffer) {\n\t\tconst buffer = globalThis.Buffer.from(encoded, 'base64');\n\t\treturn new Uint8Array(buffer);\n\t}\n\n\tconst binary = atob(encoded);\n\tconst bytes = new Uint8Array(binary.length);\n\n\tfor (let i = 0; i < binary.length; i++) {\n\t\tbytes[i] = binary.charCodeAt(i);\n\t}\n\n\treturn bytes;\n}\n","/** @import { RemoteForm } from '@sveltejs/kit' */\n/** @import { BinaryFormMeta, InternalRemoteFormIssue } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\n\nimport { DEV } from 'esm-env';\nimport * as devalue from 'devalue';\nimport { text_decoder, text_encoder } from './utils.js';\n\n/**\n * Sets a value in a nested object using a path string, mutating the original object\n * @param {Record<string, any>} object\n * @param {string} path_string\n * @param {any} value\n */\nexport function set_nested_value(object, path_string, value) {\n\tif (path_string.startsWith('n:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === '' ? undefined : parseFloat(value);\n\t} else if (path_string.startsWith('b:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === 'on';\n\t}\n\n\tdeep_set(object, split_path(path_string), value);\n}\n\n/**\n * Convert `FormData` into a POJO\n * @param {FormData} data\n */\nexport function convert_formdata(data) {\n\t/** @type {Record<string, any>} */\n\tconst result = {};\n\n\tfor (let key of data.keys()) {\n\t\tconst is_array = key.endsWith('[]');\n\t\t/** @type {any[]} */\n\t\tlet values = data.getAll(key);\n\n\t\tif (is_array) key = key.slice(0, -2);\n\n\t\tif (values.length > 1 && !is_array) {\n\t\t\tthrow new Error(`Form cannot contain duplicated keys — \"${key}\" has ${values.length} values`);\n\t\t}\n\n\t\t// an empty `<input type=\"file\">` will submit a non-existent file, bizarrely\n\t\tvalues = values.filter(\n\t\t\t(entry) => typeof entry === 'string' || entry.name !== '' || entry.size > 0\n\t\t);\n\n\t\tif (key.startsWith('n:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => (v === '' ? undefined : parseFloat(/** @type {string} */ (v))));\n\t\t} else if (key.startsWith('b:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => v === 'on');\n\t\t}\n\n\t\tset_nested_value(result, key, is_array ? values : values[0]);\n\t}\n\n\treturn result;\n}\n\nexport const BINARY_FORM_CONTENT_TYPE = 'application/x-sveltekit-formdata';\nconst BINARY_FORM_VERSION = 0;\n\n/**\n * The binary format is as follows:\n * - 1 byte: Format version\n * - 4 bytes: Length of the header (u32)\n * - 2 bytes: Length of the file offset table (u16)\n * - header: devalue.stringify([data, meta])\n * - file offset table: JSON.stringify([offset1, offset2, ...]) (empty if no files) (offsets start from the end of the table)\n * - file1, file2, ...\n * @param {Record<string, any>} data\n * @param {BinaryFormMeta} meta\n */\nexport function serialize_binary_form(data, meta) {\n\t/** @type {Array<BlobPart>} */\n\tconst blob_parts = [new Uint8Array([BINARY_FORM_VERSION])];\n\n\t/** @type {Array<[file: File, index: number]>} */\n\tconst files = [];\n\n\tif (!meta.remote_refreshes?.length) {\n\t\tdelete meta.remote_refreshes;\n\t}\n\n\tconst encoded_header = devalue.stringify([data, meta], {\n\t\tFile: (file) => {\n\t\t\tif (!(file instanceof File)) return;\n\n\t\t\tfiles.push([file, files.length]);\n\t\t\treturn [file.name, file.type, file.size, file.lastModified, files.length - 1];\n\t\t}\n\t});\n\n\tconst encoded_header_buffer = text_encoder.encode(encoded_header);\n\n\tlet encoded_file_offsets = '';\n\tif (files.length) {\n\t\t// Sort small files to the front\n\t\tfiles.sort(([a], [b]) => a.size - b.size);\n\n\t\t/** @type {Array<number>} */\n\t\tconst file_offsets = new Array(files.length);\n\t\tlet start = 0;\n\t\tfor (const [file, index] of files) {\n\t\t\tfile_offsets[index] = start;\n\t\t\tstart += file.size;\n\t\t}\n\t\tencoded_file_offsets = JSON.stringify(file_offsets);\n\t}\n\n\tconst length_buffer = new Uint8Array(4);\n\tconst length_view = new DataView(length_buffer.buffer);\n\n\tlength_view.setUint32(0, encoded_header_buffer.byteLength, true);\n\tblob_parts.push(length_buffer.slice());\n\n\tlength_view.setUint16(0, encoded_file_offsets.length, true);\n\tblob_parts.push(length_buffer.slice(0, 2));\n\n\tblob_parts.push(encoded_header_buffer);\n\tblob_parts.push(encoded_file_offsets);\n\n\tfor (const [file] of files) {\n\t\tblob_parts.push(file);\n\t}\n\n\treturn {\n\t\tblob: new Blob(blob_parts)\n\t};\n}\n\n/**\n * @param {Request} request\n * @returns {Promise<{ data: Record<string, any>; meta: BinaryFormMeta; form_data: FormData | null }>}\n */\nexport async function deserialize_binary_form(request) {\n\tif (request.headers.get('content-type') !== BINARY_FORM_CONTENT_TYPE) {\n\t\tconst form_data = await request.formData();\n\t\treturn { data: convert_formdata(form_data), meta: {}, form_data };\n\t}\n\tif (!request.body) {\n\t\tthrow new Error('Could not deserialize binary form: no body');\n\t}\n\n\tconst reader = request.body.getReader();\n\n\t/** @type {Array<Promise<Uint8Array<ArrayBuffer> | undefined>>} */\n\tconst chunks = [];\n\n\t/**\n\t * @param {number} index\n\t * @returns {Promise<Uint8Array<ArrayBuffer> | undefined>}\n\t */\n\tasync function get_chunk(index) {\n\t\tif (index in chunks) return chunks[index];\n\n\t\tlet i = chunks.length;\n\t\twhile (i <= index) {\n\t\t\tchunks[i] = reader.read().then((chunk) => chunk.value);\n\t\t\ti++;\n\t\t}\n\t\treturn chunks[index];\n\t}\n\n\t/**\n\t * @param {number} offset\n\t * @param {number} length\n\t * @returns {Promise<Uint8Array | null>}\n\t */\n\tasync function get_buffer(offset, length) {\n\t\t/** @type {Uint8Array} */\n\t\tlet start_chunk;\n\t\tlet chunk_start = 0;\n\t\t/** @type {number} */\n\t\tlet chunk_index;\n\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\tconst chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\n\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t// If this chunk contains the target offset\n\t\t\tif (offset >= chunk_start && offset < chunk_end) {\n\t\t\t\tstart_chunk = chunk;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tchunk_start = chunk_end;\n\t\t}\n\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\tif (offset + length <= chunk_start + start_chunk.byteLength) {\n\t\t\treturn start_chunk.subarray(offset - chunk_start, offset + length - chunk_start);\n\t\t}\n\t\t// Otherwise, copy the data into a new buffer\n\t\tconst buffer = new Uint8Array(length);\n\t\tbuffer.set(start_chunk.subarray(offset - chunk_start));\n\t\tlet cursor = start_chunk.byteLength - offset + chunk_start;\n\t\twhile (cursor < length) {\n\t\t\tchunk_index++;\n\t\t\tlet chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\t\t\tif (chunk.byteLength > length - cursor) {\n\t\t\t\tchunk = chunk.subarray(0, length - cursor);\n\t\t\t}\n\t\t\tbuffer.set(chunk, cursor);\n\t\t\tcursor += chunk.byteLength;\n\t\t}\n\n\t\treturn buffer;\n\t}\n\n\tconst header = await get_buffer(0, 1 + 4 + 2);\n\tif (!header) throw new Error('Could not deserialize binary form: too short');\n\n\tif (header[0] !== BINARY_FORM_VERSION) {\n\t\tthrow new Error(\n\t\t\t`Could not deserialize binary form: got version ${header[0]}, expected version ${BINARY_FORM_VERSION}`\n\t\t);\n\t}\n\tconst header_view = new DataView(header.buffer);\n\tconst data_length = header_view.getUint32(1, true);\n\tconst file_offsets_length = header_view.getUint16(5, true);\n\n\t// Read the form data\n\tconst data_buffer = await get_buffer(1 + 4 + 2, data_length);\n\tif (!data_buffer) throw new Error('Could not deserialize binary form: data too short');\n\n\t/** @type {Array<number>} */\n\tlet file_offsets;\n\t/** @type {number} */\n\tlet files_start_offset;\n\tif (file_offsets_length > 0) {\n\t\t// Read the file offset table\n\t\tconst file_offsets_buffer = await get_buffer(1 + 4 + 2 + data_length, file_offsets_length);\n\t\tif (!file_offsets_buffer)\n\t\t\tthrow new Error('Could not deserialize binary form: file offset table too short');\n\n\t\tfile_offsets = /** @type {Array<number>} */ (\n\t\t\tJSON.parse(text_decoder.decode(file_offsets_buffer))\n\t\t);\n\t\tfiles_start_offset = 1 + 4 + 2 + data_length + file_offsets_length;\n\t}\n\n\tconst [data, meta] = devalue.parse(text_decoder.decode(data_buffer), {\n\t\tFile: ([name, type, size, last_modified, index]) => {\n\t\t\treturn new Proxy(\n\t\t\t\tnew LazyFile(\n\t\t\t\t\tname,\n\t\t\t\t\ttype,\n\t\t\t\t\tsize,\n\t\t\t\t\tlast_modified,\n\t\t\t\t\tget_chunk,\n\t\t\t\t\tfiles_start_offset + file_offsets[index]\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tgetPrototypeOf() {\n\t\t\t\t\t\t// Trick validators into thinking this is a normal File\n\t\t\t\t\t\treturn File.prototype;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\t// Read the request body asyncronously so it doesn't stall\n\tvoid (async () => {\n\t\tlet has_more = true;\n\t\twhile (has_more) {\n\t\t\tconst chunk = await get_chunk(chunks.length);\n\t\t\thas_more = !!chunk;\n\t\t}\n\t})();\n\n\treturn { data, meta, form_data: null };\n}\n\n/** @implements {File} */\nclass LazyFile {\n\t/** @type {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} */\n\t#get_chunk;\n\t/** @type {number} */\n\t#offset;\n\t/**\n\t * @param {string} name\n\t * @param {string} type\n\t * @param {number} size\n\t * @param {number} last_modified\n\t * @param {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} get_chunk\n\t * @param {number} offset\n\t */\n\tconstructor(name, type, size, last_modified, get_chunk, offset) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.size = size;\n\t\tthis.lastModified = last_modified;\n\t\tthis.webkitRelativePath = '';\n\t\tthis.#get_chunk = get_chunk;\n\t\tthis.#offset = offset;\n\n\t\t// TODO - hacky, required for private members to be accessed on proxy\n\t\tthis.arrayBuffer = this.arrayBuffer.bind(this);\n\t\tthis.bytes = this.bytes.bind(this);\n\t\tthis.slice = this.slice.bind(this);\n\t\tthis.stream = this.stream.bind(this);\n\t\tthis.text = this.text.bind(this);\n\t}\n\t/** @type {ArrayBuffer | undefined} */\n\t#buffer;\n\tasync arrayBuffer() {\n\t\tthis.#buffer ??= await new Response(this.stream()).arrayBuffer();\n\t\treturn this.#buffer;\n\t}\n\tasync bytes() {\n\t\treturn new Uint8Array(await this.arrayBuffer());\n\t}\n\t/**\n\t * @param {number=} start\n\t * @param {number=} end\n\t * @param {string=} contentType\n\t */\n\tslice(start = 0, end = this.size, contentType = this.type) {\n\t\t// https://github.com/nodejs/node/blob/a5f3cd8cb5ba9e7911d93c5fd3ebc6d781220dd8/lib/internal/blob.js#L240\n\t\tif (start < 0) {\n\t\t\tstart = Math.max(this.size + start, 0);\n\t\t} else {\n\t\t\tstart = Math.min(start, this.size);\n\t\t}\n\n\t\tif (end < 0) {\n\t\t\tend = Math.max(this.size + end, 0);\n\t\t} else {\n\t\t\tend = Math.min(end, this.size);\n\t\t}\n\t\tconst size = Math.max(end - start, 0);\n\t\tconst file = new LazyFile(\n\t\t\tthis.name,\n\t\t\tcontentType,\n\t\t\tsize,\n\t\t\tthis.lastModified,\n\t\t\tthis.#get_chunk,\n\t\t\tthis.#offset + start\n\t\t);\n\n\t\treturn file;\n\t}\n\tstream() {\n\t\tlet cursor = 0;\n\t\tlet chunk_index = 0;\n\t\treturn new ReadableStream({\n\t\t\tstart: async (controller) => {\n\t\t\t\tlet chunk_start = 0;\n\t\t\t\tlet start_chunk = null;\n\t\t\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\t\t\tconst chunk = await this.#get_chunk(chunk_index);\n\t\t\t\t\tif (!chunk) return null;\n\n\t\t\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t\t\t// If this chunk contains the target offset\n\t\t\t\t\tif (this.#offset >= chunk_start && this.#offset < chunk_end) {\n\t\t\t\t\t\tstart_chunk = chunk;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tchunk_start = chunk_end;\n\t\t\t\t}\n\t\t\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\t\t\tif (this.#offset + this.size <= chunk_start + start_chunk.byteLength) {\n\t\t\t\t\tcontroller.enqueue(\n\t\t\t\t\t\tstart_chunk.subarray(this.#offset - chunk_start, this.#offset + this.size - chunk_start)\n\t\t\t\t\t);\n\t\t\t\t\tcontroller.close();\n\t\t\t\t} else {\n\t\t\t\t\tcontroller.enqueue(start_chunk.subarray(this.#offset - chunk_start));\n\t\t\t\t\tcursor = start_chunk.byteLength - this.#offset + chunk_start;\n\t\t\t\t}\n\t\t\t},\n\t\t\tpull: async (controller) => {\n\t\t\t\tchunk_index++;\n\t\t\t\tlet chunk = await this.#get_chunk(chunk_index);\n\t\t\t\tif (!chunk) {\n\t\t\t\t\tcontroller.error('Could not deserialize binary form: incomplete file data');\n\t\t\t\t\tcontroller.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (chunk.byteLength > this.size - cursor) {\n\t\t\t\t\tchunk = chunk.subarray(0, this.size - cursor);\n\t\t\t\t}\n\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t\tcursor += chunk.byteLength;\n\t\t\t\tif (cursor >= this.size) {\n\t\t\t\t\tcontroller.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tasync text() {\n\t\treturn text_decoder.decode(await this.arrayBuffer());\n\t}\n}\n\nconst path_regex = /^[a-zA-Z_$]\\w*(\\.[a-zA-Z_$]\\w*|\\[\\d+\\])*$/;\n\n/**\n * @param {string} path\n */\nexport function split_path(path) {\n\tif (!path_regex.test(path)) {\n\t\tthrow new Error(`Invalid path ${path}`);\n\t}\n\n\treturn path.split(/\\.|\\[|\\]/).filter(Boolean);\n}\n\n/**\n * Check if a property key is dangerous and could lead to prototype pollution\n * @param {string} key\n */\nfunction check_prototype_pollution(key) {\n\tif (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n\t\tthrow new Error(\n\t\t\t`Invalid key \"${key}\"` +\n\t\t\t\t(DEV ? ': This key is not allowed to prevent prototype pollution.' : '')\n\t\t);\n\t}\n}\n\n/**\n * Sets a value in a nested object using an array of keys, mutating the original object.\n * @param {Record<string, any>} object\n * @param {string[]} keys\n * @param {any} value\n */\nexport function deep_set(object, keys, value) {\n\tlet current = object;\n\n\tfor (let i = 0; i < keys.length - 1; i += 1) {\n\t\tconst key = keys[i];\n\n\t\tcheck_prototype_pollution(key);\n\n\t\tconst is_array = /^\\d+$/.test(keys[i + 1]);\n\t\tconst exists = key in current;\n\t\tconst inner = current[key];\n\n\t\tif (exists && is_array !== Array.isArray(inner)) {\n\t\t\tthrow new Error(`Invalid array key ${keys[i + 1]}`);\n\t\t}\n\n\t\tif (!exists) {\n\t\t\tcurrent[key] = is_array ? [] : {};\n\t\t}\n\n\t\tcurrent = current[key];\n\t}\n\n\tconst final_key = keys[keys.length - 1];\n\tcheck_prototype_pollution(final_key);\n\tcurrent[final_key] = value;\n}\n\n/**\n * @param {StandardSchemaV1.Issue} issue\n * @param {boolean} server Whether this issue came from server validation\n */\nexport function normalize_issue(issue, server = false) {\n\t/** @type {InternalRemoteFormIssue} */\n\tconst normalized = { name: '', path: [], message: issue.message, server };\n\n\tif (issue.path !== undefined) {\n\t\tlet name = '';\n\n\t\tfor (const segment of issue.path) {\n\t\t\tconst key = /** @type {string | number} */ (\n\t\t\t\ttypeof segment === 'object' ? segment.key : segment\n\t\t\t);\n\n\t\t\tnormalized.path.push(key);\n\n\t\t\tif (typeof key === 'number') {\n\t\t\t\tname += `[${key}]`;\n\t\t\t} else if (typeof key === 'string') {\n\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t}\n\t\t}\n\n\t\tnormalized.name = name;\n\t}\n\n\treturn normalized;\n}\n\n/**\n * @param {InternalRemoteFormIssue[]} issues\n */\nexport function flatten_issues(issues) {\n\t/** @type {Record<string, InternalRemoteFormIssue[]>} */\n\tconst result = {};\n\n\tfor (const issue of issues) {\n\t\t(result.$ ??= []).push(issue);\n\n\t\tlet name = '';\n\n\t\tif (issue.path !== undefined) {\n\t\t\tfor (const key of issue.path) {\n\t\t\t\tif (typeof key === 'number') {\n\t\t\t\t\tname += `[${key}]`;\n\t\t\t\t} else if (typeof key === 'string') {\n\t\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t\t}\n\n\t\t\t\t(result[name] ??= []).push(issue);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Gets a nested value from an object using a path array\n * @param {Record<string, any>} object\n * @param {(string | number)[]} path\n * @returns {any}\n */\n\nexport function deep_get(object, path) {\n\tlet current = object;\n\tfor (const key of path) {\n\t\tif (current == null || typeof current !== 'object') {\n\t\t\treturn current;\n\t\t}\n\t\tcurrent = current[key];\n\t}\n\treturn current;\n}\n\n/**\n * Creates a proxy-based field accessor for form data\n * @param {any} target - Function or empty POJO\n * @param {() => Record<string, any>} get_input - Function to get current input data\n * @param {(path: (string | number)[], value: any) => void} set_input - Function to set input data\n * @param {() => Record<string, InternalRemoteFormIssue[]>} get_issues - Function to get current issues\n * @param {(string | number)[]} path - Current access path\n * @returns {any} Proxy object with name(), value(), and issues() methods\n */\nexport function create_field_proxy(target, get_input, set_input, get_issues, path = []) {\n\tconst get_value = () => {\n\t\treturn deep_get(get_input(), path);\n\t};\n\n\treturn new Proxy(target, {\n\t\tget(target, prop) {\n\t\t\tif (typeof prop === 'symbol') return target[prop];\n\n\t\t\t// Handle array access like jobs[0]\n\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [\n\t\t\t\t\t...path,\n\t\t\t\t\tparseInt(prop, 10)\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tconst key = build_path_string(path);\n\n\t\t\tif (prop === 'set') {\n\t\t\t\tconst set_func = function (/** @type {any} */ newValue) {\n\t\t\t\t\tset_input(path, newValue);\n\t\t\t\t\treturn newValue;\n\t\t\t\t};\n\t\t\t\treturn create_field_proxy(set_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'value') {\n\t\t\t\treturn create_field_proxy(get_value, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'issues' || prop === 'allIssues') {\n\t\t\t\tconst issues_func = () => {\n\t\t\t\t\tconst all_issues = get_issues()[key === '' ? '$' : key];\n\n\t\t\t\t\tif (prop === 'allIssues') {\n\t\t\t\t\t\treturn all_issues?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn all_issues\n\t\t\t\t\t\t?.filter((issue) => issue.name === key)\n\t\t\t\t\t\t?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(issues_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'as') {\n\t\t\t\t/**\n\t\t\t\t * @param {string} type\n\t\t\t\t * @param {string} [input_value]\n\t\t\t\t */\n\t\t\t\tconst as_func = (type, input_value) => {\n\t\t\t\t\tconst is_array =\n\t\t\t\t\t\ttype === 'file multiple' ||\n\t\t\t\t\t\ttype === 'select multiple' ||\n\t\t\t\t\t\t(type === 'checkbox' && typeof input_value === 'string');\n\n\t\t\t\t\tconst prefix =\n\t\t\t\t\t\ttype === 'number' || type === 'range'\n\t\t\t\t\t\t\t? 'n:'\n\t\t\t\t\t\t\t: type === 'checkbox' && !is_array\n\t\t\t\t\t\t\t\t? 'b:'\n\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t// Base properties for all input types\n\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\tconst base_props = {\n\t\t\t\t\t\tname: prefix + key + (is_array ? '[]' : ''),\n\t\t\t\t\t\tget 'aria-invalid'() {\n\t\t\t\t\t\t\tconst issues = get_issues();\n\t\t\t\t\t\t\treturn key in issues ? 'true' : undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Add type attribute only for non-text inputs and non-select elements\n\t\t\t\t\tif (type !== 'text' && type !== 'select' && type !== 'select multiple') {\n\t\t\t\t\t\tbase_props.type = type === 'file multiple' ? 'file' : type;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle submit and hidden inputs\n\t\t\t\t\tif (type === 'submit' || type === 'hidden') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (!input_value) {\n\t\t\t\t\t\t\t\tthrow new Error(`\\`${type}\\` inputs must have a value`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value, enumerable: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle select inputs\n\t\t\t\t\tif (type === 'select' || type === 'select multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\treturn get_value();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle checkbox inputs\n\t\t\t\t\tif (type === 'checkbox' || type === 'radio') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (type === 'radio' && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Radio inputs must have a value');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (type === 'checkbox' && is_array && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Checkbox array inputs must have a value');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value ?? 'on', enumerable: true },\n\t\t\t\t\t\t\tchecked: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\tif (type === 'radio') {\n\t\t\t\t\t\t\t\t\t\treturn value === input_value;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (is_array) {\n\t\t\t\t\t\t\t\t\t\treturn (value ?? []).includes(input_value);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle file inputs\n\t\t\t\t\tif (type === 'file' || type === 'file multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tfiles: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\t// Convert File/File[] to FileList-like object\n\t\t\t\t\t\t\t\t\tif (value instanceof File) {\n\t\t\t\t\t\t\t\t\t\t// In browsers, we can create a proper FileList using DataTransfer\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tfileList.items.add(value);\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\treturn { 0: value, length: 1 };\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(value) && value.every((f) => f instanceof File)) {\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tvalue.forEach((file) => fileList.items.add(file));\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\t/** @type {any} */\n\t\t\t\t\t\t\t\t\t\tconst fileListLike = { length: value.length };\n\t\t\t\t\t\t\t\t\t\tvalue.forEach((file, index) => {\n\t\t\t\t\t\t\t\t\t\t\tfileListLike[index] = file;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn fileListLike;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle all other input types (text, number, etc.)\n\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\tconst value = get_value();\n\t\t\t\t\t\t\t\treturn value != null ? String(value) : '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(as_func, get_input, set_input, get_issues, [...path, 'as']);\n\t\t\t}\n\n\t\t\t// Handle property access (nested fields)\n\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [...path, prop]);\n\t\t}\n\t});\n}\n\n/**\n * Builds a path string from an array of path segments\n * @param {(string | number)[]} path\n * @returns {string}\n */\nexport function build_path_string(path) {\n\tlet result = '';\n\n\tfor (const segment of path) {\n\t\tif (typeof segment === 'number') {\n\t\t\tresult += `[${segment}]`;\n\t\t} else {\n\t\t\tresult += result === '' ? segment : '.' + segment;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * @param {RemoteForm<any, any>} instance\n * @deprecated remove in 3.0\n */\nexport function throw_on_old_property_access(instance) {\n\tObject.defineProperty(instance, 'field', {\n\t\tvalue: (/** @type {string} */ name) => {\n\t\t\tconst new_name = name.endsWith('[]') ? name.slice(0, -2) : name;\n\t\t\tthrow new Error(\n\t\t\t\t`\\`form.field\\` has been removed: Instead of \\`<input name={form.field('${name}')} />\\` do \\`<input {...form.fields.${new_name}.as(type)} />\\``\n\t\t\t);\n\t\t}\n\t});\n\n\tfor (const property of ['input', 'issues']) {\n\t\tObject.defineProperty(instance, property, {\n\t\t\tget() {\n\t\t\t\tconst new_name = property === 'issues' ? 'issues' : 'value';\n\t\t\t\treturn new Proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t{\n\t\t\t\t\t\tget(_, prop) {\n\t\t\t\t\t\t\tconst prop_string = typeof prop === 'string' ? prop : String(prop);\n\t\t\t\t\t\t\tconst old =\n\t\t\t\t\t\t\t\tprop_string.includes('[') || prop_string.includes('.')\n\t\t\t\t\t\t\t\t\t? `['${prop_string}']`\n\t\t\t\t\t\t\t\t\t: `.${prop_string}`;\n\t\t\t\t\t\t\tconst replacement = `.${prop_string}.${new_name}()`;\n\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t`\\`form.${property}\\` has been removed: Instead of \\`form.${property}${old}\\` write \\`form.fields${replacement}\\``\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { BINARY_FORM_CONTENT_TYPE } from '../runtime/form-utils.js';\n\n/**\n * Given an Accept header and a list of possible content types, pick\n * the most suitable one to respond with\n * @param {string} accept\n * @param {string[]} types\n */\nexport function negotiate(accept, types) {\n\t/** @type {Array<{ type: string, subtype: string, q: number, i: number }>} */\n\tconst parts = [];\n\n\taccept.split(',').forEach((str, i) => {\n\t\tconst match = /([^/ \\t]+)\\/([^; \\t]+)[ \\t]*(?:;[ \\t]*q=([0-9.]+))?/.exec(str);\n\n\t\t// no match equals invalid header — ignore\n\t\tif (match) {\n\t\t\tconst [, type, subtype, q = '1'] = match;\n\t\t\tparts.push({ type, subtype, q: +q, i });\n\t\t}\n\t});\n\n\tparts.sort((a, b) => {\n\t\tif (a.q !== b.q) {\n\t\t\treturn b.q - a.q;\n\t\t}\n\n\t\tif ((a.subtype === '*') !== (b.subtype === '*')) {\n\t\t\treturn a.subtype === '*' ? 1 : -1;\n\t\t}\n\n\t\tif ((a.type === '*') !== (b.type === '*')) {\n\t\t\treturn a.type === '*' ? 1 : -1;\n\t\t}\n\n\t\treturn a.i - b.i;\n\t});\n\n\tlet accepted;\n\tlet min_priority = Infinity;\n\n\tfor (const mimetype of types) {\n\t\tconst [type, subtype] = mimetype.split('/');\n\t\tconst priority = parts.findIndex(\n\t\t\t(part) =>\n\t\t\t\t(part.type === type || part.type === '*') &&\n\t\t\t\t(part.subtype === subtype || part.subtype === '*')\n\t\t);\n\n\t\tif (priority !== -1 && priority < min_priority) {\n\t\t\taccepted = mimetype;\n\t\t\tmin_priority = priority;\n\t\t}\n\t}\n\n\treturn accepted;\n}\n\n/**\n * Returns `true` if the request contains a `content-type` header with the given type\n * @param {Request} request\n * @param  {...string} types\n */\nfunction is_content_type(request, ...types) {\n\tconst type = request.headers.get('content-type')?.split(';', 1)[0].trim() ?? '';\n\treturn types.includes(type.toLowerCase());\n}\n\n/**\n * @param {Request} request\n */\nexport function is_form_content_type(request) {\n\t// These content types must be protected against CSRF\n\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/enctype\n\treturn is_content_type(\n\t\trequest,\n\t\t'application/x-www-form-urlencoded',\n\t\t'multipart/form-data',\n\t\t'text/plain',\n\t\tBINARY_FORM_CONTENT_TYPE\n\t);\n}\n","import { HttpError, SvelteKitError } from '@sveltejs/kit/internal';\n\n/**\n * @param {unknown} err\n * @return {Error}\n */\nexport function coalesce_to_error(err) {\n\treturn err instanceof Error ||\n\t\t(err && /** @type {any} */ (err).name && /** @type {any} */ (err).message)\n\t\t? /** @type {Error} */ (err)\n\t\t: new Error(JSON.stringify(err));\n}\n\n/**\n * This is an identity function that exists to make TypeScript less\n * paranoid about people throwing things that aren't errors, which\n * frankly is not something we should care about\n * @param {unknown} error\n */\nexport function normalize_error(error) {\n\treturn /** @type {import('../exports/internal/index.js').Redirect | HttpError | SvelteKitError | Error} */ (\n\t\terror\n\t);\n}\n\n/**\n * @param {unknown} error\n */\nexport function get_status(error) {\n\treturn error instanceof HttpError || error instanceof SvelteKitError ? error.status : 500;\n}\n\n/**\n * @param {unknown} error\n */\nexport function get_message(error) {\n\treturn error instanceof SvelteKitError ? error.text : 'Internal Error';\n}\n","/**\n * `$env/dynamic/private`\n * @type {Record<string, string>}\n */\nexport let private_env = {};\n\n/**\n * `$env/dynamic/public`\n * @type {Record<string, string>}\n */\nexport let public_env = {};\n\n/** @param {any} error */\nexport let fix_stack_trace = (error) => error?.stack;\n\n/** @type {(environment: Record<string, string>) => void} */\nexport function set_private_env(environment) {\n\tprivate_env = environment;\n}\n\n/** @type {(environment: Record<string, string>) => void} */\nexport function set_public_env(environment) {\n\tpublic_env = environment;\n}\n\n/** @param {(error: Error) => string} value */\nexport function set_fix_stack_trace(value) {\n\tfix_stack_trace = value;\n}\n","/**\n * When inside a double-quoted attribute value, only `&` and `\"` hold special meaning.\n * @see https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state\n * @type {Record<string, string>}\n */\nconst escape_html_attr_dict = {\n\t'&': '&amp;',\n\t'\"': '&quot;'\n\t// Svelte also escapes < because the escape function could be called inside a `noscript` there\n\t// https://github.com/sveltejs/svelte/security/advisories/GHSA-8266-84wp-wv5c\n\t// However, that doesn't apply in SvelteKit\n};\n\n/**\n * @type {Record<string, string>}\n */\nconst escape_html_dict = {\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst surrogates = // high surrogate without paired low surrogate\n\t'[\\\\ud800-\\\\udbff](?![\\\\udc00-\\\\udfff])|' +\n\t// a valid surrogate pair, the only match with 2 code units\n\t// we match it so that we can match unpaired low surrogates in the same pass\n\t// TODO: use lookbehind assertions once they are widely supported: (?<![\\ud800-udbff])[\\udc00-\\udfff]\n\t'[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]|' +\n\t// unpaired low surrogate (see previous match)\n\t'[\\\\udc00-\\\\udfff]';\n\nconst escape_html_attr_regex = new RegExp(\n\t`[${Object.keys(escape_html_attr_dict).join('')}]|` + surrogates,\n\t'g'\n);\n\nconst escape_html_regex = new RegExp(\n\t`[${Object.keys(escape_html_dict).join('')}]|` + surrogates,\n\t'g'\n);\n\n/**\n * Escapes unpaired surrogates (which are allowed in js strings but invalid in HTML) and\n * escapes characters that are special.\n *\n * @param {string} str\n * @param {boolean} [is_attr]\n * @returns {string} escaped string\n * @example const html = `<tag data-value=\"${escape_html('value', true)}\">...</tag>`;\n */\nexport function escape_html(str, is_attr) {\n\tconst dict = is_attr ? escape_html_attr_dict : escape_html_dict;\n\tconst escaped_str = str.replace(is_attr ? escape_html_attr_regex : escape_html_regex, (match) => {\n\t\tif (match.length === 2) {\n\t\t\t// valid surrogate pair\n\t\t\treturn match;\n\t\t}\n\n\t\treturn dict[match] ?? `&#${match.charCodeAt(0)};`;\n\t});\n\n\treturn escaped_str;\n}\n","import { DEV } from 'esm-env';\nimport { json, text } from '@sveltejs/kit';\nimport { HttpError } from '@sveltejs/kit/internal';\nimport { with_request_store } from '@sveltejs/kit/internal/server';\nimport { coalesce_to_error, get_message, get_status } from '../../utils/error.js';\nimport { negotiate } from '../../utils/http.js';\nimport { fix_stack_trace } from '../shared-server.js';\nimport { ENDPOINT_METHODS } from '../../constants.js';\nimport { escape_html } from '../../utils/escape.js';\n\n/** @param {any} body */\nexport function is_pojo(body) {\n\tif (typeof body !== 'object') return false;\n\n\tif (body) {\n\t\tif (body instanceof Uint8Array) return false;\n\t\tif (body instanceof ReadableStream) return false;\n\t}\n\n\treturn true;\n}\n\n/**\n * @param {Partial<Record<import('types').HttpMethod, any>>} mod\n * @param {import('types').HttpMethod} method\n */\nexport function method_not_allowed(mod, method) {\n\treturn text(`${method} method not allowed`, {\n\t\tstatus: 405,\n\t\theaders: {\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: allowed_methods(mod).join(', ')\n\t\t}\n\t});\n}\n\n/** @param {Partial<Record<import('types').HttpMethod, any>>} mod */\nexport function allowed_methods(mod) {\n\tconst allowed = ENDPOINT_METHODS.filter((method) => method in mod);\n\n\t// if there's no HEAD handler, but we have a GET handler, we respond to\n\t// HEAD requests using the GET handler and omit the response body.\n\tif ('GET' in mod && !('HEAD' in mod)) {\n\t\tallowed.push('HEAD');\n\t}\n\n\treturn allowed;\n}\n\n/**\n * @param {import('types').SSROptions} options\n */\nexport function get_global_name(options) {\n\treturn DEV ? '__sveltekit_dev' : `__sveltekit_${options.version_hash}`;\n}\n\n/**\n * Return as a response that renders the error.html\n *\n * @param {import('types').SSROptions} options\n * @param {number} status\n * @param {string} message\n */\nexport function static_error_page(options, status, message) {\n\tlet page = options.templates.error({ status, message: escape_html(message) });\n\n\tif (DEV) {\n\t\t// inject Vite HMR client, for easier debugging\n\t\tpage = page.replace('</head>', '<script type=\"module\" src=\"/@vite/client\"></script></head>');\n\t}\n\n\treturn text(page, {\n\t\theaders: { 'content-type': 'text/html; charset=utf-8' },\n\t\tstatus\n\t});\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} state\n * @param {import('types').SSROptions} options\n * @param {unknown} error\n */\nexport async function handle_fatal_error(event, state, options, error) {\n\terror = error instanceof HttpError ? error : coalesce_to_error(error);\n\tconst status = get_status(error);\n\tconst body = await handle_error_and_jsonify(event, state, options, error);\n\n\t// ideally we'd use sec-fetch-dest instead, but Safari — quelle surprise — doesn't support it\n\tconst type = negotiate(event.request.headers.get('accept') || 'text/html', [\n\t\t'application/json',\n\t\t'text/html'\n\t]);\n\n\tif (event.isDataRequest || type === 'application/json') {\n\t\treturn json(body, {\n\t\t\tstatus\n\t\t});\n\t}\n\n\treturn static_error_page(options, status, body.message);\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} state\n * @param {import('types').SSROptions} options\n * @param {any} error\n * @returns {Promise<App.Error>}\n */\nexport async function handle_error_and_jsonify(event, state, options, error) {\n\tif (error instanceof HttpError) {\n\t\t// @ts-expect-error custom user errors may not have a message field if App.Error is overwritten\n\t\treturn { message: 'Unknown Error', ...error.body };\n\t}\n\n\tif (DEV && typeof error == 'object') {\n\t\tfix_stack_trace(error);\n\t}\n\n\tconst status = get_status(error);\n\tconst message = get_message(error);\n\n\treturn (\n\t\t(await with_request_store({ event, state }, () =>\n\t\t\toptions.hooks.handleError({ error, event, status, message })\n\t\t)) ?? { message }\n\t);\n}\n\n/**\n * @param {number} status\n * @param {string} location\n */\nexport function redirect_response(status, location) {\n\tconst response = new Response(undefined, {\n\t\tstatus,\n\t\theaders: { location }\n\t});\n\treturn response;\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {Error & { path: string }} error\n */\nexport function clarify_devalue_error(event, error) {\n\tif (error.path) {\n\t\treturn (\n\t\t\t`Data returned from \\`load\\` while rendering ${event.route.id} is not serializable: ${error.message} (${error.path}). ` +\n\t\t\t`If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`\n\t\t);\n\t}\n\n\tif (error.path === '') {\n\t\treturn `Data returned from \\`load\\` while rendering ${event.route.id} is not a plain object`;\n\t}\n\n\t// belt and braces — this should never happen\n\treturn error.message;\n}\n\n/**\n * @param {import('types').ServerDataNode} node\n */\nexport function serialize_uses(node) {\n\tconst uses = {};\n\n\tif (node.uses && node.uses.dependencies.size > 0) {\n\t\tuses.dependencies = Array.from(node.uses.dependencies);\n\t}\n\n\tif (node.uses && node.uses.search_params.size > 0) {\n\t\tuses.search_params = Array.from(node.uses.search_params);\n\t}\n\n\tif (node.uses && node.uses.params.size > 0) {\n\t\tuses.params = Array.from(node.uses.params);\n\t}\n\n\tif (node.uses?.parent) uses.parent = 1;\n\tif (node.uses?.route) uses.route = 1;\n\tif (node.uses?.url) uses.url = 1;\n\n\treturn uses;\n}\n\n/**\n * Returns `true` if the given path was prerendered\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {string} pathname Should include the base and be decoded\n */\nexport function has_prerendered_path(manifest, pathname) {\n\treturn (\n\t\tmanifest._.prerendered_routes.has(pathname) ||\n\t\t(pathname.at(-1) === '/' && manifest._.prerendered_routes.has(pathname.slice(0, -1)))\n\t);\n}\n\n/**\n * Formats the error into a nice message with sanitized stack trace\n * @param {number} status\n * @param {Error} error\n * @param {import('@sveltejs/kit').RequestEvent} event\n */\nexport function format_server_error(status, error, event) {\n\tconst formatted_text = `\\n\\x1b[1;31m[${status}] ${event.request.method} ${event.url.pathname}\\x1b[0m`;\n\n\tif (status === 404) {\n\t\treturn formatted_text;\n\t}\n\n\treturn `${formatted_text}\\n${DEV ? clean_up_stack_trace(error) : error.stack}`;\n}\n\n/**\n * In dev, tidy up stack traces by making paths relative to the current project directory\n * @param {string} file\n */\nlet relative = (file) => file;\n\nif (DEV) {\n\ttry {\n\t\tconst path = await import('node:path');\n\t\tconst process = await import('node:process');\n\n\t\trelative = (file) => path.relative(process.cwd(), file);\n\t} catch {\n\t\t// do nothing\n\t}\n}\n\n/**\n * Provides a refined stack trace by excluding lines following the last occurrence of a line containing +page. +layout. or +server.\n * @param {Error} error\n */\nexport function clean_up_stack_trace(error) {\n\tconst stack_trace = (error.stack?.split('\\n') ?? []).map((line) => {\n\t\treturn line.replace(/\\((.+)(:\\d+:\\d+)\\)$/, (_, file, loc) => `(${relative(file)}${loc})`);\n\t});\n\n\t// progressive enhancement for people who haven't configured kit.files.src to something else\n\tconst last_line_from_src_code = stack_trace.findLastIndex((line) => /\\(src[\\\\/]/.test(line));\n\n\tif (last_line_from_src_code === -1) {\n\t\t// default to the whole stack trace\n\t\treturn error.stack;\n\t}\n\n\treturn stack_trace.slice(0, last_line_from_src_code + 1).join('\\n');\n}\n\n/**\n * Returns the filename without the extension. e.g., `+page.server`, `+page`, etc.\n * @param {string | undefined} node_id\n * @returns {string}\n */\nexport function get_node_type(node_id) {\n\tconst parts = node_id?.split('/');\n\tconst filename = parts?.at(-1);\n\tif (!filename) return 'unknown';\n\tconst dot_parts = filename.split('.');\n\treturn dot_parts.slice(0, -1).join('.');\n}\n","/**\n * Removes nullish values from an array.\n *\n * @template T\n * @param {Array<T>} arr\n */\nexport function compact(arr) {\n\treturn arr.filter(/** @returns {val is NonNullable<T>} */ (val) => val != null);\n}\n","const DATA_SUFFIX = '/__data.json';\nconst HTML_DATA_SUFFIX = '.html__data.json';\n\n/** @param {string} pathname */\nexport function has_data_suffix(pathname) {\n\treturn pathname.endsWith(DATA_SUFFIX) || pathname.endsWith(HTML_DATA_SUFFIX);\n}\n\n/** @param {string} pathname */\nexport function add_data_suffix(pathname) {\n\tif (pathname.endsWith('.html')) return pathname.replace(/\\.html$/, HTML_DATA_SUFFIX);\n\treturn pathname.replace(/\\/$/, '') + DATA_SUFFIX;\n}\n\n/** @param {string} pathname */\nexport function strip_data_suffix(pathname) {\n\tif (pathname.endsWith(HTML_DATA_SUFFIX)) {\n\t\treturn pathname.slice(0, -HTML_DATA_SUFFIX.length) + '.html';\n\t}\n\n\treturn pathname.slice(0, -DATA_SUFFIX.length);\n}\n\nconst ROUTE_SUFFIX = '/__route.js';\n\n/**\n * @param {string} pathname\n * @returns {boolean}\n */\nexport function has_resolution_suffix(pathname) {\n\treturn pathname.endsWith(ROUTE_SUFFIX);\n}\n\n/**\n * Convert a regular URL to a route to send to SvelteKit's server-side route resolution endpoint\n * @param {string} pathname\n * @returns {string}\n */\nexport function add_resolution_suffix(pathname) {\n\treturn pathname.replace(/\\/$/, '') + ROUTE_SUFFIX;\n}\n\n/**\n * @param {string} pathname\n * @returns {string}\n */\nexport function strip_resolution_suffix(pathname) {\n\treturn pathname.slice(0, -ROUTE_SUFFIX.length);\n}\n","/** @import { Tracer, Span, SpanContext } from '@opentelemetry/api' */\n\n/**\n * Tracer implementation that does nothing (null object).\n * @type {Tracer}\n */\nexport const noop_tracer = {\n\t/**\n\t * @returns {Span}\n\t */\n\tstartSpan() {\n\t\treturn noop_span;\n\t},\n\n\t/**\n\t * @param {unknown} _name\n\t * @param {unknown} arg_1\n\t * @param {unknown} [arg_2]\n\t * @param {Function} [arg_3]\n\t * @returns {unknown}\n\t */\n\tstartActiveSpan(_name, arg_1, arg_2, arg_3) {\n\t\tif (typeof arg_1 === 'function') {\n\t\t\treturn arg_1(noop_span);\n\t\t}\n\t\tif (typeof arg_2 === 'function') {\n\t\t\treturn arg_2(noop_span);\n\t\t}\n\t\tif (typeof arg_3 === 'function') {\n\t\t\treturn arg_3(noop_span);\n\t\t}\n\t}\n};\n\n/**\n * @type {Span}\n */\nexport const noop_span = {\n\tspanContext() {\n\t\treturn noop_span_context;\n\t},\n\tsetAttribute() {\n\t\treturn this;\n\t},\n\tsetAttributes() {\n\t\treturn this;\n\t},\n\taddEvent() {\n\t\treturn this;\n\t},\n\tsetStatus() {\n\t\treturn this;\n\t},\n\tupdateName() {\n\t\treturn this;\n\t},\n\tend() {\n\t\treturn this;\n\t},\n\tisRecording() {\n\t\treturn false;\n\t},\n\trecordException() {\n\t\treturn this;\n\t},\n\taddLink() {\n\t\treturn this;\n\t},\n\taddLinks() {\n\t\treturn this;\n\t}\n};\n\n/**\n * @type {SpanContext}\n */\nconst noop_span_context = {\n\ttraceId: '',\n\tspanId: '',\n\ttraceFlags: 0\n};\n","/** @import { RecordSpan } from 'types' */\nimport { HttpError, Redirect } from '@sveltejs/kit/internal';\nimport { noop_span } from './noop.js';\nimport { otel } from './otel.js';\n\n/** @type {RecordSpan} */\nexport async function record_span({ name, attributes, fn }) {\n\tif (otel === null) {\n\t\treturn fn(noop_span);\n\t}\n\n\tconst { SpanStatusCode, tracer } = await otel;\n\n\treturn tracer.startActiveSpan(name, { attributes }, async (span) => {\n\t\ttry {\n\t\t\treturn await fn(span);\n\t\t} catch (error) {\n\t\t\tif (error instanceof HttpError) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'known_error',\n\t\t\t\t\t[`${name}.result.status`]: error.status,\n\t\t\t\t\t[`${name}.result.message`]: error.body.message\n\t\t\t\t});\n\t\t\t\tif (error.status >= 500) {\n\t\t\t\t\tspan.recordException({\n\t\t\t\t\t\tname: 'HttpError',\n\t\t\t\t\t\tmessage: error.body.message\n\t\t\t\t\t});\n\t\t\t\t\tspan.setStatus({\n\t\t\t\t\t\tcode: SpanStatusCode.ERROR,\n\t\t\t\t\t\tmessage: error.body.message\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (error instanceof Redirect) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'redirect',\n\t\t\t\t\t[`${name}.result.status`]: error.status,\n\t\t\t\t\t[`${name}.result.location`]: error.location\n\t\t\t\t});\n\t\t\t} else if (error instanceof Error) {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'unknown_error'\n\t\t\t\t});\n\t\t\t\tspan.recordException({\n\t\t\t\t\tname: error.name,\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\tstack: error.stack\n\t\t\t\t});\n\t\t\t\tspan.setStatus({\n\t\t\t\t\tcode: SpanStatusCode.ERROR,\n\t\t\t\t\tmessage: error.message\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tspan.setAttributes({\n\t\t\t\t\t[`${name}.result.type`]: 'unknown_error'\n\t\t\t\t});\n\t\t\t\tspan.setStatus({ code: SpanStatusCode.ERROR });\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t} finally {\n\t\t\tspan.end();\n\t\t}\n\t});\n}\n","/** @import { RequestEvent, ActionResult, Actions } from '@sveltejs/kit' */\n/** @import { SSROptions, SSRNode, ServerNode, ServerHooks } from 'types' */\nimport * as devalue from 'devalue';\nimport { DEV } from 'esm-env';\nimport { json } from '@sveltejs/kit';\nimport { HttpError, Redirect, ActionFailure, SvelteKitError } from '@sveltejs/kit/internal';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { get_status, normalize_error } from '../../../utils/error.js';\nimport { is_form_content_type, negotiate } from '../../../utils/http.js';\nimport { handle_error_and_jsonify } from '../utils.js';\nimport { record_span } from '../../telemetry/record_span.js';\n\n/** @param {RequestEvent} event */\nexport function is_action_json_request(event) {\n\tconst accept = negotiate(event.request.headers.get('accept') ?? '*/*', [\n\t\t'application/json',\n\t\t'text/html'\n\t]);\n\n\treturn accept === 'application/json' && event.request.method === 'POST';\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {SSROptions} options\n * @param {SSRNode['server'] | undefined} server\n */\nexport async function handle_action_json_request(event, event_state, options, server) {\n\tconst actions = server?.actions;\n\n\tif (!actions) {\n\t\tconst no_actions_error = new SvelteKitError(\n\t\t\t405,\n\t\t\t'Method Not Allowed',\n\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t);\n\n\t\treturn action_json(\n\t\t\t{\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, no_actions_error)\n\t\t\t},\n\t\t\t{\n\t\t\t\tstatus: no_actions_error.status,\n\t\t\t\theaders: {\n\t\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\t\t\tallow: 'GET'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcheck_named_default_separate(actions);\n\n\ttry {\n\t\tconst data = await call_action(event, event_state, actions);\n\n\t\tif (DEV) {\n\t\t\tvalidate_action_return(data);\n\t\t}\n\n\t\tif (data instanceof ActionFailure) {\n\t\t\treturn action_json({\n\t\t\t\ttype: 'failure',\n\t\t\t\tstatus: data.status,\n\t\t\t\t// @ts-expect-error we assign a string to what is supposed to be an object. That's ok\n\t\t\t\t// because we don't use the object outside, and this way we have better code navigation\n\t\t\t\t// through knowing where the related interface is used.\n\t\t\t\tdata: stringify_action_response(\n\t\t\t\t\tdata.data,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t)\n\t\t\t});\n\t\t} else {\n\t\t\treturn action_json({\n\t\t\t\ttype: 'success',\n\t\t\t\tstatus: data ? 200 : 204,\n\t\t\t\t// @ts-expect-error see comment above\n\t\t\t\tdata: stringify_action_response(\n\t\t\t\t\tdata,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t)\n\t\t\t});\n\t\t}\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn action_json_redirect(err);\n\t\t}\n\n\t\treturn action_json(\n\t\t\t{\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tcheck_incorrect_fail_use(err)\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\tstatus: get_status(err)\n\t\t\t}\n\t\t);\n\t}\n}\n\n/**\n * @param {HttpError | Error} error\n */\nexport function check_incorrect_fail_use(error) {\n\treturn error instanceof ActionFailure\n\t\t? new Error('Cannot \"throw fail()\". Use \"return fail()\"')\n\t\t: error;\n}\n\n/**\n * @param {Redirect} redirect\n */\nexport function action_json_redirect(redirect) {\n\treturn action_json({\n\t\ttype: 'redirect',\n\t\tstatus: redirect.status,\n\t\tlocation: redirect.location\n\t});\n}\n\n/**\n * @param {ActionResult} data\n * @param {ResponseInit} [init]\n */\nfunction action_json(data, init) {\n\treturn json(data, init);\n}\n\n/**\n * @param {RequestEvent} event\n */\nexport function is_action_request(event) {\n\treturn event.request.method === 'POST';\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {SSRNode['server'] | undefined} server\n * @returns {Promise<ActionResult>}\n */\nexport async function handle_action_request(event, event_state, server) {\n\tconst actions = server?.actions;\n\n\tif (!actions) {\n\t\t// TODO should this be a different error altogether?\n\t\tevent.setHeaders({\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: 'GET'\n\t\t});\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: new SvelteKitError(\n\t\t\t\t405,\n\t\t\t\t'Method Not Allowed',\n\t\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t\t)\n\t\t};\n\t}\n\n\tcheck_named_default_separate(actions);\n\n\ttry {\n\t\tconst data = await call_action(event, event_state, actions);\n\n\t\tif (DEV) {\n\t\t\tvalidate_action_return(data);\n\t\t}\n\n\t\tif (data instanceof ActionFailure) {\n\t\t\treturn {\n\t\t\t\ttype: 'failure',\n\t\t\t\tstatus: data.status,\n\t\t\t\tdata: data.data\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: 'success',\n\t\t\t\tstatus: 200,\n\t\t\t\t// @ts-expect-error this will be removed upon serialization, so `undefined` is the same as omission\n\t\t\t\tdata\n\t\t\t};\n\t\t}\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn {\n\t\t\t\ttype: 'redirect',\n\t\t\t\tstatus: err.status,\n\t\t\t\tlocation: err.location\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: check_incorrect_fail_use(err)\n\t\t};\n\t}\n}\n\n/**\n * @param {Actions} actions\n */\nfunction check_named_default_separate(actions) {\n\tif (actions.default && Object.keys(actions).length > 1) {\n\t\tthrow new Error(\n\t\t\t'When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions'\n\t\t);\n\t}\n}\n\n/**\n * @param {RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {NonNullable<ServerNode['actions']>} actions\n * @throws {Redirect | HttpError | SvelteKitError | Error}\n */\nasync function call_action(event, event_state, actions) {\n\tconst url = new URL(event.request.url);\n\n\tlet name = 'default';\n\tfor (const param of url.searchParams) {\n\t\tif (param[0].startsWith('/')) {\n\t\t\tname = param[0].slice(1);\n\t\t\tif (name === 'default') {\n\t\t\t\tthrow new Error('Cannot use reserved action name \"default\"');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst action = actions[name];\n\tif (!action) {\n\t\tthrow new SvelteKitError(404, 'Not Found', `No action with name '${name}' found`);\n\t}\n\n\tif (!is_form_content_type(event.request)) {\n\t\tthrow new SvelteKitError(\n\t\t\t415,\n\t\t\t'Unsupported Media Type',\n\t\t\t`Form actions expect form-encoded data — received ${event.request.headers.get(\n\t\t\t\t'content-type'\n\t\t\t)}`\n\t\t);\n\t}\n\n\treturn record_span({\n\t\tname: 'sveltekit.form_action',\n\t\tattributes: {\n\t\t\t'sveltekit.form_action.name': name,\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\tconst result = await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\taction(traced_event)\n\t\t\t);\n\t\t\tif (result instanceof ActionFailure) {\n\t\t\t\tcurrent.setAttributes({\n\t\t\t\t\t'sveltekit.form_action.result.type': 'failure',\n\t\t\t\t\t'sveltekit.form_action.result.status': result.status\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t});\n}\n\n/** @param {any} data */\nfunction validate_action_return(data) {\n\tif (data instanceof Redirect) {\n\t\tthrow new Error('Cannot `return redirect(...)` — use `redirect(...)` instead');\n\t}\n\n\tif (data instanceof HttpError) {\n\t\tthrow new Error('Cannot `return error(...)` — use `error(...)` or `return fail(...)` instead');\n\t}\n}\n\n/**\n * Try to `devalue.uneval` the data object, and if it fails, return a proper Error with context\n * @param {any} data\n * @param {string} route_id\n * @param {ServerHooks['transport']} transport\n */\nexport function uneval_action_response(data, route_id, transport) {\n\tconst replacer = (/** @type {any} */ thing) => {\n\t\tfor (const key in transport) {\n\t\t\tconst encoded = transport[key].encode(thing);\n\t\t\tif (encoded) {\n\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn try_serialize(data, (value) => devalue.uneval(value, replacer), route_id);\n}\n\n/**\n * Try to `devalue.stringify` the data object, and if it fails, return a proper Error with context\n * @param {any} data\n * @param {string} route_id\n * @param {ServerHooks['transport']} transport\n */\nfunction stringify_action_response(data, route_id, transport) {\n\tconst encoders = Object.fromEntries(\n\t\tObject.entries(transport).map(([key, value]) => [key, value.encode])\n\t);\n\n\treturn try_serialize(data, (value) => devalue.stringify(value, encoders), route_id);\n}\n\n/**\n * @param {any} data\n * @param {(data: any) => string} fn\n * @param {string} route_id\n */\nfunction try_serialize(data, fn, route_id) {\n\ttry {\n\t\treturn fn(data);\n\t} catch (e) {\n\t\t// If we're here, the data could not be serialized with devalue\n\t\tconst error = /** @type {any} */ (e);\n\n\t\t// if someone tries to use `json()` in their action\n\t\tif (data instanceof Response) {\n\t\t\tthrow new Error(\n\t\t\t\t`Data returned from action inside ${route_id} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: \"invalid\" });`\n\t\t\t);\n\t\t}\n\n\t\t// if devalue could not serialize a property on the object, etc.\n\t\tif ('path' in error) {\n\t\t\tlet message = `Data returned from action inside ${route_id} is not serializable: ${error.message}`;\n\t\t\tif (error.path !== '') message += ` (data.${error.path})`;\n\t\t\tthrow new Error(message);\n\t\t}\n\n\t\tthrow error;\n\t}\n}\n","import { with_resolvers } from './promise.js';\n\n/**\n * Create an async iterator and a function to push values into it\n * @template T\n * @returns {{\n *   iterate: (transform?: (input: T) => T) => AsyncIterable<T>;\n *   add: (promise: Promise<T>) => void;\n * }}\n */\nexport function create_async_iterator() {\n\tlet resolved = -1;\n\tlet returned = -1;\n\n\t/** @type {import('./promise.js').PromiseWithResolvers<T>[]} */\n\tconst deferred = [];\n\n\treturn {\n\t\titerate: (transform = (x) => x) => {\n\t\t\treturn {\n\t\t\t\t[Symbol.asyncIterator]() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnext: async () => {\n\t\t\t\t\t\t\tconst next = deferred[++returned];\n\t\t\t\t\t\t\tif (!next) return { value: null, done: true };\n\n\t\t\t\t\t\t\tconst value = await next.promise;\n\t\t\t\t\t\t\treturn { value: transform(value), done: false };\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tadd: (promise) => {\n\t\t\tdeferred.push(with_resolvers());\n\t\t\tvoid promise.then((value) => {\n\t\t\t\tdeferred[++resolved].resolve(value);\n\t\t\t});\n\t\t}\n\t};\n}\n","import * as devalue from 'devalue';\nimport { compact } from '../../../utils/array.js';\nimport { create_async_iterator } from '../../../utils/streaming.js';\nimport {\n\tclarify_devalue_error,\n\tget_global_name,\n\thandle_error_and_jsonify,\n\tserialize_uses\n} from '../utils.js';\n\n/**\n * If the serialized data contains promises, `chunks` will be an\n * async iterable containing their resolutions\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSROptions} options\n * @returns {import('./types.js').ServerDataSerializer}\n */\nexport function server_data_serializer(event, event_state, options) {\n\tlet promise_id = 1;\n\tlet max_nodes = -1;\n\n\tconst iterator = create_async_iterator();\n\tconst global = get_global_name(options);\n\n\t/** @param {number} index */\n\tfunction get_replacer(index) {\n\t\t/** @param {any} thing */\n\t\treturn function replacer(thing) {\n\t\t\tif (typeof thing?.then === 'function') {\n\t\t\t\tconst id = promise_id++;\n\n\t\t\t\tconst promise = thing\n\t\t\t\t\t.then(/** @param {any} data */ (data) => ({ data }))\n\t\t\t\t\t.catch(\n\t\t\t\t\t\t/** @param {any} error */ async (error) => ({\n\t\t\t\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error)\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t\t.then(\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @param {{data: any; error: any}} result\n\t\t\t\t\t\t */\n\t\t\t\t\t\tasync ({ data, error }) => {\n\t\t\t\t\t\t\tlet str;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tstr = devalue.uneval(error ? [, error] : [data], replacer);\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\terror = await handle_error_and_jsonify(\n\t\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\t\tnew Error(`Failed to serialize promise while rendering ${event.route.id}`)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdata = undefined;\n\t\t\t\t\t\t\t\tstr = devalue.uneval([, error], replacer);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\tstr: `${global}.resolve(${id}, ${str.includes('app.decode') ? `(app) => ${str}` : `() => ${str}`})`\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\titerator.add(promise);\n\n\t\t\t\treturn `${global}.defer(${id})`;\n\t\t\t} else {\n\t\t\t\tfor (const key in options.hooks.transport) {\n\t\t\t\t\tconst encoded = options.hooks.transport[key].encode(thing);\n\t\t\t\t\tif (encoded) {\n\t\t\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tconst strings = /** @type {string[]} */ ([]);\n\n\treturn {\n\t\tset_max_nodes(i) {\n\t\t\tmax_nodes = i;\n\t\t},\n\n\t\tadd_node(i, node) {\n\t\t\ttry {\n\t\t\t\tif (!node) {\n\t\t\t\t\tstrings[i] = 'null';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t/** @type {any} */\n\t\t\t\tconst payload = { type: 'data', data: node.data, uses: serialize_uses(node) };\n\t\t\t\tif (node.slash) payload.slash = node.slash;\n\n\t\t\t\tstrings[i] = devalue.uneval(payload, get_replacer(i));\n\t\t\t} catch (e) {\n\t\t\t\t// @ts-expect-error\n\t\t\t\te.path = e.path.slice(1);\n\t\t\t\tthrow new Error(clarify_devalue_error(event, /** @type {any} */ (e)));\n\t\t\t}\n\t\t},\n\n\t\tget_data(csp) {\n\t\t\tconst open = `<script${csp.script_needs_nonce ? ` nonce=\"${csp.nonce}\"` : ''}>`;\n\t\t\tconst close = `</script>\\n`;\n\n\t\t\treturn {\n\t\t\t\tdata: `[${compact(max_nodes > -1 ? strings.slice(0, max_nodes) : strings).join(',')}]`,\n\t\t\t\tchunks:\n\t\t\t\t\tpromise_id > 1\n\t\t\t\t\t\t? iterator.iterate(({ index, str }) => {\n\t\t\t\t\t\t\t\tif (max_nodes > -1 && index >= max_nodes) {\n\t\t\t\t\t\t\t\t\treturn '';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn open + str + close;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t: null\n\t\t\t};\n\t\t}\n\t};\n}\n\n/**\n * If the serialized data contains promises, `chunks` will be an\n * async iterable containing their resolutions\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSROptions} options\n * @returns {import('./types.js').ServerDataSerializerJson}\n */\nexport function server_data_serializer_json(event, event_state, options) {\n\tlet promise_id = 1;\n\n\tconst iterator = create_async_iterator();\n\n\tconst reducers = {\n\t\t...Object.fromEntries(\n\t\t\tObject.entries(options.hooks.transport).map(([key, value]) => [key, value.encode])\n\t\t),\n\t\t/** @param {any} thing */\n\t\tPromise: (thing) => {\n\t\t\tif (typeof thing?.then !== 'function') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = promise_id++;\n\n\t\t\t/** @type {'data' | 'error'} */\n\t\t\tlet key = 'data';\n\n\t\t\tconst promise = thing\n\t\t\t\t.catch(\n\t\t\t\t\t/** @param {any} e */ async (e) => {\n\t\t\t\t\t\tkey = 'error';\n\t\t\t\t\t\treturn handle_error_and_jsonify(event, event_state, options, /** @type {any} */ (e));\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(\n\t\t\t\t\t/** @param {any} value */\n\t\t\t\t\tasync (value) => {\n\t\t\t\t\t\tlet str;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tstr = devalue.stringify(value, reducers);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tconst error = await handle_error_and_jsonify(\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tnew Error(`Failed to serialize promise while rendering ${event.route.id}`)\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tkey = 'error';\n\t\t\t\t\t\t\tstr = devalue.stringify(error, reducers);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn `{\"type\":\"chunk\",\"id\":${id},\"${key}\":${str}}\\n`;\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\titerator.add(promise);\n\n\t\t\treturn id;\n\t\t}\n\t};\n\n\tconst strings = /** @type {string[]} */ ([]);\n\n\treturn {\n\t\tadd_node(i, node) {\n\t\t\ttry {\n\t\t\t\tif (!node) {\n\t\t\t\t\tstrings[i] = 'null';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (node.type === 'error' || node.type === 'skip') {\n\t\t\t\t\tstrings[i] = JSON.stringify(node);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstrings[i] =\n\t\t\t\t\t`{\"type\":\"data\",\"data\":${devalue.stringify(node.data, reducers)},\"uses\":${JSON.stringify(\n\t\t\t\t\t\tserialize_uses(node)\n\t\t\t\t\t)}${node.slash ? `,\"slash\":${JSON.stringify(node.slash)}` : ''}}`;\n\t\t\t} catch (e) {\n\t\t\t\t// @ts-expect-error\n\t\t\t\te.path = 'data' + e.path;\n\t\t\t\tthrow new Error(clarify_devalue_error(event, /** @type {any} */ (e)));\n\t\t\t}\n\t\t},\n\n\t\tget_data() {\n\t\t\treturn {\n\t\t\t\tdata: `{\"type\":\"data\",\"nodes\":[${strings.join(',')}]}\\n`,\n\t\t\t\tchunks: promise_id > 1 ? iterator.iterate() : null\n\t\t\t};\n\t\t}\n\t};\n}\n","import { BROWSER, DEV } from 'esm-env';\n\n/**\n * Matches a URI scheme. See https://www.rfc-editor.org/rfc/rfc3986#section-3.1\n * @type {RegExp}\n */\nexport const SCHEME = /^[a-z][a-z\\d+\\-.]+:/i;\n\nconst internal = new URL('sveltekit-internal://');\n\n/**\n * @param {string} base\n * @param {string} path\n */\nexport function resolve(base, path) {\n\t// special case\n\tif (path[0] === '/' && path[1] === '/') return path;\n\n\tlet url = new URL(base, internal);\n\turl = new URL(path, url);\n\n\treturn url.protocol === internal.protocol ? url.pathname + url.search + url.hash : url.href;\n}\n\n/** @param {string} path */\nexport function is_root_relative(path) {\n\treturn path[0] === '/' && path[1] !== '/';\n}\n\n/**\n * @param {string} path\n * @param {import('types').TrailingSlash} trailing_slash\n */\nexport function normalize_path(path, trailing_slash) {\n\tif (path === '/' || trailing_slash === 'ignore') return path;\n\n\tif (trailing_slash === 'never') {\n\t\treturn path.endsWith('/') ? path.slice(0, -1) : path;\n\t} else if (trailing_slash === 'always' && !path.endsWith('/')) {\n\t\treturn path + '/';\n\t}\n\n\treturn path;\n}\n\n/**\n * Decode pathname excluding %25 to prevent further double decoding of params\n * @param {string} pathname\n */\nexport function decode_pathname(pathname) {\n\treturn pathname.split('%25').map(decodeURI).join('%25');\n}\n\n/** @param {Record<string, string>} params */\nexport function decode_params(params) {\n\tfor (const key in params) {\n\t\t// input has already been decoded by decodeURI\n\t\t// now handle the rest\n\t\tparams[key] = decodeURIComponent(params[key]);\n\t}\n\n\treturn params;\n}\n\n/**\n * The error when a URL is malformed is not very helpful, so we augment it with the URI\n * @param {string} uri\n */\nexport function decode_uri(uri) {\n\ttry {\n\t\treturn decodeURI(uri);\n\t} catch (e) {\n\t\tif (e instanceof Error) {\n\t\t\te.message = `Failed to decode URI: ${uri}\\n` + e.message;\n\t\t}\n\t\tthrow e;\n\t}\n}\n\n/**\n * Returns everything up to the first `#` in a URL\n * @param {{href: string}} url_like\n */\nexport function strip_hash({ href }) {\n\treturn href.split('#')[0];\n}\n\n/**\n * @param {URL} url\n * @param {() => void} callback\n * @param {(search_param: string) => void} search_params_callback\n * @param {boolean} [allow_hash]\n */\nexport function make_trackable(url, callback, search_params_callback, allow_hash = false) {\n\tconst tracked = new URL(url);\n\n\tObject.defineProperty(tracked, 'searchParams', {\n\t\tvalue: new Proxy(tracked.searchParams, {\n\t\t\tget(obj, key) {\n\t\t\t\tif (key === 'get' || key === 'getAll' || key === 'has') {\n\t\t\t\t\treturn (/**@type {string}*/ param) => {\n\t\t\t\t\t\tsearch_params_callback(param);\n\t\t\t\t\t\treturn obj[key](param);\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// if they try to access something different from what is in `tracked_search_params_properties`\n\t\t\t\t// we track the whole url (entries, values, keys etc)\n\t\t\t\tcallback();\n\n\t\t\t\tconst value = Reflect.get(obj, key);\n\t\t\t\treturn typeof value === 'function' ? value.bind(obj) : value;\n\t\t\t}\n\t\t}),\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n\n\t/**\n\t * URL properties that could change during the lifetime of the page,\n\t * which excludes things like `origin`\n\t */\n\tconst tracked_url_properties = ['href', 'pathname', 'search', 'toString', 'toJSON'];\n\tif (allow_hash) tracked_url_properties.push('hash');\n\n\tfor (const property of tracked_url_properties) {\n\t\tObject.defineProperty(tracked, property, {\n\t\t\tget() {\n\t\t\t\tcallback();\n\t\t\t\t// @ts-expect-error\n\t\t\t\treturn url[property];\n\t\t\t},\n\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\n\tif (!BROWSER) {\n\t\t// @ts-ignore\n\t\ttracked[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(url, opts);\n\t\t};\n\n\t\t// @ts-ignore\n\t\ttracked.searchParams[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(url.searchParams, opts);\n\t\t};\n\t}\n\n\tif ((DEV || !BROWSER) && !allow_hash) {\n\t\tdisable_hash(tracked);\n\t}\n\n\treturn tracked;\n}\n\n/**\n * Disallow access to `url.hash` on the server and in `load`\n * @param {URL} url\n */\nfunction disable_hash(url) {\n\tallow_nodejs_console_log(url);\n\n\tObject.defineProperty(url, 'hash', {\n\t\tget() {\n\t\t\tthrow new Error(\n\t\t\t\t'Cannot access event.url.hash. Consider using `page.url.hash` inside a component instead'\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * Disallow access to `url.search` and `url.searchParams` during prerendering\n * @param {URL} url\n */\nexport function disable_search(url) {\n\tallow_nodejs_console_log(url);\n\n\tfor (const property of ['search', 'searchParams']) {\n\t\tObject.defineProperty(url, property, {\n\t\t\tget() {\n\t\t\t\tthrow new Error(`Cannot access url.${property} on a page with prerendering enabled`);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Allow URL to be console logged, bypassing disabled properties.\n * @param {URL} url\n */\nfunction allow_nodejs_console_log(url) {\n\tif (!BROWSER) {\n\t\t// @ts-ignore\n\t\turl[Symbol.for('nodejs.util.inspect.custom')] = (depth, opts, inspect) => {\n\t\t\treturn inspect(new URL(url), opts);\n\t\t};\n\t}\n}\n","/** @import { Transport } from '@sveltejs/kit' */\nimport * as devalue from 'devalue';\nimport { base64_decode, base64_encode, text_decoder } from './utils.js';\n\n/**\n * @param {string} route_id\n * @param {string} dep\n */\nexport function validate_depends(route_id, dep) {\n\tconst match = /^(moz-icon|view-source|jar):/.exec(dep);\n\tif (match) {\n\t\tconsole.warn(\n\t\t\t`${route_id}: Calling \\`depends('${dep}')\\` will throw an error in Firefox because \\`${match[1]}\\` is a special URI scheme`\n\t\t);\n\t}\n}\n\nexport const INVALIDATED_PARAM = 'x-sveltekit-invalidated';\n\nexport const TRAILING_SLASH_PARAM = 'x-sveltekit-trailing-slash';\n\n/**\n * @param {any} data\n * @param {string} [location_description]\n */\nexport function validate_load_response(data, location_description) {\n\tif (data != null && Object.getPrototypeOf(data) !== Object.prototype) {\n\t\tthrow new Error(\n\t\t\t`a load function ${location_description} returned ${\n\t\t\t\ttypeof data !== 'object'\n\t\t\t\t\t? `a ${typeof data}`\n\t\t\t\t\t: data instanceof Response\n\t\t\t\t\t\t? 'a Response object'\n\t\t\t\t\t\t: Array.isArray(data)\n\t\t\t\t\t\t\t? 'an array'\n\t\t\t\t\t\t\t: 'a non-plain object'\n\t\t\t}, but must return a plain object at the top level (i.e. \\`return {...}\\`)`\n\t\t);\n\t}\n}\n\n/**\n * Try to `devalue.stringify` the data object using the provided transport encoders.\n * @param {any} data\n * @param {Transport} transport\n */\nexport function stringify(data, transport) {\n\tconst encoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.encode]));\n\n\treturn devalue.stringify(data, encoders);\n}\n\n/**\n * Stringifies the argument (if any) for a remote function in such a way that\n * it is both a valid URL and a valid file name (necessary for prerendering).\n * @param {any} value\n * @param {Transport} transport\n */\nexport function stringify_remote_arg(value, transport) {\n\tif (value === undefined) return '';\n\n\t// If people hit file/url size limits, we can look into using something like compress_and_encode_text from svelte.dev beyond a certain size\n\tconst json_string = stringify(value, transport);\n\n\tconst bytes = new TextEncoder().encode(json_string);\n\treturn base64_encode(bytes).replaceAll('=', '').replaceAll('+', '-').replaceAll('/', '_');\n}\n\n/**\n * Parses the argument (if any) for a remote function\n * @param {string} string\n * @param {Transport} transport\n */\nexport function parse_remote_arg(string, transport) {\n\tif (!string) return undefined;\n\n\tconst json_string = text_decoder.decode(\n\t\t// no need to add back `=` characters, atob can handle it\n\t\tbase64_decode(string.replaceAll('-', '+').replaceAll('_', '/'))\n\t);\n\n\tconst decoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.decode]));\n\n\treturn devalue.parse(json_string, decoders);\n}\n\n/**\n * @param {string} id\n * @param {string} payload\n */\nexport function create_remote_key(id, payload) {\n\treturn id + '/' + payload;\n}\n","import { DEV } from 'esm-env';\nimport { disable_search, make_trackable } from '../../../utils/url.js';\nimport { validate_depends, validate_load_response } from '../../shared.js';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { record_span } from '../../telemetry/record_span.js';\nimport { base64_encode, text_decoder } from '../../utils.js';\nimport { NULL_BODY_STATUS } from '../constants.js';\nimport { get_node_type } from '../utils.js';\n\n/**\n * Calls the user's server `load` function.\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   state: import('types').SSRState;\n *   node: import('types').SSRNode | undefined;\n *   parent: () => Promise<Record<string, any>>;\n * }} opts\n * @returns {Promise<import('types').ServerDataNode | null>}\n */\nexport async function load_server_data({ event, event_state, state, node, parent }) {\n\tif (!node?.server) return null;\n\n\tlet is_tracking = true;\n\n\tconst uses = {\n\t\tdependencies: new Set(),\n\t\tparams: new Set(),\n\t\tparent: false,\n\t\troute: false,\n\t\turl: false,\n\t\tsearch_params: new Set()\n\t};\n\n\tconst load = node.server.load;\n\t// TODO: shouldn't this be calculated using PageNodes? there could be a trailingSlash option on a layout\n\tconst slash = node.server.trailingSlash;\n\n\tif (!load) {\n\t\treturn { type: 'data', data: null, uses, slash };\n\t}\n\n\tconst url = make_trackable(\n\t\tevent.url,\n\t\t() => {\n\t\t\tif (DEV && done && !uses.url) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${node.server_id}: Accessing URL properties in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the URL changes`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (is_tracking) {\n\t\t\t\tuses.url = true;\n\t\t\t}\n\t\t},\n\t\t(param) => {\n\t\t\tif (DEV && done && !uses.search_params.has(param)) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${node.server_id}: Accessing URL properties in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the URL changes`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (is_tracking) {\n\t\t\t\tuses.search_params.add(param);\n\t\t\t}\n\t\t}\n\t);\n\n\tif (state.prerendering) {\n\t\tdisable_search(url);\n\t}\n\n\tlet done = false;\n\n\tconst result = await record_span({\n\t\tname: 'sveltekit.load',\n\t\tattributes: {\n\t\t\t'sveltekit.load.node_id': node.server_id || 'unknown',\n\t\t\t'sveltekit.load.node_type': get_node_type(node.server_id),\n\t\t\t'sveltekit.load.environment': 'server',\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\tconst result = await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\tload.call(null, {\n\t\t\t\t\t...traced_event,\n\t\t\t\t\tfetch: (info, init) => {\n\t\t\t\t\t\tconst url = new URL(info instanceof Request ? info.url : info, event.url);\n\n\t\t\t\t\t\tif (DEV && done && !uses.dependencies.has(url.href)) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`event.fetch(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the dependency is invalidated`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Note: server fetches are not added to uses.depends due to security concerns\n\t\t\t\t\t\treturn event.fetch(info, init);\n\t\t\t\t\t},\n\t\t\t\t\t/** @param {string[]} deps */\n\t\t\t\t\tdepends: (...deps) => {\n\t\t\t\t\t\tfor (const dep of deps) {\n\t\t\t\t\t\t\tconst { href } = new URL(dep, event.url);\n\n\t\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\t\tvalidate_depends(node.server_id || 'missing route ID', dep);\n\n\t\t\t\t\t\t\t\tif (done && !uses.dependencies.has(href)) {\n\t\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`depends(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the dependency is invalidated`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tuses.dependencies.add(href);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparams: new Proxy(event.params, {\n\t\t\t\t\t\tget: (target, key) => {\n\t\t\t\t\t\t\tif (DEV && done && typeof key === 'string' && !uses.params.has(key)) {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`${node.server_id}: Accessing \\`params.${String(\n\t\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t\t)}\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the param changes`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\t\tuses.params.add(key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn target[/** @type {string} */ (key)];\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\tif (DEV && done && !uses.parent) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`${node.server_id}: Calling \\`parent(...)\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when parent data changes`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\tuses.parent = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parent();\n\t\t\t\t\t},\n\t\t\t\t\troute: new Proxy(event.route, {\n\t\t\t\t\t\tget: (target, key) => {\n\t\t\t\t\t\t\tif (DEV && done && typeof key === 'string' && !uses.route) {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`${node.server_id}: Accessing \\`route.${String(\n\t\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t\t)}\\` in a promise handler after \\`load(...)\\` has returned will not cause the function to re-run when the route changes`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (is_tracking) {\n\t\t\t\t\t\t\t\tuses.route = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn target[/** @type {'id'} */ (key)];\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\turl,\n\t\t\t\t\tuntrack(fn) {\n\t\t\t\t\t\tis_tracking = false;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn fn();\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tis_tracking = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn result;\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\tvalidate_load_response(result, `in ${node.server_id}`);\n\t}\n\n\tdone = true;\n\n\treturn {\n\t\ttype: 'data',\n\t\tdata: result ?? null,\n\t\tuses,\n\t\tslash\n\t};\n}\n\n/**\n * Calls the user's `load` function.\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   fetched: import('./types.js').Fetched[];\n *   node: import('types').SSRNode | undefined;\n *   parent: () => Promise<Record<string, any>>;\n *   resolve_opts: import('types').RequiredResolveOptions;\n *   server_data_promise: Promise<import('types').ServerDataNode | null>;\n *   state: import('types').SSRState;\n *   csr: boolean;\n * }} opts\n * @returns {Promise<Record<string, any | Promise<any>> | null>}\n */\nexport async function load_data({\n\tevent,\n\tevent_state,\n\tfetched,\n\tnode,\n\tparent,\n\tserver_data_promise,\n\tstate,\n\tresolve_opts,\n\tcsr\n}) {\n\tconst server_data_node = await server_data_promise;\n\n\tconst load = node?.universal?.load;\n\n\tif (!load) {\n\t\treturn server_data_node?.data ?? null;\n\t}\n\n\tconst result = await record_span({\n\t\tname: 'sveltekit.load',\n\t\tattributes: {\n\t\t\t'sveltekit.load.node_id': node.universal_id || 'unknown',\n\t\t\t'sveltekit.load.node_type': get_node_type(node.universal_id),\n\t\t\t'sveltekit.load.environment': 'server',\n\t\t\t'http.route': event.route.id || 'unknown'\n\t\t},\n\t\tfn: async (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\tload.call(null, {\n\t\t\t\t\turl: event.url,\n\t\t\t\t\tparams: event.params,\n\t\t\t\t\tdata: server_data_node?.data ?? null,\n\t\t\t\t\troute: event.route,\n\t\t\t\t\tfetch: create_universal_fetch(event, state, fetched, csr, resolve_opts),\n\t\t\t\t\tsetHeaders: event.setHeaders,\n\t\t\t\t\tdepends: () => {},\n\t\t\t\t\tparent,\n\t\t\t\t\tuntrack: (fn) => fn(),\n\t\t\t\t\ttracing: traced_event.tracing\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\tvalidate_load_response(result, `in ${node.universal_id}`);\n\t}\n\n\treturn result ?? null;\n}\n\n/**\n * @param {Pick<import('@sveltejs/kit').RequestEvent, 'fetch' | 'url' | 'request' | 'route'>} event\n * @param {import('types').SSRState} state\n * @param {import('./types.js').Fetched[]} fetched\n * @param {boolean} csr\n * @param {Pick<Required<import('@sveltejs/kit').ResolveOptions>, 'filterSerializedResponseHeaders'>} resolve_opts\n * @returns {typeof fetch}\n */\nexport function create_universal_fetch(event, state, fetched, csr, resolve_opts) {\n\t/**\n\t * @param {URL | RequestInfo} input\n\t * @param {RequestInit} [init]\n\t */\n\tconst universal_fetch = async (input, init) => {\n\t\tconst cloned_body = input instanceof Request && input.body ? input.clone().body : null;\n\n\t\tconst cloned_headers =\n\t\t\tinput instanceof Request && [...input.headers].length\n\t\t\t\t? new Headers(input.headers)\n\t\t\t\t: init?.headers;\n\n\t\tlet response = await event.fetch(input, init);\n\n\t\tconst url = new URL(input instanceof Request ? input.url : input, event.url);\n\t\tconst same_origin = url.origin === event.url.origin;\n\n\t\t/** @type {import('types').PrerenderDependency} */\n\t\tlet dependency;\n\n\t\tif (same_origin) {\n\t\t\tif (state.prerendering) {\n\t\t\t\tdependency = { response, body: null };\n\t\t\t\tstate.prerendering.dependencies.set(url.pathname, dependency);\n\t\t\t}\n\t\t} else if (url.protocol === 'https:' || url.protocol === 'http:') {\n\t\t\t// simulate CORS errors and \"no access to body in no-cors mode\" server-side for consistency with client-side behaviour\n\t\t\tconst mode = input instanceof Request ? input.mode : (init?.mode ?? 'cors');\n\t\t\tif (mode === 'no-cors') {\n\t\t\t\tresponse = new Response('', {\n\t\t\t\t\tstatus: response.status,\n\t\t\t\t\tstatusText: response.statusText,\n\t\t\t\t\theaders: response.headers\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst acao = response.headers.get('access-control-allow-origin');\n\t\t\t\tif (!acao || (acao !== event.url.origin && acao !== '*')) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`CORS error: ${\n\t\t\t\t\t\t\tacao ? 'Incorrect' : 'No'\n\t\t\t\t\t\t} 'Access-Control-Allow-Origin' header is present on the requested resource`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/** @type {ReadableStream<Uint8Array>} */\n\t\tlet teed_body;\n\n\t\tconst proxy = new Proxy(response, {\n\t\t\tget(response, key, receiver) {\n\t\t\t\t/**\n\t\t\t\t * @param {string | undefined} body\n\t\t\t\t * @param {boolean} is_b64\n\t\t\t\t */\n\t\t\t\tasync function push_fetched(body, is_b64) {\n\t\t\t\t\tconst status_number = Number(response.status);\n\t\t\t\t\tif (isNaN(status_number)) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`response.status is not a number. value: \"${\n\t\t\t\t\t\t\t\tresponse.status\n\t\t\t\t\t\t\t}\" type: ${typeof response.status}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfetched.push({\n\t\t\t\t\t\turl: same_origin ? url.href.slice(event.url.origin.length) : url.href,\n\t\t\t\t\t\tmethod: event.request.method,\n\t\t\t\t\t\trequest_body: /** @type {string | ArrayBufferView | undefined} */ (\n\t\t\t\t\t\t\tinput instanceof Request && cloned_body\n\t\t\t\t\t\t\t\t? await stream_to_string(cloned_body)\n\t\t\t\t\t\t\t\t: init?.body\n\t\t\t\t\t\t),\n\t\t\t\t\t\trequest_headers: cloned_headers,\n\t\t\t\t\t\tresponse_body: body,\n\t\t\t\t\t\tresponse,\n\t\t\t\t\t\tis_b64\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (key === 'body') {\n\t\t\t\t\tif (response.body === null) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (teed_body) {\n\t\t\t\t\t\treturn teed_body;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [a, b] = response.body.tee();\n\n\t\t\t\t\tvoid (async () => {\n\t\t\t\t\t\tlet result = new Uint8Array();\n\n\t\t\t\t\t\tfor await (const chunk of a) {\n\t\t\t\t\t\t\tconst combined = new Uint8Array(result.length + chunk.length);\n\n\t\t\t\t\t\t\tcombined.set(result, 0);\n\t\t\t\t\t\t\tcombined.set(chunk, result.length);\n\n\t\t\t\t\t\t\tresult = combined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\t\tdependency.body = new Uint8Array(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvoid push_fetched(base64_encode(result), true);\n\t\t\t\t\t})();\n\n\t\t\t\t\treturn (teed_body = b);\n\t\t\t\t}\n\n\t\t\t\tif (key === 'arrayBuffer') {\n\t\t\t\t\treturn async () => {\n\t\t\t\t\t\tconst buffer = await response.arrayBuffer();\n\n\t\t\t\t\t\tconst bytes = new Uint8Array(buffer);\n\n\t\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\t\tdependency.body = bytes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buffer instanceof ArrayBuffer) {\n\t\t\t\t\t\t\tawait push_fetched(base64_encode(bytes), true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn buffer;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tasync function text() {\n\t\t\t\t\tconst body = await response.text();\n\n\t\t\t\t\tif (body === '' && NULL_BODY_STATUS.includes(response.status)) {\n\t\t\t\t\t\tawait push_fetched(undefined, false);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!body || typeof body === 'string') {\n\t\t\t\t\t\tawait push_fetched(body, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dependency) {\n\t\t\t\t\t\tdependency.body = body;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn body;\n\t\t\t\t}\n\n\t\t\t\tif (key === 'text') {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\n\t\t\t\tif (key === 'json') {\n\t\t\t\t\treturn async () => {\n\t\t\t\t\t\tconst body = await text();\n\t\t\t\t\t\treturn body ? JSON.parse(body) : undefined;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst value = Reflect.get(response, key, response);\n\n\t\t\t\tif (value instanceof Function) {\n\t\t\t\t\t// On Node v24+, the Response object has a private element #state – we\n\t\t\t\t\t// need to bind this function to the response in order to allow it to\n\t\t\t\t\t// access this private element. Defining the name and length ensure it\n\t\t\t\t\t// is identical to the original function when introspected.\n\t\t\t\t\treturn Object.defineProperties(\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @this {any}\n\t\t\t\t\t\t */\n\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\treturn Reflect.apply(value, this === receiver ? response : this, arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: { value: value.name },\n\t\t\t\t\t\t\tlength: { value: value.length }\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\n\t\tif (csr) {\n\t\t\t// ensure that excluded headers can't be read\n\t\t\tconst get = response.headers.get;\n\t\t\tresponse.headers.get = (key) => {\n\t\t\t\tconst lower = key.toLowerCase();\n\t\t\t\tconst value = get.call(response.headers, lower);\n\t\t\t\tif (value && !lower.startsWith('x-sveltekit-')) {\n\t\t\t\t\tconst included = resolve_opts.filterSerializedResponseHeaders(lower, value);\n\t\t\t\t\tif (!included) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Failed to get response header \"${lower}\" — it must be included by the \\`filterSerializedResponseHeaders\\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${event.route.id})`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t};\n\t\t}\n\n\t\treturn proxy;\n\t};\n\n\t// Don't make this function `async`! Otherwise, the user has to `catch` promises they use for streaming responses or else\n\t// it will be an unhandled rejection. Instead, we add a `.catch(() => {})` ourselves below to this from happening.\n\treturn (input, init) => {\n\t\t// See docs in fetch.js for why we need to do this\n\t\tconst response = universal_fetch(input, init);\n\t\tresponse.catch(() => {});\n\t\treturn response;\n\t};\n}\n\n/**\n * @param {ReadableStream<Uint8Array>} stream\n */\nasync function stream_to_string(stream) {\n\tlet result = '';\n\tconst reader = stream.getReader();\n\twhile (true) {\n\t\tconst { done, value } = await reader.read();\n\t\tif (done) {\n\t\t\tbreak;\n\t\t}\n\t\tresult += text_decoder.decode(value);\n\t}\n\treturn result;\n}\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template [T=void]\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n","/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\n/**\n * An effect that does not destroy its child effects when it reruns.\n * Runs as part of render effects, i.e. not eagerly as part of tree traversal or effect flushing.\n */\nexport const MANAGED_EFFECT = 1 << 24;\n/**\n * An effect that does not destroy its child effects when it reruns (like MANAGED_EFFECT).\n * Runs eagerly as part of tree traversal or effect flushing.\n */\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\n/**\n * Indicates that a reaction is connected to an effect root — either it is an effect,\n * or it is a derived that is depended on by at least one effect. If a derived has\n * no dependents, we can disconnect it from the graph, allowing it to either be\n * GC'd or reconnected later if an effect comes to depend on it again\n */\nexport const CONNECTED = 1 << 9;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\n/** Set once an effect that should run synchronously has run */\nexport const EFFECT_RAN = 1 << 15;\n/**\n * 'Transparent' effects do not create a transition boundary.\n * This is on a block effect 99% of the time but may also be on a branch effect if its parent block effect was pruned\n */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const EAGER_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\nexport const EFFECT_OFFSCREEN = 1 << 25;\n\n// Flags exclusive to deriveds\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n","/** @import { TemplateNode } from '#client' */\n\nimport { COMMENT_NODE } from '#client/constants';\nimport {\n\tHYDRATION_END,\n\tHYDRATION_ERROR,\n\tHYDRATION_START,\n\tHYDRATION_START_ELSE\n} from '../../../constants.js';\nimport * as w from '../warnings.js';\nimport { get_next_sibling } from './operations.js';\n\n/**\n * Use this variable to guard everything related to hydration code so it can be treeshaken out\n * if the user doesn't use the `hydrate` method and these code paths are therefore not needed.\n */\nexport let hydrating = false;\n\n/** @param {boolean} value */\nexport function set_hydrating(value) {\n\thydrating = value;\n}\n\n/**\n * The node that is currently being hydrated. This starts out as the first node inside the opening\n * <!--[--> comment, and updates each time a component calls `$.child(...)` or `$.sibling(...)`.\n * When entering a block (e.g. `{#if ...}`), `hydrate_node` is the block opening comment; by the\n * time we leave the block it is the closing comment, which serves as the block's anchor.\n * @type {TemplateNode}\n */\nexport let hydrate_node;\n\n/** @param {TemplateNode | null} node */\nexport function set_hydrate_node(node) {\n\tif (node === null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn (hydrate_node = node);\n}\n\nexport function hydrate_next() {\n\treturn set_hydrate_node(get_next_sibling(hydrate_node));\n}\n\n/** @param {TemplateNode} node */\nexport function reset(node) {\n\tif (!hydrating) return;\n\n\t// If the node has remaining siblings, something has gone wrong\n\tif (get_next_sibling(hydrate_node) !== null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\thydrate_node = node;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n */\nexport function hydrate_template(template) {\n\tif (hydrating) {\n\t\t// @ts-expect-error TemplateNode doesn't include DocumentFragment, but it's actually fine\n\t\thydrate_node = template.content;\n\t}\n}\n\nexport function next(count = 1) {\n\tif (hydrating) {\n\t\tvar i = count;\n\t\tvar node = hydrate_node;\n\n\t\twhile (i--) {\n\t\t\tnode = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\t}\n\n\t\thydrate_node = node;\n\t}\n}\n\n/**\n * Skips or removes (depending on {@link remove}) all nodes starting at `hydrate_node` up until the next hydration end comment\n * @param {boolean} remove\n */\nexport function skip_nodes(remove = true) {\n\tvar depth = 0;\n\tvar node = hydrate_node;\n\n\twhile (true) {\n\t\tif (node.nodeType === COMMENT_NODE) {\n\t\t\tvar data = /** @type {Comment} */ (node).data;\n\n\t\t\tif (data === HYDRATION_END) {\n\t\t\t\tif (depth === 0) return node;\n\t\t\t\tdepth -= 1;\n\t\t\t} else if (data === HYDRATION_START || data === HYDRATION_START_ELSE) {\n\t\t\t\tdepth += 1;\n\t\t\t}\n\t\t}\n\n\t\tvar next = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tif (remove) node.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n *\n * @param {TemplateNode} node\n */\nexport function read_hydration_instruction(node) {\n\tif (!node || node.nodeType !== COMMENT_NODE) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn /** @type {Comment} */ (node).data;\n}\n","/** True if experimental.async=true */\nexport let async_mode_flag = false;\n/** True if we're not certain that we only have Svelte 5 code in the compilation */\nexport let legacy_mode_flag = false;\n/** True if $inspect.trace is used */\nexport let tracing_mode_flag = false;\n\nexport function enable_async_mode_flag() {\n\tasync_mode_flag = true;\n}\n\n/** ONLY USE THIS DURING TESTING */\nexport function disable_async_mode_flag() {\n\tasync_mode_flag = false;\n}\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n","/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid =\n\t\t\t!active_reaction &&\n\t\t\t(flags & BRANCH_EFFECT) !== 0 &&\n\t\t\t// pop() runs synchronously, so this indicates we're setting context after an await\n\t\t\t!(/** @type {ComponentContext} */ (component_context).i);\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\ti: false,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcontext.i = true;\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n","/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (DEV && !effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (DEV && error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n","/** @import { Fork } from 'svelte' */\n/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tERROR_VALUE,\n\tWAS_MARKED,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_dirty,\n\tis_updating_effect,\n\tset_is_updating_effect,\n\tset_signal_status,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { flush_eager_effects, old_values, set_eager_effects, source, update } from './sources.js';\nimport { eager_effect, unlink_effect } from './effects.js';\n\n/**\n * @typedef {{\n *   parent: EffectTarget | null;\n *   effect: Effect | null;\n *   effects: Effect[];\n *   render_effects: Effect[];\n *   block_effects: Effect[];\n * }} EffectTarget\n */\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n// TODO this should really be a property of `batch`\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\tprevious = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#commit_callbacks = new Set();\n\n\t/**\n\t * If a fork is discarded, we need to destroy any effects that are no longer needed\n\t * @type {Set<(batch: Batch) => void>}\n\t */\n\t#discard_callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Effect[]}\n\t */\n\t#dirty_effects = [];\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Effect[]}\n\t */\n\t#maybe_dirty_effects = [];\n\n\t/**\n\t * A set of branches that still exist, but will be destroyed when this batch\n\t * is committed — we skip over these during `process`\n\t * @type {Set<Effect>}\n\t */\n\tskipped_effects = new Set();\n\n\tis_fork = false;\n\n\tis_deferred() {\n\t\treturn this.is_fork || this.#blocking_pending > 0;\n\t}\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tprevious_batch = null;\n\n\t\tthis.apply();\n\n\t\t/** @type {EffectTarget} */\n\t\tvar target = {\n\t\t\tparent: null,\n\t\t\teffect: null,\n\t\t\teffects: [],\n\t\t\trender_effects: [],\n\t\t\tblock_effects: []\n\t\t};\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, target);\n\t\t\t// Note: #traverse_effect_tree runs block effects eagerly, which can schedule effects,\n\t\t\t// which means queued_root_effects now may be filled again.\n\n\t\t\t// Helpful for debugging reactivity loss that has to do with branches being skipped:\n\t\t\t// log_inconsistent_branches(root);\n\t\t}\n\n\t\tif (!this.is_fork) {\n\t\t\tthis.#resolve();\n\t\t}\n\n\t\tif (this.is_deferred()) {\n\t\t\tthis.#defer_effects(target.effects);\n\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\tthis.#defer_effects(target.block_effects);\n\t\t} else {\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(target.render_effects);\n\t\t\tflush_queued_effects(target.effects);\n\n\t\t\tprevious_batch = null;\n\n\t\t\tthis.#deferred?.resolve();\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {EffectTarget} target\n\t */\n\t#traverse_effect_tree(root, target) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.skipped_effects.has(effect);\n\n\t\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0 && effect.b?.is_pending()) {\n\t\t\t\ttarget = {\n\t\t\t\t\tparent: target,\n\t\t\t\t\teffect,\n\t\t\t\t\teffects: [],\n\t\t\t\t\trender_effects: [],\n\t\t\t\t\tblock_effects: []\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\ttarget.effects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & (RENDER_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\t\t\ttarget.render_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((effect.f & BLOCK_EFFECT) !== 0) target.block_effects.push(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === target.effect) {\n\t\t\t\t\t// TODO rather than traversing into pending boundaries and deferring the effects,\n\t\t\t\t\t// could we just attach the effects _to_ the pending boundary and schedule them\n\t\t\t\t\t// once the boundary is ready?\n\t\t\t\t\tthis.#defer_effects(target.effects);\n\t\t\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\t\t\tthis.#defer_effects(target.block_effects);\n\n\t\t\t\t\ttarget = /** @type {EffectTarget} */ (target.parent);\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (const e of effects) {\n\t\t\tconst target = (e.f & DIRTY) !== 0 ? this.#dirty_effects : this.#maybe_dirty_effects;\n\t\t\ttarget.push(e);\n\n\t\t\t// Since we're not executing these effects now, we need to clear any WAS_MARKED flags\n\t\t\t// so that other batches can correctly reach these effects during their own traversal\n\t\t\tthis.#clear_marked(e.deps);\n\n\t\t\t// mark as clean so they get scheduled if they depend on pending async state\n\t\t\tset_signal_status(e, CLEAN);\n\t\t}\n\t}\n\n\t/**\n\t * @param {Value[] | null} deps\n\t */\n\t#clear_marked(deps) {\n\t\tif (deps === null) return;\n\n\t\tfor (const dep of deps) {\n\t\t\tif ((dep.f & DERIVED) === 0 || (dep.f & WAS_MARKED) === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdep.f ^= WAS_MARKED;\n\n\t\t\tthis.#clear_marked(/** @type {Derived} */ (dep).deps);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (!this.previous.has(source)) {\n\t\t\tthis.previous.set(source, value);\n\t\t}\n\n\t\t// Don't save errors in `batch_values`, or they won't be thrown in `runtime.js#get`\n\t\tif ((source.f & ERROR_VALUE) === 0) {\n\t\t\tthis.current.set(source, source.v);\n\t\t\tbatch_values?.set(source, source.v);\n\t\t}\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t\tthis.apply();\n\t}\n\n\tdeactivate() {\n\t\t// If we're not the current batch, don't deactivate,\n\t\t// else we could create zombie batches that are never flushed\n\t\tif (current_batch !== this) return;\n\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tthis.activate();\n\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (this.#pending === 0) {\n\t\t\tthis.process([]); // TODO this feels awkward\n\t\t}\n\n\t\tthis.deactivate();\n\t}\n\n\tdiscard() {\n\t\tfor (const fn of this.#discard_callbacks) fn(this);\n\t\tthis.#discard_callbacks.clear();\n\t}\n\n\t#resolve() {\n\t\tif (this.#blocking_pending === 0) {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#commit_callbacks) fn();\n\t\t\tthis.#commit_callbacks.clear();\n\t\t}\n\n\t\tif (this.#pending === 0) {\n\t\t\tthis.#commit();\n\t\t}\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' —\n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\t/** @type {EffectTarget} */\n\t\t\tvar dummy_target = {\n\t\t\t\tparent: null,\n\t\t\t\teffect: null,\n\t\t\t\teffects: [],\n\t\t\t\trender_effects: [],\n\t\t\t\tblock_effects: []\n\t\t\t};\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t// Avoid running queued root effects on the wrong branch\n\t\t\t\t\tvar prev_queued_root_effects = queued_root_effects;\n\t\t\t\t\tqueued_root_effects = [];\n\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, dummy_target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with `target`? defer block effects?\n\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tqueued_root_effects = prev_queued_root_effects;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tthis.revive();\n\t}\n\n\trevive() {\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.#dirty_effects = [];\n\t\tthis.#maybe_dirty_effects = [];\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\toncommit(fn) {\n\t\tthis.#commit_callbacks.add(fn);\n\t}\n\n\t/** @param {(batch: Batch) => void} fn */\n\tondiscard(fn) {\n\t\tthis.#discard_callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tBatch.enqueue(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\t/** @param {() => void} task */\n\tstatic enqueue(task) {\n\t\tqueue_micro_task(task);\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || (!this.is_fork && batches.size === 1)) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' —\n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tvar was_updating_effect = is_updating_effect;\n\tis_flushing = true;\n\n\tvar source_stacks = DEV ? new Set() : null;\n\n\ttry {\n\t\tvar flush_count = 0;\n\t\tset_is_updating_effect(true);\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\tif (update.error) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\n\t\t\tif (DEV) {\n\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t/** @type {Set<Source>} */ (source_stacks).add(source);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\t\tset_is_updating_effect(was_updating_effect);\n\n\t\tlast_scheduled_effect = null;\n\n\t\tif (DEV) {\n\t\t\tfor (const source of /** @type {Set<Source>} */ (source_stacks)) {\n\t\t\t\tsource.updated = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 &&\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * When committing a fork, we need to trigger eager effects so that\n * any `$state.eager(...)` expressions update immediately. This\n * function allows us to discover them\n * @param {Value} value\n * @param {Set<Effect>} effects\n */\nfunction mark_eager_effects(value, effects) {\n\tif (value.reactions === null) return;\n\n\tfor (const reaction of value.reactions) {\n\t\tconst flags = reaction.f;\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tmark_eager_effects(/** @type {Derived} */ (reaction), effects);\n\t\t} else if ((flags & EAGER_EFFECT) !== 0) {\n\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\teffects.add(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (sources.includes(dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, bail out or we'll cause a second flush\n\t\tif (\n\t\t\tis_flushing &&\n\t\t\teffect === active_effect &&\n\t\t\t(flags & BLOCK_EFFECT) !== 0 &&\n\t\t\t(flags & HEAD_EFFECT) === 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\teager_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an eager effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Creates a 'fork', in which state changes are evaluated but not applied to the DOM.\n * This is useful for speculatively loading data (for example) when you suspect that\n * the user is about to take some action.\n *\n * Frameworks like SvelteKit can use this to preload data when the user touches or\n * hovers over a link, making any subsequent navigation feel instantaneous.\n *\n * The `fn` parameter is a synchronous function that modifies some state. The\n * state changes will be reverted after the fork is initialised, then reapplied\n * if and when the fork is eventually committed.\n *\n * When it becomes clear that a fork will _not_ be committed (e.g. because the\n * user navigated elsewhere), it must be discarded to avoid leaking memory.\n *\n * @param {() => void} fn\n * @returns {Fork}\n * @since 5.42\n */\nexport function fork(fn) {\n\tif (!async_mode_flag) {\n\t\te.experimental_async_required('fork');\n\t}\n\n\tif (current_batch !== null) {\n\t\te.fork_timing();\n\t}\n\n\tvar batch = Batch.ensure();\n\tbatch.is_fork = true;\n\tbatch_values = new Map();\n\n\tvar committed = false;\n\tvar settled = batch.settled();\n\n\tflushSync(fn);\n\n\tbatch_values = null;\n\n\t// revert state changes\n\tfor (var [source, value] of batch.previous) {\n\t\tsource.v = value;\n\t}\n\n\treturn {\n\t\tcommit: async () => {\n\t\t\tif (committed) {\n\t\t\t\tawait settled;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!batches.has(batch)) {\n\t\t\t\te.fork_discarded();\n\t\t\t}\n\n\t\t\tcommitted = true;\n\n\t\t\tbatch.is_fork = false;\n\n\t\t\t// apply changes\n\t\t\tfor (var [source, value] of batch.current) {\n\t\t\t\tsource.v = value;\n\t\t\t}\n\n\t\t\t// trigger any `$state.eager(...)` expressions with the new state.\n\t\t\t// eager effects don't get scheduled like other effects, so we\n\t\t\t// can't just encounter them during traversal, we need to\n\t\t\t// proactively flush them\n\t\t\t// TODO maybe there's a better implementation?\n\t\t\tflushSync(() => {\n\t\t\t\t/** @type {Set<Effect>} */\n\t\t\t\tvar eager_effects = new Set();\n\n\t\t\t\tfor (var source of batch.current.keys()) {\n\t\t\t\t\tmark_eager_effects(source, eager_effects);\n\t\t\t\t}\n\n\t\t\t\tset_eager_effects(eager_effects);\n\t\t\t\tflush_eager_effects();\n\t\t\t});\n\n\t\t\tbatch.revive();\n\t\t\tawait settled;\n\t\t},\n\t\tdiscard: () => {\n\t\t\tif (!committed && batches.has(batch)) {\n\t\t\t\tbatches.delete(batch);\n\t\t\t\tbatch.discard();\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * Cannot commit a fork that was already discarded\n * @returns {never}\n */\nexport function fork_discarded() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_discarded\\nCannot commit a fork that was already discarded\\nhttps://svelte.dev/e/fork_discarded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_discarded`);\n\t}\n}\n\n/**\n * Cannot create a fork inside an effect or when state changes are pending\n * @returns {never}\n */\nexport function fork_timing() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_timing\\nCannot create a fork inside an effect or when state changes are pending\\nhttps://svelte.dev/e/fork_timing`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_timing`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n * @returns {never}\n */\nexport function hydratable_missing_but_required(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`hydratable_missing_but_required\\nExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydratable_missing_but_required`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}","import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n","/** @import { ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tset_signal_status,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tCLEAN,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC,\n\tCONNECTED,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, current_batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null) {\n\t\tif (active_reaction === null) {\n\t\t\te.effect_orphan(rune);\n\t\t}\n\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & EAGER_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes: null,\n\t\tf: type | DIRTY | CONNECTED,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\t/** @type {Effect | null} */\n\tvar e = effect;\n\n\t// if an effect has already ran and doesn't need to be kept in the tree\n\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t// then we skip it and go to its child (if any)\n\tif (\n\t\tsync &&\n\t\te.deps === null &&\n\t\te.teardown === null &&\n\t\te.nodes === null &&\n\t\te.first === e.last && // either `null`, or a singular child\n\t\t(e.f & EFFECT_PRESERVED) === 0\n\t) {\n\t\te = e.first;\n\t\tif ((type & BLOCK_EFFECT) !== 0 && (type & EFFECT_TRANSPARENT) !== 0 && e !== null) {\n\t\t\te.f |= EFFECT_TRANSPARENT;\n\t\t}\n\t}\n\n\tif (e !== null) {\n\t\te.parent = parent;\n\n\t\tif (parent !== null) {\n\t\t\tpush_effect(e, parent);\n\t\t}\n\n\t\t// if we're in a derived, add the effect there too\n\t\tif (\n\t\t\tactive_reaction !== null &&\n\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t(type & ROOT_EFFECT) === 0\n\t\t) {\n\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t(derived.effects ??= []).push(e);\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component — defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else — create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function eager_effect(fn) {\n\treturn create_effect(EAGER_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Array<Promise<void>>} blockers\n */\nexport function template_effect(fn, sync = [], async = [], blockers = []) {\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * Like `template_effect`, but with an effect which is deferred until the batch commits\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Array<Promise<void>>} blockers\n */\nexport function deferred_template_effect(fn, sync = [], async = [], blockers = []) {\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar is_async = async.length > 0 || blockers.length > 0;\n\n\tif (is_async) batch.increment(true);\n\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(EFFECT, () => fn(...values.map(get)), false);\n\t\tif (is_async) batch.decrement(true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function managed(fn, flags = 0) {\n\tvar effect = create_effect(MANAGED_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n */\nexport function branch(fn) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes !== null &&\n\t\teffect.nodes.end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.nodes && effect.nodes.t;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\tvar fn = () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t};\n\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nfunction pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent =\n\t\t\t(child.f & EFFECT_TRANSPARENT) !== 0 ||\n\t\t\t// If this is a branch effect without a block effect parent,\n\t\t\t// it means the parent block effect was pruned. In that case,\n\t\t\t// transparency information was transferred to the branch effect.\n\t\t\t((child.f & BRANCH_EFFECT) !== 0 && (effect.f & BLOCK_EFFECT) !== 0);\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tif (!effect.nodes) return;\n\n\t/** @type {TemplateNode | null} */\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n","/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\nimport { create_text } from '../operations.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\t#pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t/** @type {TemplateNode | null} */\n\t#pending_anchor = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\n\t#is_creating_fallback = false;\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.#pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#pending = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn () => {\n\t\t\t\tthis.#pending_anchor?.remove();\n\t\t\t};\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\n\t\t// Since server rendered resolved content, we never show pending state\n\t\t// Even if client-side async operations are still running, the content is already displayed\n\t\tthis.#pending = false;\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) {\n\t\t\treturn;\n\t\t}\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tBatch.enqueue(() => {\n\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t#get_anchor() {\n\t\tvar anchor = this.#anchor;\n\n\t\tif (this.#pending) {\n\t\t\tthis.#pending_anchor = create_text();\n\t\t\tthis.#anchor.before(this.#pending_anchor);\n\n\t\t\tanchor = this.#pending_anchor;\n\t\t}\n\n\t\treturn anchor;\n\t}\n\n\t/**\n\t * Returns `true` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_pending() {\n\t\treturn this.#pending || (!!this.parent && this.parent.is_pending());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tthis.#offscreen_fragment.append(/** @type {TemplateNode} */ (this.#pending_anchor));\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.#pending = false;\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\n\t\tif (this.#effect_pending) {\n\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t}\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.#pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t};\n\n\t\tvar previous_reaction = active_reaction;\n\n\t\ttry {\n\t\t\tset_active_reaction(null);\n\t\t\tcalling_on_error = true;\n\t\t\tonerror?.(error, reset);\n\t\t\tcalling_on_error = false;\n\t\t} catch (error) {\n\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t} finally {\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\n\t\tif (failed) {\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tBatch.ensure();\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n","/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tMAYBE_DIRTY,\n\tSTALE_REACTION,\n\tASYNC,\n\tWAS_MARKED,\n\tCONNECTED,\n\tDESTROYED\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tset_signal_status,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, effect_tracking, teardown } from './effects.js';\nimport { eager_effects, internal_set, set_eager_effects, source } from './sources.js';\nimport { get_error } from '../../shared/dev.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred } from '../../shared/utils.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect !== null) {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_error('created at');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = !boundary.is_pending();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\t// The original parent effect might've been destroyed but the derived\n\t\t\t// is used elsewhere now - do not return the destroyed effect in that case\n\t\t\treturn (parent.f & DESTROYED) === 0 ? /** @type {Effect} */ (parent) : null;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_eager_effects = eager_effects;\n\t\tset_eager_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_eager_effects(prev_eager_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\t// in a fork, we don't update the underlying value, just `batch_values`.\n\t\t// the underlying value will be updated when the fork is committed.\n\t\t// otherwise, the next time we get here after a 'real world' state\n\t\t// change, `derived.equals` may incorrectly return `true`\n\t\tif (!current_batch?.is_fork) {\n\t\t\tderived.v = value;\n\t\t}\n\n\t\tderived.wv = increment_write_version();\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\t// During time traveling we don't want to reset the status so that\n\t// traversal of the graph in the other batches still happens\n\tif (batch_values !== null) {\n\t\t// only cache the value if we're in a tracking context, otherwise we won't\n\t\t// clear the cache in `mark_reactions` when dependencies are updated\n\t\tif (effect_tracking() || current_batch?.is_fork) {\n\t\t\tbatch_values.set(derived, value);\n\t\t}\n\t} else {\n\t\tvar status = (derived.f & CONNECTED) === 0 ? MAYBE_DIRTY : CLEAN;\n\t\tset_signal_status(derived, status);\n\t}\n}\n","/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tset_signal_status,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value,\n\tset_is_updating_effect,\n\tis_updating_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tEAGER_EFFECT,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED,\n\tCONNECTED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { tag_proxy } from '../dev/tracing.js';\nimport { get_error } from '../../shared/dev.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, batch_values, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\n\n/** @type {Set<any>} */\nexport let eager_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_eager_effects(v) {\n\teager_effects = v;\n}\n\nlet eager_effects_deferred = false;\n\nexport function set_eager_effects_deferred() {\n\teager_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_error('created at');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & EAGER_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | EAGER_EFFECT)) !== 0 &&\n\t\t!current_sources?.includes(source)\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tsource.updated ??= new Map();\n\n\t\t\t\t// For performance reasons, when not using $inspect.trace, we only start collecting stack traces\n\t\t\t\t// after the same source has been updated more than 5 times in the same flush cycle.\n\t\t\t\tconst count = (source.updated.get('')?.count ?? 0) + 1;\n\t\t\t\tsource.updated.set('', { error: /** @type {any} */ (null), count });\n\n\t\t\t\tif (tracing_mode_flag || count > 5) {\n\t\t\t\t\tconst error = get_error('updated at');\n\n\t\t\t\t\tif (error !== null) {\n\t\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentry.count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(/** @type {Derived} */ (source));\n\t\t\t}\n\n\t\t\tset_signal_status(source, (source.f & CONNECTED) !== 0 ? CLEAN : MAYBE_DIRTY);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\t// For debugging, in case you want to know which reactions are being scheduled:\n\t\t// log_reactions(source);\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (!batch.is_fork && eager_effects.size > 0 && !eager_effects_deferred) {\n\t\t\tflush_eager_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_eager_effects() {\n\teager_effects_deferred = false;\n\tvar prev_is_updating_effect = is_updating_effect;\n\tset_is_updating_effect(true);\n\n\tconst inspects = Array.from(eager_effects);\n\n\ttry {\n\t\tfor (const effect of inspects) {\n\t\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tset_is_updating_effect(prev_is_updating_effect);\n\t}\n\n\teager_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & EAGER_EFFECT) !== 0) {\n\t\t\teager_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\n\t\t\tbatch_values?.delete(derived);\n\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\t// Only connected deriveds can be reliably unmarked right away\n\t\t\t\tif (flags & CONNECTED) {\n\t\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\t}\n\n\t\t\t\tmark_reactions(derived, MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0 && eager_block_effects !== null) {\n\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Signal, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\teffect_tracking,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED,\n\tMANAGED_EFFECT\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\tcurrent_async_effect,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport * as w from './warnings.js';\nimport {\n\tBatch,\n\tbatch_values,\n\tcurrent_batch,\n\tflushSync,\n\tschedule_effect\n} from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\n\nexport let is_updating_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_updating_effect(value) {\n\tis_updating_effect = value;\n}\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed — we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif (flags & DERIVED) {\n\t\treaction.f &= ~WAS_MARKED;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = reaction.deps;\n\n\t\tif (dependencies !== null) {\n\t\t\tvar length = dependencies.length;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar dependency = dependencies[i];\n\n\t\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t\t}\n\n\t\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(flags & CONNECTED) !== 0 &&\n\t\t\t// During time traveling we don't want to reset the status so that\n\t\t\t// traversal of the graph in the other batches still happens\n\t\t\tbatch_values === null\n\t\t) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources?.includes(signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (effect_tracking() && (reaction.f & CONNECTED) !== 0) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tset_signal_status(dependency, MAYBE_DIRTY);\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected and remove the mark flag, as it cannot be reliably removed otherwise\n\t\tif ((dependency.f & CONNECTED) !== 0) {\n\t\t\tdependency.f ^= CONNECTED;\n\t\t\tdependency.f &= ~WAS_MARKED;\n\t\t}\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(/** @type {Derived} **/ (dependency));\n\t\tremove_reactions(/** @type {Derived} **/ (dependency), 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & (BLOCK_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && !current_sources?.includes(signal)) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else if (!new_deps.includes(signal)) {\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!reactions.includes(active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\t// TODO reinstate this, but make it actually work\n\t\t// if (current_async_effect) {\n\t\t// \tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t// \tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t// \tif (!tracking && !untracking && !was_read) {\n\t\t// \t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t// \t\tvar trace = get_error('traced at');\n\t\t// \t\t// eslint-disable-next-line no-console\n\t\t// \t\tif (trace) console.warn(trace);\n\t\t// \t}\n\t\t// }\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\tvar trace = get_error('traced at');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect) {\n\t\tif (old_values.has(signal)) {\n\t\t\treturn old_values.get(signal);\n\t\t}\n\n\t\tif (is_derived) {\n\t\t\tvar derived = /** @type {Derived} */ (signal);\n\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\t} else if (\n\t\tis_derived &&\n\t\t(!batch_values?.has(signal) || (current_batch?.is_fork && !effect_tracking()))\n\t) {\n\t\tderived = /** @type {Derived} */ (signal);\n\n\t\tif (is_dirty(derived)) {\n\t\t\tupdate_derived(derived);\n\t\t}\n\n\t\tif (is_updating_effect && effect_tracking() && (derived.f & CONNECTED) === 0) {\n\t\t\treconnect(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/**\n * (Re)connect a disconnected derived, so that it is notified\n * of changes in `mark_reactions`\n * @param {Derived} derived\n */\nfunction reconnect(derived) {\n\tif (derived.deps === null) return;\n\n\tderived.f ^= CONNECTED;\n\n\tfor (const dep of derived.deps) {\n\t\t(dep.reactions ??= []).push(derived);\n\n\t\tif ((dep.f & DERIVED) !== 0 && (dep.f & CONNECTED) === 0) {\n\t\t\treconnect(/** @type {Derived} */ (dep));\n\t\t}\n\t}\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n * @returns {void}\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * @param {Record<string | symbol, unknown>} obj\n * @param {Array<string | symbol>} keys\n * @returns {Record<string | symbol, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string | symbol, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\tfor (var symbol of Object.getOwnPropertySymbols(obj)) {\n\t\tif (Object.propertyIsEnumerable.call(obj, symbol) && !keys.includes(symbol)) {\n\t\t\tresult[symbol] = obj[symbol];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_eager_effects,\n\tset_eager_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { tag } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_error('created at') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy —\n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object — which we avoid, so that state can be forked — we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create an uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_eager_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_eager_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn /** @type {TemplateNode | null} */ (first_child_getter.call(node));\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn /** @type {TemplateNode | null} */ (next_sibling_getter.call(node));\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = get_first_child(hydrate_node);\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {boolean} [is_text]\n * @returns {TemplateNode | null}\n */\nexport function first_child(node, is_text = false) {\n\tif (!hydrating) {\n\t\tvar first = get_first_child(node);\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate — we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate — we must therefore create one\n\tif (is_text && next_sibling?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn next_sibling;\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function can_delegate_event(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n","import { teardown } from '../../reactivity/effects.js';\nimport { define_property } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n","/** @import { ComponentContext, Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true — block effects should run their intro transitions —\n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = get_first_child(target);\n\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = get_next_sibling(anchor);\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, EFFECT_RAN, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes === null) {\n\t\teffect.nodes = { start, end, a: null, t: null };\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {TemplateNode} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\n\tconst effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes.start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes.end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\tvar effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t\t// When hydrating and outer component and an inner component is async, i.e. blocked on a promise,\n\t\t// then by the time the inner resolves we have already advanced to the end of the hydrated nodes\n\t\t// of the parent component. Check for defined for that reason to avoid rewinding the parent's end marker.\n\t\tif ((effect.f & EFFECT_RAN) === 0 || effect.nodes.end === null) {\n\t\t\teffect.nodes.end = hydrate_node;\n\t\t}\n\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case — void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n","const ATTR_REGEX = /[&\"<]/g;\nconst CONTENT_REGEX = /[&<]/g;\n\n/**\n * @template V\n * @param {V} value\n * @param {boolean} [is_attr]\n */\nexport function escape_html(value, is_attr) {\n\tconst str = String(value ?? '');\n\n\tconst pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n\tpattern.lastIndex = 0;\n\n\tlet escaped = '';\n\tlet last = 0;\n\n\twhile (pattern.test(str)) {\n\t\tconst i = pattern.lastIndex - 1;\n\t\tconst ch = str[i];\n\t\tescaped += str.substring(last, i) + (ch === '&' ? '&amp;' : ch === '\"' ? '&quot;' : '&lt;');\n\t\tlast = i + 1;\n\t}\n\n\treturn escaped + str.substring(last);\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n","/** @import { ComponentConstructorOptions, ComponentType, SvelteComponent, Component } from 'svelte' */\nimport { DIRTY, LEGACY_PROPS, MAYBE_DIRTY } from '../internal/client/constants.js';\nimport { user_pre_effect } from '../internal/client/reactivity/effects.js';\nimport { mutable_source, set } from '../internal/client/reactivity/sources.js';\nimport { hydrate, mount, unmount } from '../internal/client/render.js';\nimport { active_effect, get, set_signal_status } from '../internal/client/runtime.js';\nimport { flushSync } from '../internal/client/reactivity/batch.js';\nimport { define_property, is_array } from '../internal/shared/utils.js';\nimport * as e from '../internal/client/errors.js';\nimport * as w from '../internal/client/warnings.js';\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../constants.js';\nimport { component_context, dev_current_component_function } from '../internal/client/context.js';\nimport { async_mode_flag } from '../internal/flags/index.js';\n\n/**\n * Takes the same options as a Svelte 4 component and the component function and returns a Svelte 4 compatible component.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {ComponentConstructorOptions<Props> & {\n * \tcomponent: ComponentType<SvelteComponent<Props, Events, Slots>> | Component<Props>;\n * }} options\n * @returns {SvelteComponent<Props, Events, Slots> & Exports}\n */\nexport function createClassComponent(options) {\n\t// @ts-expect-error $$prop_def etc are not actually defined\n\treturn new Svelte4Component(options);\n}\n\n/**\n * Takes the component function and returns a Svelte 4 compatible component constructor.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {SvelteComponent<Props, Events, Slots> | Component<Props>} component\n * @returns {ComponentType<SvelteComponent<Props, Events, Slots> & Exports>}\n */\nexport function asClassComponent(component) {\n\t// @ts-expect-error $$prop_def etc are not actually defined\n\treturn class extends Svelte4Component {\n\t\t/** @param {any} options */\n\t\tconstructor(options) {\n\t\t\tsuper({\n\t\t\t\tcomponent,\n\t\t\t\t...options\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Support using the component as both a class and function during the transition period\n * @typedef  {{new (o: ComponentConstructorOptions): SvelteComponent;(...args: Parameters<Component<Record<string, any>>>): ReturnType<Component<Record<string, any>, Record<string, any>>>;}} LegacyComponentType\n */\n\nclass Svelte4Component {\n\t/** @type {any} */\n\t#events;\n\n\t/** @type {Record<string, any>} */\n\t#instance;\n\n\t/**\n\t * @param {ComponentConstructorOptions & {\n\t *  component: any;\n\t * }} options\n\t */\n\tconstructor(options) {\n\t\tvar sources = new Map();\n\n\t\t/**\n\t\t * @param {string | symbol} key\n\t\t * @param {unknown} value\n\t\t */\n\t\tvar add_source = (key, value) => {\n\t\t\tvar s = mutable_source(value, false, false);\n\t\t\tsources.set(key, s);\n\t\t\treturn s;\n\t\t};\n\n\t\t// Replicate coarse-grained props through a proxy that has a version source for\n\t\t// each property, which is incremented on updates to the property itself. Do not\n\t\t// use our $state proxy because that one has fine-grained reactivity.\n\t\tconst props = new Proxy(\n\t\t\t{ ...(options.props || {}), $$events: {} },\n\t\t\t{\n\t\t\t\tget(target, prop) {\n\t\t\t\t\treturn get(sources.get(prop) ?? add_source(prop, Reflect.get(target, prop)));\n\t\t\t\t},\n\t\t\t\thas(target, prop) {\n\t\t\t\t\t// Necessary to not throw \"invalid binding\" validation errors on the component side\n\t\t\t\t\tif (prop === LEGACY_PROPS) return true;\n\n\t\t\t\t\tget(sources.get(prop) ?? add_source(prop, Reflect.get(target, prop)));\n\t\t\t\t\treturn Reflect.has(target, prop);\n\t\t\t\t},\n\t\t\t\tset(target, prop, value) {\n\t\t\t\t\tset(sources.get(prop) ?? add_source(prop, value), value);\n\t\t\t\t\treturn Reflect.set(target, prop, value);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis.#instance = (options.hydrate ? hydrate : mount)(options.component, {\n\t\t\ttarget: options.target,\n\t\t\tanchor: options.anchor,\n\t\t\tprops,\n\t\t\tcontext: options.context,\n\t\t\tintro: options.intro ?? false,\n\t\t\trecover: options.recover\n\t\t});\n\n\t\t// We don't flushSync for custom element wrappers or if the user doesn't want it,\n\t\t// or if we're in async mode since `flushSync()` will fail\n\t\tif (!async_mode_flag && (!options?.props?.$$host || options.sync === false)) {\n\t\t\tflushSync();\n\t\t}\n\n\t\tthis.#events = props.$$events;\n\n\t\tfor (const key of Object.keys(this.#instance)) {\n\t\t\tif (key === '$set' || key === '$destroy' || key === '$on') continue;\n\t\t\tdefine_property(this, key, {\n\t\t\t\tget() {\n\t\t\t\t\treturn this.#instance[key];\n\t\t\t\t},\n\t\t\t\t/** @param {any} value */\n\t\t\t\tset(value) {\n\t\t\t\t\tthis.#instance[key] = value;\n\t\t\t\t},\n\t\t\t\tenumerable: true\n\t\t\t});\n\t\t}\n\n\t\tthis.#instance.$set = /** @param {Record<string, any>} next */ (next) => {\n\t\t\tObject.assign(props, next);\n\t\t};\n\n\t\tthis.#instance.$destroy = () => {\n\t\t\tunmount(this.#instance);\n\t\t};\n\t}\n\n\t/** @param {Record<string, any>} props */\n\t$set(props) {\n\t\tthis.#instance.$set(props);\n\t}\n\n\t/**\n\t * @param {string} event\n\t * @param {(...args: any[]) => any} callback\n\t * @returns {any}\n\t */\n\t$on(event, callback) {\n\t\tthis.#events[event] = this.#events[event] || [];\n\n\t\t/** @param {any[]} args */\n\t\tconst cb = (...args) => callback.call(this, ...args);\n\t\tthis.#events[event].push(cb);\n\t\treturn () => {\n\t\t\tthis.#events[event] = this.#events[event].filter(/** @param {any} fn */ (fn) => fn !== cb);\n\t\t};\n\t}\n\n\t$destroy() {\n\t\tthis.#instance.$destroy();\n\t}\n}\n\n/**\n * Runs the given function once immediately on the server, and works like `$effect.pre` on the client.\n *\n * @deprecated Use this only as a temporary solution to migrate your component code to Svelte 5.\n * @param {() => void | (() => void)} fn\n * @returns {void}\n */\nexport function run(fn) {\n\tuser_pre_effect(() => {\n\t\tfn();\n\t\tvar effect = /** @type {import('#client').Effect} */ (active_effect);\n\t\t// If the effect is immediately made dirty again, mark it as maybe dirty to emulate legacy behaviour\n\t\tif ((effect.f & DIRTY) !== 0) {\n\t\t\tlet filename = \"a file (we can't know which one)\";\n\t\t\tif (DEV) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tfilename = dev_current_component_function?.[FILENAME] ?? filename;\n\t\t\t}\n\t\t\tw.legacy_recursive_reactive_block(filename);\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\t});\n}\n\n/**\n * Function to mimic the multiple listeners available in svelte 4\n * @deprecated\n * @param {EventListener[]} handlers\n * @returns {EventListener}\n */\nexport function handlers(...handlers) {\n\treturn function (event) {\n\t\tconst { stopImmediatePropagation } = event;\n\t\tlet stopped = false;\n\n\t\tevent.stopImmediatePropagation = () => {\n\t\t\tstopped = true;\n\t\t\tstopImmediatePropagation.call(event);\n\t\t};\n\n\t\tconst errors = [];\n\n\t\tfor (const handler of handlers) {\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error `this` is not typed\n\t\t\t\thandler?.call(this, event);\n\t\t\t} catch (e) {\n\t\t\t\terrors.push(e);\n\t\t\t}\n\n\t\t\tif (stopped) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let error of errors) {\n\t\t\tqueueMicrotask(() => {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Function to create a `bubble` function that mimic the behavior of `on:click` without handler available in svelte 4.\n * @deprecated Use this only as a temporary solution to migrate your automatically delegated events in Svelte 5.\n */\nexport function createBubbler() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createBubbler');\n\t}\n\n\treturn (/**@type {string}*/ type) => (/**@type {Event}*/ event) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {any} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\nexport {\n\tonce,\n\tpreventDefault,\n\tself,\n\tstopImmediatePropagation,\n\tstopPropagation,\n\ttrusted,\n\tpassive,\n\tnonpassive\n} from '../internal/client/dom/legacy/event-modifiers.js';\n","/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n","/**\n * Hash using djb2\n * @param {import('types').StrictBody[]} values\n */\nexport function hash(...values) {\n\tlet hash = 5381;\n\n\tfor (const value of values) {\n\t\tif (typeof value === 'string') {\n\t\t\tlet i = value.length;\n\t\t\twhile (i) hash = (hash * 33) ^ value.charCodeAt(--i);\n\t\t} else if (ArrayBuffer.isView(value)) {\n\t\t\tconst buffer = new Uint8Array(value.buffer, value.byteOffset, value.byteLength);\n\t\t\tlet i = buffer.length;\n\t\t\twhile (i) hash = (hash * 33) ^ buffer[--i];\n\t\t} else {\n\t\t\tthrow new TypeError('value must be a string or TypedArray');\n\t\t}\n\t}\n\n\treturn (hash >>> 0).toString(36);\n}\n","import { escape_html } from '../../../utils/escape.js';\nimport { hash } from '../../../utils/hash.js';\n\n/**\n * Inside a script element, only `</script` and `<!--` hold special meaning to the HTML parser.\n *\n * The first closes the script element, so everything after is treated as raw HTML.\n * The second disables further parsing until `-->`, so the script element might be unexpectedly\n * kept open until until an unrelated HTML comment in the page.\n *\n * U+2028 LINE SEPARATOR and U+2029 PARAGRAPH SEPARATOR are escaped for the sake of pre-2018\n * browsers.\n *\n * @see tests for unsafe parsing examples.\n * @see https://html.spec.whatwg.org/multipage/scripting.html#restrictions-for-contents-of-script-elements\n * @see https://html.spec.whatwg.org/multipage/syntax.html#cdata-rcdata-restrictions\n * @see https://html.spec.whatwg.org/multipage/parsing.html#script-data-state\n * @see https://html.spec.whatwg.org/multipage/parsing.html#script-data-double-escaped-state\n * @see https://github.com/tc39/proposal-json-superset\n * @type {Record<string, string>}\n */\nconst replacements = {\n\t'<': '\\\\u003C',\n\t'\\u2028': '\\\\u2028',\n\t'\\u2029': '\\\\u2029'\n};\n\nconst pattern = new RegExp(`[${Object.keys(replacements).join('')}]`, 'g');\n\n/**\n * Generates a raw HTML string containing a safe script element carrying data and associated attributes.\n *\n * It escapes all the special characters needed to guarantee the element is unbroken, but care must\n * be taken to ensure it is inserted in the document at an acceptable position for a script element,\n * and that the resulting string isn't further modified.\n *\n * @param {import('./types.js').Fetched} fetched\n * @param {(name: string, value: string) => boolean} filter\n * @param {boolean} [prerendering]\n * @returns {string} The raw HTML of a script element carrying the JSON payload.\n * @example const html = serialize_data('/data.json', null, { foo: 'bar' });\n */\nexport function serialize_data(fetched, filter, prerendering = false) {\n\t/** @type {Record<string, string>} */\n\tconst headers = {};\n\n\tlet cache_control = null;\n\tlet age = null;\n\tlet varyAny = false;\n\n\tfor (const [key, value] of fetched.response.headers) {\n\t\tif (filter(key, value)) {\n\t\t\theaders[key] = value;\n\t\t}\n\n\t\tif (key === 'cache-control') cache_control = value;\n\t\telse if (key === 'age') age = value;\n\t\telse if (key === 'vary' && value.trim() === '*') varyAny = true;\n\t}\n\n\tconst payload = {\n\t\tstatus: fetched.response.status,\n\t\tstatusText: fetched.response.statusText,\n\t\theaders,\n\t\tbody: fetched.response_body\n\t};\n\n\tconst safe_payload = JSON.stringify(payload).replace(pattern, (match) => replacements[match]);\n\n\tconst attrs = [\n\t\t'type=\"application/json\"',\n\t\t'data-sveltekit-fetched',\n\t\t`data-url=\"${escape_html(fetched.url, true)}\"`\n\t];\n\n\tif (fetched.is_b64) {\n\t\tattrs.push('data-b64');\n\t}\n\n\tif (fetched.request_headers || fetched.request_body) {\n\t\t/** @type {import('types').StrictBody[]} */\n\t\tconst values = [];\n\n\t\tif (fetched.request_headers) {\n\t\t\tvalues.push([...new Headers(fetched.request_headers)].join(','));\n\t\t}\n\n\t\tif (fetched.request_body) {\n\t\t\tvalues.push(fetched.request_body);\n\t\t}\n\n\t\tattrs.push(`data-hash=\"${hash(...values)}\"`);\n\t}\n\n\t// Compute the time the response should be cached, taking into account max-age and age.\n\t// Do not cache at all if a `Vary: *` header is present, as this indicates that the\n\t// cache is likely to get busted.\n\tif (!prerendering && fetched.method === 'GET' && cache_control && !varyAny) {\n\t\tconst match = /s-maxage=(\\d+)/g.exec(cache_control) ?? /max-age=(\\d+)/g.exec(cache_control);\n\t\tif (match) {\n\t\t\tconst ttl = +match[1] - +(age ?? '0');\n\t\t\tattrs.push(`data-ttl=\"${ttl}\"`);\n\t\t}\n\t}\n\n\treturn `<script ${attrs.join(' ')}>${safe_payload}</script>`;\n}\n","export const s = JSON.stringify;\n","import { text_encoder } from '../../utils.js';\n\n/**\n * SHA-256 hashing function adapted from https://bitwiseshiftleft.github.io/sjcl\n * modified and redistributed under BSD license\n * @param {string} data\n */\nexport function sha256(data) {\n\tif (!key[0]) precompute();\n\n\tconst out = init.slice(0);\n\tconst array = encode(data);\n\n\tfor (let i = 0; i < array.length; i += 16) {\n\t\tconst w = array.subarray(i, i + 16);\n\n\t\tlet tmp;\n\t\tlet a;\n\t\tlet b;\n\n\t\tlet out0 = out[0];\n\t\tlet out1 = out[1];\n\t\tlet out2 = out[2];\n\t\tlet out3 = out[3];\n\t\tlet out4 = out[4];\n\t\tlet out5 = out[5];\n\t\tlet out6 = out[6];\n\t\tlet out7 = out[7];\n\n\t\t/* Rationale for placement of |0 :\n\t\t * If a value can overflow is original 32 bits by a factor of more than a few\n\t\t * million (2^23 ish), there is a possibility that it might overflow the\n\t\t * 53-bit mantissa and lose precision.\n\t\t *\n\t\t * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\n\t\t * propagates around the loop, and on the hash state out[]. I don't believe\n\t\t * that the clamps on out4 and on out0 are strictly necessary, but it's close\n\t\t * (for out4 anyway), and better safe than sorry.\n\t\t *\n\t\t * The clamps on out[] are necessary for the output to be correct even in the\n\t\t * common case and for short inputs.\n\t\t */\n\n\t\tfor (let i = 0; i < 64; i++) {\n\t\t\t// load up the input word for this round\n\n\t\t\tif (i < 16) {\n\t\t\t\ttmp = w[i];\n\t\t\t} else {\n\t\t\t\ta = w[(i + 1) & 15];\n\n\t\t\t\tb = w[(i + 14) & 15];\n\n\t\t\t\ttmp = w[i & 15] =\n\t\t\t\t\t(((a >>> 7) ^ (a >>> 18) ^ (a >>> 3) ^ (a << 25) ^ (a << 14)) +\n\t\t\t\t\t\t((b >>> 17) ^ (b >>> 19) ^ (b >>> 10) ^ (b << 15) ^ (b << 13)) +\n\t\t\t\t\t\tw[i & 15] +\n\t\t\t\t\t\tw[(i + 9) & 15]) |\n\t\t\t\t\t0;\n\t\t\t}\n\n\t\t\ttmp =\n\t\t\t\ttmp +\n\t\t\t\tout7 +\n\t\t\t\t((out4 >>> 6) ^ (out4 >>> 11) ^ (out4 >>> 25) ^ (out4 << 26) ^ (out4 << 21) ^ (out4 << 7)) +\n\t\t\t\t(out6 ^ (out4 & (out5 ^ out6))) +\n\t\t\t\tkey[i]; // | 0;\n\n\t\t\t// shift register\n\t\t\tout7 = out6;\n\t\t\tout6 = out5;\n\t\t\tout5 = out4;\n\n\t\t\tout4 = (out3 + tmp) | 0;\n\n\t\t\tout3 = out2;\n\t\t\tout2 = out1;\n\t\t\tout1 = out0;\n\n\t\t\tout0 =\n\t\t\t\t(tmp +\n\t\t\t\t\t((out1 & out2) ^ (out3 & (out1 ^ out2))) +\n\t\t\t\t\t((out1 >>> 2) ^\n\t\t\t\t\t\t(out1 >>> 13) ^\n\t\t\t\t\t\t(out1 >>> 22) ^\n\t\t\t\t\t\t(out1 << 30) ^\n\t\t\t\t\t\t(out1 << 19) ^\n\t\t\t\t\t\t(out1 << 10))) |\n\t\t\t\t0;\n\t\t}\n\n\t\tout[0] = (out[0] + out0) | 0;\n\t\tout[1] = (out[1] + out1) | 0;\n\t\tout[2] = (out[2] + out2) | 0;\n\t\tout[3] = (out[3] + out3) | 0;\n\t\tout[4] = (out[4] + out4) | 0;\n\t\tout[5] = (out[5] + out5) | 0;\n\t\tout[6] = (out[6] + out6) | 0;\n\t\tout[7] = (out[7] + out7) | 0;\n\t}\n\n\tconst bytes = new Uint8Array(out.buffer);\n\treverse_endianness(bytes);\n\n\treturn btoa(String.fromCharCode(...bytes));\n}\n\n/** The SHA-256 initialization vector */\nconst init = new Uint32Array(8);\n\n/** The SHA-256 hash key */\nconst key = new Uint32Array(64);\n\n/** Function to precompute init and key. */\nfunction precompute() {\n\t/** @param {number} x */\n\tfunction frac(x) {\n\t\treturn (x - Math.floor(x)) * 0x100000000;\n\t}\n\n\tlet prime = 2;\n\n\tfor (let i = 0; i < 64; prime++) {\n\t\tlet is_prime = true;\n\n\t\tfor (let factor = 2; factor * factor <= prime; factor++) {\n\t\t\tif (prime % factor === 0) {\n\t\t\t\tis_prime = false;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (is_prime) {\n\t\t\tif (i < 8) {\n\t\t\t\tinit[i] = frac(prime ** (1 / 2));\n\t\t\t}\n\n\t\t\tkey[i] = frac(prime ** (1 / 3));\n\n\t\t\ti++;\n\t\t}\n\t}\n}\n\n/** @param {Uint8Array} bytes */\nfunction reverse_endianness(bytes) {\n\tfor (let i = 0; i < bytes.length; i += 4) {\n\t\tconst a = bytes[i + 0];\n\t\tconst b = bytes[i + 1];\n\t\tconst c = bytes[i + 2];\n\t\tconst d = bytes[i + 3];\n\n\t\tbytes[i + 0] = d;\n\t\tbytes[i + 1] = c;\n\t\tbytes[i + 2] = b;\n\t\tbytes[i + 3] = a;\n\t}\n}\n\n/** @param {string} str */\nfunction encode(str) {\n\tconst encoded = text_encoder.encode(str);\n\tconst length = encoded.length * 8;\n\n\t// result should be a multiple of 512 bits in length,\n\t// with room for a 1 (after the data) and two 32-bit\n\t// words containing the original input bit length\n\tconst size = 512 * Math.ceil((length + 65) / 512);\n\tconst bytes = new Uint8Array(size / 8);\n\tbytes.set(encoded);\n\n\t// append a 1\n\tbytes[encoded.length] = 0b10000000;\n\n\treverse_endianness(bytes);\n\n\t// add the input bit length\n\tconst words = new Uint32Array(bytes.buffer);\n\twords[words.length - 2] = Math.floor(length / 0x100000000); // this will always be zero for us\n\twords[words.length - 1] = length;\n\n\treturn words;\n}\n","import { DEV } from 'esm-env';\nimport { escape_html } from '../../../utils/escape.js';\nimport { sha256 } from './crypto.js';\n\nconst array = new Uint8Array(16);\n\nfunction generate_nonce() {\n\tcrypto.getRandomValues(array);\n\treturn btoa(String.fromCharCode(...array));\n}\n\nconst quoted = new Set([\n\t'self',\n\t'unsafe-eval',\n\t'unsafe-hashes',\n\t'unsafe-inline',\n\t'none',\n\t'strict-dynamic',\n\t'report-sample',\n\t'wasm-unsafe-eval',\n\t'script'\n]);\n\nconst crypto_pattern = /^(nonce|sha\\d\\d\\d)-/;\n\n// CSP and CSP Report Only are extremely similar with a few caveats\n// the easiest/DRYest way to express this is with some private encapsulation\nclass BaseProvider {\n\t/** @type {boolean} */\n\t#use_hashes;\n\n\t/** @type {boolean} */\n\t#script_needs_csp;\n\n\t/** @type {boolean} */\n\t#script_src_needs_csp;\n\n\t/** @type {boolean} */\n\t#script_src_elem_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_attr_needs_csp;\n\n\t/** @type {boolean} */\n\t#style_src_elem_needs_csp;\n\n\t/** @type {import('types').CspDirectives} */\n\t#directives;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#script_src;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#script_src_elem;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src_attr;\n\n\t/** @type {import('types').Csp.Source[]} */\n\t#style_src_elem;\n\n\t/** @type {string} */\n\t#nonce;\n\n\t/**\n\t * @param {boolean} use_hashes\n\t * @param {import('types').CspDirectives} directives\n\t * @param {string} nonce\n\t */\n\tconstructor(use_hashes, directives, nonce) {\n\t\tthis.#use_hashes = use_hashes;\n\t\tthis.#directives = DEV ? { ...directives } : directives; // clone in dev so we can safely mutate\n\n\t\tconst d = this.#directives;\n\n\t\tthis.#script_src = [];\n\t\tthis.#script_src_elem = [];\n\t\tthis.#style_src = [];\n\t\tthis.#style_src_attr = [];\n\t\tthis.#style_src_elem = [];\n\n\t\tconst effective_script_src = d['script-src'] || d['default-src'];\n\t\tconst script_src_elem = d['script-src-elem'];\n\t\tconst effective_style_src = d['style-src'] || d['default-src'];\n\t\tconst style_src_attr = d['style-src-attr'];\n\t\tconst style_src_elem = d['style-src-elem'];\n\n\t\tif (DEV) {\n\t\t\t// remove strict-dynamic in dev...\n\t\t\t// TODO reinstate this if we can figure out how to make strict-dynamic work\n\t\t\t// if (d['default-src']) {\n\t\t\t// \td['default-src'] = d['default-src'].filter((name) => name !== 'strict-dynamic');\n\t\t\t// \tif (d['default-src'].length === 0) delete d['default-src'];\n\t\t\t// }\n\n\t\t\t// if (d['script-src']) {\n\t\t\t// \td['script-src'] = d['script-src'].filter((name) => name !== 'strict-dynamic');\n\t\t\t// \tif (d['script-src'].length === 0) delete d['script-src'];\n\t\t\t// }\n\n\t\t\t// ...and add unsafe-inline so we can inject <style> elements\n\t\t\t// Note that 'unsafe-inline' is ignored if either a hash or nonce value is present in the source list, so we remove those during dev when injecting unsafe-inline\n\t\t\tif (effective_style_src && !effective_style_src.includes('unsafe-inline')) {\n\t\t\t\td['style-src'] = [\n\t\t\t\t\t...effective_style_src.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (style_src_attr && !style_src_attr.includes('unsafe-inline')) {\n\t\t\t\td['style-src-attr'] = [\n\t\t\t\t\t...style_src_attr.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (style_src_elem && !style_src_elem.includes('unsafe-inline')) {\n\t\t\t\td['style-src-elem'] = [\n\t\t\t\t\t...style_src_elem.filter(\n\t\t\t\t\t\t(value) => !(value.startsWith('sha256-') || value.startsWith('nonce-'))\n\t\t\t\t\t),\n\t\t\t\t\t'unsafe-inline'\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\t/** @param {(import('types').Csp.Source | import('types').Csp.ActionSource)[] | undefined} directive */\n\t\tconst needs_csp = (directive) =>\n\t\t\t!!directive && !directive.some((value) => value === 'unsafe-inline');\n\n\t\tthis.#script_src_needs_csp = needs_csp(effective_script_src);\n\t\tthis.#script_src_elem_needs_csp = needs_csp(script_src_elem);\n\t\tthis.#style_src_needs_csp = needs_csp(effective_style_src);\n\t\tthis.#style_src_attr_needs_csp = needs_csp(style_src_attr);\n\t\tthis.#style_src_elem_needs_csp = needs_csp(style_src_elem);\n\n\t\tthis.#script_needs_csp = this.#script_src_needs_csp || this.#script_src_elem_needs_csp;\n\t\tthis.#style_needs_csp =\n\t\t\t!DEV &&\n\t\t\t(this.#style_src_needs_csp ||\n\t\t\t\tthis.#style_src_attr_needs_csp ||\n\t\t\t\tthis.#style_src_elem_needs_csp);\n\n\t\tthis.script_needs_nonce = this.#script_needs_csp && !this.#use_hashes;\n\t\tthis.style_needs_nonce = this.#style_needs_csp && !this.#use_hashes;\n\n\t\tthis.#nonce = nonce;\n\t}\n\n\t/** @param {string} content */\n\tadd_script(content) {\n\t\tif (!this.#script_needs_csp) return;\n\n\t\t/** @type {`nonce-${string}` | `sha256-${string}`} */\n\t\tconst source = this.#use_hashes ? `sha256-${sha256(content)}` : `nonce-${this.#nonce}`;\n\n\t\tif (this.#script_src_needs_csp) {\n\t\t\tthis.#script_src.push(source);\n\t\t}\n\n\t\tif (this.#script_src_elem_needs_csp) {\n\t\t\tthis.#script_src_elem.push(source);\n\t\t}\n\t}\n\n\t/** @param {string} content */\n\tadd_style(content) {\n\t\tif (!this.#style_needs_csp) return;\n\n\t\t/** @type {`nonce-${string}` | `sha256-${string}`} */\n\t\tconst source = this.#use_hashes ? `sha256-${sha256(content)}` : `nonce-${this.#nonce}`;\n\n\t\tif (this.#style_src_needs_csp) {\n\t\t\tthis.#style_src.push(source);\n\t\t}\n\n\t\tif (this.#style_src_attr_needs_csp) {\n\t\t\tthis.#style_src_attr.push(source);\n\t\t}\n\n\t\tif (this.#style_src_elem_needs_csp) {\n\t\t\t// this is the sha256 hash for the string \"/* empty */\"\n\t\t\t// adding it so that svelte does not break csp\n\t\t\t// see https://github.com/sveltejs/svelte/pull/7800\n\t\t\tconst sha256_empty_comment_hash = 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=';\n\t\t\tconst d = this.#directives;\n\n\t\t\tif (\n\t\t\t\td['style-src-elem'] &&\n\t\t\t\t!d['style-src-elem'].includes(sha256_empty_comment_hash) &&\n\t\t\t\t!this.#style_src_elem.includes(sha256_empty_comment_hash)\n\t\t\t) {\n\t\t\t\tthis.#style_src_elem.push(sha256_empty_comment_hash);\n\t\t\t}\n\n\t\t\tif (source !== sha256_empty_comment_hash) {\n\t\t\t\tthis.#style_src_elem.push(source);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {boolean} [is_meta]\n\t */\n\tget_header(is_meta = false) {\n\t\tconst header = [];\n\n\t\t// due to browser inconsistencies, we can't append sources to default-src\n\t\t// (specifically, Firefox appears to not ignore nonce-{nonce} directives\n\t\t// on default-src), so we ensure that script-src and style-src exist\n\n\t\tconst directives = { ...this.#directives };\n\n\t\tif (this.#style_src.length > 0) {\n\t\t\tdirectives['style-src'] = [\n\t\t\t\t...(directives['style-src'] || directives['default-src'] || []),\n\t\t\t\t...this.#style_src\n\t\t\t];\n\t\t}\n\n\t\tif (this.#style_src_attr.length > 0) {\n\t\t\tdirectives['style-src-attr'] = [\n\t\t\t\t...(directives['style-src-attr'] || []),\n\t\t\t\t...this.#style_src_attr\n\t\t\t];\n\t\t}\n\n\t\tif (this.#style_src_elem.length > 0) {\n\t\t\tdirectives['style-src-elem'] = [\n\t\t\t\t...(directives['style-src-elem'] || []),\n\t\t\t\t...this.#style_src_elem\n\t\t\t];\n\t\t}\n\n\t\tif (this.#script_src.length > 0) {\n\t\t\tdirectives['script-src'] = [\n\t\t\t\t...(directives['script-src'] || directives['default-src'] || []),\n\t\t\t\t...this.#script_src\n\t\t\t];\n\t\t}\n\n\t\tif (this.#script_src_elem.length > 0) {\n\t\t\tdirectives['script-src-elem'] = [\n\t\t\t\t...(directives['script-src-elem'] || []),\n\t\t\t\t...this.#script_src_elem\n\t\t\t];\n\t\t}\n\n\t\tfor (const key in directives) {\n\t\t\tif (is_meta && (key === 'frame-ancestors' || key === 'report-uri' || key === 'sandbox')) {\n\t\t\t\t// these values cannot be used with a <meta> tag\n\t\t\t\t// TODO warn?\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// @ts-expect-error gimme a break typescript, `key` is obviously a member of internal_directives\n\t\t\tconst value = /** @type {string[] | true} */ (directives[key]);\n\n\t\t\tif (!value) continue;\n\n\t\t\tconst directive = [key];\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tvalue.forEach((value) => {\n\t\t\t\t\tif (quoted.has(value) || crypto_pattern.test(value)) {\n\t\t\t\t\t\tdirective.push(`'${value}'`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdirective.push(value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\theader.push(directive.join(' '));\n\t\t}\n\n\t\treturn header.join('; ');\n\t}\n}\n\nclass CspProvider extends BaseProvider {\n\tget_meta() {\n\t\tconst content = this.get_header(true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn `<meta http-equiv=\"content-security-policy\" content=\"${escape_html(content, true)}\">`;\n\t}\n}\n\nclass CspReportOnlyProvider extends BaseProvider {\n\t/**\n\t * @param {boolean} use_hashes\n\t * @param {import('types').CspDirectives} directives\n\t * @param {string} nonce\n\t */\n\tconstructor(use_hashes, directives, nonce) {\n\t\tsuper(use_hashes, directives, nonce);\n\n\t\tif (Object.values(directives).filter((v) => !!v).length > 0) {\n\t\t\t// If we're generating content-security-policy-report-only,\n\t\t\t// if there are any directives, we need a report-uri or report-to (or both)\n\t\t\t// else it's just an expensive noop.\n\t\t\tconst has_report_to = directives['report-to']?.length ?? 0 > 0;\n\t\t\tconst has_report_uri = directives['report-uri']?.length ?? 0 > 0;\n\t\t\tif (!has_report_to && !has_report_uri) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class Csp {\n\t/** @readonly */\n\tnonce = generate_nonce();\n\n\t/** @type {CspProvider} */\n\tcsp_provider;\n\n\t/** @type {CspReportOnlyProvider} */\n\treport_only_provider;\n\n\t/**\n\t * @param {import('./types.js').CspConfig} config\n\t * @param {import('./types.js').CspOpts} opts\n\t */\n\tconstructor({ mode, directives, reportOnly }, { prerender }) {\n\t\tconst use_hashes = mode === 'hash' || (mode === 'auto' && prerender);\n\t\tthis.csp_provider = new CspProvider(use_hashes, directives, this.nonce);\n\t\tthis.report_only_provider = new CspReportOnlyProvider(use_hashes, reportOnly, this.nonce);\n\t}\n\n\tget script_needs_nonce() {\n\t\treturn this.csp_provider.script_needs_nonce || this.report_only_provider.script_needs_nonce;\n\t}\n\n\tget style_needs_nonce() {\n\t\treturn this.csp_provider.style_needs_nonce || this.report_only_provider.style_needs_nonce;\n\t}\n\n\t/** @param {string} content */\n\tadd_script(content) {\n\t\tthis.csp_provider.add_script(content);\n\t\tthis.report_only_provider.add_script(content);\n\t}\n\n\t/** @param {string} content */\n\tadd_style(content) {\n\t\tthis.csp_provider.add_style(content);\n\t\tthis.report_only_provider.add_style(content);\n\t}\n}\n","import { BROWSER } from 'esm-env';\n\nconst param_pattern = /^(\\[)?(\\.\\.\\.)?(\\w+)(?:=(\\w+))?(\\])?$/;\n\n/**\n * Creates the regex pattern, extracts parameter names, and generates types for a route\n * @param {string} id\n */\nexport function parse_route_id(id) {\n\t/** @type {import('types').RouteParam[]} */\n\tconst params = [];\n\n\tconst pattern =\n\t\tid === '/'\n\t\t\t? /^\\/$/\n\t\t\t: new RegExp(\n\t\t\t\t\t`^${get_route_segments(id)\n\t\t\t\t\t\t.map((segment) => {\n\t\t\t\t\t\t\t// special case — /[...rest]/ could contain zero segments\n\t\t\t\t\t\t\tconst rest_match = /^\\[\\.\\.\\.(\\w+)(?:=(\\w+))?\\]$/.exec(segment);\n\t\t\t\t\t\t\tif (rest_match) {\n\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\tname: rest_match[1],\n\t\t\t\t\t\t\t\t\tmatcher: rest_match[2],\n\t\t\t\t\t\t\t\t\toptional: false,\n\t\t\t\t\t\t\t\t\trest: true,\n\t\t\t\t\t\t\t\t\tchained: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn '(?:/([^]*))?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// special case — /[[optional]]/ could contain zero segments\n\t\t\t\t\t\t\tconst optional_match = /^\\[\\[(\\w+)(?:=(\\w+))?\\]\\]$/.exec(segment);\n\t\t\t\t\t\t\tif (optional_match) {\n\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\tname: optional_match[1],\n\t\t\t\t\t\t\t\t\tmatcher: optional_match[2],\n\t\t\t\t\t\t\t\t\toptional: true,\n\t\t\t\t\t\t\t\t\trest: false,\n\t\t\t\t\t\t\t\t\tchained: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn '(?:/([^/]+))?';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!segment) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst parts = segment.split(/\\[(.+?)\\](?!\\])/);\n\t\t\t\t\t\t\tconst result = parts\n\t\t\t\t\t\t\t\t.map((content, i) => {\n\t\t\t\t\t\t\t\t\tif (i % 2) {\n\t\t\t\t\t\t\t\t\t\tif (content.startsWith('x+')) {\n\t\t\t\t\t\t\t\t\t\t\treturn escape(String.fromCharCode(parseInt(content.slice(2), 16)));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (content.startsWith('u+')) {\n\t\t\t\t\t\t\t\t\t\t\treturn escape(\n\t\t\t\t\t\t\t\t\t\t\t\tString.fromCharCode(\n\t\t\t\t\t\t\t\t\t\t\t\t\t...content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((code) => parseInt(code, 16))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// We know the match cannot be null in the browser because manifest generation\n\t\t\t\t\t\t\t\t\t\t// would have invoked this during build and failed if we hit an invalid\n\t\t\t\t\t\t\t\t\t\t// param/matcher name with non-alphanumeric character.\n\t\t\t\t\t\t\t\t\t\tconst match = /** @type {RegExpExecArray} */ (param_pattern.exec(content));\n\t\t\t\t\t\t\t\t\t\tif (!BROWSER && !match) {\n\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\t\t`Invalid param: ${content}. Params and matcher names can only have underscores and alphanumeric characters.`\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst [, is_optional, is_rest, name, matcher] = match;\n\t\t\t\t\t\t\t\t\t\t// It's assumed that the following invalid route id cases are already checked\n\t\t\t\t\t\t\t\t\t\t// - unbalanced brackets\n\t\t\t\t\t\t\t\t\t\t// - optional param following rest param\n\n\t\t\t\t\t\t\t\t\t\tparams.push({\n\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\tmatcher,\n\t\t\t\t\t\t\t\t\t\t\toptional: !!is_optional,\n\t\t\t\t\t\t\t\t\t\t\trest: !!is_rest,\n\t\t\t\t\t\t\t\t\t\t\tchained: is_rest ? i === 1 && parts[0] === '' : false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn is_rest ? '([^]*?)' : is_optional ? '([^/]*)?' : '([^/]+?)';\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn escape(content);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.join('');\n\n\t\t\t\t\t\t\treturn '/' + result;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('')}/?$`\n\t\t\t\t);\n\n\treturn { pattern, params };\n}\n\nconst optional_param_regex = /\\/\\[\\[\\w+?(?:=\\w+)?\\]\\]/;\n\n/**\n * Removes optional params from a route ID.\n * @param {string} id\n * @returns The route id with optional params removed\n */\nexport function remove_optional_params(id) {\n\treturn id.replace(optional_param_regex, '');\n}\n\n/**\n * Returns `false` for `(group)` segments\n * @param {string} segment\n */\nfunction affects_path(segment) {\n\treturn segment !== '' && !/^\\([^)]+\\)$/.test(segment);\n}\n\n/**\n * Splits a route id into its segments, removing segments that\n * don't affect the path (i.e. groups). The root route is represented by `/`\n * and will be returned as `['']`.\n * @param {string} route\n * @returns string[]\n */\nexport function get_route_segments(route) {\n\treturn route.slice(1).split('/').filter(affects_path);\n}\n\n/**\n * @param {RegExpMatchArray} match\n * @param {import('types').RouteParam[]} params\n * @param {Record<string, import('@sveltejs/kit').ParamMatcher>} matchers\n */\nexport function exec(match, params, matchers) {\n\t/** @type {Record<string, string>} */\n\tconst result = {};\n\n\tconst values = match.slice(1);\n\tconst values_needing_match = values.filter((value) => value !== undefined);\n\n\tlet buffered = 0;\n\n\tfor (let i = 0; i < params.length; i += 1) {\n\t\tconst param = params[i];\n\t\tlet value = values[i - buffered];\n\n\t\t// in the `[[a=b]]/.../[...rest]` case, if one or more optional parameters\n\t\t// weren't matched, roll the skipped values into the rest\n\t\tif (param.chained && param.rest && buffered) {\n\t\t\tvalue = values\n\t\t\t\t.slice(i - buffered, i + 1)\n\t\t\t\t.filter((s) => s)\n\t\t\t\t.join('/');\n\n\t\t\tbuffered = 0;\n\t\t}\n\n\t\t// if `value` is undefined, it means this is an optional or rest parameter\n\t\tif (value === undefined) {\n\t\t\tif (param.rest) result[param.name] = '';\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!param.matcher || matchers[param.matcher](value)) {\n\t\t\tresult[param.name] = value;\n\n\t\t\t// Now that the params match, reset the buffer if the next param isn't the [...rest]\n\t\t\t// and the next value is defined, otherwise the buffer will cause us to skip values\n\t\t\tconst next_param = params[i + 1];\n\t\t\tconst next_value = values[i + 1];\n\t\t\tif (next_param && !next_param.rest && next_param.optional && next_value && param.chained) {\n\t\t\t\tbuffered = 0;\n\t\t\t}\n\n\t\t\t// There are no more params and no more values, but all non-empty values have been matched\n\t\t\tif (\n\t\t\t\t!next_param &&\n\t\t\t\t!next_value &&\n\t\t\t\tObject.keys(result).length === values_needing_match.length\n\t\t\t) {\n\t\t\t\tbuffered = 0;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\t// in the `/[[a=b]]/...` case, if the value didn't satisfy the matcher,\n\t\t// keep track of the number of skipped optional parameters and continue\n\t\tif (param.optional && param.chained) {\n\t\t\tbuffered++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// otherwise, if the matcher returns `false`, the route did not match\n\t\treturn;\n\t}\n\n\tif (buffered) return;\n\treturn result;\n}\n\n/** @param {string} str */\nfunction escape(str) {\n\treturn (\n\t\tstr\n\t\t\t.normalize()\n\t\t\t// escape [ and ] before escaping other characters, since they are used in the replacements\n\t\t\t.replace(/[[\\]]/g, '\\\\$&')\n\t\t\t// replace %, /, ? and # with their encoded versions because decode_pathname leaves them untouched\n\t\t\t.replace(/%/g, '%25')\n\t\t\t.replace(/\\//g, '%2[Ff]')\n\t\t\t.replace(/\\?/g, '%3[Ff]')\n\t\t\t.replace(/#/g, '%23')\n\t\t\t// escape characters that have special meaning in regex\n\t\t\t.replace(/[.*+?^${}()|\\\\]/g, '\\\\$&')\n\t);\n}\n\nconst basic_param_pattern = /\\[(\\[)?(\\.\\.\\.)?(\\w+?)(?:=(\\w+))?\\]\\]?/g;\n\n/**\n * Populate a route ID with params to resolve a pathname.\n * @example\n * ```js\n * resolveRoute(\n *   `/blog/[slug]/[...somethingElse]`,\n *   {\n *     slug: 'hello-world',\n *     somethingElse: 'something/else'\n *   }\n * ); // `/blog/hello-world/something/else`\n * ```\n * @param {string} id\n * @param {Record<string, string | undefined>} params\n * @returns {string}\n */\nexport function resolve_route(id, params) {\n\tconst segments = get_route_segments(id);\n\tconst has_id_trailing_slash = id != '/' && id.endsWith('/');\n\n\treturn (\n\t\t'/' +\n\t\tsegments\n\t\t\t.map((segment) =>\n\t\t\t\tsegment.replace(basic_param_pattern, (_, optional, rest, name) => {\n\t\t\t\t\tconst param_value = params[name];\n\n\t\t\t\t\t// This is nested so TS correctly narrows the type\n\t\t\t\t\tif (!param_value) {\n\t\t\t\t\t\tif (optional) return '';\n\t\t\t\t\t\tif (rest && param_value !== undefined) return '';\n\t\t\t\t\t\tthrow new Error(`Missing parameter '${name}' in route ${id}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (param_value.startsWith('/') || param_value.endsWith('/'))\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Parameter '${name}' in route ${id} cannot start or end with a slash -- this would cause an invalid route like foo//bar`\n\t\t\t\t\t\t);\n\t\t\t\t\treturn param_value;\n\t\t\t\t})\n\t\t\t)\n\t\t\t.filter(Boolean)\n\t\t\t.join('/') +\n\t\t(has_id_trailing_slash ? '/' : '')\n\t);\n}\n\n/**\n * @param {import('types').SSRNode} node\n * @returns {boolean}\n */\nexport function has_server_load(node) {\n\treturn node.server?.load !== undefined || node.server?.trailingSlash !== undefined;\n}\n","import { base, assets, relative } from '$app/paths/internal/server';\nimport { text } from '@sveltejs/kit';\nimport { s } from '../../../utils/misc.js';\nimport { exec } from '../../../utils/routing.js';\nimport { decode_params } from '../../../utils/url.js';\nimport { get_relative_path } from '../../utils.js';\n\n/**\n * @param {import('types').SSRClientRoute} route\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {string}\n */\nexport function generate_route_object(route, url, manifest) {\n\tconst { errors, layouts, leaf } = route;\n\n\tconst nodes = [...errors, ...layouts.map((l) => l?.[1]), leaf[1]]\n\t\t.filter((n) => typeof n === 'number')\n\t\t.map((n) => `'${n}': () => ${create_client_import(manifest._.client.nodes?.[n], url)}`)\n\t\t.join(',\\n\\t\\t');\n\n\t// stringified version of\n\t/** @type {import('types').CSRRouteServer} */\n\treturn [\n\t\t`{\\n\\tid: ${s(route.id)}`,\n\t\t`errors: ${s(route.errors)}`,\n\t\t`layouts: ${s(route.layouts)}`,\n\t\t`leaf: ${s(route.leaf)}`,\n\t\t`nodes: {\\n\\t\\t${nodes}\\n\\t}\\n}`\n\t].join(',\\n\\t');\n}\n\n/**\n * @param {string | undefined} import_path\n * @param {URL} url\n */\nfunction create_client_import(import_path, url) {\n\tif (!import_path) return 'Promise.resolve({})';\n\n\t// During DEV, Vite will make the paths absolute (e.g. /@fs/...)\n\tif (import_path[0] === '/') {\n\t\treturn `import('${import_path}')`;\n\t}\n\n\t// During PROD, they're root-relative\n\tif (assets !== '') {\n\t\treturn `import('${assets}/${import_path}')`;\n\t}\n\n\tif (!relative) {\n\t\treturn `import('${base}/${import_path}')`;\n\t}\n\n\t// Else we make them relative to the server-side route resolution request\n\t// to support IPFS, the internet archive, etc.\n\tlet path = get_relative_path(url.pathname, `${base}/${import_path}`);\n\tif (path[0] !== '.') path = `./${path}`;\n\treturn `import('${path}')`;\n}\n\n/**\n * @param {string} resolved_path\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {Promise<Response>}\n */\nexport async function resolve_route(resolved_path, url, manifest) {\n\tif (!manifest._.client.routes) {\n\t\treturn text('Server-side route resolution disabled', { status: 400 });\n\t}\n\n\t/** @type {import('types').SSRClientRoute | null} */\n\tlet route = null;\n\t/** @type {Record<string, string>} */\n\tlet params = {};\n\n\tconst matchers = await manifest._.matchers();\n\n\tfor (const candidate of manifest._.client.routes) {\n\t\tconst match = candidate.pattern.exec(resolved_path);\n\t\tif (!match) continue;\n\n\t\tconst matched = exec(match, candidate.params, matchers);\n\t\tif (matched) {\n\t\t\troute = candidate;\n\t\t\tparams = decode_params(matched);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn create_server_routing_response(route, params, url, manifest).response;\n}\n\n/**\n * @param {import('types').SSRClientRoute | null} route\n * @param {Partial<Record<string, string>>} params\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {{response: Response, body: string}}\n */\nexport function create_server_routing_response(route, params, url, manifest) {\n\tconst headers = new Headers({\n\t\t'content-type': 'application/javascript; charset=utf-8'\n\t});\n\n\tif (route) {\n\t\tconst csr_route = generate_route_object(route, url, manifest);\n\t\tconst body = `${create_css_import(route, url, manifest)}\\nexport const route = ${csr_route}; export const params = ${JSON.stringify(params)};`;\n\n\t\treturn { response: text(body, { headers }), body };\n\t} else {\n\t\treturn { response: text('', { headers }), body: '' };\n\t}\n}\n\n/**\n * This function generates the client-side import for the CSS files that are\n * associated with the current route. Vite takes care of that when using\n * client-side route resolution, but for server-side resolution it does\n * not know about the CSS files automatically.\n *\n * @param {import('types').SSRClientRoute} route\n * @param {URL} url\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @returns {string}\n */\nfunction create_css_import(route, url, manifest) {\n\tconst { errors, layouts, leaf } = route;\n\n\tlet css = '';\n\n\tfor (const node of [...errors, ...layouts.map((l) => l?.[1]), leaf[1]]) {\n\t\tif (typeof node !== 'number') continue;\n\t\tconst node_css = manifest._.client.css?.[node];\n\t\tfor (const css_path of node_css ?? []) {\n\t\t\tcss += `'${assets || base}/${css_path}',`;\n\t\t}\n\t}\n\n\tif (!css) return '';\n\n\treturn `${create_client_import(/** @type {string} */ (manifest._.client.start), url)}.then(x => x.load_css([${css}]));`;\n}\n","import * as devalue from 'devalue';\nimport { readable, writable } from 'svelte/store';\nimport { DEV } from 'esm-env';\nimport { text } from '@sveltejs/kit';\nimport * as paths from '$app/paths/internal/server';\nimport { hash } from '../../../utils/hash.js';\nimport { serialize_data } from './serialize_data.js';\nimport { s } from '../../../utils/misc.js';\nimport { Csp } from './csp.js';\nimport { uneval_action_response } from './actions.js';\nimport { public_env } from '../../shared-server.js';\nimport { SVELTE_KIT_ASSETS } from '../../../constants.js';\nimport { SCHEME } from '../../../utils/url.js';\nimport { create_server_routing_response, generate_route_object } from './server_routing.js';\nimport { add_resolution_suffix } from '../../pathname.js';\nimport { try_get_request_store, with_request_store } from '@sveltejs/kit/internal/server';\nimport { text_encoder } from '../../utils.js';\nimport { get_global_name } from '../utils.js';\nimport { create_remote_key } from '../../shared.js';\n\n// TODO rename this function/module\n\nconst updated = {\n\t...readable(false),\n\tcheck: () => false\n};\n\n/**\n * Creates the HTML response.\n * @param {{\n *   branch: Array<import('./types.js').Loaded>;\n *   fetched: Array<import('./types.js').Fetched>;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   page_config: { ssr: boolean; csr: boolean };\n *   status: number;\n *   error: App.Error | null;\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   resolve_opts: import('types').RequiredResolveOptions;\n *   action_result?: import('@sveltejs/kit').ActionResult;\n *   data_serializer: import('./types.js').ServerDataSerializer\n * }} opts\n */\nexport async function render_response({\n\tbranch,\n\tfetched,\n\toptions,\n\tmanifest,\n\tstate,\n\tpage_config,\n\tstatus,\n\terror = null,\n\tevent,\n\tevent_state,\n\tresolve_opts,\n\taction_result,\n\tdata_serializer\n}) {\n\tif (state.prerendering) {\n\t\tif (options.csp.mode === 'nonce') {\n\t\t\tthrow new Error('Cannot use prerendering if config.kit.csp.mode === \"nonce\"');\n\t\t}\n\n\t\tif (options.app_template_contains_nonce) {\n\t\t\tthrow new Error('Cannot use prerendering if page template contains %sveltekit.nonce%');\n\t\t}\n\t}\n\n\tconst { client } = manifest._;\n\n\tconst modulepreloads = new Set(client.imports);\n\tconst stylesheets = new Set(client.stylesheets);\n\tconst fonts = new Set(client.fonts);\n\n\t/**\n\t * The value of the Link header that is added to the response when not prerendering\n\t * @type {Set<string>}\n\t */\n\tconst link_headers = new Set();\n\n\t/**\n\t * `<link>` tags that are added to prerendered responses\n\t * (note that stylesheets are always added, prerendered or not)\n\t * @type {Set<string>}\n\t */\n\tconst link_tags = new Set();\n\n\t/** @type {Map<string, string>} */\n\t// TODO if we add a client entry point one day, we will need to include inline_styles with the entry, otherwise stylesheets will be linked even if they are below inlineStyleThreshold\n\tconst inline_styles = new Map();\n\n\tlet rendered;\n\n\tconst form_value =\n\t\taction_result?.type === 'success' || action_result?.type === 'failure'\n\t\t\t? (action_result.data ?? null)\n\t\t\t: null;\n\n\t/** @type {string} */\n\tlet base = paths.base;\n\n\t/** @type {string} */\n\tlet assets = paths.assets;\n\n\t/**\n\t * An expression that will evaluate in the client to determine the resolved base path.\n\t * We use a relative path when possible to support IPFS, the internet archive, etc.\n\t */\n\tlet base_expression = s(paths.base);\n\n\t// if appropriate, use relative paths for greater portability\n\tif (paths.relative) {\n\t\tif (!state.prerendering?.fallback) {\n\t\t\tconst segments = event.url.pathname.slice(paths.base.length).split('/').slice(2);\n\n\t\t\tbase = segments.map(() => '..').join('/') || '.';\n\n\t\t\t// resolve e.g. '../..' against current location, then remove trailing slash\n\t\t\tbase_expression = `new URL(${s(base)}, location).pathname.slice(0, -1)`;\n\n\t\t\tif (!paths.assets || (paths.assets[0] === '/' && paths.assets !== SVELTE_KIT_ASSETS)) {\n\t\t\t\tassets = base;\n\t\t\t}\n\t\t} else if (options.hash_routing) {\n\t\t\t// we have to assume that we're in the right place\n\t\t\tbase_expression = \"new URL('.', location).pathname.slice(0, -1)\";\n\t\t}\n\t}\n\n\tif (page_config.ssr) {\n\t\t/** @type {Record<string, any>} */\n\t\tconst props = {\n\t\t\tstores: {\n\t\t\t\tpage: writable(null),\n\t\t\t\tnavigating: writable(null),\n\t\t\t\tupdated\n\t\t\t},\n\t\t\tconstructors: await Promise.all(\n\t\t\t\tbranch.map(({ node }) => {\n\t\t\t\t\tif (!node.component) {\n\t\t\t\t\t\t// Can only be the leaf, layouts have a fallback component generated\n\t\t\t\t\t\tthrow new Error(`Missing +page.svelte component for route ${event.route.id}`);\n\t\t\t\t\t}\n\t\t\t\t\treturn node.component();\n\t\t\t\t})\n\t\t\t),\n\t\t\tform: form_value\n\t\t};\n\n\t\tlet data = {};\n\n\t\t// props_n (instead of props[n]) makes it easy to avoid\n\t\t// unnecessary updates for layout components\n\t\tfor (let i = 0; i < branch.length; i += 1) {\n\t\t\tdata = { ...data, ...branch[i].data };\n\t\t\tprops[`data_${i}`] = data;\n\t\t}\n\n\t\tprops.page = {\n\t\t\terror,\n\t\t\tparams: /** @type {Record<string, any>} */ (event.params),\n\t\t\troute: event.route,\n\t\t\tstatus,\n\t\t\turl: event.url,\n\t\t\tdata,\n\t\t\tform: form_value,\n\t\t\tstate: {}\n\t\t};\n\n\t\tconst render_opts = {\n\t\t\tcontext: new Map([\n\t\t\t\t[\n\t\t\t\t\t'__request__',\n\t\t\t\t\t{\n\t\t\t\t\t\tpage: props.page\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t])\n\t\t};\n\n\t\tconst fetch = globalThis.fetch;\n\n\t\ttry {\n\t\t\tif (DEV) {\n\t\t\t\tlet warned = false;\n\t\t\t\tglobalThis.fetch = (info, init) => {\n\t\t\t\t\tif (typeof info === 'string' && !SCHEME.test(info)) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Cannot call \\`fetch\\` eagerly during server-side rendering with relative URL (${info}) — put your \\`fetch\\` calls inside \\`onMount\\` or a \\`load\\` function instead`\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (!warned && !try_get_request_store()?.state.is_in_remote_function) {\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t'Avoid calling `fetch` eagerly during server-side rendering — put your `fetch` calls inside `onMount` or a `load` function instead'\n\t\t\t\t\t\t);\n\t\t\t\t\t\twarned = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn fetch(info, init);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\trendered = await with_request_store({ event, state: event_state }, async () => {\n\t\t\t\t// use relative paths during rendering, so that the resulting HTML is as\n\t\t\t\t// portable as possible, but reset afterwards\n\t\t\t\tif (paths.relative) paths.override({ base, assets });\n\n\t\t\t\tconst maybe_promise = options.root.render(props, render_opts);\n\t\t\t\t// We have to invoke .then eagerly here in order to kick off rendering: it's only starting on access,\n\t\t\t\t// and `await maybe_promise` would eagerly access the .then property but call its function only after a tick, which is too late\n\t\t\t\t// for the paths.reset() below and for any eager getRequestEvent() calls during rendering without AsyncLocalStorage available.\n\t\t\t\tconst rendered =\n\t\t\t\t\toptions.async && 'then' in maybe_promise\n\t\t\t\t\t\t? /** @type {ReturnType<typeof options.root.render> & Promise<any>} */ (\n\t\t\t\t\t\t\t\tmaybe_promise\n\t\t\t\t\t\t\t).then((r) => r)\n\t\t\t\t\t\t: maybe_promise;\n\n\t\t\t\t// TODO 3.0 remove options.async\n\t\t\t\tif (options.async) {\n\t\t\t\t\t// we reset this synchronously, rather than after async rendering is complete,\n\t\t\t\t\t// to avoid cross-talk between requests. This is a breaking change for\n\t\t\t\t\t// anyone who opts into async SSR, since `base` and `assets` will no\n\t\t\t\t\t// longer be relative to the current pathname.\n\t\t\t\t\t// TODO 3.0 remove `base` and `assets` in favour of `resolve(...)` and `asset(...)`\n\t\t\t\t\tpaths.reset();\n\t\t\t\t}\n\n\t\t\t\tconst { head, html, css } = options.async ? await rendered : rendered;\n\n\t\t\t\treturn { head, html, css };\n\t\t\t});\n\t\t} finally {\n\t\t\tif (DEV) {\n\t\t\t\tglobalThis.fetch = fetch;\n\t\t\t}\n\n\t\t\tpaths.reset(); // just in case `options.root.render(...)` failed\n\t\t}\n\n\t\tfor (const { node } of branch) {\n\t\t\tfor (const url of node.imports) modulepreloads.add(url);\n\t\t\tfor (const url of node.stylesheets) stylesheets.add(url);\n\t\t\tfor (const url of node.fonts) fonts.add(url);\n\n\t\t\tif (node.inline_styles && !client.inline) {\n\t\t\t\tObject.entries(await node.inline_styles()).forEach(([k, v]) => inline_styles.set(k, v));\n\t\t\t}\n\t\t}\n\t} else {\n\t\trendered = { head: '', html: '', css: { code: '', map: null } };\n\t}\n\n\tlet head = '';\n\tlet body = rendered.html;\n\n\tconst csp = new Csp(options.csp, {\n\t\tprerender: !!state.prerendering\n\t});\n\n\t/** @param {string} path */\n\tconst prefixed = (path) => {\n\t\tif (path.startsWith('/')) {\n\t\t\t// Vite makes the start script available through the base path and without it.\n\t\t\t// We load it via the base path in order to support remote IDE environments which proxy\n\t\t\t// all URLs under the base path during development.\n\t\t\treturn paths.base + path;\n\t\t}\n\t\treturn `${assets}/${path}`;\n\t};\n\n\t// inline styles can come from `bundleStrategy: 'inline'` or `inlineStyleThreshold`\n\tconst style = client.inline\n\t\t? client.inline?.style\n\t\t: Array.from(inline_styles.values()).join('\\n');\n\n\tif (style) {\n\t\tconst attributes = DEV ? [' data-sveltekit'] : [];\n\t\tif (csp.style_needs_nonce) attributes.push(` nonce=\"${csp.nonce}\"`);\n\n\t\tcsp.add_style(style);\n\n\t\thead += `\\n\\t<style${attributes.join('')}>${style}</style>`;\n\t}\n\n\tfor (const dep of stylesheets) {\n\t\tconst path = prefixed(dep);\n\n\t\tconst attributes = ['rel=\"stylesheet\"'];\n\n\t\tif (inline_styles.has(dep)) {\n\t\t\t// don't load stylesheets that are already inlined\n\t\t\t// include them in disabled state so that Vite can detect them and doesn't try to add them\n\t\t\tattributes.push('disabled', 'media=\"(max-width: 0)\"');\n\t\t} else {\n\t\t\tif (resolve_opts.preload({ type: 'css', path })) {\n\t\t\t\tlink_headers.add(`<${encodeURI(path)}>; rel=\"preload\"; as=\"style\"; nopush`);\n\t\t\t}\n\t\t}\n\n\t\thead += `\\n\\t\\t<link href=\"${path}\" ${attributes.join(' ')}>`;\n\t}\n\n\tfor (const dep of fonts) {\n\t\tconst path = prefixed(dep);\n\n\t\tif (resolve_opts.preload({ type: 'font', path })) {\n\t\t\tconst ext = dep.slice(dep.lastIndexOf('.') + 1);\n\n\t\t\tlink_tags.add(`<link rel=\"preload\" as=\"font\" type=\"font/${ext}\" href=\"${path}\" crossorigin>`);\n\n\t\t\tlink_headers.add(\n\t\t\t\t`<${encodeURI(path)}>; rel=\"preload\"; as=\"font\"; type=\"font/${ext}\"; crossorigin; nopush`\n\t\t\t);\n\t\t}\n\t}\n\n\tconst global = get_global_name(options);\n\tconst { data, chunks } = data_serializer.get_data(csp);\n\n\tif (page_config.ssr && page_config.csr) {\n\t\tbody += `\\n\\t\\t\\t${fetched\n\t\t\t.map((item) =>\n\t\t\t\tserialize_data(item, resolve_opts.filterSerializedResponseHeaders, !!state.prerendering)\n\t\t\t)\n\t\t\t.join('\\n\\t\\t\\t')}`;\n\t}\n\n\tif (page_config.csr) {\n\t\tconst route = manifest._.client.routes?.find((r) => r.id === event.route.id) ?? null;\n\n\t\tif (client.uses_env_dynamic_public && state.prerendering) {\n\t\t\tmodulepreloads.add(`${paths.app_dir}/env.js`);\n\t\t}\n\n\t\tif (!client.inline) {\n\t\t\tconst included_modulepreloads = Array.from(modulepreloads, (dep) => prefixed(dep)).filter(\n\t\t\t\t(path) => resolve_opts.preload({ type: 'js', path })\n\t\t\t);\n\n\t\t\tfor (const path of included_modulepreloads) {\n\t\t\t\t// see the kit.output.preloadStrategy option for details on why we have multiple options here\n\t\t\t\tlink_headers.add(`<${encodeURI(path)}>; rel=\"modulepreload\"; nopush`);\n\n\t\t\t\tif (options.preload_strategy !== 'modulepreload') {\n\t\t\t\t\thead += `\\n\\t\\t<link rel=\"preload\" as=\"script\" crossorigin=\"anonymous\" href=\"${path}\">`;\n\t\t\t\t} else {\n\t\t\t\t\tlink_tags.add(`<link rel=\"modulepreload\" href=\"${path}\">`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (state.prerendering && link_tags.size > 0) {\n\t\t\thead += Array.from(link_tags)\n\t\t\t\t.map((tag) => `\\n\\t\\t${tag}`)\n\t\t\t\t.join('');\n\t\t}\n\n\t\t// prerender a `/path/to/page/__route.js` module\n\t\tif (manifest._.client.routes && state.prerendering && !state.prerendering.fallback) {\n\t\t\tconst pathname = add_resolution_suffix(event.url.pathname);\n\n\t\t\tstate.prerendering.dependencies.set(\n\t\t\t\tpathname,\n\t\t\t\tcreate_server_routing_response(route, event.params, new URL(pathname, event.url), manifest)\n\t\t\t);\n\t\t}\n\n\t\tconst blocks = [];\n\n\t\t// when serving a prerendered page in an app that uses $env/dynamic/public, we must\n\t\t// import the env.js module so that it evaluates before any user code can evaluate.\n\t\t// TODO revert to using top-level await once https://bugs.webkit.org/show_bug.cgi?id=242740 is fixed\n\t\t// https://github.com/sveltejs/kit/pull/11601\n\t\tconst load_env_eagerly = client.uses_env_dynamic_public && state.prerendering;\n\n\t\tconst properties = [`base: ${base_expression}`];\n\n\t\tif (paths.assets) {\n\t\t\tproperties.push(`assets: ${s(paths.assets)}`);\n\t\t}\n\n\t\tif (client.uses_env_dynamic_public) {\n\t\t\tproperties.push(`env: ${load_env_eagerly ? 'null' : s(public_env)}`);\n\t\t}\n\n\t\tif (chunks) {\n\t\t\tblocks.push('const deferred = new Map();');\n\n\t\t\tproperties.push(`defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})`);\n\n\t\t\tlet app_declaration = '';\n\n\t\t\tif (Object.keys(options.hooks.transport).length > 0) {\n\t\t\t\tif (client.inline) {\n\t\t\t\t\tapp_declaration = `const app = __sveltekit_${options.version_hash}.app.app;`;\n\t\t\t\t} else if (client.app) {\n\t\t\t\t\tapp_declaration = `const app = await import(${s(prefixed(client.app))});`;\n\t\t\t\t} else {\n\t\t\t\t\tapp_declaration = `const { app } = await import(${s(prefixed(client.start))});`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst prelude = app_declaration\n\t\t\t\t? `${app_declaration}\n\t\t\t\t\t\t\tconst [data, error] = fn(app);`\n\t\t\t\t: `const [data, error] = fn();`;\n\n\t\t\t// When resolving, the id might not yet be available due to the data\n\t\t\t// be evaluated upon init of kit, so we use a timeout to retry\n\t\t\tproperties.push(`resolve: async (id, fn) => {\n\t\t\t\t\t\t\t${prelude}\n\n\t\t\t\t\t\t\tconst try_to_resolve = () => {\n\t\t\t\t\t\t\t\tif (!deferred.has(id)) {\n\t\t\t\t\t\t\t\t\tsetTimeout(try_to_resolve, 0);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\t\tdeferred.delete(id);\n\t\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry_to_resolve();\n\t\t\t\t\t\t}`);\n\t\t}\n\n\t\t// create this before declaring `data`, which may contain references to `${global}`\n\t\tblocks.push(`${global} = {\n\t\t\t\t\t\t${properties.join(',\\n\\t\\t\\t\\t\\t\\t')}\n\t\t\t\t\t};`);\n\n\t\tconst args = ['element'];\n\n\t\tblocks.push('const element = document.currentScript.parentElement;');\n\n\t\tif (page_config.ssr) {\n\t\t\tconst serialized = { form: 'null', error: 'null' };\n\n\t\t\tif (form_value) {\n\t\t\t\tserialized.form = uneval_action_response(\n\t\t\t\t\tform_value,\n\t\t\t\t\t/** @type {string} */ (event.route.id),\n\t\t\t\t\toptions.hooks.transport\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (error) {\n\t\t\t\tserialized.error = devalue.uneval(error);\n\t\t\t}\n\n\t\t\tconst hydrate = [\n\t\t\t\t`node_ids: [${branch.map(({ node }) => node.index).join(', ')}]`,\n\t\t\t\t`data: ${data}`,\n\t\t\t\t`form: ${serialized.form}`,\n\t\t\t\t`error: ${serialized.error}`\n\t\t\t];\n\n\t\t\tif (status !== 200) {\n\t\t\t\thydrate.push(`status: ${status}`);\n\t\t\t}\n\n\t\t\tif (manifest._.client.routes) {\n\t\t\t\tif (route) {\n\t\t\t\t\tconst stringified = generate_route_object(route, event.url, manifest).replaceAll(\n\t\t\t\t\t\t'\\n',\n\t\t\t\t\t\t'\\n\\t\\t\\t\\t\\t\\t\\t'\n\t\t\t\t\t); // make output after it's put together with the rest more readable\n\t\t\t\t\thydrate.push(`params: ${devalue.uneval(event.params)}`, `server_route: ${stringified}`);\n\t\t\t\t}\n\t\t\t} else if (options.embedded) {\n\t\t\t\thydrate.push(`params: ${devalue.uneval(event.params)}`, `route: ${s(event.route)}`);\n\t\t\t}\n\n\t\t\tconst indent = '\\t'.repeat(load_env_eagerly ? 7 : 6);\n\t\t\targs.push(`{\\n${indent}\\t${hydrate.join(`,\\n${indent}\\t`)}\\n${indent}}`);\n\t\t}\n\n\t\tconst { remote_data: remote_cache } = event_state;\n\n\t\tlet serialized_remote_data = '';\n\n\t\tif (remote_cache) {\n\t\t\t/** @type {Record<string, any>} */\n\t\t\tconst remote = {};\n\n\t\t\tfor (const [info, cache] of remote_cache) {\n\t\t\t\t// remote functions without an `id` aren't exported, and thus\n\t\t\t\t// cannot be called from the client\n\t\t\t\tif (!info.id) continue;\n\n\t\t\t\tfor (const key in cache) {\n\t\t\t\t\tremote[create_remote_key(info.id, key)] = await cache[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO this is repeated in a few places — dedupe it\n\t\t\tconst replacer = (/** @type {any} */ thing) => {\n\t\t\t\tfor (const key in options.hooks.transport) {\n\t\t\t\t\tconst encoded = options.hooks.transport[key].encode(thing);\n\t\t\t\t\tif (encoded) {\n\t\t\t\t\t\treturn `app.decode('${key}', ${devalue.uneval(encoded, replacer)})`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tserialized_remote_data = `${global}.data = ${devalue.uneval(remote, replacer)};\\n\\n\\t\\t\\t\\t\\t\\t`;\n\t\t}\n\n\t\t// `client.app` is a proxy for `bundleStrategy === 'split'`\n\t\tconst boot = client.inline\n\t\t\t? `${client.inline.script}\n\n\t\t\t\t\t${serialized_remote_data}${global}.app.start(${args.join(', ')});`\n\t\t\t: client.app\n\t\t\t\t? `Promise.all([\n\t\t\t\t\t\timport(${s(prefixed(client.start))}),\n\t\t\t\t\t\timport(${s(prefixed(client.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\t${serialized_remote_data}kit.start(app, ${args.join(', ')});\n\t\t\t\t\t});`\n\t\t\t\t: `import(${s(prefixed(client.start))}).then((app) => {\n\t\t\t\t\t\t${serialized_remote_data}app.start(${args.join(', ')})\n\t\t\t\t\t});`;\n\n\t\tif (load_env_eagerly) {\n\t\t\tblocks.push(`import(${s(`${base}/${paths.app_dir}/env.js`)}).then(({ env }) => {\n\t\t\t\t\t\t${global}.env = env;\n\n\t\t\t\t\t\t${boot.replace(/\\n/g, '\\n\\t')}\n\t\t\t\t\t});`);\n\t\t} else {\n\t\t\tblocks.push(boot);\n\t\t}\n\n\t\tif (options.service_worker) {\n\t\t\tlet opts = DEV ? \", { type: 'module' }\" : '';\n\t\t\tif (options.service_worker_options != null) {\n\t\t\t\tconst service_worker_options = { ...options.service_worker_options };\n\t\t\t\tif (DEV) {\n\t\t\t\t\tservice_worker_options.type = 'module';\n\t\t\t\t}\n\t\t\t\topts = `, ${s(service_worker_options)}`;\n\t\t\t}\n\n\t\t\t// we use an anonymous function instead of an arrow function to support\n\t\t\t// older browsers (https://github.com/sveltejs/kit/pull/5417)\n\t\t\tblocks.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${prefixed('service-worker.js')}'${opts});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`);\n\t\t}\n\n\t\tconst init_app = `\n\t\t\t\t{\n\t\t\t\t\t${blocks.join('\\n\\n\\t\\t\\t\\t\\t')}\n\t\t\t\t}\n\t\t\t`;\n\t\tcsp.add_script(init_app);\n\n\t\tbody += `\\n\\t\\t\\t<script${\n\t\t\tcsp.script_needs_nonce ? ` nonce=\"${csp.nonce}\"` : ''\n\t\t}>${init_app}</script>\\n\\t\\t`;\n\t}\n\n\tconst headers = new Headers({\n\t\t'x-sveltekit-page': 'true',\n\t\t'content-type': 'text/html'\n\t});\n\n\tif (state.prerendering) {\n\t\t// TODO read headers set with setHeaders and convert into http-equiv where possible\n\t\tconst http_equiv = [];\n\n\t\tconst csp_headers = csp.csp_provider.get_meta();\n\t\tif (csp_headers) {\n\t\t\thttp_equiv.push(csp_headers);\n\t\t}\n\n\t\tif (state.prerendering.cache) {\n\t\t\thttp_equiv.push(`<meta http-equiv=\"cache-control\" content=\"${state.prerendering.cache}\">`);\n\t\t}\n\n\t\tif (http_equiv.length > 0) {\n\t\t\thead = http_equiv.join('\\n') + head;\n\t\t}\n\t} else {\n\t\tconst csp_header = csp.csp_provider.get_header();\n\t\tif (csp_header) {\n\t\t\theaders.set('content-security-policy', csp_header);\n\t\t}\n\t\tconst report_only_header = csp.report_only_provider.get_header();\n\t\tif (report_only_header) {\n\t\t\theaders.set('content-security-policy-report-only', report_only_header);\n\t\t}\n\n\t\tif (link_headers.size) {\n\t\t\theaders.set('link', Array.from(link_headers).join(', '));\n\t\t}\n\t}\n\n\t// add the content after the script/css links so the link elements are parsed first\n\thead += rendered.head;\n\n\tconst html = options.templates.app({\n\t\thead,\n\t\tbody,\n\t\tassets,\n\t\tnonce: /** @type {string} */ (csp.nonce),\n\t\tenv: public_env\n\t});\n\n\t// TODO flush chunks as early as we can\n\tconst transformed =\n\t\t(await resolve_opts.transformPageChunk({\n\t\t\thtml,\n\t\t\tdone: true\n\t\t})) || '';\n\n\tif (!chunks) {\n\t\theaders.set('etag', `\"${hash(transformed)}\"`);\n\t}\n\n\tif (DEV) {\n\t\tif (page_config.csr) {\n\t\t\tif (transformed.split('<!--').length < html.split('<!--').length) {\n\t\t\t\t// the \\u001B stuff is ANSI codes, so that we don't need to add a library to the runtime\n\t\t\t\t// https://svelte.dev/playground/1b3f49696f0c44c881c34587f2537aa2?version=4.2.19\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"\\u001B[1m\\u001B[31mRemoving comments in transformPageChunk can break Svelte's hydration\\u001B[39m\\u001B[22m\"\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif (chunks) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'\\u001B[1m\\u001B[31mReturning promises from server `load` functions will only work if `csr === true`\\u001B[39m\\u001B[22m'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn !chunks\n\t\t? text(transformed, {\n\t\t\t\tstatus,\n\t\t\t\theaders\n\t\t\t})\n\t\t: new Response(\n\t\t\t\tnew ReadableStream({\n\t\t\t\t\tasync start(controller) {\n\t\t\t\t\t\tcontroller.enqueue(text_encoder.encode(transformed + '\\n'));\n\t\t\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\t\t\tif (chunk.length) controller.enqueue(text_encoder.encode(chunk));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t},\n\n\t\t\t\t\ttype: 'bytes'\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\theaders\n\t\t\t\t}\n\t\t\t);\n}\n","/**\n * @param {Set<string>} expected\n */\nfunction validator(expected) {\n\t/**\n\t * @param {any} module\n\t * @param {string} [file]\n\t */\n\tfunction validate(module, file) {\n\t\tif (!module) return;\n\n\t\tfor (const key in module) {\n\t\t\tif (key[0] === '_' || expected.has(key)) continue; // key is valid in this module\n\n\t\t\tconst values = [...expected.values()];\n\n\t\t\tconst hint =\n\t\t\t\thint_for_supported_files(key, file?.slice(file.lastIndexOf('.'))) ??\n\t\t\t\t`valid exports are ${values.join(', ')}, or anything with a '_' prefix`;\n\n\t\t\tthrow new Error(`Invalid export '${key}'${file ? ` in ${file}` : ''} (${hint})`);\n\t\t}\n\t}\n\n\treturn validate;\n}\n\n/**\n * @param {string} key\n * @param {string} ext\n * @returns {string | void}\n */\nfunction hint_for_supported_files(key, ext = '.js') {\n\tconst supported_files = [];\n\n\tif (valid_layout_exports.has(key)) {\n\t\tsupported_files.push(`+layout${ext}`);\n\t}\n\n\tif (valid_page_exports.has(key)) {\n\t\tsupported_files.push(`+page${ext}`);\n\t}\n\n\tif (valid_layout_server_exports.has(key)) {\n\t\tsupported_files.push(`+layout.server${ext}`);\n\t}\n\n\tif (valid_page_server_exports.has(key)) {\n\t\tsupported_files.push(`+page.server${ext}`);\n\t}\n\n\tif (valid_server_exports.has(key)) {\n\t\tsupported_files.push(`+server${ext}`);\n\t}\n\n\tif (supported_files.length > 0) {\n\t\treturn `'${key}' is a valid export in ${supported_files.slice(0, -1).join(', ')}${\n\t\t\tsupported_files.length > 1 ? ' or ' : ''\n\t\t}${supported_files.at(-1)}`;\n\t}\n}\n\nconst valid_layout_exports = new Set([\n\t'load',\n\t'prerender',\n\t'csr',\n\t'ssr',\n\t'trailingSlash',\n\t'config'\n]);\nconst valid_page_exports = new Set([...valid_layout_exports, 'entries']);\nconst valid_layout_server_exports = new Set([...valid_layout_exports]);\nconst valid_page_server_exports = new Set([...valid_layout_server_exports, 'actions', 'entries']);\nconst valid_server_exports = new Set([\n\t'GET',\n\t'POST',\n\t'PATCH',\n\t'PUT',\n\t'DELETE',\n\t'OPTIONS',\n\t'HEAD',\n\t'fallback',\n\t'prerender',\n\t'trailingSlash',\n\t'config',\n\t'entries'\n]);\n\nexport const validate_layout_exports = validator(valid_layout_exports);\nexport const validate_page_exports = validator(valid_page_exports);\nexport const validate_layout_server_exports = validator(valid_layout_server_exports);\nexport const validate_page_server_exports = validator(valid_page_server_exports);\nexport const validate_server_exports = validator(valid_server_exports);\n","import {\n\tvalidate_layout_exports,\n\tvalidate_layout_server_exports,\n\tvalidate_page_exports,\n\tvalidate_page_server_exports\n} from './exports.js';\n\nexport class PageNodes {\n\tdata;\n\n\t/**\n\t * @param {Array<import('types').SSRNode | undefined>} nodes\n\t */\n\tconstructor(nodes) {\n\t\tthis.data = nodes;\n\t}\n\n\tlayouts() {\n\t\treturn this.data.slice(0, -1);\n\t}\n\n\tpage() {\n\t\treturn this.data.at(-1);\n\t}\n\n\tvalidate() {\n\t\tfor (const layout of this.layouts()) {\n\t\t\tif (layout) {\n\t\t\t\tvalidate_layout_server_exports(layout.server, /** @type {string} */ (layout.server_id));\n\t\t\t\tvalidate_layout_exports(layout.universal, /** @type {string} */ (layout.universal_id));\n\t\t\t}\n\t\t}\n\n\t\tconst page = this.page();\n\t\tif (page) {\n\t\t\tvalidate_page_server_exports(page.server, /** @type {string} */ (page.server_id));\n\t\t\tvalidate_page_exports(page.universal, /** @type {string} */ (page.universal_id));\n\t\t}\n\t}\n\n\t/**\n\t * @template {'prerender' | 'ssr' | 'csr' | 'trailingSlash'} Option\n\t * @param {Option} option\n\t * @returns {Value | undefined}\n\t */\n\t#get_option(option) {\n\t\t/** @typedef {(import('types').UniversalNode | import('types').ServerNode)[Option]} Value */\n\n\t\treturn this.data.reduce((value, node) => {\n\t\t\treturn node?.universal?.[option] ?? node?.server?.[option] ?? value;\n\t\t}, /** @type {Value | undefined} */ (undefined));\n\t}\n\n\tcsr() {\n\t\treturn this.#get_option('csr') ?? true;\n\t}\n\n\tssr() {\n\t\treturn this.#get_option('ssr') ?? true;\n\t}\n\n\tprerender() {\n\t\treturn this.#get_option('prerender') ?? false;\n\t}\n\n\ttrailing_slash() {\n\t\treturn this.#get_option('trailingSlash') ?? 'never';\n\t}\n\n\tget_config() {\n\t\t/** @type {any} */\n\t\tlet current = {};\n\n\t\tfor (const node of this.data) {\n\t\t\tif (!node?.universal?.config && !node?.server?.config) continue;\n\n\t\t\tcurrent = {\n\t\t\t\t...current,\n\t\t\t\t// TODO: should we override the server config value with the universal value similar to other page options?\n\t\t\t\t...node?.universal?.config,\n\t\t\t\t...node?.server?.config\n\t\t\t};\n\t\t}\n\n\t\t// TODO 3.0 always return `current`? then we can get rid of `?? {}` in other places\n\t\treturn Object.keys(current).length ? current : undefined;\n\t}\n\n\tshould_prerender_data() {\n\t\treturn this.data.some(\n\t\t\t// prerender in case of trailingSlash because the client retrieves that value from the server\n\t\t\t(node) => node?.server?.load || node?.server?.trailingSlash !== undefined\n\t\t);\n\t}\n}\n","import { Redirect } from '@sveltejs/kit/internal';\nimport { render_response } from './render.js';\nimport { load_data, load_server_data } from './load_data.js';\nimport { handle_error_and_jsonify, static_error_page, redirect_response } from '../utils.js';\nimport { get_status } from '../../../utils/error.js';\nimport { PageNodes } from '../../../utils/page_nodes.js';\nimport { server_data_serializer } from './data_serializer.js';\n\n/**\n * @typedef {import('./types.js').Loaded} Loaded\n */\n\n/**\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   event_state: import('types').RequestState;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   status: number;\n *   error: unknown;\n *   resolve_opts: import('types').RequiredResolveOptions;\n * }} opts\n */\nexport async function respond_with_error({\n\tevent,\n\tevent_state,\n\toptions,\n\tmanifest,\n\tstate,\n\tstatus,\n\terror,\n\tresolve_opts\n}) {\n\t// reroute to the fallback page to prevent an infinite chain of requests.\n\tif (event.request.headers.get('x-sveltekit-error')) {\n\t\treturn static_error_page(options, status, /** @type {Error} */ (error).message);\n\t}\n\n\t/** @type {import('./types.js').Fetched[]} */\n\tconst fetched = [];\n\n\ttry {\n\t\tconst branch = [];\n\t\tconst default_layout = await manifest._.nodes[0](); // 0 is always the root layout\n\t\tconst nodes = new PageNodes([default_layout]);\n\t\tconst ssr = nodes.ssr();\n\t\tconst csr = nodes.csr();\n\t\tconst data_serializer = server_data_serializer(event, event_state, options);\n\n\t\tif (ssr) {\n\t\t\tstate.error = true;\n\n\t\t\tconst server_data_promise = load_server_data({\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\tstate,\n\t\t\t\tnode: default_layout,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/require-await\n\t\t\t\tparent: async () => ({})\n\t\t\t});\n\n\t\t\tconst server_data = await server_data_promise;\n\t\t\tdata_serializer.add_node(0, server_data);\n\n\t\t\tconst data = await load_data({\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\tfetched,\n\t\t\t\tnode: default_layout,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/require-await\n\t\t\t\tparent: async () => ({}),\n\t\t\t\tresolve_opts,\n\t\t\t\tserver_data_promise,\n\t\t\t\tstate,\n\t\t\t\tcsr\n\t\t\t});\n\n\t\t\tbranch.push(\n\t\t\t\t{\n\t\t\t\t\tnode: default_layout,\n\t\t\t\t\tserver_data,\n\t\t\t\t\tdata\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tnode: await manifest._.nodes[1](), // 1 is always the root error\n\t\t\t\t\tdata: null,\n\t\t\t\t\tserver_data: null\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn await render_response({\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tpage_config: {\n\t\t\t\tssr,\n\t\t\t\tcsr\n\t\t\t},\n\t\t\tstatus,\n\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error),\n\t\t\tbranch,\n\t\t\tfetched,\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\tresolve_opts,\n\t\t\tdata_serializer\n\t\t});\n\t} catch (e) {\n\t\t// Edge case: If route is a 404 and the user redirects to somewhere from the root layout,\n\t\t// we end up here.\n\t\tif (e instanceof Redirect) {\n\t\t\treturn redirect_response(e.status, e.location);\n\t\t}\n\n\t\treturn static_error_page(\n\t\t\toptions,\n\t\t\tget_status(e),\n\t\t\t(await handle_error_and_jsonify(event, event_state, options, e)).message\n\t\t);\n\t}\n}\n","/** @import { ActionResult, RemoteForm, RequestEvent, SSRManifest } from '@sveltejs/kit' */\n/** @import { RemoteFunctionResponse, RemoteInfo, RequestState, SSROptions } from 'types' */\n\nimport { json, error } from '@sveltejs/kit';\nimport { HttpError, Redirect, SvelteKitError } from '@sveltejs/kit/internal';\nimport { with_request_store, merge_tracing } from '@sveltejs/kit/internal/server';\nimport { app_dir, base } from '$app/paths/internal/server';\nimport { is_form_content_type } from '../../utils/http.js';\nimport { parse_remote_arg, stringify } from '../shared.js';\nimport { handle_error_and_jsonify } from './utils.js';\nimport { normalize_error } from '../../utils/error.js';\nimport { check_incorrect_fail_use } from './page/actions.js';\nimport { DEV } from 'esm-env';\nimport { record_span } from '../telemetry/record_span.js';\nimport { deserialize_binary_form } from '../form-utils.js';\n\n/** @type {typeof handle_remote_call_internal} */\nexport async function handle_remote_call(event, state, options, manifest, id) {\n\treturn record_span({\n\t\tname: 'sveltekit.remote.call',\n\t\tattributes: {\n\t\t\t'sveltekit.remote.call.id': id\n\t\t},\n\t\tfn: (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn with_request_store({ event: traced_event, state }, () =>\n\t\t\t\thandle_remote_call_internal(traced_event, state, options, manifest, id)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {SSROptions} options\n * @param {SSRManifest} manifest\n * @param {string} id\n */\nasync function handle_remote_call_internal(event, state, options, manifest, id) {\n\tconst [hash, name, additional_args] = id.split('/');\n\tconst remotes = manifest._.remotes;\n\n\tif (!remotes[hash]) error(404);\n\n\tconst module = await remotes[hash]();\n\tconst fn = module.default[name];\n\n\tif (!fn) error(404);\n\n\t/** @type {RemoteInfo} */\n\tconst info = fn.__;\n\tconst transport = options.hooks.transport;\n\n\tevent.tracing.current.setAttributes({\n\t\t'sveltekit.remote.call.type': info.type,\n\t\t'sveltekit.remote.call.name': info.name\n\t});\n\n\t/** @type {string[] | undefined} */\n\tlet form_client_refreshes;\n\n\ttry {\n\t\tif (info.type === 'query_batch') {\n\t\t\tif (event.request.method !== 'POST') {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t405,\n\t\t\t\t\t'Method Not Allowed',\n\t\t\t\t\t`\\`query.batch\\` functions must be invoked via POST request, not ${event.request.method}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/** @type {{ payloads: string[] }} */\n\t\t\tconst { payloads } = await event.request.json();\n\n\t\t\tconst args = payloads.map((payload) => parse_remote_arg(payload, transport));\n\t\t\tconst get_result = await with_request_store({ event, state }, () => info.run(args));\n\t\t\tconst results = await Promise.all(\n\t\t\t\targs.map(async (arg, i) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn { type: 'result', data: get_result(arg, i) };\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\terror: await handle_error_and_jsonify(event, state, options, error),\n\t\t\t\t\t\t\tstatus:\n\t\t\t\t\t\t\t\terror instanceof HttpError || error instanceof SvelteKitError ? error.status : 500\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(results, transport)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (info.type === 'form') {\n\t\t\tif (event.request.method !== 'POST') {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t405,\n\t\t\t\t\t'Method Not Allowed',\n\t\t\t\t\t`\\`form\\` functions must be invoked via POST request, not ${event.request.method}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (!is_form_content_type(event.request)) {\n\t\t\t\tthrow new SvelteKitError(\n\t\t\t\t\t415,\n\t\t\t\t\t'Unsupported Media Type',\n\t\t\t\t\t`\\`form\\` functions expect form-encoded data — received ${event.request.headers.get(\n\t\t\t\t\t\t'content-type'\n\t\t\t\t\t)}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst { data, meta, form_data } = await deserialize_binary_form(event.request);\n\n\t\t\t// If this is a keyed form instance (created via form.for(key)), add the key to the form data (unless already set)\n\t\t\t// Note that additional_args will only be set if the form is not enhanced, as enhanced forms transfer the key inside `data`.\n\t\t\tif (additional_args && !('id' in data)) {\n\t\t\t\tdata.id = JSON.parse(decodeURIComponent(additional_args));\n\t\t\t}\n\n\t\t\tconst fn = info.fn;\n\t\t\tconst result = await with_request_store({ event, state }, () => fn(data, meta, form_data));\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(result, transport),\n\t\t\t\t\trefreshes: result.issues ? undefined : await serialize_refreshes(meta.remote_refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (info.type === 'command') {\n\t\t\t/** @type {{ payload: string, refreshes: string[] }} */\n\t\t\tconst { payload, refreshes } = await event.request.json();\n\t\t\tconst arg = parse_remote_arg(payload, transport);\n\t\t\tconst data = await with_request_store({ event, state }, () => fn(arg));\n\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'result',\n\t\t\t\t\tresult: stringify(data, transport),\n\t\t\t\t\trefreshes: await serialize_refreshes(refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tconst payload =\n\t\t\tinfo.type === 'prerender'\n\t\t\t\t? additional_args\n\t\t\t\t: /** @type {string} */ (\n\t\t\t\t\t\t// new URL(...) necessary because we're hiding the URL from the user in the event object\n\t\t\t\t\t\tnew URL(event.request.url).searchParams.get('payload')\n\t\t\t\t\t);\n\n\t\tconst data = await with_request_store({ event, state }, () =>\n\t\t\tfn(parse_remote_arg(payload, transport))\n\t\t);\n\n\t\treturn json(\n\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\ttype: 'result',\n\t\t\t\tresult: stringify(data, transport)\n\t\t\t})\n\t\t);\n\t} catch (error) {\n\t\tif (error instanceof Redirect) {\n\t\t\treturn json(\n\t\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\t\ttype: 'redirect',\n\t\t\t\t\tlocation: error.location,\n\t\t\t\t\trefreshes: await serialize_refreshes(form_client_refreshes)\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tconst status =\n\t\t\terror instanceof HttpError || error instanceof SvelteKitError ? error.status : 500;\n\n\t\treturn json(\n\t\t\t/** @type {RemoteFunctionResponse} */ ({\n\t\t\t\ttype: 'error',\n\t\t\t\terror: await handle_error_and_jsonify(event, state, options, error),\n\t\t\t\tstatus\n\t\t\t}),\n\t\t\t{\n\t\t\t\t// By setting a non-200 during prerendering we fail the prerender process (unless handleHttpError handles it).\n\t\t\t\t// Errors at runtime will be passed to the client and are handled there\n\t\t\t\tstatus: state.prerendering ? status : undefined,\n\t\t\t\theaders: {\n\t\t\t\t\t'cache-control': 'private, no-store'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * @param {string[]=} client_refreshes\n\t */\n\tasync function serialize_refreshes(client_refreshes) {\n\t\tconst refreshes = state.refreshes ?? {};\n\n\t\tif (client_refreshes) {\n\t\t\tfor (const key of client_refreshes) {\n\t\t\t\tif (refreshes[key] !== undefined) continue;\n\n\t\t\t\tconst [hash, name, payload] = key.split('/');\n\n\t\t\t\tconst loader = manifest._.remotes[hash];\n\t\t\t\tconst fn = (await loader?.())?.default?.[name];\n\n\t\t\t\tif (!fn) error(400, 'Bad Request');\n\n\t\t\t\trefreshes[key] = with_request_store({ event, state }, () =>\n\t\t\t\t\tfn(parse_remote_arg(payload, transport))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(refreshes).length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn stringify(\n\t\t\tObject.fromEntries(\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tObject.entries(refreshes).map(async ([key, promise]) => [key, await promise])\n\t\t\t\t)\n\t\t\t),\n\t\t\ttransport\n\t\t);\n\t}\n}\n\n/** @type {typeof handle_remote_form_post_internal} */\nexport async function handle_remote_form_post(event, state, manifest, id) {\n\treturn record_span({\n\t\tname: 'sveltekit.remote.form.post',\n\t\tattributes: {\n\t\t\t'sveltekit.remote.form.post.id': id\n\t\t},\n\t\tfn: (current) => {\n\t\t\tconst traced_event = merge_tracing(event, current);\n\t\t\treturn with_request_store({ event: traced_event, state }, () =>\n\t\t\t\thandle_remote_form_post_internal(traced_event, state, manifest, id)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/**\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {SSRManifest} manifest\n * @param {string} id\n * @returns {Promise<ActionResult>}\n */\nasync function handle_remote_form_post_internal(event, state, manifest, id) {\n\tconst [hash, name, action_id] = id.split('/');\n\tconst remotes = manifest._.remotes;\n\tconst module = await remotes[hash]?.();\n\n\tlet form = /** @type {RemoteForm<any, any>} */ (module?.default[name]);\n\n\tif (!form) {\n\t\tevent.setHeaders({\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405\n\t\t\t// \"The server must generate an Allow header field in a 405 status code response\"\n\t\t\tallow: 'GET'\n\t\t});\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: new SvelteKitError(\n\t\t\t\t405,\n\t\t\t\t'Method Not Allowed',\n\t\t\t\t`POST method not allowed. No form actions exist for ${DEV ? `the page at ${event.route.id}` : 'this page'}`\n\t\t\t)\n\t\t};\n\t}\n\n\tif (action_id) {\n\t\t// @ts-expect-error\n\t\tform = with_request_store({ event, state }, () => form.for(JSON.parse(action_id)));\n\t}\n\n\ttry {\n\t\tconst fn = /** @type {RemoteInfo & { type: 'form' }} */ (/** @type {any} */ (form).__).fn;\n\n\t\tconst { data, meta, form_data } = await deserialize_binary_form(event.request);\n\t\tif (action_id && !('id' in data)) {\n\t\t\tdata.id = JSON.parse(decodeURIComponent(action_id));\n\t\t}\n\n\t\tawait with_request_store({ event, state }, () => fn(data, meta, form_data));\n\n\t\t// We don't want the data to appear on `let { form } = $props()`, which is why we're not returning it.\n\t\t// It is instead available on `myForm.result`, setting of which happens within the remote `form` function.\n\t\treturn {\n\t\t\ttype: 'success',\n\t\t\tstatus: 200\n\t\t};\n\t} catch (e) {\n\t\tconst err = normalize_error(e);\n\n\t\tif (err instanceof Redirect) {\n\t\t\treturn {\n\t\t\t\ttype: 'redirect',\n\t\t\t\tstatus: err.status,\n\t\t\t\tlocation: err.location\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'error',\n\t\t\terror: check_incorrect_fail_use(err)\n\t\t};\n\t}\n}\n\n/**\n * @param {URL} url\n */\nexport function get_remote_id(url) {\n\treturn (\n\t\turl.pathname.startsWith(`${base}/${app_dir}/remote/`) &&\n\t\turl.pathname.replace(`${base}/${app_dir}/remote/`, '')\n\t);\n}\n\n/**\n * @param {URL} url\n */\nexport function get_remote_action(url) {\n\treturn url.searchParams.get('/remote');\n}\n","import { text } from '@sveltejs/kit';\nimport { Redirect } from '@sveltejs/kit/internal';\nimport { compact } from '../../../utils/array.js';\nimport { get_status, normalize_error } from '../../../utils/error.js';\nimport { add_data_suffix } from '../../pathname.js';\nimport { redirect_response, static_error_page, handle_error_and_jsonify } from '../utils.js';\nimport {\n\thandle_action_json_request,\n\thandle_action_request,\n\tis_action_json_request,\n\tis_action_request\n} from './actions.js';\nimport { server_data_serializer, server_data_serializer_json } from './data_serializer.js';\nimport { load_data, load_server_data } from './load_data.js';\nimport { render_response } from './render.js';\nimport { respond_with_error } from './respond_with_error.js';\nimport { DEV } from 'esm-env';\nimport { get_remote_action, handle_remote_form_post } from '../remote.js';\nimport { PageNodes } from '../../../utils/page_nodes.js';\n\n/**\n * The maximum request depth permitted before assuming we're stuck in an infinite loop\n */\nconst MAX_DEPTH = 10;\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').PageNodeIndexes} page\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @param {import('../../../utils/page_nodes.js').PageNodes} nodes\n * @param {import('types').RequiredResolveOptions} resolve_opts\n * @returns {Promise<Response>}\n */\nexport async function render_page(\n\tevent,\n\tevent_state,\n\tpage,\n\toptions,\n\tmanifest,\n\tstate,\n\tnodes,\n\tresolve_opts\n) {\n\tif (state.depth > MAX_DEPTH) {\n\t\t// infinite request cycle detected\n\t\treturn text(`Not found: ${event.url.pathname}`, {\n\t\t\tstatus: 404 // TODO in some cases this should be 500. not sure how to differentiate\n\t\t});\n\t}\n\n\tif (is_action_json_request(event)) {\n\t\tconst node = await manifest._.nodes[page.leaf]();\n\t\treturn handle_action_json_request(event, event_state, options, node?.server);\n\t}\n\n\ttry {\n\t\tconst leaf_node = /** @type {import('types').SSRNode} */ (nodes.page());\n\n\t\tlet status = 200;\n\n\t\t/** @type {import('@sveltejs/kit').ActionResult | undefined} */\n\t\tlet action_result = undefined;\n\n\t\tif (is_action_request(event)) {\n\t\t\tconst remote_id = get_remote_action(event.url);\n\t\t\tif (remote_id) {\n\t\t\t\taction_result = await handle_remote_form_post(event, event_state, manifest, remote_id);\n\t\t\t} else {\n\t\t\t\t// for action requests, first call handler in +page.server.js\n\t\t\t\t// (this also determines status code)\n\t\t\t\taction_result = await handle_action_request(event, event_state, leaf_node.server);\n\t\t\t}\n\n\t\t\tif (action_result?.type === 'redirect') {\n\t\t\t\treturn redirect_response(action_result.status, action_result.location);\n\t\t\t}\n\t\t\tif (action_result?.type === 'error') {\n\t\t\t\tstatus = get_status(action_result.error);\n\t\t\t}\n\t\t\tif (action_result?.type === 'failure') {\n\t\t\t\tstatus = action_result.status;\n\t\t\t}\n\t\t}\n\n\t\t// it's crucial that we do this before returning the non-SSR response, otherwise\n\t\t// SvelteKit will erroneously believe that the path has been prerendered,\n\t\t// causing functions to be omitted from the manifest generated later\n\t\tconst should_prerender = nodes.prerender();\n\t\tif (should_prerender) {\n\t\t\tconst mod = leaf_node.server;\n\t\t\tif (mod?.actions) {\n\t\t\t\tthrow new Error('Cannot prerender pages with actions');\n\t\t\t}\n\t\t} else if (state.prerendering) {\n\t\t\t// if the page isn't marked as prerenderable, then bail out at this point\n\t\t\treturn new Response(undefined, {\n\t\t\t\tstatus: 204\n\t\t\t});\n\t\t}\n\n\t\t// if we fetch any endpoints while loading data for this page, they should\n\t\t// inherit the prerender option of the page\n\t\tstate.prerender_default = should_prerender;\n\n\t\tconst should_prerender_data = nodes.should_prerender_data();\n\t\tconst data_pathname = add_data_suffix(event.url.pathname);\n\n\t\t/** @type {import('./types.js').Fetched[]} */\n\t\tconst fetched = [];\n\n\t\tconst ssr = nodes.ssr();\n\t\tconst csr = nodes.csr();\n\n\t\t// renders an empty 'shell' page if SSR is turned off and if there is\n\t\t// no server data to prerender. As a result, the load functions and rendering\n\t\t// only occur client-side.\n\t\tif (ssr === false && !(state.prerendering && should_prerender_data)) {\n\t\t\t// if the user makes a request through a non-enhanced form, the returned value is lost\n\t\t\t// because there is no SSR or client-side handling of the response\n\t\t\tif (DEV && action_result && !event.request.headers.has('x-sveltekit-action')) {\n\t\t\t\tif (action_result.type === 'error') {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"The form action returned an error, but +error.svelte wasn't rendered because SSR is off. To get the error page with CSR, enhance your form with `use:enhance`. See https://svelte.dev/docs/kit/form-actions#progressive-enhancement-use-enhance\"\n\t\t\t\t\t);\n\t\t\t\t} else if (action_result.data) {\n\t\t\t\t\t/// case: lost data\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"The form action returned a value, but it isn't available in `page.form`, because SSR is off. To handle the returned value in CSR, enhance your form with `use:enhance`. See https://svelte.dev/docs/kit/form-actions#progressive-enhancement-use-enhance\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn await render_response({\n\t\t\t\tbranch: [],\n\t\t\t\tfetched,\n\t\t\t\tpage_config: {\n\t\t\t\t\tssr: false,\n\t\t\t\t\tcsr\n\t\t\t\t},\n\t\t\t\tstatus,\n\t\t\t\terror: null,\n\t\t\t\tevent,\n\t\t\t\tevent_state,\n\t\t\t\toptions,\n\t\t\t\tmanifest,\n\t\t\t\tstate,\n\t\t\t\tresolve_opts,\n\t\t\t\tdata_serializer: server_data_serializer(event, event_state, options)\n\t\t\t});\n\t\t}\n\n\t\t/** @type {Array<import('./types.js').Loaded | null>} */\n\t\tconst branch = [];\n\n\t\t/** @type {Error | null} */\n\t\tlet load_error = null;\n\n\t\tconst data_serializer = server_data_serializer(event, event_state, options);\n\t\tconst data_serializer_json =\n\t\t\tstate.prerendering && should_prerender_data\n\t\t\t\t? server_data_serializer_json(event, event_state, options)\n\t\t\t\t: null;\n\n\t\t/** @type {Array<Promise<import('types').ServerDataNode | null>>} */\n\t\tconst server_promises = nodes.data.map((node, i) => {\n\t\t\tif (load_error) {\n\t\t\t\t// if an error happens immediately, don't bother with the rest of the nodes\n\t\t\t\tthrow load_error;\n\t\t\t}\n\n\t\t\treturn Promise.resolve().then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tif (node === leaf_node && action_result?.type === 'error') {\n\t\t\t\t\t\t// we wait until here to throw the error so that we can use\n\t\t\t\t\t\t// any nested +error.svelte components that were defined\n\t\t\t\t\t\tthrow action_result.error;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst server_data = await load_server_data({\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tconst parent = await server_promises[j];\n\t\t\t\t\t\t\t\tif (parent) Object.assign(data, parent.data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tdata_serializer.add_node(i, server_data);\n\t\t\t\t\t}\n\n\t\t\t\t\tdata_serializer_json?.add_node(i, server_data);\n\n\t\t\t\t\treturn server_data;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tload_error = /** @type {Error} */ (e);\n\t\t\t\t\tthrow load_error;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t/** @type {Array<Promise<Record<string, any> | null>>} */\n\t\tconst load_promises = nodes.data.map((node, i) => {\n\t\t\tif (load_error) throw load_error;\n\t\t\treturn Promise.resolve().then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await load_data({\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tfetched,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tObject.assign(data, await load_promises[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresolve_opts,\n\t\t\t\t\t\tserver_data_promise: server_promises[i],\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tcsr\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tload_error = /** @type {Error} */ (e);\n\t\t\t\t\tthrow load_error;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// if we don't do this, rejections will be unhandled\n\t\tfor (const p of server_promises) p.catch(() => {});\n\t\tfor (const p of load_promises) p.catch(() => {});\n\n\t\tfor (let i = 0; i < nodes.data.length; i += 1) {\n\t\t\tconst node = nodes.data[i];\n\n\t\t\tif (node) {\n\t\t\t\ttry {\n\t\t\t\t\tconst server_data = await server_promises[i];\n\t\t\t\t\tconst data = await load_promises[i];\n\n\t\t\t\t\tbranch.push({ node, server_data, data });\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconst err = normalize_error(e);\n\n\t\t\t\t\tif (err instanceof Redirect) {\n\t\t\t\t\t\tif (state.prerendering && should_prerender_data) {\n\t\t\t\t\t\t\tconst body = JSON.stringify({\n\t\t\t\t\t\t\t\ttype: 'redirect',\n\t\t\t\t\t\t\t\tlocation: err.location\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstate.prerendering.dependencies.set(data_pathname, {\n\t\t\t\t\t\t\t\tresponse: text(body),\n\t\t\t\t\t\t\t\tbody\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn redirect_response(err.status, err.location);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst status = get_status(err);\n\t\t\t\t\tconst error = await handle_error_and_jsonify(event, event_state, options, err);\n\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tif (page.errors[i]) {\n\t\t\t\t\t\t\tconst index = /** @type {number} */ (page.errors[i]);\n\t\t\t\t\t\t\tconst node = await manifest._.nodes[index]();\n\n\t\t\t\t\t\t\tlet j = i;\n\t\t\t\t\t\t\twhile (!branch[j]) j -= 1;\n\n\t\t\t\t\t\t\tdata_serializer.set_max_nodes(j + 1);\n\n\t\t\t\t\t\t\tconst layouts = compact(branch.slice(0, j + 1));\n\t\t\t\t\t\t\tconst nodes = new PageNodes(layouts.map((layout) => layout.node));\n\n\t\t\t\t\t\t\treturn await render_response({\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\tresolve_opts,\n\t\t\t\t\t\t\t\tpage_config: {\n\t\t\t\t\t\t\t\t\tssr: nodes.ssr(),\n\t\t\t\t\t\t\t\t\tcsr: nodes.csr()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\tbranch: layouts.concat({\n\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\t\t\t\tserver_data: null\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tfetched,\n\t\t\t\t\t\t\t\tdata_serializer\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// if we're still here, it means the error happened in the root layout,\n\t\t\t\t\t// which means we have to fall back to error.html\n\t\t\t\t\treturn static_error_page(options, status, error.message);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// push an empty slot so we can rewind past gaps to the\n\t\t\t\t// layout that corresponds with an +error.svelte page\n\t\t\t\tbranch.push(null);\n\t\t\t}\n\t\t}\n\n\t\tif (state.prerendering && data_serializer_json) {\n\t\t\t// ndjson format\n\t\t\tlet { data, chunks } = data_serializer_json.get_data();\n\n\t\t\tif (chunks) {\n\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\tdata += chunk;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstate.prerendering.dependencies.set(data_pathname, {\n\t\t\t\tresponse: text(data),\n\t\t\t\tbody: data\n\t\t\t});\n\t\t}\n\n\t\treturn await render_response({\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tresolve_opts,\n\t\t\tpage_config: {\n\t\t\t\tcsr,\n\t\t\t\tssr\n\t\t\t},\n\t\t\tstatus,\n\t\t\terror: null,\n\t\t\tbranch: ssr === false ? [] : compact(branch),\n\t\t\taction_result,\n\t\t\tfetched,\n\t\t\tdata_serializer:\n\t\t\t\tssr === false ? server_data_serializer(event, event_state, options) : data_serializer\n\t\t});\n\t} catch (e) {\n\t\t// if we end up here, it means the data loaded successfully\n\t\t// but the page failed to render, or that a prerendering error occurred\n\t\treturn await respond_with_error({\n\t\t\tevent,\n\t\t\tevent_state,\n\t\t\toptions,\n\t\t\tmanifest,\n\t\t\tstate,\n\t\t\tstatus: 500,\n\t\t\terror: e,\n\t\t\tresolve_opts\n\t\t});\n\t}\n}\n","import { text } from '@sveltejs/kit';\nimport { HttpError, SvelteKitError, Redirect } from '@sveltejs/kit/internal';\nimport { normalize_error } from '../../../utils/error.js';\nimport { once } from '../../../utils/functions.js';\nimport { server_data_serializer_json } from '../page/data_serializer.js';\nimport { load_server_data } from '../page/load_data.js';\nimport { handle_error_and_jsonify } from '../utils.js';\nimport { normalize_path } from '../../../utils/url.js';\nimport { text_encoder } from '../../utils.js';\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSRRoute} route\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @param {boolean[] | undefined} invalidated_data_nodes\n * @param {import('types').TrailingSlash} trailing_slash\n * @returns {Promise<Response>}\n */\nexport async function render_data(\n\tevent,\n\tevent_state,\n\troute,\n\toptions,\n\tmanifest,\n\tstate,\n\tinvalidated_data_nodes,\n\ttrailing_slash\n) {\n\tif (!route.page) {\n\t\t// requesting /__data.json should fail for a +server.js\n\t\treturn new Response(undefined, {\n\t\t\tstatus: 404\n\t\t});\n\t}\n\n\ttry {\n\t\tconst node_ids = [...route.page.layouts, route.page.leaf];\n\t\tconst invalidated = invalidated_data_nodes ?? node_ids.map(() => true);\n\n\t\tlet aborted = false;\n\n\t\tconst url = new URL(event.url);\n\t\turl.pathname = normalize_path(url.pathname, trailing_slash);\n\n\t\tconst new_event = { ...event, url };\n\n\t\tconst functions = node_ids.map((n, i) => {\n\t\t\treturn once(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tif (aborted) {\n\t\t\t\t\t\treturn /** @type {import('types').ServerDataSkippedNode} */ ({\n\t\t\t\t\t\t\ttype: 'skip'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// == because it could be undefined (in dev) or null (in build, because of JSON.stringify)\n\t\t\t\t\tconst node = n == undefined ? n : await manifest._.nodes[n]();\n\t\t\t\t\t// load this. for the child, return as is. for the final result, stream things\n\t\t\t\t\treturn load_server_data({\n\t\t\t\t\t\tevent: new_event,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparent: async () => {\n\t\t\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\t\t\tconst data = {};\n\t\t\t\t\t\t\tfor (let j = 0; j < i; j += 1) {\n\t\t\t\t\t\t\t\tconst parent = /** @type {import('types').ServerDataNode | null} */ (\n\t\t\t\t\t\t\t\t\tawait functions[j]()\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\t\t\tObject.assign(data, parent.data);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\taborted = true;\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst promises = functions.map(async (fn, i) => {\n\t\t\tif (!invalidated[i]) {\n\t\t\t\treturn /** @type {import('types').ServerDataSkippedNode} */ ({\n\t\t\t\t\ttype: 'skip'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn fn();\n\t\t});\n\n\t\tlet length = promises.length;\n\t\tconst nodes = await Promise.all(\n\t\t\tpromises.map((p, i) =>\n\t\t\t\tp.catch(async (error) => {\n\t\t\t\t\tif (error instanceof Redirect) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Math.min because array isn't guaranteed to resolve in order\n\t\t\t\t\tlength = Math.min(length, i + 1);\n\n\t\t\t\t\treturn /** @type {import('types').ServerErrorNode} */ ({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\terror: await handle_error_and_jsonify(event, event_state, options, error),\n\t\t\t\t\t\tstatus:\n\t\t\t\t\t\t\terror instanceof HttpError || error instanceof SvelteKitError\n\t\t\t\t\t\t\t\t? error.status\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\n\t\tconst data_serializer = server_data_serializer_json(event, event_state, options);\n\t\tfor (let i = 0; i < nodes.length; i++) data_serializer.add_node(i, nodes[i]);\n\t\tconst { data, chunks } = data_serializer.get_data();\n\n\t\tif (!chunks) {\n\t\t\t// use a normal JSON response where possible, so we get `content-length`\n\t\t\t// and can use browser JSON devtools for easier inspecting\n\t\t\treturn json_response(data);\n\t\t}\n\n\t\treturn new Response(\n\t\t\tnew ReadableStream({\n\t\t\t\tasync start(controller) {\n\t\t\t\t\tcontroller.enqueue(text_encoder.encode(data));\n\t\t\t\t\tfor await (const chunk of chunks) {\n\t\t\t\t\t\tcontroller.enqueue(text_encoder.encode(chunk));\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.close();\n\t\t\t\t},\n\n\t\t\t\ttype: 'bytes'\n\t\t\t}),\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t// we use a proprietary content type to prevent buffering.\n\t\t\t\t\t// the `text` prefix makes it inspectable\n\t\t\t\t\t'content-type': 'text/sveltekit-data',\n\t\t\t\t\t'cache-control': 'private, no-store'\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t} catch (e) {\n\t\tconst error = normalize_error(e);\n\n\t\tif (error instanceof Redirect) {\n\t\t\treturn redirect_json_response(error);\n\t\t} else {\n\t\t\treturn json_response(await handle_error_and_jsonify(event, event_state, options, error), 500);\n\t\t}\n\t}\n}\n\n/**\n * @param {Record<string, any> | string} json\n * @param {number} [status]\n */\nfunction json_response(json, status = 200) {\n\treturn text(typeof json === 'string' ? json : JSON.stringify(json), {\n\t\tstatus,\n\t\theaders: {\n\t\t\t'content-type': 'application/json',\n\t\t\t'cache-control': 'private, no-store'\n\t\t}\n\t});\n}\n\n/**\n * @param {Redirect} redirect\n */\nexport function redirect_json_response(redirect) {\n\treturn json_response(\n\t\t/** @type {import('types').ServerRedirectNode} */ ({\n\t\t\ttype: 'redirect',\n\t\t\tlocation: redirect.location\n\t\t})\n\t);\n}\n","/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar __toString = Object.prototype.toString\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var dec = opt.decode || decode;\n\n  var index = 0\n  while (index < str.length) {\n    var eqIdx = str.indexOf('=', index)\n\n    // no more cookie pairs\n    if (eqIdx === -1) {\n      break\n    }\n\n    var endIdx = str.indexOf(';', index)\n\n    if (endIdx === -1) {\n      endIdx = str.length\n    } else if (endIdx < eqIdx) {\n      // backtrack on prior semicolon\n      index = str.lastIndexOf(';', eqIdx - 1) + 1\n      continue\n    }\n\n    var key = str.slice(index, eqIdx).trim()\n\n    // only assign once\n    if (undefined === obj[key]) {\n      var val = str.slice(eqIdx + 1, endIdx).trim()\n\n      // quoted values\n      if (val.charCodeAt(0) === 0x22) {\n        val = val.slice(1, -1)\n      }\n\n      obj[key] = tryDecode(val, dec);\n    }\n\n    index = endIdx + 1\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    var expires = opt.expires\n\n    if (!isDate(expires) || isNaN(expires.valueOf())) {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + expires.toUTCString()\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.partitioned) {\n    str += '; Partitioned'\n  }\n\n  if (opt.priority) {\n    var priority = typeof opt.priority === 'string'\n      ? opt.priority.toLowerCase()\n      : opt.priority\n\n    switch (priority) {\n      case 'low':\n        str += '; Priority=Low'\n        break\n      case 'medium':\n        str += '; Priority=Medium'\n        break\n      case 'high':\n        str += '; Priority=High'\n        break\n      default:\n        throw new TypeError('option priority is invalid')\n    }\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n *\n * @param {string} str\n * @returns {string}\n */\n\nfunction decode (str) {\n  return str.indexOf('%') !== -1\n    ? decodeURIComponent(str)\n    : str\n}\n\n/**\n * URL-encode value.\n *\n * @param {string} val\n * @returns {string}\n */\n\nfunction encode (val) {\n  return encodeURIComponent(val)\n}\n\n/**\n * Determine if value is a Date.\n *\n * @param {*} val\n * @private\n */\n\nfunction isDate (val) {\n  return __toString.call(val) === '[object Date]' ||\n    val instanceof Date\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n","import { parse, serialize } from 'cookie';\nimport { DEV } from 'esm-env';\nimport { normalize_path, resolve } from '../../utils/url.js';\nimport { add_data_suffix } from '../pathname.js';\nimport { text_encoder } from '../utils.js';\n\n// eslint-disable-next-line no-control-regex -- control characters are invalid in cookie names\nconst INVALID_COOKIE_CHARACTER_REGEX = /[\\x00-\\x1F\\x7F()<>@,;:\"/[\\]?={} \\t]/;\n\n/**\n * Tracks all cookies set during dev mode so we can emit warnings\n * when we detect that there's likely cookie misusage due to wrong paths\n *\n * @type {Record<string, Set<string>>} */\nconst cookie_paths = {};\n\n/**\n * Cookies that are larger than this size (including the name and other\n * attributes) are discarded by browsers\n */\nconst MAX_COOKIE_SIZE = 4129;\n\n// TODO 3.0 remove this check\n/** @param {import('./page/types.js').Cookie['options']} options */\nfunction validate_options(options) {\n\tif (options?.path === undefined) {\n\t\tthrow new Error('You must specify a `path` when setting, deleting or serializing cookies');\n\t}\n}\n\n/**\n * Generates a unique key for a cookie based on its domain, path, and name in\n * the format: `<domain>/<path>?<name>`.\n * If domain is undefined, it will be omitted.\n * For example: `/?name`, `example.com/foo?name`.\n *\n * @param {string | undefined} domain\n * @param {string} path\n * @param {string} name\n * @returns {string}\n */\nfunction generate_cookie_key(domain, path, name) {\n\treturn `${domain || ''}${path}?${encodeURIComponent(name)}`;\n}\n\n/**\n * @param {Request} request\n * @param {URL} url\n */\nexport function get_cookies(request, url) {\n\tconst header = request.headers.get('cookie') ?? '';\n\tconst initial_cookies = parse(header, { decode: (value) => value });\n\n\t/** @type {string | undefined} */\n\tlet normalized_url;\n\n\t/** @type {Map<string, import('./page/types.js').Cookie>} */\n\tconst new_cookies = new Map();\n\n\t/** @type {import('cookie').CookieSerializeOptions} */\n\tconst defaults = {\n\t\thttpOnly: true,\n\t\tsameSite: 'lax',\n\t\tsecure: url.hostname === 'localhost' && url.protocol === 'http:' ? false : true\n\t};\n\n\t/** @type {import('@sveltejs/kit').Cookies} */\n\tconst cookies = {\n\t\t// The JSDoc param annotations appearing below for get, set and delete\n\t\t// are necessary to expose the `cookie` library types to\n\t\t// typescript users. `@type {import('@sveltejs/kit').Cookies}` above is not\n\t\t// sufficient to do so.\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {import('cookie').CookieParseOptions} [opts]\n\t\t */\n\t\tget(name, opts) {\n\t\t\t// Look for the most specific matching cookie from new_cookies\n\t\t\tconst best_match = Array.from(new_cookies.values())\n\t\t\t\t.filter((c) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tc.name === name &&\n\t\t\t\t\t\tdomain_matches(url.hostname, c.options.domain) &&\n\t\t\t\t\t\tpath_matches(url.pathname, c.options.path)\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => b.options.path.length - a.options.path.length)[0];\n\n\t\t\tif (best_match) {\n\t\t\t\treturn best_match.options.maxAge === 0 ? undefined : best_match.value;\n\t\t\t}\n\n\t\t\tconst req_cookies = parse(header, { decode: opts?.decode });\n\t\t\tconst cookie = req_cookies[name]; // the decoded string or undefined\n\n\t\t\t// in development, if the cookie was set during this session with `cookies.set`,\n\t\t\t// but at a different path, warn the user. (ignore cookies from request headers,\n\t\t\t// since we don't know which path they were set at)\n\t\t\tif (DEV && !cookie) {\n\t\t\t\tconst paths = Array.from(cookie_paths[name] ?? []).filter((path) => {\n\t\t\t\t\t// we only care about paths that are _more_ specific than the current path\n\t\t\t\t\treturn path_matches(path, url.pathname) && path !== url.pathname;\n\t\t\t\t});\n\n\t\t\t\tif (paths.length > 0) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\t`'${name}' cookie does not exist for ${url.pathname}, but was previously set at ${conjoin([...paths])}. Did you mean to set its 'path' to '/' instead?`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn cookie;\n\t\t},\n\n\t\t/**\n\t\t * @param {import('cookie').CookieParseOptions} [opts]\n\t\t */\n\t\tgetAll(opts) {\n\t\t\tconst cookies = parse(header, { decode: opts?.decode });\n\n\t\t\t// Group cookies by name and find the most specific one for each name\n\t\t\tconst lookup = new Map();\n\n\t\t\tfor (const c of new_cookies.values()) {\n\t\t\t\tif (\n\t\t\t\t\tdomain_matches(url.hostname, c.options.domain) &&\n\t\t\t\t\tpath_matches(url.pathname, c.options.path)\n\t\t\t\t) {\n\t\t\t\t\tconst existing = lookup.get(c.name);\n\n\t\t\t\t\t// If no existing cookie or this one has a more specific (longer) path, use this one\n\t\t\t\t\tif (!existing || c.options.path.length > existing.options.path.length) {\n\t\t\t\t\t\tlookup.set(c.name, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the most specific cookies to the result\n\t\t\tfor (const c of lookup.values()) {\n\t\t\t\tcookies[c.name] = c.value;\n\t\t\t}\n\n\t\t\treturn Object.entries(cookies).map(([name, value]) => ({ name, value }));\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {string} value\n\t\t * @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tset(name, value, options) {\n\t\t\t// TODO: remove this check in 3.0\n\t\t\tconst illegal_characters = name.match(INVALID_COOKIE_CHARACTER_REGEX);\n\t\t\tif (illegal_characters) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`The cookie name \"${name}\" will be invalid in SvelteKit 3.0 as it contains ${illegal_characters.join(\n\t\t\t\t\t\t' and '\n\t\t\t\t\t)}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvalidate_options(options);\n\t\t\tset_internal(name, value, { ...defaults, ...options });\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t *  @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tdelete(name, options) {\n\t\t\tvalidate_options(options);\n\t\t\tcookies.set(name, '', { ...options, maxAge: 0 });\n\t\t},\n\n\t\t/**\n\t\t * @param {string} name\n\t\t * @param {string} value\n\t\t *  @param {import('./page/types.js').Cookie['options']} options\n\t\t */\n\t\tserialize(name, value, options) {\n\t\t\tvalidate_options(options);\n\n\t\t\tlet path = options.path;\n\n\t\t\tif (!options.domain || options.domain === url.hostname) {\n\t\t\t\tif (!normalized_url) {\n\t\t\t\t\tthrow new Error('Cannot serialize cookies until after the route is determined');\n\t\t\t\t}\n\t\t\t\tpath = resolve(normalized_url, path);\n\t\t\t}\n\n\t\t\treturn serialize(name, value, { ...defaults, ...options, path });\n\t\t}\n\t};\n\n\t/**\n\t * @param {URL} destination\n\t * @param {string | null} header\n\t */\n\tfunction get_cookie_header(destination, header) {\n\t\t/** @type {Record<string, string>} */\n\t\tconst combined_cookies = {\n\t\t\t// cookies sent by the user agent have lowest precedence\n\t\t\t...initial_cookies\n\t\t};\n\n\t\t// cookies previous set during this event with cookies.set have higher precedence\n\t\tfor (const cookie of new_cookies.values()) {\n\t\t\tif (!domain_matches(destination.hostname, cookie.options.domain)) continue;\n\t\t\tif (!path_matches(destination.pathname, cookie.options.path)) continue;\n\n\t\t\tconst encoder = cookie.options.encode || encodeURIComponent;\n\t\t\tcombined_cookies[cookie.name] = encoder(cookie.value);\n\t\t}\n\n\t\t// explicit header has highest precedence\n\t\tif (header) {\n\t\t\tconst parsed = parse(header, { decode: (value) => value });\n\t\t\tfor (const name in parsed) {\n\t\t\t\tcombined_cookies[name] = parsed[name];\n\t\t\t}\n\t\t}\n\n\t\treturn Object.entries(combined_cookies)\n\t\t\t.map(([name, value]) => `${name}=${value}`)\n\t\t\t.join('; ');\n\t}\n\n\t/** @type {Array<() => void>} */\n\tconst internal_queue = [];\n\n\t/**\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {import('./page/types.js').Cookie['options']} options\n\t */\n\tfunction set_internal(name, value, options) {\n\t\tif (!normalized_url) {\n\t\t\tinternal_queue.push(() => set_internal(name, value, options));\n\t\t\treturn;\n\t\t}\n\n\t\tlet path = options.path;\n\n\t\tif (!options.domain || options.domain === url.hostname) {\n\t\t\tpath = resolve(normalized_url, path);\n\t\t}\n\n\t\t// Generate unique key for cookie storage\n\t\tconst cookie_key = generate_cookie_key(options.domain, path, name);\n\t\tconst cookie = { name, value, options: { ...options, path } };\n\t\tnew_cookies.set(cookie_key, cookie);\n\n\t\tif (DEV) {\n\t\t\tconst serialized = serialize(name, value, cookie.options);\n\t\t\tif (text_encoder.encode(serialized).byteLength > MAX_COOKIE_SIZE) {\n\t\t\t\tthrow new Error(`Cookie \"${name}\" is too large, and will be discarded by the browser`);\n\t\t\t}\n\n\t\t\tcookie_paths[name] ??= new Set();\n\n\t\t\tif (!value) {\n\t\t\t\tcookie_paths[name].delete(path);\n\t\t\t} else {\n\t\t\t\tcookie_paths[name].add(path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('types').TrailingSlash} trailing_slash\n\t */\n\tfunction set_trailing_slash(trailing_slash) {\n\t\tnormalized_url = normalize_path(url.pathname, trailing_slash);\n\t\tinternal_queue.forEach((fn) => fn());\n\t}\n\n\treturn { cookies, new_cookies, get_cookie_header, set_internal, set_trailing_slash };\n}\n\n/**\n * @param {string} hostname\n * @param {string} [constraint]\n */\nexport function domain_matches(hostname, constraint) {\n\tif (!constraint) return true;\n\n\tconst normalized = constraint[0] === '.' ? constraint.slice(1) : constraint;\n\n\tif (hostname === normalized) return true;\n\treturn hostname.endsWith('.' + normalized);\n}\n\n/**\n * @param {string} path\n * @param {string} [constraint]\n */\nexport function path_matches(path, constraint) {\n\tif (!constraint) return true;\n\n\tconst normalized = constraint.endsWith('/') ? constraint.slice(0, -1) : constraint;\n\n\tif (path === normalized) return true;\n\treturn path.startsWith(normalized + '/');\n}\n\n/**\n * @param {Headers} headers\n * @param {MapIterator<import('./page/types.js').Cookie>} cookies\n */\nexport function add_cookies_to_headers(headers, cookies) {\n\tfor (const new_cookie of cookies) {\n\t\tconst { name, value, options } = new_cookie;\n\t\theaders.append('set-cookie', serialize(name, value, options));\n\n\t\t// special case — for routes ending with .html, the route data lives in a sibling\n\t\t// `.html__data.json` file rather than a child `/__data.json` file, which means\n\t\t// we need to duplicate the cookie\n\t\tif (options.path.endsWith('.html')) {\n\t\t\tconst path = add_data_suffix(options.path);\n\t\t\theaders.append('set-cookie', serialize(name, value, { ...options, path }));\n\t\t}\n\t}\n}\n\n/**\n * @param {string[]} array\n */\nfunction conjoin(array) {\n\tif (array.length <= 2) return array.join(' and ');\n\treturn `${array.slice(0, -1).join(', ')} and ${array.at(-1)}`;\n}\n","\"use strict\";\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false,\n};\n\nfunction isForbiddenKey(key) {\n  return typeof key !== \"string\" || key in {};\n}\n\nfunction createNullObj() {\n  return Object.create(null);\n}\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n\n  var nameValuePairStr = parts.shift();\n  var parsed = parseNameValuePair(nameValuePairStr);\n  var name = parsed.name;\n  var value = parsed.value;\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (isForbiddenKey(name)) {\n    return null;\n  }\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\n      \"set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.\",\n      e\n    );\n  }\n\n  var cookie = createNullObj();\n  cookie.name = name;\n  cookie.value = value;\n\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    if (isForbiddenKey(key)) {\n      return;\n    }\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      var n = parseInt(value, 10);\n      if (!Number.isNaN(n)) cookie.maxAge = n;\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else if (key === \"partitioned\") {\n      cookie.partitioned = true;\n    } else if (key) {\n      cookie[key] = value;\n    }\n  });\n\n  return cookie;\n}\n\nfunction parseNameValuePair(nameValuePairStr) {\n  // Parses name-value-pair according to rfc6265bis draft\n\n  var name = \"\";\n  var value = \"\";\n  var nameValueArr = nameValuePairStr.split(\"=\");\n  if (nameValueArr.length > 1) {\n    name = nameValueArr.shift();\n    value = nameValueArr.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n  } else {\n    value = nameValuePairStr;\n  }\n\n  return { name: name, value: value };\n}\n\nfunction parse(input, options) {\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return createNullObj();\n    }\n  }\n\n  if (input.headers) {\n    if (typeof input.headers.getSetCookie === \"function\") {\n      // for fetch responses - they combine headers of the same type in the headers array,\n      // but getSetCookie returns an uncombined array\n      input = input.headers.getSetCookie();\n    } else if (input.headers[\"set-cookie\"]) {\n      // fast-path for node.js (which automatically normalizes header names to lower-case)\n      input = input.headers[\"set-cookie\"];\n    } else {\n      // slow-path for other environments - see #25\n      var sch =\n        input.headers[\n          Object.keys(input.headers).find(function (key) {\n            return key.toLowerCase() === \"set-cookie\";\n          })\n        ];\n      // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n      if (!sch && input.headers.cookie && !options.silent) {\n        console.warn(\n          \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n        );\n      }\n      input = sch;\n    }\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  if (!options.map) {\n    return input\n      .filter(isNonEmptyString)\n      .map(function (str) {\n        return parseString(str, options);\n      })\n      .filter(Boolean);\n  } else {\n    var cookies = createNullObj();\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      if (cookie && !isForbiddenKey(cookie.name)) {\n        cookies[cookie.name] = cookie;\n      }\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nmodule.exports = parse;\nmodule.exports.parse = parse;\nmodule.exports.parseString = parseString;\nmodule.exports.splitCookiesString = splitCookiesString;\n","import { public_env } from '../shared-server.js';\n\n/** @type {string} */\nlet body;\n\n/** @type {string} */\nlet etag;\n\n/** @type {Headers} */\nlet headers;\n\n/**\n * @param {Request} request\n * @returns {Response}\n */\nexport function get_public_env(request) {\n\tbody ??= `export const env=${JSON.stringify(public_env)}`;\n\tetag ??= `W/${Date.now()}`;\n\theaders ??= new Headers({\n\t\t'content-type': 'application/javascript; charset=utf-8',\n\t\tetag\n\t});\n\n\tif (request.headers.get('if-none-match') === etag) {\n\t\treturn new Response(undefined, { status: 304, headers });\n\t}\n\n\treturn new Response(body, { headers });\n}\n","import * as set_cookie_parser from 'set-cookie-parser';\nimport { respond } from './respond.js';\nimport * as paths from '$app/paths/internal/server';\nimport { read_implementation } from '__sveltekit/server';\nimport { has_prerendered_path } from './utils.js';\n\n/**\n * @param {{\n *   event: import('@sveltejs/kit').RequestEvent;\n *   options: import('types').SSROptions;\n *   manifest: import('@sveltejs/kit').SSRManifest;\n *   state: import('types').SSRState;\n *   get_cookie_header: (url: URL, header: string | null) => string;\n *   set_internal: (name: string, value: string, opts: import('./page/types.js').Cookie['options']) => void;\n * }} opts\n * @returns {typeof fetch}\n */\nexport function create_fetch({ event, options, manifest, state, get_cookie_header, set_internal }) {\n\t/**\n\t * @type {typeof fetch}\n\t */\n\tconst server_fetch = async (info, init) => {\n\t\tconst original_request = normalize_fetch_input(info, init, event.url);\n\n\t\t// some runtimes (e.g. Cloudflare) error if you access `request.mode`,\n\t\t// annoyingly, so we need to read the value from the `init` object instead\n\t\tlet mode = (info instanceof Request ? info.mode : init?.mode) ?? 'cors';\n\t\tlet credentials =\n\t\t\t(info instanceof Request ? info.credentials : init?.credentials) ?? 'same-origin';\n\n\t\treturn options.hooks.handleFetch({\n\t\t\tevent,\n\t\t\trequest: original_request,\n\t\t\tfetch: async (info, init) => {\n\t\t\t\tconst request = normalize_fetch_input(info, init, event.url);\n\n\t\t\t\tconst url = new URL(request.url);\n\n\t\t\t\tif (!request.headers.has('origin')) {\n\t\t\t\t\trequest.headers.set('origin', event.url.origin);\n\t\t\t\t}\n\n\t\t\t\tif (info !== original_request) {\n\t\t\t\t\tmode = (info instanceof Request ? info.mode : init?.mode) ?? 'cors';\n\t\t\t\t\tcredentials =\n\t\t\t\t\t\t(info instanceof Request ? info.credentials : init?.credentials) ?? 'same-origin';\n\t\t\t\t}\n\n\t\t\t\t// Remove Origin, according to https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin#description\n\t\t\t\tif (\n\t\t\t\t\t(request.method === 'GET' || request.method === 'HEAD') &&\n\t\t\t\t\t((mode === 'no-cors' && url.origin !== event.url.origin) ||\n\t\t\t\t\t\turl.origin === event.url.origin)\n\t\t\t\t) {\n\t\t\t\t\trequest.headers.delete('origin');\n\t\t\t\t}\n\n\t\t\t\tif (url.origin !== event.url.origin) {\n\t\t\t\t\t// Allow cookie passthrough for \"credentials: same-origin\" and \"credentials: include\"\n\t\t\t\t\t// if SvelteKit is serving my.domain.com:\n\t\t\t\t\t// -        domain.com WILL NOT receive cookies\n\t\t\t\t\t// -     my.domain.com WILL receive cookies\n\t\t\t\t\t// -    api.domain.dom WILL NOT receive cookies\n\t\t\t\t\t// - sub.my.domain.com WILL receive cookies\n\t\t\t\t\t// ports do not affect the resolution\n\t\t\t\t\t// leading dot prevents mydomain.com matching domain.com\n\t\t\t\t\t// Do not forward other cookies for \"credentials: include\" because we don't know\n\t\t\t\t\t// which cookie belongs to which domain (browser does not pass this info)\n\t\t\t\t\tif (`.${url.hostname}`.endsWith(`.${event.url.hostname}`) && credentials !== 'omit') {\n\t\t\t\t\t\tconst cookie = get_cookie_header(url, request.headers.get('cookie'));\n\t\t\t\t\t\tif (cookie) request.headers.set('cookie', cookie);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn fetch(request);\n\t\t\t\t}\n\n\t\t\t\t// handle fetch requests for static assets. e.g. prebaked data, etc.\n\t\t\t\t// we need to support everything the browser's fetch supports\n\t\t\t\tconst prefix = paths.assets || paths.base;\n\t\t\t\tconst decoded = decodeURIComponent(url.pathname);\n\t\t\t\tconst filename = (\n\t\t\t\t\tdecoded.startsWith(prefix) ? decoded.slice(prefix.length) : decoded\n\t\t\t\t).slice(1);\n\t\t\t\tconst filename_html = `${filename}/index.html`; // path may also match path/index.html\n\n\t\t\t\tconst is_asset = manifest.assets.has(filename) || filename in manifest._.server_assets;\n\t\t\t\tconst is_asset_html =\n\t\t\t\t\tmanifest.assets.has(filename_html) || filename_html in manifest._.server_assets;\n\n\t\t\t\tif (is_asset || is_asset_html) {\n\t\t\t\t\tconst file = is_asset ? filename : filename_html;\n\n\t\t\t\t\tif (state.read) {\n\t\t\t\t\t\tconst type = is_asset\n\t\t\t\t\t\t\t? manifest.mimeTypes[filename.slice(filename.lastIndexOf('.'))]\n\t\t\t\t\t\t\t: 'text/html';\n\n\t\t\t\t\t\treturn new Response(state.read(file), {\n\t\t\t\t\t\t\theaders: type ? { 'content-type': type } : {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (read_implementation && file in manifest._.server_assets) {\n\t\t\t\t\t\tconst length = manifest._.server_assets[file];\n\t\t\t\t\t\tconst type = manifest.mimeTypes[file.slice(file.lastIndexOf('.'))];\n\n\t\t\t\t\t\treturn new Response(read_implementation(file), {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Length': '' + length,\n\t\t\t\t\t\t\t\t'Content-Type': type\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn await fetch(request);\n\t\t\t\t}\n\n\t\t\t\tif (has_prerendered_path(manifest, paths.base + decoded)) {\n\t\t\t\t\t// The path of something prerendered could match a different route\n\t\t\t\t\t// that is still in the manifest, leading to the wrong route being loaded.\n\t\t\t\t\t// We therefore bail early here. The prerendered logic is different for\n\t\t\t\t\t// each adapter, (except maybe for prerendered redirects)\n\t\t\t\t\t// so we need to make an actual HTTP request.\n\t\t\t\t\treturn await fetch(request);\n\t\t\t\t}\n\n\t\t\t\tif (credentials !== 'omit') {\n\t\t\t\t\tconst cookie = get_cookie_header(url, request.headers.get('cookie'));\n\t\t\t\t\tif (cookie) {\n\t\t\t\t\t\trequest.headers.set('cookie', cookie);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst authorization = event.request.headers.get('authorization');\n\t\t\t\t\tif (authorization && !request.headers.has('authorization')) {\n\t\t\t\t\t\trequest.headers.set('authorization', authorization);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!request.headers.has('accept')) {\n\t\t\t\t\trequest.headers.set('accept', '*/*');\n\t\t\t\t}\n\n\t\t\t\tif (!request.headers.has('accept-language')) {\n\t\t\t\t\trequest.headers.set(\n\t\t\t\t\t\t'accept-language',\n\t\t\t\t\t\t/** @type {string} */ (event.request.headers.get('accept-language'))\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst response = await internal_fetch(request, options, manifest, state);\n\n\t\t\t\tconst set_cookie = response.headers.get('set-cookie');\n\t\t\t\tif (set_cookie) {\n\t\t\t\t\tfor (const str of set_cookie_parser.splitCookiesString(set_cookie)) {\n\t\t\t\t\t\tconst { name, value, ...options } = set_cookie_parser.parseString(str, {\n\t\t\t\t\t\t\tdecodeValues: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst path = options.path ?? (url.pathname.split('/').slice(0, -1).join('/') || '/');\n\n\t\t\t\t\t\t// options.sameSite is string, something more specific is required - type cast is safe\n\t\t\t\t\t\tset_internal(name, value, {\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tencode: (value) => value,\n\t\t\t\t\t\t\t.../** @type {import('cookie').CookieSerializeOptions} */ (options)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t}\n\t\t});\n\t};\n\n\t// Don't make this function `async`! Otherwise, the user has to `catch` promises they use for streaming responses or else\n\t// it will be an unhandled rejection. Instead, we add a `.catch(() => {})` ourselves below to prevent this from happening.\n\treturn (input, init) => {\n\t\t// See docs in fetch.js for why we need to do this\n\t\tconst response = server_fetch(input, init);\n\t\tresponse.catch(() => {});\n\t\treturn response;\n\t};\n}\n\n/**\n * @param {RequestInfo | URL} info\n * @param {RequestInit | undefined} init\n * @param {URL} url\n */\nfunction normalize_fetch_input(info, init, url) {\n\tif (info instanceof Request) {\n\t\treturn info;\n\t}\n\n\treturn new Request(typeof info === 'string' ? new URL(info, url) : info, init);\n}\n\n/**\n * @param {Request} request\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nasync function internal_fetch(request, options, manifest, state) {\n\tif (request.signal) {\n\t\tif (request.signal.aborted) {\n\t\t\tthrow new DOMException('The operation was aborted.', 'AbortError');\n\t\t}\n\n\t\tlet remove_abort_listener = () => {};\n\t\t/** @type {Promise<never>} */\n\t\tconst abort_promise = new Promise((_, reject) => {\n\t\t\tconst on_abort = () => {\n\t\t\t\treject(new DOMException('The operation was aborted.', 'AbortError'));\n\t\t\t};\n\t\t\trequest.signal.addEventListener('abort', on_abort, { once: true });\n\t\t\tremove_abort_listener = () => request.signal.removeEventListener('abort', on_abort);\n\t\t});\n\n\t\tconst result = await Promise.race([\n\t\t\trespond(request, options, manifest, {\n\t\t\t\t...state,\n\t\t\t\tdepth: state.depth + 1\n\t\t\t}),\n\t\t\tabort_promise\n\t\t]);\n\t\tremove_abort_listener();\n\t\treturn result;\n\t} else {\n\t\treturn await respond(request, options, manifest, {\n\t\t\t...state,\n\t\t\tdepth: state.depth + 1\n\t\t});\n\t}\n}\n","/** @import { RequestState } from 'types' */\nimport { DEV } from 'esm-env';\nimport { json, text } from '@sveltejs/kit';\nimport { Redirect, SvelteKitError } from '@sveltejs/kit/internal';\nimport { merge_tracing, with_request_store } from '@sveltejs/kit/internal/server';\nimport { base, app_dir } from '$app/paths/internal/server';\nimport { is_endpoint_request, render_endpoint } from './endpoint.js';\nimport { render_page } from './page/index.js';\nimport { render_response } from './page/render.js';\nimport { respond_with_error } from './page/respond_with_error.js';\nimport { is_form_content_type } from '../../utils/http.js';\nimport {\n\thandle_fatal_error,\n\thas_prerendered_path,\n\tmethod_not_allowed,\n\tredirect_response\n} from './utils.js';\nimport { decode_pathname, decode_params, disable_search, normalize_path } from '../../utils/url.js';\nimport { exec } from '../../utils/routing.js';\nimport { redirect_json_response, render_data } from './data/index.js';\nimport { add_cookies_to_headers, get_cookies } from './cookie.js';\nimport { create_fetch } from './fetch.js';\nimport { PageNodes } from '../../utils/page_nodes.js';\nimport { validate_server_exports } from '../../utils/exports.js';\nimport { action_json_redirect, is_action_json_request } from './page/actions.js';\nimport { INVALIDATED_PARAM, TRAILING_SLASH_PARAM } from '../shared.js';\nimport { get_public_env } from './env_module.js';\nimport { resolve_route } from './page/server_routing.js';\nimport { validateHeaders } from './validate-headers.js';\nimport {\n\tadd_data_suffix,\n\tadd_resolution_suffix,\n\thas_data_suffix,\n\thas_resolution_suffix,\n\tstrip_data_suffix,\n\tstrip_resolution_suffix\n} from '../pathname.js';\nimport { server_data_serializer } from './page/data_serializer.js';\nimport { get_remote_id, handle_remote_call } from './remote.js';\nimport { record_span } from '../telemetry/record_span.js';\nimport { otel } from '../telemetry/otel.js';\n\n/* global __SVELTEKIT_ADAPTER_NAME__ */\n\n/** @type {import('types').RequiredResolveOptions['transformPageChunk']} */\nconst default_transform = ({ html }) => html;\n\n/** @type {import('types').RequiredResolveOptions['filterSerializedResponseHeaders']} */\nconst default_filter = () => false;\n\n/** @type {import('types').RequiredResolveOptions['preload']} */\nconst default_preload = ({ type }) => type === 'js' || type === 'css';\n\nconst page_methods = new Set(['GET', 'HEAD', 'POST']);\n\nconst allowed_page_methods = new Set(['GET', 'HEAD', 'OPTIONS']);\n\nlet warned_on_devtools_json_request = false;\n\nexport const respond = propagate_context(internal_respond);\n\n/**\n * @param {Request} request\n * @param {import('types').SSROptions} options\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nexport async function internal_respond(request, options, manifest, state) {\n\t/** URL but stripped from the potential `/__data.json` suffix and its search param  */\n\tconst url = new URL(request.url);\n\n\tconst is_route_resolution_request = has_resolution_suffix(url.pathname);\n\tconst is_data_request = has_data_suffix(url.pathname);\n\tconst remote_id = get_remote_id(url);\n\n\tif (!DEV) {\n\t\tconst request_origin = request.headers.get('origin');\n\n\t\tif (remote_id) {\n\t\t\tif (request.method !== 'GET' && request_origin !== url.origin) {\n\t\t\t\tconst message = 'Cross-site remote requests are forbidden';\n\t\t\t\treturn json({ message }, { status: 403 });\n\t\t\t}\n\t\t} else if (options.csrf_check_origin) {\n\t\t\tconst forbidden =\n\t\t\t\tis_form_content_type(request) &&\n\t\t\t\t(request.method === 'POST' ||\n\t\t\t\t\trequest.method === 'PUT' ||\n\t\t\t\t\trequest.method === 'PATCH' ||\n\t\t\t\t\trequest.method === 'DELETE') &&\n\t\t\t\trequest_origin !== url.origin &&\n\t\t\t\t(!request_origin || !options.csrf_trusted_origins.includes(request_origin));\n\n\t\t\tif (forbidden) {\n\t\t\t\tconst message = `Cross-site ${request.method} form submissions are forbidden`;\n\t\t\t\tconst opts = { status: 403 };\n\n\t\t\t\tif (request.headers.get('accept') === 'application/json') {\n\t\t\t\t\treturn json({ message }, opts);\n\t\t\t\t}\n\n\t\t\t\treturn text(message, opts);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (options.hash_routing && url.pathname !== base + '/' && url.pathname !== '/[fallback]') {\n\t\treturn text('Not found', { status: 404 });\n\t}\n\n\t/** @type {boolean[] | undefined} */\n\tlet invalidated_data_nodes;\n\n\tif (is_route_resolution_request) {\n\t\t/**\n\t\t * If the request is for a route resolution, first modify the URL, then continue as normal\n\t\t * for path resolution, then return the route object as a JS file.\n\t\t */\n\t\turl.pathname = strip_resolution_suffix(url.pathname);\n\t} else if (is_data_request) {\n\t\turl.pathname =\n\t\t\tstrip_data_suffix(url.pathname) +\n\t\t\t\t(url.searchParams.get(TRAILING_SLASH_PARAM) === '1' ? '/' : '') || '/';\n\t\turl.searchParams.delete(TRAILING_SLASH_PARAM);\n\t\tinvalidated_data_nodes = url.searchParams\n\t\t\t.get(INVALIDATED_PARAM)\n\t\t\t?.split('')\n\t\t\t.map((node) => node === '1');\n\t\turl.searchParams.delete(INVALIDATED_PARAM);\n\t} else if (remote_id) {\n\t\turl.pathname = request.headers.get('x-sveltekit-pathname') ?? base;\n\t\turl.search = request.headers.get('x-sveltekit-search') ?? '';\n\t}\n\n\t/** @type {Record<string, string>} */\n\tconst headers = {};\n\n\tconst { cookies, new_cookies, get_cookie_header, set_internal, set_trailing_slash } = get_cookies(\n\t\trequest,\n\t\turl\n\t);\n\n\t/** @type {RequestState} */\n\tconst event_state = {\n\t\tprerendering: state.prerendering,\n\t\ttransport: options.hooks.transport,\n\t\thandleValidationError: options.hooks.handleValidationError,\n\t\ttracing: {\n\t\t\trecord_span\n\t\t},\n\t\tis_in_remote_function: false\n\t};\n\n\t/** @type {import('@sveltejs/kit').RequestEvent} */\n\tconst event = {\n\t\tcookies,\n\t\t// @ts-expect-error `fetch` needs to be created after the `event` itself\n\t\tfetch: null,\n\t\tgetClientAddress:\n\t\t\tstate.getClientAddress ||\n\t\t\t(() => {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`${__SVELTEKIT_ADAPTER_NAME__} does not specify getClientAddress. Please raise an issue`\n\t\t\t\t);\n\t\t\t}),\n\t\tlocals: {},\n\t\tparams: {},\n\t\tplatform: state.platform,\n\t\trequest,\n\t\troute: { id: null },\n\t\tsetHeaders: (new_headers) => {\n\t\t\tif (DEV) {\n\t\t\t\tvalidateHeaders(new_headers);\n\t\t\t}\n\n\t\t\tfor (const key in new_headers) {\n\t\t\t\tconst lower = key.toLowerCase();\n\t\t\t\tconst value = new_headers[key];\n\n\t\t\t\tif (lower === 'set-cookie') {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies'\n\t\t\t\t\t);\n\t\t\t\t} else if (lower in headers) {\n\t\t\t\t\t// appendHeaders-style for Server-Timing https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Server-Timing\n\t\t\t\t\tif (lower === 'server-timing') {\n\t\t\t\t\t\theaders[lower] += ', ' + value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`\"${key}\" header is already set`);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\theaders[lower] = value;\n\n\t\t\t\t\tif (state.prerendering && lower === 'cache-control') {\n\t\t\t\t\t\tstate.prerendering.cache = /** @type {string} */ (value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\turl,\n\t\tisDataRequest: is_data_request,\n\t\tisSubRequest: state.depth > 0,\n\t\tisRemoteRequest: !!remote_id\n\t};\n\n\tevent.fetch = create_fetch({\n\t\tevent,\n\t\toptions,\n\t\tmanifest,\n\t\tstate,\n\t\tget_cookie_header,\n\t\tset_internal\n\t});\n\n\tif (state.emulator?.platform) {\n\t\tevent.platform = await state.emulator.platform({\n\t\t\tconfig: {},\n\t\t\tprerender: !!state.prerendering?.fallback\n\t\t});\n\t}\n\n\tlet resolved_path = url.pathname;\n\n\tif (!remote_id) {\n\t\tconst prerendering_reroute_state = state.prerendering?.inside_reroute;\n\t\ttry {\n\t\t\t// For the duration or a reroute, disable the prerendering state as reroute could call API endpoints\n\t\t\t// which would end up in the wrong logic path if not disabled.\n\t\t\tif (state.prerendering) state.prerendering.inside_reroute = true;\n\n\t\t\t// reroute could alter the given URL, so we pass a copy\n\t\t\tresolved_path =\n\t\t\t\t(await options.hooks.reroute({ url: new URL(url), fetch: event.fetch })) ?? url.pathname;\n\t\t} catch {\n\t\t\treturn text('Internal Server Error', {\n\t\t\t\tstatus: 500\n\t\t\t});\n\t\t} finally {\n\t\t\tif (state.prerendering) state.prerendering.inside_reroute = prerendering_reroute_state;\n\t\t}\n\t}\n\n\ttry {\n\t\tresolved_path = decode_pathname(resolved_path);\n\t} catch {\n\t\treturn text('Malformed URI', { status: 400 });\n\t}\n\n\tif (\n\t\tresolved_path !== url.pathname &&\n\t\t!state.prerendering?.fallback &&\n\t\thas_prerendered_path(manifest, resolved_path)\n\t) {\n\t\tconst url = new URL(request.url);\n\t\turl.pathname = is_data_request\n\t\t\t? add_data_suffix(resolved_path)\n\t\t\t: is_route_resolution_request\n\t\t\t\t? add_resolution_suffix(resolved_path)\n\t\t\t\t: resolved_path;\n\n\t\t// `fetch` automatically decodes the body, so we need to delete the related headers to not break the response\n\t\t// Also see https://github.com/sveltejs/kit/issues/12197 for more info (we should fix this more generally at some point)\n\t\tconst response = await fetch(url, request);\n\t\tconst headers = new Headers(response.headers);\n\t\tif (headers.has('content-encoding')) {\n\t\t\theaders.delete('content-encoding');\n\t\t\theaders.delete('content-length');\n\t\t}\n\n\t\treturn new Response(response.body, {\n\t\t\theaders,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText\n\t\t});\n\t}\n\n\t/** @type {import('types').SSRRoute | null} */\n\tlet route = null;\n\n\tif (base && !state.prerendering?.fallback) {\n\t\tif (!resolved_path.startsWith(base)) {\n\t\t\treturn text('Not found', { status: 404 });\n\t\t}\n\t\tresolved_path = resolved_path.slice(base.length) || '/';\n\t}\n\n\tif (is_route_resolution_request) {\n\t\treturn resolve_route(resolved_path, new URL(request.url), manifest);\n\t}\n\n\tif (resolved_path === `/${app_dir}/env.js`) {\n\t\treturn get_public_env(request);\n\t}\n\n\tif (!remote_id && resolved_path.startsWith(`/${app_dir}`)) {\n\t\t// Ensure that 404'd static assets are not cached - some adapters might apply caching by default\n\t\tconst headers = new Headers();\n\t\theaders.set('cache-control', 'public, max-age=0, must-revalidate');\n\t\treturn text('Not found', { status: 404, headers });\n\t}\n\n\tif (!state.prerendering?.fallback) {\n\t\t// TODO this could theoretically break — should probably be inside a try-catch\n\t\tconst matchers = await manifest._.matchers();\n\n\t\tfor (const candidate of manifest._.routes) {\n\t\t\tconst match = candidate.pattern.exec(resolved_path);\n\t\t\tif (!match) continue;\n\n\t\t\tconst matched = exec(match, candidate.params, matchers);\n\t\t\tif (matched) {\n\t\t\t\troute = candidate;\n\t\t\t\tevent.route = { id: route.id };\n\t\t\t\tevent.params = decode_params(matched);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {import('types').RequiredResolveOptions} */\n\tlet resolve_opts = {\n\t\ttransformPageChunk: default_transform,\n\t\tfilterSerializedResponseHeaders: default_filter,\n\t\tpreload: default_preload\n\t};\n\n\t/** @type {import('types').TrailingSlash} */\n\tlet trailing_slash = 'never';\n\n\ttry {\n\t\t/** @type {PageNodes | undefined} */\n\t\tconst page_nodes = route?.page\n\t\t\t? new PageNodes(await load_page_nodes(route.page, manifest))\n\t\t\t: undefined;\n\n\t\t// determine whether we need to redirect to add/remove a trailing slash\n\t\tif (route && !remote_id) {\n\t\t\t// if `paths.base === '/a/b/c`, then the root route is `/a/b/c/`,\n\t\t\t// regardless of the `trailingSlash` route option\n\t\t\tif (url.pathname === base || url.pathname === base + '/') {\n\t\t\t\ttrailing_slash = 'always';\n\t\t\t} else if (page_nodes) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tpage_nodes.validate();\n\t\t\t\t}\n\t\t\t\ttrailing_slash = page_nodes.trailing_slash();\n\t\t\t} else if (route.endpoint) {\n\t\t\t\tconst node = await route.endpoint();\n\t\t\t\ttrailing_slash = node.trailingSlash ?? 'never';\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvalidate_server_exports(node, /** @type {string} */ (route.endpoint_id));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!is_data_request) {\n\t\t\t\tconst normalized = normalize_path(url.pathname, trailing_slash);\n\n\t\t\t\tif (normalized !== url.pathname && !state.prerendering?.fallback) {\n\t\t\t\t\treturn new Response(undefined, {\n\t\t\t\t\t\tstatus: 308,\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'x-sveltekit-normalize': '1',\n\t\t\t\t\t\t\tlocation:\n\t\t\t\t\t\t\t\t// ensure paths starting with '//' are not treated as protocol-relative\n\t\t\t\t\t\t\t\t(normalized.startsWith('//') ? url.origin + normalized : normalized) +\n\t\t\t\t\t\t\t\t(url.search === '?' ? '' : url.search)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.before_handle || state.emulator?.platform) {\n\t\t\t\tlet config = {};\n\n\t\t\t\t/** @type {import('types').PrerenderOption} */\n\t\t\t\tlet prerender = false;\n\n\t\t\t\tif (route.endpoint) {\n\t\t\t\t\tconst node = await route.endpoint();\n\t\t\t\t\tconfig = node.config ?? config;\n\t\t\t\t\tprerender = node.prerender ?? prerender;\n\t\t\t\t} else if (page_nodes) {\n\t\t\t\t\tconfig = page_nodes.get_config() ?? config;\n\t\t\t\t\tprerender = page_nodes.prerender();\n\t\t\t\t}\n\n\t\t\t\tif (state.before_handle) {\n\t\t\t\t\tstate.before_handle(event, config, prerender);\n\t\t\t\t}\n\n\t\t\t\tif (state.emulator?.platform) {\n\t\t\t\t\tevent.platform = await state.emulator.platform({ config, prerender });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tset_trailing_slash(trailing_slash);\n\n\t\tif (state.prerendering && !state.prerendering.fallback && !state.prerendering.inside_reroute) {\n\t\t\tdisable_search(url);\n\t\t}\n\n\t\tconst response = await record_span({\n\t\t\tname: 'sveltekit.handle.root',\n\t\t\tattributes: {\n\t\t\t\t'http.route': event.route.id || 'unknown',\n\t\t\t\t'http.method': event.request.method,\n\t\t\t\t'http.url': event.url.href,\n\t\t\t\t'sveltekit.is_data_request': is_data_request,\n\t\t\t\t'sveltekit.is_sub_request': event.isSubRequest\n\t\t\t},\n\t\t\tfn: async (root_span) => {\n\t\t\t\tconst traced_event = {\n\t\t\t\t\t...event,\n\t\t\t\t\ttracing: {\n\t\t\t\t\t\tenabled: __SVELTEKIT_SERVER_TRACING_ENABLED__,\n\t\t\t\t\t\troot: root_span,\n\t\t\t\t\t\tcurrent: root_span\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn await with_request_store({ event: traced_event, state: event_state }, () =>\n\t\t\t\t\toptions.hooks.handle({\n\t\t\t\t\t\tevent: traced_event,\n\t\t\t\t\t\tresolve: (event, opts) => {\n\t\t\t\t\t\t\treturn record_span({\n\t\t\t\t\t\t\t\tname: 'sveltekit.resolve',\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t'http.route': event.route.id || 'unknown'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfn: (resolve_span) => {\n\t\t\t\t\t\t\t\t\t// counter-intuitively, we need to clear the event, so that it's not\n\t\t\t\t\t\t\t\t\t// e.g. accessible when loading modules needed to handle the request\n\t\t\t\t\t\t\t\t\treturn with_request_store(null, () =>\n\t\t\t\t\t\t\t\t\t\tresolve(merge_tracing(event, resolve_span), page_nodes, opts).then(\n\t\t\t\t\t\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\t\t\t\t\t\t// add headers/cookies here, rather than inside `resolve`, so that we\n\t\t\t\t\t\t\t\t\t\t\t\t// can do it once for all responses instead of once per `return`\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const key in headers) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst value = headers[key];\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.set(key, /** @type {string} */ (value));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tadd_cookies_to_headers(response.headers, new_cookies.values());\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (state.prerendering && event.route.id !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.set('x-sveltekit-routeid', encodeURI(event.route.id));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tresolve_span.setAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t'http.response.status_code': response.status,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'http.response.body.size':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.headers.get('content-length') || 'unknown'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// respond with 304 if etag matches\n\t\tif (response.status === 200 && response.headers.has('etag')) {\n\t\t\tlet if_none_match_value = request.headers.get('if-none-match');\n\n\t\t\t// ignore W/ prefix https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match#directives\n\t\t\tif (if_none_match_value?.startsWith('W/\"')) {\n\t\t\t\tif_none_match_value = if_none_match_value.substring(2);\n\t\t\t}\n\n\t\t\tconst etag = /** @type {string} */ (response.headers.get('etag'));\n\n\t\t\tif (if_none_match_value === etag) {\n\t\t\t\tconst headers = new Headers({ etag });\n\n\t\t\t\t// https://datatracker.ietf.org/doc/html/rfc7232#section-4.1 + set-cookie\n\t\t\t\tfor (const key of [\n\t\t\t\t\t'cache-control',\n\t\t\t\t\t'content-location',\n\t\t\t\t\t'date',\n\t\t\t\t\t'expires',\n\t\t\t\t\t'vary',\n\t\t\t\t\t'set-cookie'\n\t\t\t\t]) {\n\t\t\t\t\tconst value = response.headers.get(key);\n\t\t\t\t\tif (value) headers.set(key, value);\n\t\t\t\t}\n\n\t\t\t\treturn new Response(undefined, {\n\t\t\t\t\tstatus: 304,\n\t\t\t\t\theaders\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Edge case: If user does `return Response(30x)` in handle hook while processing a data request,\n\t\t// we need to transform the redirect response to a corresponding JSON response.\n\t\tif (is_data_request && response.status >= 300 && response.status <= 308) {\n\t\t\tconst location = response.headers.get('location');\n\t\t\tif (location) {\n\t\t\t\treturn redirect_json_response(new Redirect(/** @type {any} */ (response.status), location));\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t} catch (e) {\n\t\tif (e instanceof Redirect) {\n\t\t\tconst response =\n\t\t\t\tis_data_request || remote_id\n\t\t\t\t\t? redirect_json_response(e)\n\t\t\t\t\t: route?.page && is_action_json_request(event)\n\t\t\t\t\t\t? action_json_redirect(e)\n\t\t\t\t\t\t: redirect_response(e.status, e.location);\n\t\t\tadd_cookies_to_headers(response.headers, new_cookies.values());\n\t\t\treturn response;\n\t\t}\n\t\treturn await handle_fatal_error(event, event_state, options, e);\n\t}\n\n\t/**\n\t * @param {import('@sveltejs/kit').RequestEvent} event\n\t * @param {PageNodes | undefined} page_nodes\n\t * @param {import('@sveltejs/kit').ResolveOptions} [opts]\n\t */\n\tasync function resolve(event, page_nodes, opts) {\n\t\ttry {\n\t\t\tif (opts) {\n\t\t\t\tresolve_opts = {\n\t\t\t\t\ttransformPageChunk: opts.transformPageChunk || default_transform,\n\t\t\t\t\tfilterSerializedResponseHeaders: opts.filterSerializedResponseHeaders || default_filter,\n\t\t\t\t\tpreload: opts.preload || default_preload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (options.hash_routing || state.prerendering?.fallback) {\n\t\t\t\treturn await render_response({\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tmanifest,\n\t\t\t\t\tstate,\n\t\t\t\t\tpage_config: { ssr: false, csr: true },\n\t\t\t\t\tstatus: 200,\n\t\t\t\t\terror: null,\n\t\t\t\t\tbranch: [],\n\t\t\t\t\tfetched: [],\n\t\t\t\t\tresolve_opts,\n\t\t\t\t\tdata_serializer: server_data_serializer(event, event_state, options)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (remote_id) {\n\t\t\t\treturn await handle_remote_call(event, event_state, options, manifest, remote_id);\n\t\t\t}\n\n\t\t\tif (route) {\n\t\t\t\tconst method = /** @type {import('types').HttpMethod} */ (event.request.method);\n\n\t\t\t\t/** @type {Response} */\n\t\t\t\tlet response;\n\n\t\t\t\tif (is_data_request) {\n\t\t\t\t\tresponse = await render_data(\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\troute,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tinvalidated_data_nodes,\n\t\t\t\t\t\ttrailing_slash\n\t\t\t\t\t);\n\t\t\t\t} else if (route.endpoint && (!route.page || is_endpoint_request(event))) {\n\t\t\t\t\tresponse = await render_endpoint(event, event_state, await route.endpoint(), state);\n\t\t\t\t} else if (route.page) {\n\t\t\t\t\tif (!page_nodes) {\n\t\t\t\t\t\tthrow new Error('page_nodes not found. This should never happen');\n\t\t\t\t\t} else if (page_methods.has(method)) {\n\t\t\t\t\t\tresponse = await render_page(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tevent_state,\n\t\t\t\t\t\t\troute.page,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tmanifest,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tpage_nodes,\n\t\t\t\t\t\t\tresolve_opts\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst allowed_methods = new Set(allowed_page_methods);\n\t\t\t\t\t\tconst node = await manifest._.nodes[route.page.leaf]();\n\t\t\t\t\t\tif (node?.server?.actions) {\n\t\t\t\t\t\t\tallowed_methods.add('POST');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (method === 'OPTIONS') {\n\t\t\t\t\t\t\t// This will deny CORS preflight requests implicitly because we don't\n\t\t\t\t\t\t\t// add the required CORS headers to the response.\n\t\t\t\t\t\t\tresponse = new Response(null, {\n\t\t\t\t\t\t\t\tstatus: 204,\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\tallow: Array.from(allowed_methods.values()).join(', ')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst mod = [...allowed_methods].reduce((acc, curr) => {\n\t\t\t\t\t\t\t\tacc[curr] = true;\n\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t}, /** @type {Record<string, any>} */ ({}));\n\t\t\t\t\t\t\tresponse = method_not_allowed(mod, method);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// a route will always have a page or an endpoint, but TypeScript doesn't know that\n\t\t\t\t\tthrow new Error('Route is neither page nor endpoint. This should never happen');\n\t\t\t\t}\n\n\t\t\t\t// If the route contains a page and an endpoint, we need to add a\n\t\t\t\t// `Vary: Accept` header to the response because of browser caching\n\t\t\t\tif (request.method === 'GET' && route.page && route.endpoint) {\n\t\t\t\t\tconst vary = response.headers\n\t\t\t\t\t\t.get('vary')\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.map((v) => v.trim().toLowerCase());\n\t\t\t\t\tif (!(vary?.includes('accept') || vary?.includes('*'))) {\n\t\t\t\t\t\t// the returned response might have immutable headers,\n\t\t\t\t\t\t// so we have to clone them before trying to mutate them\n\t\t\t\t\t\tresponse = new Response(response.body, {\n\t\t\t\t\t\t\tstatus: response.status,\n\t\t\t\t\t\t\tstatusText: response.statusText,\n\t\t\t\t\t\t\theaders: new Headers(response.headers)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse.headers.append('Vary', 'Accept');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tif (state.error && event.isSubRequest) {\n\t\t\t\t// avoid overwriting the headers. This could be a same origin fetch request\n\t\t\t\t// to an external service from the root layout while rendering an error page\n\t\t\t\tconst headers = new Headers(request.headers);\n\t\t\t\theaders.set('x-sveltekit-error', 'true');\n\t\t\t\treturn await fetch(request, { headers });\n\t\t\t}\n\n\t\t\tif (state.error) {\n\t\t\t\treturn text('Internal Server Error', {\n\t\t\t\t\tstatus: 500\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if this request came direct from the user, rather than\n\t\t\t// via our own `fetch`, render a 404 page\n\t\t\tif (state.depth === 0) {\n\t\t\t\t// In local development, Chrome requests this file for its 'automatic workspace folders' feature,\n\t\t\t\t// causing console spam. If users want to serve this file they can install\n\t\t\t\t// https://svelte.dev/docs/cli/devtools-json\n\t\t\t\tif (DEV && event.url.pathname === '/.well-known/appspecific/com.chrome.devtools.json') {\n\t\t\t\t\tif (!warned_on_devtools_json_request) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t`\\nGoogle Chrome is requesting ${event.url.pathname} to automatically configure devtools project settings. To learn why, and how to prevent this message, see https://svelte.dev/docs/cli/devtools-json\\n`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\twarned_on_devtools_json_request = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn new Response(undefined, { status: 404 });\n\t\t\t\t}\n\n\t\t\t\treturn await respond_with_error({\n\t\t\t\t\tevent,\n\t\t\t\t\tevent_state,\n\t\t\t\t\toptions,\n\t\t\t\t\tmanifest,\n\t\t\t\t\tstate,\n\t\t\t\t\tstatus: 404,\n\t\t\t\t\terror: new SvelteKitError(404, 'Not Found', `Not found: ${event.url.pathname}`),\n\t\t\t\t\tresolve_opts\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.prerendering) {\n\t\t\t\treturn text('not found', { status: 404 });\n\t\t\t}\n\n\t\t\t// we can't load the endpoint from our own manifest,\n\t\t\t// so we need to make an actual HTTP request\n\t\t\tconst response = await fetch(request);\n\n\t\t\t// clone the response so that headers are mutable (https://github.com/sveltejs/kit/issues/13857)\n\t\t\treturn new Response(response.body, response);\n\t\t} catch (e) {\n\t\t\t// TODO if `e` is instead named `error`, some fucked up Vite transformation happens\n\t\t\t// and I don't even know how to describe it. need to investigate at some point\n\n\t\t\t// HttpError from endpoint can end up here - TODO should it be handled there instead?\n\t\t\treturn await handle_fatal_error(event, event_state, options, e);\n\t\t} finally {\n\t\t\tevent.cookies.set = () => {\n\t\t\t\tthrow new Error('Cannot use `cookies.set(...)` after the response has been generated');\n\t\t\t};\n\n\t\t\tevent.setHeaders = () => {\n\t\t\t\tthrow new Error('Cannot use `setHeaders(...)` after the response has been generated');\n\t\t\t};\n\t\t}\n\t}\n}\n\n/**\n * @param {import('types').PageNodeIndexes} page\n * @param {import('@sveltejs/kit').SSRManifest} manifest\n */\nexport function load_page_nodes(page, manifest) {\n\treturn Promise.all([\n\t\t// we use == here rather than === because [undefined] serializes as \"[null]\"\n\t\t...page.layouts.map((n) => (n == undefined ? n : manifest._.nodes[n]())),\n\t\tmanifest._.nodes[page.leaf]()\n\t]);\n}\n\n/**\n * It's likely that, in a distributed system, there are spans starting outside the SvelteKit server -- eg.\n * started on the frontend client, or in a service that calls the SvelteKit server. There are standardized\n * ways to represent this context in HTTP headers, so we can extract that context and run our tracing inside of it\n * so that when our traces are exported, they are associated with the correct parent context.\n * @param {typeof internal_respond} fn\n * @returns {typeof internal_respond}\n */\nfunction propagate_context(fn) {\n\treturn async (req, ...rest) => {\n\t\tif (otel === null) {\n\t\t\treturn fn(req, ...rest);\n\t\t}\n\n\t\tconst { propagation, context } = await otel;\n\t\tconst c = propagation.extract(context.active(), Object.fromEntries(req.headers));\n\t\treturn context.with(c, async () => {\n\t\t\treturn await fn(req, ...rest);\n\t\t});\n\t};\n}\n","/**\n * @template T\n * @param {() => T} fn\n */\nexport function once(fn) {\n\tlet done = false;\n\n\t/** @type T */\n\tlet result;\n\n\treturn () => {\n\t\tif (done) return result;\n\t\tdone = true;\n\t\treturn (result = fn());\n\t};\n}\n","import { Redirect } from '@sveltejs/kit/internal';\nimport { with_request_store } from '@sveltejs/kit/internal/server';\nimport { ENDPOINT_METHODS, PAGE_METHODS } from '../../constants.js';\nimport { negotiate } from '../../utils/http.js';\nimport { method_not_allowed } from './utils.js';\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n * @param {import('types').RequestState} event_state\n * @param {import('types').SSREndpoint} mod\n * @param {import('types').SSRState} state\n * @returns {Promise<Response>}\n */\nexport async function render_endpoint(event, event_state, mod, state) {\n\tconst method = /** @type {import('types').HttpMethod} */ (event.request.method);\n\n\tlet handler = mod[method] || mod.fallback;\n\n\tif (method === 'HEAD' && !mod.HEAD && mod.GET) {\n\t\thandler = mod.GET;\n\t}\n\n\tif (!handler) {\n\t\treturn method_not_allowed(mod, method);\n\t}\n\n\tconst prerender = mod.prerender ?? state.prerender_default;\n\n\tif (prerender && (mod.POST || mod.PATCH || mod.PUT || mod.DELETE)) {\n\t\tthrow new Error('Cannot prerender endpoints that have mutative methods');\n\t}\n\n\tif (state.prerendering && !state.prerendering.inside_reroute && !prerender) {\n\t\tif (state.depth > 0) {\n\t\t\t// if request came from a prerendered page, bail\n\t\t\tthrow new Error(`${event.route.id} is not prerenderable`);\n\t\t} else {\n\t\t\t// if request came direct from the crawler, signal that\n\t\t\t// this route cannot be prerendered, but don't bail\n\t\t\treturn new Response(undefined, { status: 204 });\n\t\t}\n\t}\n\n\tevent_state.is_endpoint_request = true;\n\n\ttry {\n\t\tconst response = await with_request_store({ event, state: event_state }, () =>\n\t\t\thandler(/** @type {import('@sveltejs/kit').RequestEvent<Record<string, any>>} */ (event))\n\t\t);\n\n\t\tif (!(response instanceof Response)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid response from route ${event.url.pathname}: handler should return a Response object`\n\t\t\t);\n\t\t}\n\n\t\tif (state.prerendering && (!state.prerendering.inside_reroute || prerender)) {\n\t\t\t// The returned Response might have immutable Headers\n\t\t\t// so we should clone them before trying to mutate them.\n\t\t\t// We also need to clone the response body since it may be read twice during prerendering\n\t\t\tconst cloned = new Response(response.clone().body, {\n\t\t\t\tstatus: response.status,\n\t\t\t\tstatusText: response.statusText,\n\t\t\t\theaders: new Headers(response.headers)\n\t\t\t});\n\t\t\tcloned.headers.set('x-sveltekit-prerender', String(prerender));\n\n\t\t\tif (state.prerendering.inside_reroute && prerender) {\n\t\t\t\t// Without this, the route wouldn't be recorded as prerendered,\n\t\t\t\t// because there's nothing after reroute that would do that.\n\t\t\t\tcloned.headers.set(\n\t\t\t\t\t'x-sveltekit-routeid',\n\t\t\t\t\tencodeURI(/** @type {string} */ (event.route.id))\n\t\t\t\t);\n\t\t\t\tstate.prerendering.dependencies.set(event.url.pathname, { response: cloned, body: null });\n\t\t\t} else {\n\t\t\t\treturn cloned;\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t} catch (e) {\n\t\tif (e instanceof Redirect) {\n\t\t\treturn new Response(undefined, {\n\t\t\t\tstatus: e.status,\n\t\t\t\theaders: { location: e.location }\n\t\t\t});\n\t\t}\n\n\t\tthrow e;\n\t}\n}\n\n/**\n * @param {import('@sveltejs/kit').RequestEvent} event\n */\nexport function is_endpoint_request(event) {\n\tconst { method, headers } = event.request;\n\n\t// These methods exist exclusively for endpoints\n\tif (ENDPOINT_METHODS.includes(method) && !PAGE_METHODS.includes(method)) {\n\t\treturn true;\n\t}\n\n\t// use:enhance uses a custom header to disambiguate\n\tif (method === 'POST' && headers.get('x-sveltekit-action') === 'true') return false;\n\n\t// GET/POST requests may be for endpoints or pages. We prefer endpoints if this isn't a text/html request\n\tconst accept = event.request.headers.get('accept') ?? '*/*';\n\treturn negotiate(accept, ['*', 'text/html']) !== 'text/html';\n}\n","import { HYDRATION_END, HYDRATION_START, HYDRATION_START_ELSE } from '../../constants.js';\n\nexport const BLOCK_OPEN = `<!--${HYDRATION_START}-->`;\nexport const BLOCK_OPEN_ELSE = `<!--${HYDRATION_START_ELSE}-->`;\nexport const BLOCK_CLOSE = `<!--${HYDRATION_END}-->`;\nexport const EMPTY_COMMENT = `<!---->`;\n","import { STALE_REACTION } from '#client/constants';\n\n/** @type {AbortController | null} */\nlet controller = null;\n\nexport function abort() {\n\tcontroller?.abort(STALE_REACTION);\n\tcontroller = null;\n}\n\nexport function getAbortSignal() {\n\treturn (controller ??= new AbortController()).signal;\n}\n","/** @import { SSRContext } from '#server' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\n\n/** @type {SSRContext | null} */\nexport var ssr_context = null;\n\n/** @param {SSRContext | null} v */\nexport function set_ssr_context(v) {\n\tssr_context = v;\n}\n\n/**\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\treturn [() => getContext(key), (context) => setContext(key, context)];\n}\n\n/**\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\n\treturn result;\n}\n\n/**\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_or_init_context_map('setContext').set(key, context);\n\treturn context;\n}\n\n/**\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_or_init_context_map('hasContext').has(key);\n}\n\n/** @returns {Map<any, any>} */\nexport function getAllContexts() {\n\treturn get_or_init_context_map('getAllContexts');\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (ssr_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (ssr_context.c ??= new Map(get_parent_context(ssr_context) || undefined));\n}\n\n/**\n * @param {Function} [fn]\n */\nexport function push(fn) {\n\tssr_context = { p: ssr_context, c: null, r: null };\n\n\tif (DEV) {\n\t\tssr_context.function = fn;\n\t\tssr_context.element = ssr_context.p?.element;\n\t}\n}\n\nexport function pop() {\n\tssr_context = /** @type {SSRContext} */ (ssr_context).p;\n}\n\n/**\n * @param {SSRContext} ssr_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(ssr_context) {\n\tlet parent = ssr_context.p;\n\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\n\treturn null;\n}\n\n/**\n * Wraps an `await` expression in such a way that the component context that was\n * active before the expression evaluated can be reapplied afterwards —\n * `await a + b()` becomes `(await $.save(a))() + b()`, meaning `b()` will have access\n * to the context of its component.\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar previous_context = ssr_context;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tssr_context = previous_context;\n\t\treturn value;\n\t};\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `%name%(...)` unless the `experimental.async` compiler option is `true`\n * @param {string} name\n * @returns {never}\n */\nexport function experimental_async_required(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`experimental_async_required\\nCannot use \\`${name}(...)\\` unless the \\`experimental.async\\` compiler option is \\`true\\`\\nhttps://svelte.dev/e/experimental_async_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/experimental_async_required`);\n\t}\n}\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * A `hydratable` value with key `%key%` was created, but at least part of it was not used during the render.\n * \n * The `hydratable` was initialized in:\n * %stack%\n * @param {string} key\n * @param {string} stack\n */\nexport function unresolved_hydratable(key, stack) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] unresolved_hydratable\\n%cA \\`hydratable\\` value with key \\`${key}\\` was created, but at least part of it was not used during the render.\n\nThe \\`hydratable\\` was initialized in:\n${stack}\\nhttps://svelte.dev/e/unresolved_hydratable`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/unresolved_hydratable`);\n\t}\n}","// @ts-ignore -- we don't include node types in the production build\n/** @import { AsyncLocalStorage } from 'node:async_hooks' */\n/** @import { RenderContext } from '#server' */\n\nimport { deferred } from '../shared/utils.js';\nimport * as e from './errors.js';\n\n/** @type {Promise<void> | null} */\nlet current_render = null;\n\n/** @type {RenderContext | null} */\nlet context = null;\n\n/** @returns {RenderContext} */\nexport function get_render_context() {\n\tconst store = context ?? als?.getStore();\n\n\tif (!store) {\n\t\te.server_context_required();\n\t}\n\n\treturn store;\n}\n\n/**\n * @template T\n * @param {() => Promise<T>} fn\n * @returns {Promise<T>}\n */\nexport async function with_render_context(fn) {\n\tcontext = {\n\t\thydratable: {\n\t\t\tlookup: new Map(),\n\t\t\tcomparisons: [],\n\t\t\tunresolved_promises: new Map()\n\t\t}\n\t};\n\n\tif (in_webcontainer()) {\n\t\tconst { promise, resolve } = deferred();\n\t\tconst previous_render = current_render;\n\t\tcurrent_render = promise;\n\t\tawait previous_render;\n\t\treturn fn().finally(resolve);\n\t}\n\n\ttry {\n\t\tif (als === null) {\n\t\t\te.async_local_storage_unavailable();\n\t\t}\n\t\treturn als.run(context, fn);\n\t} finally {\n\t\tcontext = null;\n\t}\n}\n\n/** @type {AsyncLocalStorage<RenderContext | null> | null} */\nlet als = null;\n\nexport async function init_render_context() {\n\tif (als !== null) return;\n\ttry {\n\t\t// @ts-ignore -- we don't include node types in the production build\n\t\tconst { AsyncLocalStorage } = await import('node:async_hooks');\n\t\tals = new AsyncLocalStorage();\n\t} catch {}\n}\n\n// this has to be a function because rollup won't treeshake it if it's a constant\nfunction in_webcontainer() {\n\t// @ts-ignore -- this will fail when we run typecheck because we exclude node types\n\t// eslint-disable-next-line n/prefer-global/process\n\treturn !!globalThis.process?.versions?.webcontainer;\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nexport *  from '../shared/errors.js';\n\n/**\n * The node API `AsyncLocalStorage` is not available, but is required to use async server rendering.\n * @returns {never}\n */\nexport function async_local_storage_unavailable() {\n\tconst error = new Error(`async_local_storage_unavailable\\nThe node API \\`AsyncLocalStorage\\` is not available, but is required to use async server rendering.\\nhttps://svelte.dev/e/async_local_storage_unavailable`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Encountered asynchronous work while rendering synchronously.\n * @returns {never}\n */\nexport function await_invalid() {\n\tconst error = new Error(`await_invalid\\nEncountered asynchronous work while rendering synchronously.\\nhttps://svelte.dev/e/await_invalid`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * The `html` property of server render results has been deprecated. Use `body` instead.\n * @returns {never}\n */\nexport function html_deprecated() {\n\tconst error = new Error(`html_deprecated\\nThe \\`html\\` property of server render results has been deprecated. Use \\`body\\` instead.\\nhttps://svelte.dev/e/html_deprecated`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Attempted to set `hydratable` with key `%key%` twice with different values.\n * \n * %stack%\n * @param {string} key\n * @param {string} stack\n * @returns {never}\n */\nexport function hydratable_clobbering(key, stack) {\n\tconst error = new Error(`hydratable_clobbering\\nAttempted to set \\`hydratable\\` with key \\`${key}\\` twice with different values.\n\n${stack}\\nhttps://svelte.dev/e/hydratable_clobbering`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Failed to serialize `hydratable` data for key `%key%`.\n * \n * `hydratable` can serialize anything [`uneval` from `devalue`](https://npmjs.com/package/uneval) can, plus Promises.\n * \n * Cause:\n * %stack%\n * @param {string} key\n * @param {string} stack\n * @returns {never}\n */\nexport function hydratable_serialization_failed(key, stack) {\n\tconst error = new Error(`hydratable_serialization_failed\\nFailed to serialize \\`hydratable\\` data for key \\`${key}\\`.\n\n\\`hydratable\\` can serialize anything [\\`uneval\\` from \\`devalue\\`](https://npmjs.com/package/uneval) can, plus Promises.\n\nCause:\n${stack}\\nhttps://svelte.dev/e/hydratable_serialization_failed`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * `%name%(...)` is not available on the server\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_function_unavailable(name) {\n\tconst error = new Error(`lifecycle_function_unavailable\\n\\`${name}(...)\\` is not available on the server\\nhttps://svelte.dev/e/lifecycle_function_unavailable`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Could not resolve `render` context.\n * @returns {never}\n */\nexport function server_context_required() {\n\tconst error = new Error(`server_context_required\\nCould not resolve \\`render\\` context.\\nhttps://svelte.dev/e/server_context_required`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}","/** @import { Component } from 'svelte' */\n/** @import { HydratableContext, RenderOutput, SSRContext, SyncRenderOutput } from './types.js' */\n/** @import { MaybePromise } from '#shared' */\nimport { async_mode_flag } from '../flags/index.js';\nimport { abort } from './abort-signal.js';\nimport { pop, push, set_ssr_context, ssr_context, save } from './context.js';\nimport * as e from './errors.js';\nimport * as w from './warnings.js';\nimport { BLOCK_CLOSE, BLOCK_OPEN } from './hydration.js';\nimport { attributes } from './index.js';\nimport { get_render_context, with_render_context, init_render_context } from './render-context.js';\nimport { DEV } from 'esm-env';\n\n/** @typedef {'head' | 'body'} RendererType */\n/** @typedef {{ [key in RendererType]: string }} AccumulatedContent */\n\n/**\n * @typedef {string | Renderer} RendererItem\n */\n\n/**\n * Renderers are basically a tree of `string | Renderer`s, where each `Renderer` in the tree represents\n * work that may or may not have completed. A renderer can be {@link collect}ed to aggregate the\n * content from itself and all of its children, but this will throw if any of the children are\n * performing asynchronous work. To asynchronously collect a renderer, just `await` it.\n *\n * The `string` values within a renderer are always associated with the {@link type} of that renderer. To switch types,\n * call {@link child} with a different `type` argument.\n */\nexport class Renderer {\n\t/**\n\t * The contents of the renderer.\n\t * @type {RendererItem[]}\n\t */\n\t#out = [];\n\n\t/**\n\t * Any `onDestroy` callbacks registered during execution of this renderer.\n\t * @type {(() => void)[] | undefined}\n\t */\n\t#on_destroy = undefined;\n\n\t/**\n\t * Whether this renderer is a component body.\n\t * @type {boolean}\n\t */\n\t#is_component_body = false;\n\n\t/**\n\t * The type of string content that this renderer is accumulating.\n\t * @type {RendererType}\n\t */\n\ttype;\n\n\t/** @type {Renderer | undefined} */\n\t#parent;\n\n\t/**\n\t * Asynchronous work associated with this renderer\n\t * @type {Promise<void> | undefined}\n\t */\n\tpromise = undefined;\n\n\t/**\n\t * State which is associated with the content tree as a whole.\n\t * It will be re-exposed, uncopied, on all children.\n\t * @type {SSRState}\n\t * @readonly\n\t */\n\tglobal;\n\n\t/**\n\t * State that is local to the branch it is declared in.\n\t * It will be shallow-copied to all children.\n\t *\n\t * @type {{ select_value: string | undefined }}\n\t */\n\tlocal;\n\n\t/**\n\t * @param {SSRState} global\n\t * @param {Renderer | undefined} [parent]\n\t */\n\tconstructor(global, parent) {\n\t\tthis.#parent = parent;\n\n\t\tthis.global = global;\n\t\tthis.local = parent ? { ...parent.local } : { select_value: undefined };\n\t\tthis.type = parent ? parent.type : 'body';\n\t}\n\n\t/**\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\thead(fn) {\n\t\tconst head = new Renderer(this.global, this);\n\t\thead.type = 'head';\n\n\t\tthis.#out.push(head);\n\t\thead.child(fn);\n\t}\n\n\t/**\n\t * @param {Array<Promise<void>>} blockers\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\tasync_block(blockers, fn) {\n\t\tthis.#out.push(BLOCK_OPEN);\n\t\tthis.async(blockers, fn);\n\t\tthis.#out.push(BLOCK_CLOSE);\n\t}\n\n\t/**\n\t * @param {Array<Promise<void>>} blockers\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\tasync(blockers, fn) {\n\t\tlet callback = fn;\n\n\t\tif (blockers.length > 0) {\n\t\t\tconst context = ssr_context;\n\n\t\t\tcallback = (renderer) => {\n\t\t\t\treturn Promise.all(blockers).then(() => {\n\t\t\t\t\tconst previous_context = ssr_context;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tset_ssr_context(context);\n\t\t\t\t\t\treturn fn(renderer);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tset_ssr_context(previous_context);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tthis.child(callback);\n\t}\n\n\t/**\n\t * @param {Array<() => void>} thunks\n\t */\n\trun(thunks) {\n\t\tconst context = ssr_context;\n\n\t\tlet promise = Promise.resolve(thunks[0]());\n\t\tconst promises = [promise];\n\n\t\tfor (const fn of thunks.slice(1)) {\n\t\t\tpromise = promise.then(() => {\n\t\t\t\tconst previous_context = ssr_context;\n\t\t\t\tset_ssr_context(context);\n\n\t\t\t\ttry {\n\t\t\t\t\treturn fn();\n\t\t\t\t} finally {\n\t\t\t\t\tset_ssr_context(previous_context);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tpromises.push(promise);\n\t\t}\n\n\t\treturn promises;\n\t}\n\n\t/**\n\t * Create a child renderer. The child renderer inherits the state from the parent,\n\t * but has its own content.\n\t * @param {(renderer: Renderer) => MaybePromise<void>} fn\n\t */\n\tchild(fn) {\n\t\tconst child = new Renderer(this.global, this);\n\t\tthis.#out.push(child);\n\n\t\tconst parent = ssr_context;\n\n\t\tset_ssr_context({\n\t\t\t...ssr_context,\n\t\t\tp: parent,\n\t\t\tc: null,\n\t\t\tr: child\n\t\t});\n\n\t\tconst result = fn(child);\n\n\t\tset_ssr_context(parent);\n\n\t\tif (result instanceof Promise) {\n\t\t\tif (child.global.mode === 'sync') {\n\t\t\t\te.await_invalid();\n\t\t\t}\n\t\t\t// just to avoid unhandled promise rejections -- we'll end up throwing in `collect_async` if something fails\n\t\t\tresult.catch(() => {});\n\t\t\tchild.promise = result;\n\t\t}\n\n\t\treturn child;\n\t}\n\n\t/**\n\t * Create a component renderer. The component renderer inherits the state from the parent,\n\t * but has its own content. It is treated as an ordering boundary for ondestroy callbacks.\n\t * @param {(renderer: Renderer) => MaybePromise<void>} fn\n\t * @param {Function} [component_fn]\n\t * @returns {void}\n\t */\n\tcomponent(fn, component_fn) {\n\t\tpush(component_fn);\n\t\tconst child = this.child(fn);\n\t\tchild.#is_component_body = true;\n\t\tpop();\n\t}\n\n\t/**\n\t * @param {Record<string, any>} attrs\n\t * @param {(renderer: Renderer) => void} fn\n\t * @param {string | undefined} [css_hash]\n\t * @param {Record<string, boolean> | undefined} [classes]\n\t * @param {Record<string, string> | undefined} [styles]\n\t * @param {number | undefined} [flags]\n\t * @returns {void}\n\t */\n\tselect(attrs, fn, css_hash, classes, styles, flags) {\n\t\tconst { value, ...select_attrs } = attrs;\n\n\t\tthis.push(`<select${attributes(select_attrs, css_hash, classes, styles, flags)}>`);\n\t\tthis.child((renderer) => {\n\t\t\trenderer.local.select_value = value;\n\t\t\tfn(renderer);\n\t\t});\n\t\tthis.push('</select>');\n\t}\n\n\t/**\n\t * @param {Record<string, any>} attrs\n\t * @param {string | number | boolean | ((renderer: Renderer) => void)} body\n\t * @param {string | undefined} [css_hash]\n\t * @param {Record<string, boolean> | undefined} [classes]\n\t * @param {Record<string, string> | undefined} [styles]\n\t * @param {number | undefined} [flags]\n\t */\n\toption(attrs, body, css_hash, classes, styles, flags) {\n\t\tthis.#out.push(`<option${attributes(attrs, css_hash, classes, styles, flags)}`);\n\n\t\t/**\n\t\t * @param {Renderer} renderer\n\t\t * @param {any} value\n\t\t * @param {{ head?: string, body: any }} content\n\t\t */\n\t\tconst close = (renderer, value, { head, body }) => {\n\t\t\tif ('value' in attrs) {\n\t\t\t\tvalue = attrs.value;\n\t\t\t}\n\n\t\t\tif (value === this.local.select_value) {\n\t\t\t\trenderer.#out.push(' selected');\n\t\t\t}\n\n\t\t\trenderer.#out.push(`>${body}</option>`);\n\n\t\t\t// super edge case, but may as well handle it\n\t\t\tif (head) {\n\t\t\t\trenderer.head((child) => child.push(head));\n\t\t\t}\n\t\t};\n\n\t\tif (typeof body === 'function') {\n\t\t\tthis.child((renderer) => {\n\t\t\t\tconst r = new Renderer(this.global, this);\n\t\t\t\tbody(r);\n\n\t\t\t\tif (this.global.mode === 'async') {\n\t\t\t\t\treturn r.#collect_content_async().then((content) => {\n\t\t\t\t\t\tclose(renderer, content.body.replaceAll('<!---->', ''), content);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst content = r.#collect_content();\n\t\t\t\t\tclose(renderer, content.body.replaceAll('<!---->', ''), content);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tclose(this, body, { body });\n\t\t}\n\t}\n\n\t/**\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\ttitle(fn) {\n\t\tconst path = this.get_path();\n\n\t\t/** @param {string} head */\n\t\tconst close = (head) => {\n\t\t\tthis.global.set_title(head, path);\n\t\t};\n\n\t\tthis.child((renderer) => {\n\t\t\tconst r = new Renderer(renderer.global, renderer);\n\t\t\tfn(r);\n\n\t\t\tif (renderer.global.mode === 'async') {\n\t\t\t\treturn r.#collect_content_async().then((content) => {\n\t\t\t\t\tclose(content.head);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst content = r.#collect_content();\n\t\t\t\tclose(content.head);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @param {string | (() => Promise<string>)} content\n\t */\n\tpush(content) {\n\t\tif (typeof content === 'function') {\n\t\t\tthis.child(async (renderer) => renderer.push(await content()));\n\t\t} else {\n\t\t\tthis.#out.push(content);\n\t\t}\n\t}\n\n\t/**\n\t * @param {() => void} fn\n\t */\n\ton_destroy(fn) {\n\t\t(this.#on_destroy ??= []).push(fn);\n\t}\n\n\t/**\n\t * @returns {number[]}\n\t */\n\tget_path() {\n\t\treturn this.#parent ? [...this.#parent.get_path(), this.#parent.#out.indexOf(this)] : [];\n\t}\n\n\t/**\n\t * @deprecated this is needed for legacy component bindings\n\t */\n\tcopy() {\n\t\tconst copy = new Renderer(this.global, this.#parent);\n\t\tcopy.#out = this.#out.map((item) => (item instanceof Renderer ? item.copy() : item));\n\t\tcopy.promise = this.promise;\n\t\treturn copy;\n\t}\n\n\t/**\n\t * @param {Renderer} other\n\t * @deprecated this is needed for legacy component bindings\n\t */\n\tsubsume(other) {\n\t\tif (this.global.mode !== other.global.mode) {\n\t\t\tthrow new Error(\n\t\t\t\t\"invariant: A renderer cannot switch modes. If you're seeing this, there's a compiler bug. File an issue!\"\n\t\t\t);\n\t\t}\n\n\t\tthis.local = other.local;\n\t\tthis.#out = other.#out.map((item) => {\n\t\t\tif (item instanceof Renderer) {\n\t\t\t\titem.subsume(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\tthis.promise = other.promise;\n\t\tthis.type = other.type;\n\t}\n\n\tget length() {\n\t\treturn this.#out.length;\n\t}\n\n\t/**\n\t * Only available on the server and when compiling with the `server` option.\n\t * Takes a component and returns an object with `body` and `head` properties on it, which you can use to populate the HTML when server-rendering your app.\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} [options]\n\t * @returns {RenderOutput}\n\t */\n\tstatic render(component, options = {}) {\n\t\t/** @type {AccumulatedContent | undefined} */\n\t\tlet sync;\n\t\t/** @type {Promise<AccumulatedContent> | undefined} */\n\t\tlet async;\n\n\t\tconst result = /** @type {RenderOutput} */ ({});\n\t\t// making these properties non-enumerable so that console.logging\n\t\t// doesn't trigger a sync render\n\t\tObject.defineProperties(result, {\n\t\t\thtml: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).body;\n\t\t\t\t}\n\t\t\t},\n\t\t\thead: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).head;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).body;\n\t\t\t\t}\n\t\t\t},\n\t\t\tthen: {\n\t\t\t\tvalue:\n\t\t\t\t\t/**\n\t\t\t\t\t * this is not type-safe, but honestly it's the best I can do right now, and it's a straightforward function.\n\t\t\t\t\t *\n\t\t\t\t\t * @template TResult1\n\t\t\t\t\t * @template [TResult2=never]\n\t\t\t\t\t * @param { (value: SyncRenderOutput) => TResult1 } onfulfilled\n\t\t\t\t\t * @param { (reason: unknown) => TResult2 } onrejected\n\t\t\t\t\t */\n\t\t\t\t\t(onfulfilled, onrejected) => {\n\t\t\t\t\t\tif (!async_mode_flag) {\n\t\t\t\t\t\t\tconst result = (sync ??= Renderer.#render(component, options));\n\t\t\t\t\t\t\tconst user_result = onfulfilled({\n\t\t\t\t\t\t\t\thead: result.head,\n\t\t\t\t\t\t\t\tbody: result.body,\n\t\t\t\t\t\t\t\thtml: result.body\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn Promise.resolve(user_result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tasync ??= init_render_context().then(() =>\n\t\t\t\t\t\t\twith_render_context(() => Renderer.#render_async(component, options))\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn async.then((result) => {\n\t\t\t\t\t\t\tObject.defineProperty(result, 'html', {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\t\t\t\t\tget: () => {\n\t\t\t\t\t\t\t\t\te.html_deprecated();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn onfulfilled(/** @type {SyncRenderOutput} */ (result));\n\t\t\t\t\t\t}, onrejected);\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Collect all of the `onDestroy` callbacks registered during rendering. In an async context, this is only safe to call\n\t * after awaiting `collect_async`.\n\t *\n\t * Child renderers are \"porous\" and don't affect execution order, but component body renderers\n\t * create ordering boundaries. Within a renderer, callbacks run in order until hitting a component boundary.\n\t * @returns {Iterable<() => void>}\n\t */\n\t*#collect_on_destroy() {\n\t\tfor (const component of this.#traverse_components()) {\n\t\t\tyield* component.#collect_ondestroy();\n\t\t}\n\t}\n\n\t/**\n\t * Performs a depth-first search of renderers, yielding the deepest components first, then additional components as we backtrack up the tree.\n\t * @returns {Iterable<Renderer>}\n\t */\n\t*#traverse_components() {\n\t\tfor (const child of this.#out) {\n\t\t\tif (typeof child !== 'string') {\n\t\t\t\tyield* child.#traverse_components();\n\t\t\t}\n\t\t}\n\t\tif (this.#is_component_body) {\n\t\t\tyield this;\n\t\t}\n\t}\n\n\t/**\n\t * @returns {Iterable<() => void>}\n\t */\n\t*#collect_ondestroy() {\n\t\tif (this.#on_destroy) {\n\t\t\tfor (const fn of this.#on_destroy) {\n\t\t\t\tyield fn;\n\t\t\t}\n\t\t}\n\t\tfor (const child of this.#out) {\n\t\t\tif (child instanceof Renderer && !child.#is_component_body) {\n\t\t\t\tyield* child.#collect_ondestroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Render a component. Throws if any of the children are performing asynchronous work.\n\t *\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} options\n\t * @returns {AccumulatedContent}\n\t */\n\tstatic #render(component, options) {\n\t\tvar previous_context = ssr_context;\n\t\ttry {\n\t\t\tconst renderer = Renderer.#open_render('sync', component, options);\n\n\t\t\tconst content = renderer.#collect_content();\n\t\t\treturn Renderer.#close_render(content, renderer);\n\t\t} finally {\n\t\t\tabort();\n\t\t\tset_ssr_context(previous_context);\n\t\t}\n\t}\n\n\t/**\n\t * Render a component.\n\t *\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} options\n\t * @returns {Promise<AccumulatedContent>}\n\t */\n\tstatic async #render_async(component, options) {\n\t\tconst previous_context = ssr_context;\n\n\t\ttry {\n\t\t\tconst renderer = Renderer.#open_render('async', component, options);\n\t\t\tconst content = await renderer.#collect_content_async();\n\t\t\tconst hydratables = await renderer.#collect_hydratables();\n\t\t\tif (hydratables !== null) {\n\t\t\t\tcontent.head = hydratables + content.head;\n\t\t\t}\n\t\t\treturn Renderer.#close_render(content, renderer);\n\t\t} finally {\n\t\t\tset_ssr_context(previous_context);\n\t\t\tabort();\n\t\t}\n\t}\n\n\t/**\n\t * Collect all of the code from the `out` array and return it as a string, or a promise resolving to a string.\n\t * @param {AccumulatedContent} content\n\t * @returns {AccumulatedContent}\n\t */\n\t#collect_content(content = { head: '', body: '' }) {\n\t\tfor (const item of this.#out) {\n\t\t\tif (typeof item === 'string') {\n\t\t\t\tcontent[this.type] += item;\n\t\t\t} else if (item instanceof Renderer) {\n\t\t\t\titem.#collect_content(content);\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t}\n\n\t/**\n\t * Collect all of the code from the `out` array and return it as a string.\n\t * @param {AccumulatedContent} content\n\t * @returns {Promise<AccumulatedContent>}\n\t */\n\tasync #collect_content_async(content = { head: '', body: '' }) {\n\t\tawait this.promise;\n\n\t\t// no danger to sequentially awaiting stuff in here; all of the work is already kicked off\n\t\tfor (const item of this.#out) {\n\t\t\tif (typeof item === 'string') {\n\t\t\t\tcontent[this.type] += item;\n\t\t\t} else if (item instanceof Renderer) {\n\t\t\t\tawait item.#collect_content_async(content);\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t}\n\n\tasync #collect_hydratables() {\n\t\tconst ctx = get_render_context().hydratable;\n\n\t\tfor (const [_, key] of ctx.unresolved_promises) {\n\t\t\t// this is a problem -- it means we've finished the render but we're still waiting on a promise to resolve so we can\n\t\t\t// serialize it, so we're blocking the response on useless content.\n\t\t\tw.unresolved_hydratable(key, ctx.lookup.get(key)?.stack ?? '<missing stack trace>');\n\t\t}\n\n\t\tfor (const comparison of ctx.comparisons) {\n\t\t\t// these reject if there's a mismatch\n\t\t\tawait comparison;\n\t\t}\n\n\t\treturn await Renderer.#hydratable_block(ctx);\n\t}\n\n\t/**\n\t * @template {Record<string, any>} Props\n\t * @param {'sync' | 'async'} mode\n\t * @param {import('svelte').Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} options\n\t * @returns {Renderer}\n\t */\n\tstatic #open_render(mode, component, options) {\n\t\tconst renderer = new Renderer(\n\t\t\tnew SSRState(mode, options.idPrefix ? options.idPrefix + '-' : '')\n\t\t);\n\n\t\trenderer.push(BLOCK_OPEN);\n\n\t\tif (options.context) {\n\t\t\tpush();\n\t\t\t/** @type {SSRContext} */ (ssr_context).c = options.context;\n\t\t\t/** @type {SSRContext} */ (ssr_context).r = renderer;\n\t\t}\n\n\t\t// @ts-expect-error\n\t\tcomponent(renderer, options.props ?? {});\n\n\t\tif (options.context) {\n\t\t\tpop();\n\t\t}\n\n\t\trenderer.push(BLOCK_CLOSE);\n\n\t\treturn renderer;\n\t}\n\n\t/**\n\t * @param {AccumulatedContent} content\n\t * @param {Renderer} renderer\n\t */\n\tstatic #close_render(content, renderer) {\n\t\tfor (const cleanup of renderer.#collect_on_destroy()) {\n\t\t\tcleanup();\n\t\t}\n\n\t\tlet head = content.head + renderer.global.get_title();\n\t\tlet body = content.body;\n\n\t\tfor (const { hash, code } of renderer.global.css) {\n\t\t\thead += `<style id=\"${hash}\">${code}</style>`;\n\t\t}\n\n\t\treturn {\n\t\t\thead,\n\t\t\tbody\n\t\t};\n\t}\n\n\t/**\n\t * @param {HydratableContext} ctx\n\t */\n\tstatic async #hydratable_block(ctx) {\n\t\tif (ctx.lookup.size === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet entries = [];\n\t\tlet has_promises = false;\n\n\t\tfor (const [k, v] of ctx.lookup) {\n\t\t\tif (v.promises) {\n\t\t\t\thas_promises = true;\n\t\t\t\tfor (const p of v.promises) await p;\n\t\t\t}\n\n\t\t\tentries.push(`[${JSON.stringify(k)},${v.serialized}]`);\n\t\t}\n\n\t\tlet prelude = `const h = (window.__svelte ??= {}).h ??= new Map();`;\n\n\t\tif (has_promises) {\n\t\t\tprelude = `const r = (v) => Promise.resolve(v);\n\t\t\t\t${prelude}`;\n\t\t}\n\n\t\t// TODO csp -- have discussed but not implemented\n\t\treturn `\n\t\t<script>\n\t\t\t{\n\t\t\t\t${prelude}\n\n\t\t\t\tfor (const [k, v] of [\n\t\t\t\t\t${entries.join(',\\n\\t\\t\\t\\t\\t')}\n\t\t\t\t]) {\n\t\t\t\t\th.set(k, v);\n\t\t\t\t}\n\t\t\t}\n\t\t</script>`;\n\t}\n}\n\nexport class SSRState {\n\t/** @readonly @type {'sync' | 'async'} */\n\tmode;\n\n\t/** @readonly @type {() => string} */\n\tuid;\n\n\t/** @readonly @type {Set<{ hash: string; code: string }>} */\n\tcss = new Set();\n\n\t/** @type {{ path: number[], value: string }} */\n\t#title = { path: [], value: '' };\n\n\t/**\n\t * @param {'sync' | 'async'} mode\n\t * @param {string} [id_prefix]\n\t */\n\tconstructor(mode, id_prefix = '') {\n\t\tthis.mode = mode;\n\n\t\tlet uid = 1;\n\t\tthis.uid = () => `${id_prefix}s${uid++}`;\n\t}\n\n\tget_title() {\n\t\treturn this.#title.value;\n\t}\n\n\t/**\n\t * Performs a depth-first (lexicographic) comparison using the path. Rejects sets\n\t * from earlier than or equal to the current value.\n\t * @param {string} value\n\t * @param {number[]} path\n\t */\n\tset_title(value, path) {\n\t\tconst current = this.#title.path;\n\n\t\tlet i = 0;\n\t\tlet l = Math.min(path.length, current.length);\n\n\t\t// skip identical prefixes - [1, 2, 3, ...] === [1, 2, 3, ...]\n\t\twhile (i < l && path[i] === current[i]) i += 1;\n\n\t\tif (path[i] === undefined) return;\n\n\t\t// replace title if\n\t\t// - incoming path is longer - [7, 8, 9] > [7, 8]\n\t\t// - incoming path is later  - [7, 8, 9] > [7, 8, 8]\n\t\tif (current[i] === undefined || path[i] > current[i]) {\n\t\t\tthis.#title.path = path;\n\t\t\tthis.#title.value = value;\n\t\t}\n\t}\n}\n","/** @import { ComponentType, SvelteComponent, Component } from 'svelte' */\n/** @import { RenderOutput } from '#server' */\n/** @import { Store } from '#shared' */\n/** @import { AccumulatedContent } from './renderer.js' */\nexport { FILENAME, HMR } from '../../constants.js';\nimport { attr, clsx, to_class, to_style } from '../shared/attributes.js';\nimport { is_promise, noop } from '../shared/utils.js';\nimport { subscribe_to_store } from '../../store/utils.js';\nimport {\n\tUNINITIALIZED,\n\tELEMENT_PRESERVE_ATTRIBUTE_CASE,\n\tELEMENT_IS_NAMESPACED,\n\tELEMENT_IS_INPUT\n} from '../../constants.js';\nimport { escape_html } from '../../escaping.js';\nimport { DEV } from 'esm-env';\nimport { EMPTY_COMMENT, BLOCK_CLOSE, BLOCK_OPEN, BLOCK_OPEN_ELSE } from './hydration.js';\nimport { validate_store } from '../shared/validate.js';\nimport { is_boolean_attribute, is_raw_text_element, is_void } from '../../utils.js';\nimport { Renderer } from './renderer.js';\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nconst INVALID_ATTR_NAME_CHAR_REGEX =\n\t/[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n\n/**\n * @param {Renderer} renderer\n * @param {string} tag\n * @param {() => void} attributes_fn\n * @param {() => void} children_fn\n * @returns {void}\n */\nexport function element(renderer, tag, attributes_fn = noop, children_fn = noop) {\n\trenderer.push('<!---->');\n\n\tif (tag) {\n\t\trenderer.push(`<${tag}`);\n\t\tattributes_fn();\n\t\trenderer.push(`>`);\n\n\t\tif (!is_void(tag)) {\n\t\t\tchildren_fn();\n\t\t\tif (!is_raw_text_element(tag)) {\n\t\t\t\trenderer.push(EMPTY_COMMENT);\n\t\t\t}\n\t\t\trenderer.push(`</${tag}>`);\n\t\t}\n\t}\n\n\trenderer.push('<!---->');\n}\n\n/**\n * Only available on the server and when compiling with the `server` option.\n * Takes a component and returns an object with `body` and `head` properties on it, which you can use to populate the HTML when server-rendering your app.\n * @template {Record<string, any>} Props\n * @param {Component<Props> | ComponentType<SvelteComponent<Props>>} component\n * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} [options]\n * @returns {RenderOutput}\n */\nexport function render(component, options = {}) {\n\treturn Renderer.render(/** @type {Component<Props>} */ (component), options);\n}\n\n/**\n * @param {string} hash\n * @param {Renderer} renderer\n * @param {(renderer: Renderer) => Promise<void> | void} fn\n * @returns {void}\n */\nexport function head(hash, renderer, fn) {\n\trenderer.head((renderer) => {\n\t\trenderer.push(`<!--${hash}-->`);\n\t\trenderer.child(fn);\n\t\trenderer.push(EMPTY_COMMENT);\n\t});\n}\n\n/**\n * @param {Renderer} renderer\n * @param {boolean} is_html\n * @param {Record<string, string>} props\n * @param {() => void} component\n * @param {boolean} dynamic\n * @returns {void}\n */\nexport function css_props(renderer, is_html, props, component, dynamic = false) {\n\tconst styles = style_object_to_string(props);\n\n\tif (is_html) {\n\t\trenderer.push(`<svelte-css-wrapper style=\"display: contents; ${styles}\">`);\n\t} else {\n\t\trenderer.push(`<g style=\"${styles}\">`);\n\t}\n\n\tif (dynamic) {\n\t\trenderer.push('<!---->');\n\t}\n\n\tcomponent();\n\n\tif (is_html) {\n\t\trenderer.push(`<!----></svelte-css-wrapper>`);\n\t} else {\n\t\trenderer.push(`<!----></g>`);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} attrs\n * @param {string} [css_hash]\n * @param {Record<string, boolean>} [classes]\n * @param {Record<string, string>} [styles]\n * @param {number} [flags]\n * @returns {string}\n */\nexport function attributes(attrs, css_hash, classes, styles, flags = 0) {\n\tif (styles) {\n\t\tattrs.style = to_style(attrs.style, styles);\n\t}\n\n\tif (attrs.class) {\n\t\tattrs.class = clsx(attrs.class);\n\t}\n\n\tif (css_hash || classes) {\n\t\tattrs.class = to_class(attrs.class, css_hash, classes);\n\t}\n\n\tlet attr_str = '';\n\tlet name;\n\n\tconst is_html = (flags & ELEMENT_IS_NAMESPACED) === 0;\n\tconst lowercase = (flags & ELEMENT_PRESERVE_ATTRIBUTE_CASE) === 0;\n\tconst is_input = (flags & ELEMENT_IS_INPUT) !== 0;\n\n\tfor (name in attrs) {\n\t\t// omit functions, internal svelte properties and invalid attribute names\n\t\tif (typeof attrs[name] === 'function') continue;\n\t\tif (name[0] === '$' && name[1] === '$') continue; // faster than name.startsWith('$$')\n\t\tif (INVALID_ATTR_NAME_CHAR_REGEX.test(name)) continue;\n\n\t\tvar value = attrs[name];\n\n\t\tif (lowercase) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\n\t\tif (is_input) {\n\t\t\tif (name === 'defaultvalue' || name === 'defaultchecked') {\n\t\t\t\tname = name === 'defaultvalue' ? 'value' : 'checked';\n\t\t\t\tif (attrs[name]) continue;\n\t\t\t}\n\t\t}\n\n\t\tattr_str += attr(name, value, is_html && is_boolean_attribute(name));\n\t}\n\n\treturn attr_str;\n}\n\n/**\n * @param {Record<string, unknown>[]} props\n * @returns {Record<string, unknown>}\n */\nexport function spread_props(props) {\n\t/** @type {Record<string, unknown>} */\n\tconst merged_props = {};\n\tlet key;\n\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst obj = props[i];\n\t\tfor (key in obj) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(obj, key);\n\t\t\tif (desc) {\n\t\t\t\tObject.defineProperty(merged_props, key, desc);\n\t\t\t} else {\n\t\t\t\tmerged_props[key] = obj[key];\n\t\t\t}\n\t\t}\n\t}\n\treturn merged_props;\n}\n\n/**\n * @param {unknown} value\n * @returns {string}\n */\nexport function stringify(value) {\n\treturn typeof value === 'string' ? value : value == null ? '' : value + '';\n}\n\n/** @param {Record<string, string>} style_object */\nfunction style_object_to_string(style_object) {\n\treturn Object.keys(style_object)\n\t\t.filter(/** @param {any} key */ (key) => style_object[key] != null && style_object[key] !== '')\n\t\t.map(/** @param {any} key */ (key) => `${key}: ${escape_html(style_object[key], true)};`)\n\t\t.join(' ');\n}\n\n/**\n * @param {any} value\n * @param {string | undefined} [hash]\n * @param {Record<string, boolean>} [directives]\n */\nexport function attr_class(value, hash, directives) {\n\tvar result = to_class(value, hash, directives);\n\treturn result ? ` class=\"${escape_html(result, true)}\"` : '';\n}\n\n/**\n * @param {any} value\n * @param {Record<string,any>|[Record<string,any>,Record<string,any>]} [directives]\n */\nexport function attr_style(value, directives) {\n\tvar result = to_style(value, directives);\n\treturn result ? ` style=\"${escape_html(result, true)}\"` : '';\n}\n\n/**\n * @template V\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<V> | null | undefined} store\n * @returns {V}\n */\nexport function store_get(store_values, store_name, store) {\n\tif (DEV) {\n\t\tvalidate_store(store, store_name.slice(1));\n\t}\n\n\t// it could be that someone eagerly updates the store in the instance script, so\n\t// we should only reuse the store value in the template\n\tif (store_name in store_values && store_values[store_name][0] === store) {\n\t\treturn store_values[store_name][2];\n\t}\n\n\tstore_values[store_name]?.[1](); // if store was switched, unsubscribe from old store\n\tstore_values[store_name] = [store, null, undefined];\n\tconst unsub = subscribe_to_store(\n\t\tstore,\n\t\t/** @param {any} v */ (v) => (store_values[store_name][2] = v)\n\t);\n\tstore_values[store_name][1] = unsub;\n\treturn store_values[store_name][2];\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Updates a store with a new value.\n * @template V\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<V>} store\n * @param {any} expression\n */\nexport function store_mutate(store_values, store_name, store, expression) {\n\tstore_set(store, store_get(store_values, store_name, store));\n\treturn expression;\n}\n\n/**\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<number>} store\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store_values, store_name, store, d = 1) {\n\tlet store_value = store_get(store_values, store_name, store);\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<number>} store\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store_pre(store_values, store_name, store, d = 1) {\n\tconst value = store_get(store_values, store_name, store) + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/** @param {Record<string, [any, any, any]>} store_values */\nexport function unsubscribe_stores(store_values) {\n\tfor (const store_name in store_values) {\n\t\tstore_values[store_name][1]();\n\t}\n}\n\n/**\n * @param {Renderer} renderer\n * @param {Record<string, any>} $$props\n * @param {string} name\n * @param {Record<string, unknown>} slot_props\n * @param {null | (() => void)} fallback_fn\n * @returns {void}\n */\nexport function slot(renderer, $$props, name, slot_props, fallback_fn) {\n\tvar slot_fn = $$props.$$slots?.[name];\n\t// Interop: Can use snippets to fill slots\n\tif (slot_fn === true) {\n\t\tslot_fn = $$props[name === 'default' ? 'children' : name];\n\t}\n\n\tif (slot_fn !== undefined) {\n\t\tslot_fn(renderer, slot_props);\n\t} else {\n\t\tfallback_fn?.();\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} rest\n * @returns {Record<string, unknown>}\n */\nexport function rest_props(props, rest) {\n\t/** @type {Record<string, unknown>} */\n\tconst rest_props = {};\n\tlet key;\n\tfor (key in props) {\n\t\tif (!rest.includes(key)) {\n\t\t\trest_props[key] = props[key];\n\t\t}\n\t}\n\treturn rest_props;\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @returns {Record<string, unknown>}\n */\nexport function sanitize_props(props) {\n\tconst { children, $$slots, ...sanitized } = props;\n\treturn sanitized;\n}\n\n/**\n * @param {Record<string, any>} props\n * @returns {Record<string, boolean>}\n */\nexport function sanitize_slots(props) {\n\t/** @type {Record<string, boolean>} */\n\tconst sanitized = {};\n\tif (props.children) sanitized.default = true;\n\tfor (const key in props.$$slots) {\n\t\tsanitized[key] = true;\n\t}\n\treturn sanitized;\n}\n\n/**\n * Legacy mode: If the prop has a fallback and is bound in the\n * parent component, propagate the fallback value upwards.\n * @param {Record<string, unknown>} props_parent\n * @param {Record<string, unknown>} props_now\n */\nexport function bind_props(props_parent, props_now) {\n\tfor (const key in props_now) {\n\t\tconst initial_value = props_parent[key];\n\t\tconst value = props_now[key];\n\t\tif (\n\t\t\tinitial_value === undefined &&\n\t\t\tvalue !== undefined &&\n\t\t\tObject.getOwnPropertyDescriptor(props_parent, key)?.set\n\t\t) {\n\t\t\tprops_parent[key] = value;\n\t\t}\n\t}\n}\n\n/**\n * @template V\n * @param {Renderer} renderer\n * @param {Promise<V>} promise\n * @param {null | (() => void)} pending_fn\n * @param {(value: V) => void} then_fn\n * @returns {void}\n */\nfunction await_block(renderer, promise, pending_fn, then_fn) {\n\tif (is_promise(promise)) {\n\t\trenderer.push(BLOCK_OPEN);\n\t\tpromise.then(null, noop);\n\t\tif (pending_fn !== null) {\n\t\t\tpending_fn();\n\t\t}\n\t} else if (then_fn !== null) {\n\t\trenderer.push(BLOCK_OPEN_ELSE);\n\t\tthen_fn(promise);\n\t}\n}\n\nexport { await_block as await };\n\n/** @param {any} array_like_or_iterator */\nexport function ensure_array_like(array_like_or_iterator) {\n\tif (array_like_or_iterator) {\n\t\treturn array_like_or_iterator.length !== undefined\n\t\t\t? array_like_or_iterator\n\t\t\t: Array.from(array_like_or_iterator);\n\t}\n\treturn [];\n}\n\n/**\n * @template V\n * @param {() => V} get_value\n */\nexport function once(get_value) {\n\tlet value = /** @type {V} */ (UNINITIALIZED);\n\treturn () => {\n\t\tif (value === UNINITIALIZED) {\n\t\t\tvalue = get_value();\n\t\t}\n\t\treturn value;\n\t};\n}\n\n/**\n * Create an unique ID\n * @param {Renderer} renderer\n * @returns {string}\n */\nexport function props_id(renderer) {\n\tconst uid = renderer.global.uid();\n\trenderer.push('<!--$' + uid + '-->');\n\treturn uid;\n}\n\nexport { attr, clsx };\n\nexport { html } from './blocks/html.js';\n\nexport { save } from './context.js';\n\nexport { push_element, pop_element, validate_snippet_args } from './dev.js';\n\nexport { snapshot } from '../shared/clone.js';\n\nexport { fallback, to_array } from '../shared/utils.js';\n\nexport {\n\tinvalid_default_snippet,\n\tvalidate_dynamic_element_tag,\n\tvalidate_void_dynamic_element,\n\tprevent_snippet_stringification\n} from '../shared/validate.js';\n\nexport { escape_html as escape };\n\n/**\n * @template T\n * @param {()=>T} fn\n * @returns {(new_value?: T) => (T | void)}\n */\nexport function derived(fn) {\n\tconst get_value = once(fn);\n\t/**\n\t * @type {T | undefined}\n\t */\n\tlet updated_value;\n\n\treturn function (new_value) {\n\t\tif (arguments.length === 0) {\n\t\t\treturn updated_value ?? get_value();\n\t\t}\n\t\tupdated_value = new_value;\n\t\treturn updated_value;\n\t};\n}\n","/** @import { Readable } from './public' */\nimport { untrack } from '../index-client.js';\nimport { noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {Readable<T> | null | undefined} store\n * @param {(value: T) => void} run\n * @param {(value: T) => void} [invalidate]\n * @returns {() => void}\n */\nexport function subscribe_to_store(store, run, invalidate) {\n\tif (store == null) {\n\t\t// @ts-expect-error\n\t\trun(undefined);\n\n\t\t// @ts-expect-error\n\t\tif (invalidate) invalidate(undefined);\n\n\t\treturn noop;\n\t}\n\n\t// Svelte store takes a private second argument\n\t// StartStopNotifier could mutate state, and we want to silence the corresponding validation error\n\tconst unsub = untrack(() =>\n\t\tstore.subscribe(\n\t\t\trun,\n\t\t\t// @ts-expect-error\n\t\t\tinvalidate\n\t\t)\n\t);\n\n\t// Also support RxJS\n\t// @ts-expect-error TODO fix this in the types?\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n","/** @import { SSRContext } from '#server' */\n/** @import { Renderer } from './internal/server/renderer.js' */\nimport { ssr_context } from './internal/server/context.js';\nimport { noop } from './internal/shared/utils.js';\nimport * as e from './internal/server/errors.js';\n\n/** @param {() => void} fn */\nexport function onDestroy(fn) {\n\t/** @type {Renderer} */ (/** @type {SSRContext} */ (ssr_context).r).on_destroy(fn);\n}\n\nexport {\n\tnoop as beforeUpdate,\n\tnoop as afterUpdate,\n\tnoop as onMount,\n\tnoop as flushSync,\n\trun as untrack\n} from './internal/shared/utils.js';\n\nexport function createEventDispatcher() {\n\treturn noop;\n}\n\nexport function mount() {\n\te.lifecycle_function_unavailable('mount');\n}\n\nexport function hydrate() {\n\te.lifecycle_function_unavailable('hydrate');\n}\n\nexport function unmount() {\n\te.lifecycle_function_unavailable('unmount');\n}\n\nexport function fork() {\n\te.lifecycle_function_unavailable('fork');\n}\n\nexport async function tick() {}\n\nexport async function settled() {}\n\nexport { getAbortSignal } from './internal/server/abort-signal.js';\n\nexport {\n\tcreateContext,\n\tgetAllContexts,\n\tgetContext,\n\thasContext,\n\tsetContext\n} from './internal/server/context.js';\n\nexport { hydratable } from './internal/server/hydratable.js';\n\nexport { createRawSnippet } from './internal/server/blocks/snippet.js';\n","import { asClassComponent } from 'svelte/legacy';\nimport Root from './root.svelte';\nexport default asClassComponent(Root);","\nimport root from '../root.js';\nimport { set_building, set_prerendering } from '__sveltekit/environment';\nimport { set_assets } from '$app/paths/internal/server';\nimport { set_manifest, set_read_implementation } from '__sveltekit/server';\nimport { set_private_env, set_public_env } from '../../../node_modules/.pnpm/@sveltejs+kit@2.49.1_@sveltejs+vite-plugin-svelte@6.2.1_svelte@5.45.6_vite@6.4.1_@types_44a92fb33a20a3326dd3dbcbaa974c46/node_modules/@sveltejs/kit/src/runtime/shared-server.js';\n\nexport const options = {\n\tapp_template_contains_nonce: false,\n\tasync: false,\n\tcsp: {\"mode\":\"auto\",\"directives\":{\"upgrade-insecure-requests\":false,\"block-all-mixed-content\":false},\"reportOnly\":{\"upgrade-insecure-requests\":false,\"block-all-mixed-content\":false}},\n\tcsrf_check_origin: true,\n\tcsrf_trusted_origins: [],\n\tembedded: false,\n\tenv_public_prefix: 'PUBLIC_',\n\tenv_private_prefix: '',\n\thash_routing: false,\n\thooks: null, // added lazily, via `get_hooks`\n\tpreload_strategy: \"modulepreload\",\n\troot,\n\tservice_worker: false,\n\tservice_worker_options: undefined,\n\ttemplates: {\n\t\tapp: ({ head, body, assets, nonce, env }) => \"<!doctype html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<link rel=\\\"icon\\\" href=\\\"\" + assets + \"/favicon.png\\\" />\\n\\t\\t<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n\\t\\t\" + head + \"\\n\\t</head>\\n\\t<body data-sveltekit-preload-data=\\\"hover\\\">\\n\\t\\t<div style=\\\"display: contents\\\">\" + body + \"</div>\\n\\t</body>\\n</html>\\n\",\n\t\terror: ({ status, message }) => \"<!doctype html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<title>\" + message + \"</title>\\n\\n\\t\\t<style>\\n\\t\\t\\tbody {\\n\\t\\t\\t\\t--bg: white;\\n\\t\\t\\t\\t--fg: #222;\\n\\t\\t\\t\\t--divider: #ccc;\\n\\t\\t\\t\\tbackground: var(--bg);\\n\\t\\t\\t\\tcolor: var(--fg);\\n\\t\\t\\t\\tfont-family:\\n\\t\\t\\t\\t\\tsystem-ui,\\n\\t\\t\\t\\t\\t-apple-system,\\n\\t\\t\\t\\t\\tBlinkMacSystemFont,\\n\\t\\t\\t\\t\\t'Segoe UI',\\n\\t\\t\\t\\t\\tRoboto,\\n\\t\\t\\t\\t\\tOxygen,\\n\\t\\t\\t\\t\\tUbuntu,\\n\\t\\t\\t\\t\\tCantarell,\\n\\t\\t\\t\\t\\t'Open Sans',\\n\\t\\t\\t\\t\\t'Helvetica Neue',\\n\\t\\t\\t\\t\\tsans-serif;\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\theight: 100vh;\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.error {\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\tmax-width: 32rem;\\n\\t\\t\\t\\tmargin: 0 1rem;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.status {\\n\\t\\t\\t\\tfont-weight: 200;\\n\\t\\t\\t\\tfont-size: 3rem;\\n\\t\\t\\t\\tline-height: 1;\\n\\t\\t\\t\\tposition: relative;\\n\\t\\t\\t\\ttop: -0.05rem;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.message {\\n\\t\\t\\t\\tborder-left: 1px solid var(--divider);\\n\\t\\t\\t\\tpadding: 0 0 0 1rem;\\n\\t\\t\\t\\tmargin: 0 0 0 1rem;\\n\\t\\t\\t\\tmin-height: 2.5rem;\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.message h1 {\\n\\t\\t\\t\\tfont-weight: 400;\\n\\t\\t\\t\\tfont-size: 1em;\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t@media (prefers-color-scheme: dark) {\\n\\t\\t\\t\\tbody {\\n\\t\\t\\t\\t\\t--bg: #222;\\n\\t\\t\\t\\t\\t--fg: #ddd;\\n\\t\\t\\t\\t\\t--divider: #666;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t</style>\\n\\t</head>\\n\\t<body>\\n\\t\\t<div class=\\\"error\\\">\\n\\t\\t\\t<span class=\\\"status\\\">\" + status + \"</span>\\n\\t\\t\\t<div class=\\\"message\\\">\\n\\t\\t\\t\\t<h1>\" + message + \"</h1>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</body>\\n</html>\\n\"\n\t},\n\tversion_hash: \"1oshm7n\"\n};\n\nexport async function get_hooks() {\n\tlet handle;\n\tlet handleFetch;\n\tlet handleError;\n\tlet handleValidationError;\n\tlet init;\n\t\n\n\tlet reroute;\n\tlet transport;\n\t\n\n\treturn {\n\t\thandle,\n\t\thandleFetch,\n\t\thandleError,\n\t\thandleValidationError,\n\t\tinit,\n\t\treroute,\n\t\ttransport\n\t};\n}\n\nexport { set_assets, set_building, set_manifest, set_prerendering, set_private_env, set_public_env, set_read_implementation };\n","/** @import { SvelteComponent } from '../index.js' */\nimport { asClassComponent as as_class_component, createClassComponent } from './legacy-client.js';\nimport { render } from '../internal/server/index.js';\nimport { async_mode_flag } from '../internal/flags/index.js';\nimport * as w from '../internal/server/warnings.js';\n\n// By having this as a separate entry point for server environments, we save the client bundle from having to include the server runtime\n\nexport { createClassComponent };\n\n/** @typedef {{ head: string, html: string, css: { code: string, map: null }}} LegacyRenderResult */\n\n/**\n * Takes a Svelte 5 component and returns a Svelte 4 compatible component constructor.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {SvelteComponent<Props, Events, Slots>} component\n * @returns {typeof SvelteComponent<Props, Events, Slots> & Exports}\n */\nexport function asClassComponent(component) {\n\tconst component_constructor = as_class_component(component);\n\t/** @type {(props?: {}, opts?: { $$slots?: {}; context?: Map<any, any>; }) => LegacyRenderResult & PromiseLike<LegacyRenderResult> } */\n\tconst _render = (props, { context } = {}) => {\n\t\t// @ts-expect-error the typings are off, but this will work if the component is compiled in SSR mode\n\t\tconst result = render(component, { props, context });\n\n\t\tconst munged = Object.defineProperties(\n\t\t\t/** @type {LegacyRenderResult & PromiseLike<LegacyRenderResult>} */ ({}),\n\t\t\t{\n\t\t\t\tcss: {\n\t\t\t\t\tvalue: { code: '', map: null }\n\t\t\t\t},\n\t\t\t\thead: {\n\t\t\t\t\tget: () => result.head\n\t\t\t\t},\n\t\t\t\thtml: {\n\t\t\t\t\tget: () => result.body\n\t\t\t\t},\n\t\t\t\tthen: {\n\t\t\t\t\t/**\n\t\t\t\t\t * this is not type-safe, but honestly it's the best I can do right now, and it's a straightforward function.\n\t\t\t\t\t *\n\t\t\t\t\t * @template TResult1\n\t\t\t\t\t * @template [TResult2=never]\n\t\t\t\t\t * @param { (value: LegacyRenderResult) => TResult1 } onfulfilled\n\t\t\t\t\t * @param { (reason: unknown) => TResult2 } onrejected\n\t\t\t\t\t */\n\t\t\t\t\tvalue: (onfulfilled, onrejected) => {\n\t\t\t\t\t\tif (!async_mode_flag) {\n\t\t\t\t\t\t\tconst user_result = onfulfilled({\n\t\t\t\t\t\t\t\tcss: munged.css,\n\t\t\t\t\t\t\t\thead: munged.head,\n\t\t\t\t\t\t\t\thtml: munged.html\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn Promise.resolve(user_result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result.then((result) => {\n\t\t\t\t\t\t\treturn onfulfilled({\n\t\t\t\t\t\t\t\tcss: munged.css,\n\t\t\t\t\t\t\t\thead: result.head,\n\t\t\t\t\t\t\t\thtml: result.body\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, onrejected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn munged;\n\t};\n\n\t// @ts-expect-error this is present for SSR\n\tcomponent_constructor.render = _render;\n\n\t// @ts-ignore\n\treturn component_constructor;\n}\n\n/**\n * Runs the given function once immediately on the server, and works like `$effect.pre` on the client.\n *\n * @deprecated Use this only as a temporary solution to migrate your component code to Svelte 5.\n * @param {() => void | (() => void)} fn\n * @returns {void}\n */\nexport function run(fn) {\n\tfn();\n}\n\nconst noop = () => {};\n\n// event stuff, no need to worry about it for SSR but needs to be there or it will crash\nexport {\n\tnoop as handlers,\n\tnoop as createBubbler,\n\tnoop as once,\n\tnoop as preventDefault,\n\tnoop as self,\n\tnoop as stopImmediatePropagation,\n\tnoop as stopPropagation,\n\tnoop as trusted,\n\tnoop as passive,\n\tnoop as nonpassive\n};\n","<!-- This file is generated by @sveltejs/kit — do not edit it! -->\n<svelte:options runes={true} />\n<script>\n\timport { setContext, onMount, tick } from 'svelte';\n\timport { browser } from '$app/environment';\n\n\t// stores\n\tlet { stores, page, constructors, components = [], form, data_0 = null, data_1 = null, data_2 = null } = $props();\n\n\tif (!browser) {\n\t\t// svelte-ignore state_referenced_locally\n\t\tsetContext('__svelte__', stores);\n\t}\n\n\tif (browser) {\n\t\t$effect.pre(() => stores.page.set(page));\n\t} else {\n\t\t// svelte-ignore state_referenced_locally\n\t\tstores.page.set(page);\n\t}\n\t$effect(() => {\n\t\tstores;page;constructors;components;form;data_0;data_1;data_2;\n\t\tstores.page.notify();\n\t});\n\n\tlet mounted = $state(false);\n\tlet navigated = $state(false);\n\tlet title = $state(null);\n\n\tonMount(() => {\n\t\tconst unsubscribe = stores.page.subscribe(() => {\n\t\t\tif (mounted) {\n\t\t\t\tnavigated = true;\n\t\t\t\ttick().then(() => {\n\t\t\t\t\ttitle = document.title || 'untitled page';\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tmounted = true;\n\t\treturn unsubscribe;\n\t});\n\n\tconst Pyramid_2=$derived(constructors[2])\n</script>\n\n{#if constructors[1]}\n\t{@const Pyramid_0 = constructors[0]}\n\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t<Pyramid_0 bind:this={components[0]} data={data_0} {form} params={page.params}>\n\t\t\t\t\t\t\t\t{#if constructors[2]}\n\t\t\t\t\t\t\t\t\t{@const Pyramid_1 = constructors[1]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Pyramid_1 bind:this={components[1]} data={data_1} {form} params={page.params}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Pyramid_2 bind:this={components[2]} data={data_2} {form} params={page.params} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Pyramid_1>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{@const Pyramid_1 = constructors[1]}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore binding_property_non_reactive -->\n\t\t\t\t\t\t\t\t\t<Pyramid_1 bind:this={components[1]} data={data_1} {form} params={page.params} />\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</Pyramid_0>\n\n{:else}\n\t{@const Pyramid_0 = constructors[0]}\n\t<!-- svelte-ignore binding_property_non_reactive -->\n\t<Pyramid_0 bind:this={components[0]} data={data_0} {form} params={page.params} />\n\n{/if}\n\n{#if mounted}\n\t<div id=\"svelte-announcer\" aria-live=\"assertive\" aria-atomic=\"true\" style=\"position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px\">\n\t\t{#if navigated}\n\t\t\t{title}\n\t\t{/if}\n\t</div>\n{/if}","/**\n * @param {Record<string, string>} env\n * @param {string} allowed\n * @param {string} disallowed\n * @returns {Record<string, string>}\n */\nexport function filter_env(env, allowed, disallowed) {\n\treturn Object.fromEntries(\n\t\tObject.entries(env).filter(\n\t\t\t([k]) => k.startsWith(allowed) && (disallowed === '' || !k.startsWith(disallowed))\n\t\t)\n\t);\n}\n","/** @import { PromiseWithResolvers } from '../../utils/promise.js' */\nimport { with_resolvers } from '../../utils/promise.js';\nimport { IN_WEBCONTAINER } from './constants.js';\nimport { respond } from './respond.js';\nimport { set_private_env, set_public_env } from '../shared-server.js';\nimport { options, get_hooks } from '__SERVER__/internal.js';\nimport { DEV } from 'esm-env';\nimport { filter_env } from '../../utils/env.js';\nimport { format_server_error } from './utils.js';\nimport { set_read_implementation, set_manifest } from '__sveltekit/server';\nimport { set_app } from './app.js';\n\n/** @type {Promise<any>} */\nlet init_promise;\n\n/** @type {Promise<void> | null} */\nlet current = null;\n\nexport class Server {\n\t/** @type {import('types').SSROptions} */\n\t#options;\n\n\t/** @type {import('@sveltejs/kit').SSRManifest} */\n\t#manifest;\n\n\t/** @param {import('@sveltejs/kit').SSRManifest} manifest */\n\tconstructor(manifest) {\n\t\t/** @type {import('types').SSROptions} */\n\t\tthis.#options = options;\n\t\tthis.#manifest = manifest;\n\n\t\t// Since AsyncLocalStorage is not working in webcontainers, we don't reset `sync_store`\n\t\t// in `src/exports/internal/event.js` and handle only one request at a time.\n\t\tif (IN_WEBCONTAINER) {\n\t\t\tconst respond = this.respond.bind(this);\n\n\t\t\t/** @type {typeof respond} */\n\t\t\tthis.respond = async (...args) => {\n\t\t\t\tconst { promise, resolve } = /** @type {PromiseWithResolvers<void>} */ (with_resolvers());\n\n\t\t\t\tconst previous = current;\n\t\t\t\tcurrent = promise;\n\n\t\t\t\tawait previous;\n\t\t\t\treturn respond(...args).finally(resolve);\n\t\t\t};\n\t\t}\n\n\t\tset_manifest(manifest);\n\t}\n\n\t/**\n\t * @param {import('@sveltejs/kit').ServerInitOptions} opts\n\t */\n\tasync init({ env, read }) {\n\t\t// Take care: Some adapters may have to call `Server.init` per-request to set env vars,\n\t\t// so anything that shouldn't be rerun should be wrapped in an `if` block to make sure it hasn't\n\t\t// been done already.\n\n\t\t// set env, in case it's used in initialisation\n\t\tconst { env_public_prefix, env_private_prefix } = this.#options;\n\n\t\tset_private_env(filter_env(env, env_private_prefix, env_public_prefix));\n\t\tset_public_env(filter_env(env, env_public_prefix, env_private_prefix));\n\n\t\tif (read) {\n\t\t\t// Wrap the read function to handle MaybePromise<ReadableStream>\n\t\t\t// and ensure the public API stays synchronous\n\t\t\t/** @param {string} file */\n\t\t\tconst wrapped_read = (file) => {\n\t\t\t\tconst result = read(file);\n\t\t\t\tif (result instanceof ReadableStream) {\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn new ReadableStream({\n\t\t\t\t\t\tasync start(controller) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst stream = await Promise.resolve(result);\n\t\t\t\t\t\t\t\tif (!stream) {\n\t\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst reader = stream.getReader();\n\n\t\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\t\t\t\t\tif (done) break;\n\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tcontroller.error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tset_read_implementation(wrapped_read);\n\t\t}\n\n\t\t// During DEV and for some adapters this function might be called in quick succession,\n\t\t// so we need to make sure we're not invoking this logic (most notably the init hook) multiple times\n\t\tawait (init_promise ??= (async () => {\n\t\t\ttry {\n\t\t\t\tconst module = await get_hooks();\n\n\t\t\t\tthis.#options.hooks = {\n\t\t\t\t\thandle: module.handle || (({ event, resolve }) => resolve(event)),\n\t\t\t\t\thandleError:\n\t\t\t\t\t\tmodule.handleError ||\n\t\t\t\t\t\t(({ status, error, event }) => {\n\t\t\t\t\t\t\tconst error_message = format_server_error(\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\t/** @type {Error} */ (error),\n\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconsole.error(error_message);\n\t\t\t\t\t\t}),\n\t\t\t\t\thandleFetch: module.handleFetch || (({ request, fetch }) => fetch(request)),\n\t\t\t\t\thandleValidationError:\n\t\t\t\t\t\tmodule.handleValidationError ||\n\t\t\t\t\t\t(({ issues }) => {\n\t\t\t\t\t\t\tconsole.error('Remote function schema validation failed:', issues);\n\t\t\t\t\t\t\treturn { message: 'Bad Request' };\n\t\t\t\t\t\t}),\n\t\t\t\t\treroute: module.reroute || (() => {}),\n\t\t\t\t\ttransport: module.transport || {}\n\t\t\t\t};\n\n\t\t\t\tset_app({\n\t\t\t\t\tdecoders: module.transport\n\t\t\t\t\t\t? Object.fromEntries(Object.entries(module.transport).map(([k, v]) => [k, v.decode]))\n\t\t\t\t\t\t: {}\n\t\t\t\t});\n\n\t\t\t\tif (module.init) {\n\t\t\t\t\tawait module.init();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tthis.#options.hooks = {\n\t\t\t\t\t\thandle: () => {\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t},\n\t\t\t\t\t\thandleError: ({ error }) => console.error(error),\n\t\t\t\t\t\thandleFetch: ({ request, fetch }) => fetch(request),\n\t\t\t\t\t\thandleValidationError: () => {\n\t\t\t\t\t\t\treturn { message: 'Bad Request' };\n\t\t\t\t\t\t},\n\t\t\t\t\t\treroute: () => {},\n\t\t\t\t\t\ttransport: {}\n\t\t\t\t\t};\n\n\t\t\t\t\tset_app({\n\t\t\t\t\t\tdecoders: {}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t})());\n\t}\n\n\t/**\n\t * @param {Request} request\n\t * @param {import('types').RequestOptions} options\n\t */\n\tasync respond(request, options) {\n\t\treturn respond(request, this.#options, this.#manifest, {\n\t\t\t...options,\n\t\t\terror: false,\n\t\t\tdepth: 0\n\t\t});\n\t}\n}\n","/** @import { RequestEvent } from '@sveltejs/kit' */\n/** @import { ServerHooks, MaybePromise, RequestState, RemoteInfo, RequestStore } from 'types' */\nimport { parse } from 'devalue';\nimport { error } from '@sveltejs/kit';\nimport { with_request_store, get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify_remote_arg } from '../../../shared.js';\n\n/**\n * @param {any} validate_or_fn\n * @param {(arg?: any) => any} [maybe_fn]\n * @returns {(arg?: any) => MaybePromise<any>}\n */\nexport function create_validator(validate_or_fn, maybe_fn) {\n\t// prevent functions without validators being called with arguments\n\tif (!maybe_fn) {\n\t\treturn (arg) => {\n\t\t\tif (arg !== undefined) {\n\t\t\t\terror(400, 'Bad Request');\n\t\t\t}\n\t\t};\n\t}\n\n\t// if 'unchecked', pass input through without validating\n\tif (validate_or_fn === 'unchecked') {\n\t\treturn (arg) => arg;\n\t}\n\n\t// use https://standardschema.dev validator if provided\n\tif ('~standard' in validate_or_fn) {\n\t\treturn async (arg) => {\n\t\t\t// Get event before async validation to ensure it's available in server environments without AsyncLocalStorage, too\n\t\t\tconst { event, state } = get_request_store();\n\t\t\t// access property and call method in one go to preserve potential this context\n\t\t\tconst result = await validate_or_fn['~standard'].validate(arg);\n\n\t\t\t// if the `issues` field exists, the validation failed\n\t\t\tif (result.issues) {\n\t\t\t\terror(\n\t\t\t\t\t400,\n\t\t\t\t\tawait state.handleValidationError({\n\t\t\t\t\t\tissues: result.issues,\n\t\t\t\t\t\tevent\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result.value;\n\t\t};\n\t}\n\n\tthrow new Error(\n\t\t'Invalid validator passed to remote function. Expected \"unchecked\" or a Standard Schema (https://standardschema.dev)'\n\t);\n}\n\n/**\n * In case of a single remote function call, just returns the result.\n *\n * In case of a full page reload, returns the response for a remote function call,\n * either from the cache or by invoking the function.\n * Also saves an uneval'ed version of the result for later HTML inlining for hydration.\n *\n * @template {MaybePromise<any>} T\n * @param {RemoteInfo} info\n * @param {any} arg\n * @param {RequestState} state\n * @param {() => Promise<T>} get_result\n * @returns {Promise<T>}\n */\nexport async function get_response(info, arg, state, get_result) {\n\t// wait a beat, in case `myQuery().set(...)` or `myQuery().refresh()` is immediately called\n\t// eslint-disable-next-line @typescript-eslint/await-thenable\n\tawait 0;\n\n\tconst cache = get_cache(info, state);\n\n\treturn (cache[stringify_remote_arg(arg, state.transport)] ??= get_result());\n}\n\n/**\n * @param {any} data\n * @param {ServerHooks['transport']} transport\n */\nexport function parse_remote_response(data, transport) {\n\t/** @type {Record<string, any>} */\n\tconst revivers = {};\n\tfor (const key in transport) {\n\t\trevivers[key] = transport[key].decode;\n\t}\n\n\treturn parse(data, revivers);\n}\n\n/**\n * Like `with_event` but removes things from `event` you cannot see/call in remote functions, such as `setHeaders`.\n * @template T\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {boolean} allow_cookies\n * @param {any} arg\n * @param {(arg: any) => any} validate\n * @param {(arg?: any) => T} fn\n */\nexport async function run_remote_function(event, state, allow_cookies, arg, validate, fn) {\n\t/** @type {RequestStore} */\n\tconst store = {\n\t\tevent: {\n\t\t\t...event,\n\t\t\tsetHeaders: () => {\n\t\t\t\tthrow new Error('setHeaders is not allowed in remote functions');\n\t\t\t},\n\t\t\tcookies: {\n\t\t\t\t...event.cookies,\n\t\t\t\tset: (name, value, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot set cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies set in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.set(name, value, opts);\n\t\t\t\t},\n\t\t\t\tdelete: (name, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot delete cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies deleted in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.delete(name, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstate: {\n\t\t\t...state,\n\t\t\tis_in_remote_function: true\n\t\t}\n\t};\n\n\t// In two parts, each with_event, so that runtimes without async local storage can still get the event at the start of the function\n\tconst validated = await with_request_store(store, () => validate(arg));\n\treturn with_request_store(store, () => fn(validated));\n}\n\n/**\n * @param {RemoteInfo} info\n * @param {RequestState} state\n */\nexport function get_cache(info, state = get_request_store().state) {\n\tlet cache = state.remote_data?.get(info);\n\n\tif (cache === undefined) {\n\t\tcache = {};\n\t\t(state.remote_data ??= new Map()).set(info, cache);\n\t}\n\n\treturn cache;\n}\n","/** @import { RemoteCommand } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_validator, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => Output} fn\n * @returns {RemoteCommand<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => Output} fn\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => Output} fn\n * @returns {RemoteCommand<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(arg?: Input) => Output} [maybe_fn]\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function command(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'command', id: '', name: '' };\n\n\t/** @type {RemoteCommand<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tconst { event, state } = get_request_store();\n\n\t\tif (state.is_endpoint_request) {\n\t\t\tif (!['POST', 'PUT', 'PATCH', 'DELETE'].includes(event.request.method)) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) from a ${event.request.method} handler`\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (!event.isRemoteRequest) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) during server-side rendering`\n\t\t\t);\n\t\t}\n\n\t\tstate.refreshes ??= {};\n\n\t\tconst promise = Promise.resolve(run_remote_function(event, state, true, arg, validate, fn));\n\n\t\t// @ts-expect-error\n\t\tpromise.updates = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}(...).updates(...)' on the server`);\n\t\t};\n\n\t\treturn /** @type {ReturnType<RemoteCommand<Input, Output>>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\t// On the server, pending is always 0\n\tObject.defineProperty(wrapper, 'pending', {\n\t\tget: () => 0\n\t});\n\n\treturn wrapper;\n}\n","/** @import { RemoteFormInput, RemoteForm, InvalidField } from '@sveltejs/kit' */\n/** @import { InternalRemoteFormIssue, MaybePromise, RemoteInfo } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { DEV } from 'esm-env';\nimport {\n\tcreate_field_proxy,\n\tset_nested_value,\n\tthrow_on_old_property_access,\n\tdeep_set,\n\tnormalize_issue,\n\tflatten_issues\n} from '../../../form-utils.js';\nimport { get_cache, run_remote_function } from './shared.js';\nimport { ValidationError } from '@sveltejs/kit/internal';\n\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @returns {RemoteForm<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {RemoteFormInput} Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(data: Input, issue: InvalidField<Input>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {StandardSchemaV1<RemoteFormInput, Record<string, any>>} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(data: StandardSchemaV1.InferOutput<Schema>, issue: InvalidField<StandardSchemaV1.InferInput<Schema>>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template {RemoteFormInput} Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(data_or_issue: any, issue?: any) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\n// @ts-ignore we don't want to prefix `fn` with an underscore, as that will be user-visible\nexport function form(validate_or_fn, maybe_fn) {\n\t/** @type {any} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {StandardSchemaV1 | null} */\n\tconst schema =\n\t\t!maybe_fn || validate_or_fn === 'unchecked' ? null : /** @type {any} */ (validate_or_fn);\n\n\t/**\n\t * @param {string | number | boolean} [key]\n\t */\n\tfunction create_instance(key) {\n\t\t/** @type {RemoteForm<Input, Output>} */\n\t\tconst instance = {};\n\n\t\tinstance.method = 'POST';\n\n\t\tObject.defineProperty(instance, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { action: instance.action, method: instance.method };\n\t\t\t}\n\t\t});\n\n\t\tconst button_props = {\n\t\t\ttype: 'submit',\n\t\t\tonclick: () => {}\n\t\t};\n\n\t\tObject.defineProperty(button_props, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { type: 'submit', formaction: instance.buttonProps.formaction, onclick: () => {} };\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(instance, 'buttonProps', {\n\t\t\tvalue: button_props\n\t\t});\n\n\t\t/** @type {RemoteInfo} */\n\t\tconst __ = {\n\t\t\ttype: 'form',\n\t\t\tname: '',\n\t\t\tid: '',\n\t\t\tfn: async (data, meta, form_data) => {\n\t\t\t\t// TODO 3.0 remove this warning\n\t\t\t\tif (DEV && !data) {\n\t\t\t\t\tconst error = () => {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Remote form functions no longer get passed a FormData object. ' +\n\t\t\t\t\t\t\t\t\"`form` now has the same signature as `query` or `command`, i.e. it expects to be invoked like `form(schema, callback)` or `form('unchecked', callback)`. \" +\n\t\t\t\t\t\t\t\t'The payload of the callback function is now a POJO instead of a FormData object. See https://kit.svelte.dev/docs/remote-functions#form for details.'\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t\tdata = {};\n\t\t\t\t\tfor (const key of [\n\t\t\t\t\t\t'append',\n\t\t\t\t\t\t'delete',\n\t\t\t\t\t\t'entries',\n\t\t\t\t\t\t'forEach',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t'getAll',\n\t\t\t\t\t\t'has',\n\t\t\t\t\t\t'keys',\n\t\t\t\t\t\t'set',\n\t\t\t\t\t\t'values'\n\t\t\t\t\t]) {\n\t\t\t\t\t\tObject.defineProperty(data, key, { get: error });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/** @type {{ submission: true, input?: Record<string, any>, issues?: InternalRemoteFormIssue[], result: Output }} */\n\t\t\t\tconst output = {};\n\n\t\t\t\t// make it possible to differentiate between user submission and programmatic `field.set(...)` updates\n\t\t\t\toutput.submission = true;\n\n\t\t\t\tconst { event, state } = get_request_store();\n\t\t\t\tconst validated = await schema?.['~standard'].validate(data);\n\n\t\t\t\tif (meta.validate_only) {\n\t\t\t\t\treturn validated?.issues?.map((issue) => normalize_issue(issue, true)) ?? [];\n\t\t\t\t}\n\n\t\t\t\tif (validated?.issues !== undefined) {\n\t\t\t\t\thandle_issues(output, validated.issues, form_data);\n\t\t\t\t} else {\n\t\t\t\t\tif (validated !== undefined) {\n\t\t\t\t\t\tdata = validated.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.refreshes ??= {};\n\n\t\t\t\t\tconst issue = create_issues();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\toutput.result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t(d) => d,\n\t\t\t\t\t\t\t(data) => (!maybe_fn ? fn() : fn(data, issue))\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e instanceof ValidationError) {\n\t\t\t\t\t\t\thandle_issues(output, e.issues, form_data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We don't need to care about args or deduplicating calls, because uneval results are only relevant in full page reloads\n\t\t\t\t// where only one form submission is active at the same time\n\t\t\t\tif (!event.isRemoteRequest) {\n\t\t\t\t\tget_cache(__, state)[''] ??= output;\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\t\t};\n\n\t\tObject.defineProperty(instance, '__', { value: __ });\n\n\t\tObject.defineProperty(instance, 'action', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(button_props, 'formaction', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(instance, 'fields', {\n\t\t\tget() {\n\t\t\t\tconst data = get_cache(__)?.[''];\n\t\t\t\tconst issues = flatten_issues(data?.issues ?? []);\n\n\t\t\t\treturn create_field_proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t() => data?.input ?? {},\n\t\t\t\t\t(path, value) => {\n\t\t\t\t\t\tif (data?.submission) {\n\t\t\t\t\t\t\t// don't override a submission\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst input =\n\t\t\t\t\t\t\tpath.length === 0 ? value : deep_set(data?.input ?? {}, path.map(String), value);\n\n\t\t\t\t\t\t(get_cache(__)[''] ??= {}).input = input;\n\t\t\t\t\t},\n\t\t\t\t\t() => issues\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// TODO 3.0 remove\n\t\tif (DEV) {\n\t\t\tthrow_on_old_property_access(instance);\n\t\t}\n\n\t\tObject.defineProperty(instance, 'result', {\n\t\t\tget() {\n\t\t\t\ttry {\n\t\t\t\t\treturn get_cache(__)?.['']?.result;\n\t\t\t\t} catch {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// On the server, pending is always 0\n\t\tObject.defineProperty(instance, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\t// On the server, buttonProps.pending is always 0\n\t\tObject.defineProperty(button_props, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\tObject.defineProperty(instance, 'preflight', {\n\t\t\t// preflight is a noop on the server\n\t\t\tvalue: () => instance\n\t\t});\n\n\t\tObject.defineProperty(instance, 'validate', {\n\t\t\tvalue: () => {\n\t\t\t\tthrow new Error('Cannot call validate() on the server');\n\t\t\t}\n\t\t});\n\n\t\tif (key == undefined) {\n\t\t\tObject.defineProperty(instance, 'for', {\n\t\t\t\t/** @type {RemoteForm<any, any>['for']} */\n\t\t\t\tvalue: (key) => {\n\t\t\t\t\tconst { state } = get_request_store();\n\t\t\t\t\tconst cache_key = __.id + '|' + JSON.stringify(key);\n\t\t\t\t\tlet instance = (state.form_instances ??= new Map()).get(cache_key);\n\n\t\t\t\t\tif (!instance) {\n\t\t\t\t\t\tinstance = create_instance(key);\n\t\t\t\t\t\tinstance.__.id = `${__.id}/${encodeURIComponent(JSON.stringify(key))}`;\n\t\t\t\t\t\tinstance.__.name = __.name;\n\n\t\t\t\t\t\tstate.form_instances.set(cache_key, instance);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn instance;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\treturn create_instance();\n}\n\n/**\n * @param {{ issues?: InternalRemoteFormIssue[], input?: Record<string, any>, result: any }} output\n * @param {readonly StandardSchemaV1.Issue[]} issues\n * @param {FormData | null} form_data - null if the form is progressively enhanced\n */\nfunction handle_issues(output, issues, form_data) {\n\toutput.issues = issues.map((issue) => normalize_issue(issue, true));\n\n\t// if it was a progressively-enhanced submission, we don't need\n\t// to return the input — it's already there\n\tif (form_data) {\n\t\toutput.input = {};\n\n\t\tfor (let key of form_data.keys()) {\n\t\t\t// redact sensitive fields\n\t\t\tif (/^[.\\]]?_/.test(key)) continue;\n\n\t\t\tconst is_array = key.endsWith('[]');\n\t\t\tconst values = form_data.getAll(key).filter((value) => typeof value === 'string');\n\n\t\t\tif (is_array) key = key.slice(0, -2);\n\n\t\t\tset_nested_value(\n\t\t\t\t/** @type {Record<string, any>} */ (output.input),\n\t\t\t\tkey,\n\t\t\t\tis_array ? values : values[0]\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Creates an invalid function that can be used to imperatively mark form fields as invalid\n * @returns {InvalidField<any>}\n */\nfunction create_issues() {\n\treturn /** @type {InvalidField<any>} */ (\n\t\tnew Proxy(\n\t\t\t/** @param {string} message */\n\t\t\t(message) => {\n\t\t\t\t// TODO 3.0 remove\n\t\t\t\tif (typeof message !== 'string') {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'`invalid` should now be imported from `@sveltejs/kit` to throw validation issues. ' +\n\t\t\t\t\t\t\t\"The second parameter provided to the form function (renamed to `issue`) is still used to construct issues, e.g. `invalid(issue.field('message'))`. \" +\n\t\t\t\t\t\t\t'For more info see https://github.com/sveltejs/kit/pulls/14768'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn create_issue(message);\n\t\t\t},\n\t\t\t{\n\t\t\t\tget(target, prop) {\n\t\t\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t\t\treturn create_issue_proxy(prop, []);\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t);\n\n\t/**\n\t * @param {string} message\n\t * @param {(string | number)[]} path\n\t * @returns {StandardSchemaV1.Issue}\n\t */\n\tfunction create_issue(message, path = []) {\n\t\treturn {\n\t\t\tmessage,\n\t\t\tpath\n\t\t};\n\t}\n\n\t/**\n\t * Creates a proxy that builds up a path and returns a function to create an issue\n\t * @param {string | number} key\n\t * @param {(string | number)[]} path\n\t */\n\tfunction create_issue_proxy(key, path) {\n\t\tconst new_path = [...path, key];\n\n\t\t/**\n\t\t * @param {string} message\n\t\t * @returns {StandardSchemaV1.Issue}\n\t\t */\n\t\tconst issue_func = (message) => create_issue(message, new_path);\n\n\t\treturn new Proxy(issue_func, {\n\t\t\tget(target, prop) {\n\t\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t\t// Handle array access like invalid.items[0]\n\t\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\t\treturn create_issue_proxy(parseInt(prop, 10), new_path);\n\t\t\t\t}\n\n\t\t\t\t// Handle property access like invalid.field.nested\n\t\t\t\treturn create_issue_proxy(prop, new_path);\n\t\t\t}\n\t\t});\n\t}\n}\n","/** @import { RemoteResource, RemotePrerenderFunction } from '@sveltejs/kit' */\n/** @import { RemotePrerenderInputsGenerator, RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { error, json } from '@sveltejs/kit';\nimport { DEV } from 'esm-env';\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify, stringify_remote_arg } from '../../../shared.js';\nimport { app_dir, base } from '$app/paths/internal/server';\nimport {\n\tcreate_validator,\n\tget_cache,\n\tget_response,\n\tparse_remote_response,\n\trun_remote_function\n} from './shared.js';\n\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<void>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<StandardSchemaV1.InferInput<Schema>>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {any} [fn_or_options]\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [maybe_options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function prerender(validate_or_fn, fn_or_options, maybe_options) {\n\tconst maybe_fn = typeof fn_or_options === 'function' ? fn_or_options : undefined;\n\n\t/** @type {typeof maybe_options} */\n\tconst options = maybe_options ?? (maybe_fn ? undefined : fn_or_options);\n\n\t/** @type {(arg?: Input) => MaybePromise<Output>} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = {\n\t\ttype: 'prerender',\n\t\tid: '',\n\t\tname: '',\n\t\thas_arg: !!maybe_fn,\n\t\tinputs: options?.inputs,\n\t\tdynamic: options?.dynamic\n\t};\n\n\t/** @type {RemotePrerenderFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\t/** @type {Promise<Output> & Partial<RemoteResource<Output>>} */\n\t\tconst promise = (async () => {\n\t\t\tconst { event, state } = get_request_store();\n\t\t\tconst payload = stringify_remote_arg(arg, state.transport);\n\t\t\tconst id = __.id;\n\t\t\tconst url = `${base}/${app_dir}/remote/${id}${payload ? `/${payload}` : ''}`;\n\n\t\t\tif (!state.prerendering && !DEV && !event.isRemoteRequest) {\n\t\t\t\ttry {\n\t\t\t\t\treturn await get_response(__, arg, state, async () => {\n\t\t\t\t\t\tconst key = stringify_remote_arg(arg, state.transport);\n\t\t\t\t\t\tconst cache = get_cache(__, state);\n\n\t\t\t\t\t\t// TODO adapters can provide prerendered data more efficiently than\n\t\t\t\t\t\t// fetching from the public internet\n\t\t\t\t\t\tconst promise = (cache[key] ??= fetch(new URL(url, event.url.origin).href).then(\n\t\t\t\t\t\t\tasync (response) => {\n\t\t\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\t\t\tthrow new Error('Prerendered response not found');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst prerendered = await response.json();\n\n\t\t\t\t\t\t\t\tif (prerendered.type === 'error') {\n\t\t\t\t\t\t\t\t\terror(prerendered.status, prerendered.error);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn prerendered.result;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t));\n\n\t\t\t\t\t\treturn parse_remote_response(await promise, state.transport);\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\t// not available prerendered, fallback to normal function\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.prerendering?.remote_responses.has(url)) {\n\t\t\t\treturn /** @type {Promise<any>} */ (state.prerendering.remote_responses.get(url));\n\t\t\t}\n\n\t\t\tconst promise = get_response(__, arg, state, () =>\n\t\t\t\trun_remote_function(event, state, false, arg, validate, fn)\n\t\t\t);\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tstate.prerendering.remote_responses.set(url, promise);\n\t\t\t}\n\n\t\t\tconst result = await promise;\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tconst body = { type: 'result', result: stringify(result, state.transport) };\n\t\t\t\tstate.prerendering.dependencies.set(url, {\n\t\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\t\tresponse: json(body)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// TODO this is missing error/loading/current/status\n\t\t\treturn result;\n\t\t})();\n\n\t\tpromise.catch(() => {});\n\n\t\treturn /** @type {RemoteResource<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n","/** @import { RemoteQuery, RemoteQueryFunction } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_remote_key, stringify_remote_arg } from '../../../shared.js';\nimport { prerendering } from '__sveltekit/environment';\nimport { create_validator, get_cache, get_response, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function query(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'query', id: '', name: '' };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\tconst get_remote_function_result = () =>\n\t\t\trun_remote_function(event, state, false, arg, validate, fn);\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, get_remote_function_result);\n\n\t\tpromise.catch(() => {});\n\n\t\tpromise.set = (value) => update_refresh_value(get_refresh_context(__, 'set', arg), value);\n\n\t\tpromise.refresh = () => {\n\t\t\tconst refresh_context = get_refresh_context(__, 'refresh', arg);\n\t\t\tconst is_immediate_refresh = !refresh_context.cache[refresh_context.cache_key];\n\t\t\tconst value = is_immediate_refresh ? promise : get_remote_function_result();\n\t\t\treturn update_refresh_value(refresh_context, value, is_immediate_refresh);\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(args: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(args: StandardSchemaV1.InferOutput<Schema>[]) => MaybePromise<(arg: StandardSchemaV1.InferOutput<Schema>, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.35\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/*@__NO_SIDE_EFFECTS__*/\nfunction batch(validate_or_fn, maybe_fn) {\n\t/** @type {(args?: Input[]) => (arg: Input, idx: number) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo & { type: 'query_batch' }} */\n\tconst __ = {\n\t\ttype: 'query_batch',\n\t\tid: '',\n\t\tname: '',\n\t\trun: (args) => {\n\t\t\tconst { event, state } = get_request_store();\n\n\t\t\treturn run_remote_function(\n\t\t\t\tevent,\n\t\t\t\tstate,\n\t\t\t\tfalse,\n\t\t\t\targs,\n\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\tfn\n\t\t\t);\n\t\t}\n\t};\n\n\t/** @type {{ args: any[], resolvers: Array<{resolve: (value: any) => void, reject: (error: any) => void}> }} */\n\tlet batching = { args: [], resolvers: [] };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query.batch '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\tconst get_remote_function_result = () => {\n\t\t\t// Collect all the calls to the same query in the same macrotask,\n\t\t\t// then execute them as one backend request.\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// We don't need to deduplicate args here, because get_response already caches/reuses identical calls\n\t\t\t\tbatching.args.push(arg);\n\t\t\t\tbatching.resolvers.push({ resolve, reject });\n\n\t\t\t\tif (batching.args.length > 1) return;\n\n\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\tconst batched = batching;\n\t\t\t\t\tbatching = { args: [], resolvers: [] };\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst get_result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tbatched.args,\n\t\t\t\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\t\t\t\tfn\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let i = 0; i < batched.resolvers.length; i++) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].resolve(get_result(batched.args[i], i));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].reject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tfor (const resolver of batched.resolvers) {\n\t\t\t\t\t\t\tresolver.reject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t};\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, get_remote_function_result);\n\n\t\tpromise.catch(() => {});\n\n\t\tpromise.set = (value) => update_refresh_value(get_refresh_context(__, 'set', arg), value);\n\n\t\tpromise.refresh = () => {\n\t\t\tconst refresh_context = get_refresh_context(__, 'refresh', arg);\n\t\t\tconst is_immediate_refresh = !refresh_context.cache[refresh_context.cache_key];\n\t\t\tconst value = is_immediate_refresh ? promise : get_remote_function_result();\n\t\t\treturn update_refresh_value(refresh_context, value, is_immediate_refresh);\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n// Add batch as a property to the query function\nObject.defineProperty(query, 'batch', { value: batch, enumerable: true });\n\n/**\n * @param {RemoteInfo} __\n * @param {'set' | 'refresh'} action\n * @param {any} [arg]\n * @returns {{ __: RemoteInfo; state: any; refreshes: Record<string, Promise<any>>; cache: Record<string, Promise<any>>; refreshes_key: string; cache_key: string }}\n */\nfunction get_refresh_context(__, action, arg) {\n\tconst { state } = get_request_store();\n\tconst { refreshes } = state;\n\n\tif (!refreshes) {\n\t\tconst name = __.type === 'query_batch' ? `query.batch '${__.name}'` : `query '${__.name}'`;\n\t\tthrow new Error(\n\t\t\t`Cannot call ${action} on ${name} because it is not executed in the context of a command/form remote function`\n\t\t);\n\t}\n\n\tconst cache = get_cache(__, state);\n\tconst cache_key = stringify_remote_arg(arg, state.transport);\n\tconst refreshes_key = create_remote_key(__.id, cache_key);\n\n\treturn { __, state, refreshes, refreshes_key, cache, cache_key };\n}\n\n/**\n * @param {{ __: RemoteInfo; refreshes: Record<string, Promise<any>>; cache: Record<string, Promise<any>>; refreshes_key: string; cache_key: string }} context\n * @param {any} value\n * @param {boolean} [is_immediate_refresh=false]\n * @returns {Promise<void>}\n */\nfunction update_refresh_value(\n\t{ __, refreshes, refreshes_key, cache, cache_key },\n\tvalue,\n\tis_immediate_refresh = false\n) {\n\tconst promise = Promise.resolve(value);\n\n\tif (!is_immediate_refresh) {\n\t\tcache[cache_key] = promise;\n\t}\n\n\tif (__.id) {\n\t\trefreshes[refreshes_key] = promise;\n\t}\n\n\treturn promise.then(() => {});\n}\n","import { getContext } from 'svelte';\nimport { BROWSER, DEV } from 'esm-env';\nimport { stores as browser_stores } from '../client/client.js';\n\n/**\n * A function that returns all of the contextual stores. On the server, this must be called during component initialization.\n * Only use this if you need to defer store subscription until after the component has mounted, for some reason.\n *\n * @deprecated Use `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n */\nexport const getStores = () => {\n\tconst stores = BROWSER ? browser_stores : getContext('__svelte__');\n\n\treturn {\n\t\t/** @type {typeof page} */\n\t\tpage: {\n\t\t\tsubscribe: stores.page.subscribe\n\t\t},\n\t\t/** @type {typeof navigating} */\n\t\tnavigating: {\n\t\t\tsubscribe: stores.navigating.subscribe\n\t\t},\n\t\t/** @type {typeof updated} */\n\t\tupdated: stores.updated\n\t};\n};\n\n/**\n * A readable store whose value contains page data.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `page` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Page>}\n */\nexport const page = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('page') : getStores().page;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store.\n * When navigating starts, its value is a `Navigation` object with `from`, `to`, `type` and (if `type === 'popstate'`) `delta` properties.\n * When navigating finishes, its value reverts to `null`.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `navigating` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Navigation | null>}\n */\nexport const navigating = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('navigating') : getStores().navigating;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store whose initial value is `false`. If [`version.pollInterval`](https://svelte.dev/docs/kit/configuration#version) is a non-zero value, SvelteKit will poll for new versions of the app and update the store value to `true` when it detects one. `updated.check()` will force an immediate check, regardless of polling.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `updated` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<boolean> & { check(): Promise<boolean> }}\n */\nexport const updated = {\n\tsubscribe(fn) {\n\t\tconst store = DEV ? get_store('updated') : getStores().updated;\n\n\t\tif (BROWSER) {\n\t\t\tupdated.check = store.check;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tcheck: () => {\n\t\tthrow new Error(\n\t\t\tBROWSER\n\t\t\t\t? 'Cannot check updated store before subscribing'\n\t\t\t\t: 'Can only check updated store in browser'\n\t\t);\n\t}\n};\n\n/**\n * @template {keyof ReturnType<typeof getStores>} Name\n * @param {Name} name\n * @returns {ReturnType<typeof getStores>[Name]}\n */\nfunction get_store(name) {\n\ttry {\n\t\treturn getStores()[name];\n\t} catch {\n\t\tthrow new Error(\n\t\t\t`Cannot subscribe to '${name}' store on the server outside of a Svelte component, as it is bound to the current request via component context. This prevents state from leaking between users.` +\n\t\t\t\t'For more information, see https://svelte.dev/docs/kit/state-management#avoid-shared-state-on-the-server'\n\t\t);\n\t}\n}\n"],"names":["with_resolvers","resolve","reject","promise","Promise","res","rej","NULL_BODY_STATUS","IN_WEBCONTAINER","globalThis","process","versions","webcontainer","BROWSER","base","assets","app_dir","initial","reset","set_assets","path","ENDPOINT_METHODS","PAGE_METHODS","escaped","DevalueError","Error","constructor","message","keys","super","this","name","join","is_primitive","thing","Object","object_proto_names","getOwnPropertyNames","prototype","sort","is_plain_object","proto","getPrototypeOf","get_type","toString","call","slice","get_escaped_char","char","charCodeAt","padStart","stringify_string","str","result","last_pos","len","length","i","replacement","enumerable_symbols","object","getOwnPropertySymbols","filter","symbol","getOwnPropertyDescriptor","enumerable","is_identifier","stringify_key","key","test","JSON","stringify","chars","unsafe_chars","reserved","uneval","value","replacer","counts","Map","custom","walk","has","set","get","forEach","push","pop","Array","from","stringify_primitive","buffer","names","type","valueOf","source","flags","getTime","members","map","v","tail","a","byteOffset","b","byteLength","m","exec","Uint8Array","obj","escape_unsafe_chars","safe_key","entry","num","get_name","size","params","statements","values","k","safe_prop","escape_unsafe_char","c","replace","String","encode64","arraybuffer","dv","DataView","binaryString","fromCharCode","getUint8","out","groupsOfSix","j","KEY_STRING","binaryToAscii","decode64","string","data","output","accumulatedBits","indexOf","asciiToBinary","ArrayBuffer","setUint8","parse","serialized","revivers","parsed","hydrate","isArray","hydrated","index","standalone","NaN","Infinity","reviver","Date","Set","add","RegExp","BigInt","create","typedArray","TypedArrayConstructor","subarray","temporalName","Temporal","url","URL","URLSearchParams","array","n","unflatten","reducers","stringified","indexes","fn","p","flatten","Number","isNaN","getDate","toISOString","started","text_encoder","TextEncoder","text_decoder","TextDecoder","base64_encode","bytes","Buffer","binary","btoa","set_nested_value","path_string","startsWith","parseFloat","deep_set","path_regex","split","Boolean","split_path","convert_formdata","is_array","endsWith","getAll","BINARY_FORM_CONTENT_TYPE","async","deserialize_binary_form","request","headers","form_data","formData","meta","body","reader","getReader","chunks","get_chunk","read","then","chunk","get_buffer","offset","start_chunk","chunk_index","chunk_start","chunk_end","cursor","header","header_view","data_length","getUint32","file_offsets_length","getUint16","data_buffer","file_offsets","files_start_offset","file_offsets_buffer","decode","devalue.parse","File","last_modified","Proxy","LazyFile","has_more","lastModified","webkitRelativePath","arrayBuffer","bind","stream","text","Response","start","end","contentType","Math","max","min","ReadableStream","controller","enqueue","close","pull","error","check_prototype_pollution","current","exists","inner","final_key","normalize_issue","issue","server","normalized","segment","create_field_proxy","target","get_input","set_input","get_issues","get_value","deep_get","prop","parseInt","build_path_string","newValue","all_issues","input_value","base_props","issues","defineProperties","multiple","checked","includes","files","DataTransfer","fileList","items","every","f","file","fileListLike","negotiate","accept","types","parts","accepted","match","subtype","q","min_priority","mimetype","priority","findIndex","part","is_form_content_type","trim","toLowerCase","is_content_type","normalize_error","get_status","HttpError","SvelteKitError","status","public_env","set_private_env","environment","set_public_env","escape_html_attr_dict","escape_html_dict","surrogates","escape_html_attr_regex","escape_html_regex","escape_html","is_attr","dict","method_not_allowed","mod","method","allow","allowed_methods","allowed","get_global_name","options","version_hash","static_error_page","page","templates","handle_fatal_error","event","state","err","handle_error_and_jsonify","isDataRequest","json","get_message","with_request_store","hooks","handleError","redirect_response","location","clarify_devalue_error","route","id","serialize_uses","node","uses","dependencies","search_params","parent","has_prerendered_path","manifest","pathname","_","prerendered_routes","at","get_node_type","node_id","filename","compact","arr","val","DATA_SUFFIX","HTML_DATA_SUFFIX","add_data_suffix","ROUTE_SUFFIX","add_resolution_suffix","noop_span","spanContext","noop_span_context","setAttribute","setAttributes","addEvent","setStatus","updateName","isRecording","recordException","addLink","addLinks","traceId","spanId","traceFlags","record_span","attributes","is_action_json_request","check_incorrect_fail_use","ActionFailure","action_json_redirect","redirect","action_json","init","check_named_default_separate","actions","default","call_action","event_state","param","searchParams","action","traced_event","merge_tracing","stringify_action_response","route_id","transport","encoders","fromEntries","entries","encode","try_serialize","devalue.stringify","e","create_async_iterator","resolved","returned","deferred","iterate","transform","x","Symbol","asyncIterator","next","done","server_data_serializer","promise_id","max_nodes","iterator","global","strings","set_max_nodes","add_node","payload","slash","devalue.uneval","catch","encoded","get_data","csp","open","script_needs_nonce","nonce","server_data_serializer_json","internal","protocol","search","hash","href","normalize_path","trailing_slash","decode_params","decodeURIComponent","make_trackable","callback","search_params_callback","allow_hash","tracked","defineProperty","Reflect","configurable","tracked_url_properties","property","for","depth","opts","inspect","allow_nodejs_console_log","disable_hash","disable_search","INVALIDATED_PARAM","TRAILING_SLASH_PARAM","stringify_remote_arg","json_string","replaceAll","parse_remote_arg","atob","base64_decode","create_remote_key","load_server_data","is_tracking","load","trailingSlash","prerendering","server_id","fetch","info","Request","depends","deps","dep","untrack","load_data","fetched","server_data_promise","resolve_opts","csr","server_data_node","universal","universal_id","create_universal_fetch","setHeaders","tracing","universal_fetch","input","cloned_body","clone","cloned_headers","Headers","response","same_origin","origin","dependency","teed_body","mode","statusText","acao","proxy","receiver","push_fetched","is_b64","status_number","request_body","stream_to_string","request_headers","response_body","tee","combined","Function","apply","arguments","lower","filterSerializedResponseHeaders","index_of","array_from","define_property","get_descriptor","object_prototype","array_prototype","get_prototype_of","is_extensible","isExtensible","noop","fallback","lazy","equals","safe_not_equal","safe_equals","BLOCK_EFFECT","BRANCH_EFFECT","ROOT_EFFECT","BOUNDARY_EFFECT","CONNECTED","CLEAN","DIRTY","MAYBE_DIRTY","INERT","DESTROYED","EFFECT_TRANSPARENT","EAGER_EFFECT","HEAD_EFFECT","EFFECT_PRESERVED","WAS_MARKED","REACTION_IS_UPDATING","ERROR_VALUE","STATE_SYMBOL","LEGACY_PROPS","STALE_REACTION","HYDRATION_START_ELSE","HYDRATION_ERROR","UNINITIALIZED","hydrate_node","hydrating","set_hydrating","set_hydrate_node","component_context","set_component_context","context","micro_tasks","run_micro_tasks","tasks","run_all","queue_micro_task","is_flushing_sync","queueMicrotask","flush_tasks","handle_error","effect","active_effect","active_reaction","invoke_error_boundary","batches","current_batch","batch_values","queued_root_effects","last_scheduled_effect","is_flushing","Batch","committed","previous","commit_callbacks","discard_callbacks","pending","blocking_pending","dirty_effects","maybe_dirty_effects","skipped_effects","is_fork","is_deferred","root_effects","effects","render_effects","block_effects","root","traverse_effect_tree","defer_effects","flush_queued_effects","first","is_branch","skip","is_pending","is_dirty","update_effect","child","clear_marked","set_signal_status","capture","activate","deactivate","flush","flush_effects","discard","clear","commit","previous_batch_values","is_earlier","dummy_target","batch","sources","others","s","prev_queued_root_effects","marked","mark_effects","delete","increment","blocking","decrement","revive","schedule_effect","oncommit","ondiscard","settled","ensure","task","was_updating_effect","is_updating_effect","flush_count","set_is_updating_effect","DEV","infinite_loop_guard","old_values","e.effect_update_depth_exceeded","eager_block_effects","nodes","teardown","ac","unlink_effect","ordered_effects","ancestor","reactions","reaction","depends_on","signal","createSubscriber","stop","subscribers","version","effect_tracking","create_effect","render_effect","Boundary","anchor","hydrate_open","props","children","main_effect","pending_effect","failed_effect","offscreen_fragment","pending_anchor","local_pending_count","pending_count","is_creating_fallback","effect_pending","effect_pending_subscriber","block","comment","get_next_sibling","nodeType","hydrate_pending_content","hydrate_resolved_content","get_anchor","branch","show_pending_snippet","remove","run","pause_effect","create_text","before","has_pending_snippet","previous_effect","previous_reaction","previous_ctx","set_active_effect","set_active_reaction","ctx","document","createDocumentFragment","append","fragment","move_effect","update_pending_count","d","internal_set","get_effect_pending","onerror","failed","destroy_effect","count","skip_nodes","did_reset","calling_on_error","e.svelte_boundary_reset_onerror","destroy_derived_effects","derived","execute_derived","prev_active_effect","get_derived_parent_effect","update_reaction","update_derived","wv","increment_write_version","is_destroying_effect","eager_effects","eager_effects_deferred","stack","rv","current_sources","mutable_source","initial_value","immutable","trackable","should_proxy","untracking","e.state_unsafe_mutation","old_value","mark_reactions","untracked_writes","set_untracked_writes","prev_is_updating_effect","inspects","flush_eager_effects","not_dirty","is_proxied_array","parent_version","update_version","with_parent","set_update_version","descriptor","writable","e.state_descriptors_fixed","deleteProperty","other_s","ls","isInteger","ownKeys","own_keys","setPrototypeOf","e.state_prototype_fixed","$window","first_child_getter","next_sibling_getter","init_operations","window","element_prototype","Element","node_prototype","Node","text_prototype","Text","__click","__className","__attributes","__style","__e","__t","createTextNode","get_first_child","without_reactive_context","sync","last","prev","parent_effect","parent_last","push_effect","create_user_effect","EFFECT","execute_effect_teardown","previously_destroying_effect","set_is_destroying_effect","destroy_effect_children","remove_dom","abort","removed","remove_effect_dom","remove_reactions","transitions","t","transition","destroy","pause_children","remaining","check","local","is_global","sibling","new_deps","skipped_deps","write_version","read_version","schedule_possible_effect_self_invalidation","previous_deps","previous_skipped_deps","previous_untracked_writes","previous_sources","previous_component_context","previous_untracking","previous_update_version","remove_reaction","new_length","start_index","destroy_block_effect_children","is_derived","depends_on_old_values","reconnect","STATUS_MASK","DOM_BOOLEAN_ATTRIBUTES","is_boolean_attribute","PASSIVE_EVENTS","is_passive_event","all_registered_events","root_event_handles","last_propagated_event","handle_event_propagation","handler_element","owner_document","event_name","composedPath","current_target","path_idx","handled_at","__root","at_idx","handler_idx","throw_error","other_errors","parent_element","assignedSlot","parentNode","host","delegated","disabled","cancelBubble","currentTarget","mount","component","_mount","intro","was_hydrating","previous_hydrate_node","instance","some","line","recover","e.hydration_failed","textContent","document_listeners","Component","events","registered_events","event_handle","passive","addEventListener","unmount","fulfil","outro","component_root","anchor_node","appendChild","boundary","l","$$events","removeEventListener","removeChild","mounted_components","WeakMap","ATTR_REGEX","CONTENT_REGEX","pattern","lastIndex","ch","substring","r","o","replacements","translate","attr","is_boolean","clsx","_clsx","whitespace","to_class","directives","classname","append_styles","styles","important","separator","css","to_css_name","to_style","normal_styles","important_styles","new_style","in_str","in_apo","in_comment","reserved_names","name_index","Svelte4Component","add_source","$$host","was_flushing_sync","flushSync","$set","assign","$destroy","$on","cb","args","subscriber_queue","new_value","run_queue","subscriber","update","subscribe","invalidate","isView","TypeError","sha256","frac","floor","prime","is_prime","factor","precompute","ceil","reverse_endianness","words","Uint32Array","w","tmp","out0","out1","out2","out3","out4","out5","out6","out7","quoted","crypto_pattern","BaseProvider","use_hashes","script_needs_csp","script_src_needs_csp","script_src_elem_needs_csp","style_needs_csp","style_src_needs_csp","style_src_attr_needs_csp","style_src_elem_needs_csp","script_src","script_src_elem","style_src","style_src_attr","style_src_elem","effective_script_src","effective_style_src","needs_csp","directive","style_needs_nonce","add_script","content","add_style","sha256_empty_comment_hash","get_header","is_meta","CspProvider","get_meta","CspReportOnlyProvider","has_report_to","has_report_uri","Csp","crypto","getRandomValues","generate_nonce","csp_provider","report_only_provider","reportOnly","prerender","matchers","values_needing_match","buffered","chained","rest","matcher","next_param","next_value","optional","generate_route_object","errors","layouts","leaf","create_client_import","client","import_path","to","from_parts","to_parts","shift","concat","get_relative_path","create_server_routing_response","csr_route","node_css","css_path","create_css_import","updated","render_response","page_config","action_result","data_serializer","app_template_contains_nonce","modulepreloads","imports","stylesheets","fonts","link_headers","link_tags","inline_styles","rendered","form_value","paths.base","paths.assets","base_expression","hash_routing","segments","ssr","stores","navigating","constructors","all","form","render_opts","paths","maybe_promise","render","paths.reset","head","html","inline","code","prefixed","style","preload","encodeURI","ext","lastIndexOf","item","cache_control","age","varyAny","safe_payload","attrs","ttl","serialize_data","routes","find","uses_env_dynamic_public","paths.app_dir","included_modulepreloads","preload_strategy","tag","blocks","load_env_eagerly","properties","app_declaration","app","prelude","uneval_action_response","embedded","indent","repeat","remote_data","remote_cache","serialized_remote_data","remote","cache","boot","script","service_worker","service_worker_options","init_app","http_equiv","csp_headers","csp_header","report_only_header","env","transformed","transformPageChunk","validator","expected","module","hint","hint_for_supported_files","supported_files","valid_layout_exports","valid_page_exports","valid_layout_server_exports","valid_page_server_exports","valid_server_exports","validate_layout_exports","validate_page_exports","validate_layout_server_exports","validate_page_server_exports","PageNodes","validate","layout","get_option","option","reduce","get_config","config","should_prerender_data","respond_with_error","default_layout","server_data","Redirect","handle_remote_call","additional_args","remotes","__","form_client_refreshes","payloads","get_result","results","arg","refreshes","serialize_refreshes","remote_refreshes","client_refreshes","loader","handle_remote_call_internal","handle_remote_form_post","action_id","handle_remote_form_post_internal","render_page","no_actions_error","handle_action_json_request","leaf_node","is_action_request","remote_id","handle_action_request","should_prerender","prerender_default","data_pathname","load_error","data_serializer_json","server_promises","load_promises","json_response","redirect_json_response","cookie","dec","eqIdx","endIdx","tryDecode","serialize","opt","enc","fieldContentRegExp","maxAge","isFinite","domain","expires","__toString","isDate","toUTCString","httpOnly","secure","partitioned","sameSite","encodeURIComponent","INVALID_COOKIE_CHARACTER_REGEX","validate_options","get_cookies","initial_cookies","normalized_url","new_cookies","defaults","hostname","cookies","best_match","domain_matches","path_matches","lookup","existing","set_internal","internal_queue","cookie_key","generate_cookie_key","get_cookie_header","destination","combined_cookies","encoder","set_trailing_slash","constraint","add_cookies_to_headers","new_cookie","defaultParseOptions","decodeValues","silent","isForbiddenKey","createNullObj","isNonEmptyString","parseString","setCookieValue","nameValuePairStr","nameValueArr","parseNameValuePair","sides","trimLeft","getSetCookie","sch","setCookieModule","exports","splitCookiesString","cookiesString","lastComma","nextStart","cookiesSeparatorFound","cookiesStrings","pos","skipWhitespace","charAt","notSpecialChar","etag","create_fetch","server_fetch","original_request","normalize_fetch_input","credentials","handleFetch","prefix","decoded","filename_html","is_asset","server_assets","is_asset_html","mimeTypes","read_implementation","authorization","aborted","DOMException","remove_abort_listener","abort_promise","on_abort","once","race","respond","internal_fetch","set_cookie","set_cookie_parser.splitCookiesString","set_cookie_parser.parseString","default_transform","default_filter","default_preload","page_methods","allowed_page_methods","is_route_resolution_request","is_data_request","has_data_suffix","get_remote_id","request_origin","csrf_check_origin","csrf_trusted_origins","invalidated_data_nodes","strip_resolution_suffix","strip_data_suffix","handleValidationError","is_in_remote_function","getClientAddress","locals","platform","new_headers","isSubRequest","isRemoteRequest","emulator","resolved_path","prerendering_reroute_state","inside_reroute","reroute","decodeURI","decode_pathname","candidate","matched","resolve_route","now","get_public_env","page_nodes","load_page_nodes","endpoint","before_handle","root_span","enabled","handle","resolve_span","node_ids","invalidated","new_event","functions","promises","render_data","is_endpoint_request","acc","curr","handler","HEAD","GET","POST","PATCH","PUT","DELETE","cloned","render_endpoint","vary","if_none_match_value","req","BLOCK_OPEN","BLOCK_OPEN_ELSE","BLOCK_CLOSE","ssr_context","set_ssr_context","get_or_init_context_map","e.lifecycle_outside_component","context_map","get_parent_context","unresolved_hydratable","get_render_context","store","als","getStore","e.server_context_required","Renderer","on_destroy","is_component_body","select_value","async_block","blockers","renderer","previous_context","thunks","e.await_invalid","component_fn","select","css_hash","classes","select_attrs","collect_content_async","collect_content","title","get_path","set_title","copy","subsume","other","onfulfilled","onrejected","user_result","collect_on_destroy","traverse_components","collect_ondestroy","open_render","close_render","render_async","hydratables","collect_hydratables","hydratable","unresolved_promises","w.unresolved_hydratable","comparison","comparisons","hydratable_block","SSRState","idPrefix","cleanup","get_title","has_promises","uid","id_prefix","INVALID_ATTR_NAME_CHAR_REGEX","class","attr_str","is_html","lowercase","is_input","attr_class","attr_style","store_get","store_values","store_name","unsub","unsubscribe","subscribe_to_store","unsubscribe_stores","slot","$$props","slot_props","fallback_fn","slot_fn","$$slots","sanitize_slots","sanitized","bind_props","props_parent","props_now","await_block","pending_fn","then_fn","is_promise","ensure_array_like","array_like_or_iterator","onDestroy","env_public_prefix","env_private_prefix","component_constructor","as_class_component","munged","asClassComponent","data_0","data_1","data_2","Pyramid_2","Pyramid_0","Pyramid_1","$$renderer","get_hooks","filter_env","disallowed","init_promise","Server","finally","wrapped_read","set_read_implementation","formatted_text","format_server_error","create_validator","validate_or_fn","maybe_fn","get_request_store","get_response","get_cache","run_remote_function","allow_cookies","validated","command","wrapper","updates","schema","create_instance","button_props","onclick","formaction","buttonProps","validate_only","handle_issues","create_issue","create_issue_proxy","new_path","create_issues","ValidationError","$","flatten_issues","submission","cache_key","form_instances","fn_or_options","maybe_options","has_arg","inputs","dynamic","ok","prerendered","parse_remote_response","remote_responses","query","get_remote_function_result","update_refresh_value","get_refresh_context","refresh","refresh_context","is_immediate_refresh","withOverride","refreshes_key","batching","resolvers","setTimeout","batched","resolver","getStores"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,92,94,95,96,97,98,99,100,101]}